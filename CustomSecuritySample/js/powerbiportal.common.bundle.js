'use strict';
"use strict";
this.parseTimeMarkers = this.parseTimeMarkers || {};
var marker = this.parseTimeMarkers['powerbiportal.common.bundle.min.js'] || {};
marker.startEval = Date.now();
var __extends = this && this.__extends || (function () { var e = function (t, r) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]) })(t, r) }; return function (t, r) { function i() { this.constructor = t } e(t, r), t.prototype = null === r ? Object.create(r) : (i.prototype = r.prototype, new i) } })(), __decorate = this && this.__decorate || function (e, t, r, i) { var a, n = arguments.length, o = n < 3 ? t : null === i ? i = Object.getOwnPropertyDescriptor(t, r) : i; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, r, i); else for (var s = e.length - 1; s >= 0; s--)(a = e[s]) && (o = (n < 3 ? a(o) : n > 3 ? a(t, r, o) : a(t, r)) || o); return n > 3 && o && Object.defineProperty(t, r, o), o }, __assign = this && this.__assign || function () { return __assign = Object.assign || function (e) { for (var t, r = 1, i = arguments.length; r < i; r++) { t = arguments[r]; for (var a in t) Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a]) } return e }, __assign.apply(this, arguments) }, powerbi; !(function (e) { var t; !(function (t) { function r(r, i, a, n, o, s, u, l, d, f, h, m, y, v, g, S, C, x) { var D = t.Verbose(o, s, u, l, d, f, h, m, y, v, g, S, C, x), E = p(D.info, { endPoint: r, clientAndServerRequestIdMatch: i, responseRequestId: a, requestId: n }); return { name: t.DataQueryDataEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: c(), formatted: function () { return e.extendFormatted({ endPoint: E.endPoint, clientAndServerRequestIdMatch: E.clientAndServerRequestIdMatch, responseRequestId: E.responseRequestId }, { requestId: E.requestId }, D.formatted()) }, info: E, loggers: t.DataQueryDataLoggers } } function i(r, i, a, n, o, s, u, l, d, f, h, m, y, v, g) { var S = t.Verbose(i, a, n, o, s, u, l, d, f, h, m, y, v, g), C = p(S.info, { source: r }); return { name: t.DataQueryCancellationEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: c(), formatted: function () { return e.extendFormatted({ source: C.source }, null, S.formatted()) }, info: C, loggers: t.DataQueryCancellationLoggers, logRatio: 1e-4 } } function a(r, i, a, n, o, s, u, l, d, f, h, m, y, v, g, S, C, x, D, E) { var w = t.Verbose(u, l, d, f, h, m, y, v, g, S, C, x, D, E), b = p(w.info, { endPoint: r, clientAndServerRequestIdMatch: i, responseRequestId: a, requestId: n, datasetIds: o, asErrorCode: s }); return { name: t.DataGetConceptualSchemaEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: c(), formatted: function () { return e.extendFormatted({ endPoint: b.endPoint, clientAndServerRequestIdMatch: b.clientAndServerRequestIdMatch, responseRequestId: b.responseRequestId, datasetIds: b.datasetIds, asErrorCode: b.asErrorCode }, { requestId: b.requestId }, w.formatted()) }, info: b, loggers: t.DataGetConceptualSchemaLoggers } } function n(r, i, a, n, o, s, u, l, d, f, h, m, y, v, g) { var S = t.Verbose(i, a, n, o, s, u, l, d, f, h, m, y, v, g), C = p(S.info, { requestId: r }); return { name: t.DataExecuteQueryEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: c(), formatted: function () { return e.extendFormatted(null, { requestId: C.requestId }, S.formatted()) }, info: C, loggers: t.DataExecuteQueryLoggers } } function o(r, i, a, n, o, s, u, l, d, f, h, m, y, v, g, S, C, x, D, E, w, b, I, M, V, R) { var T = t.Verbose(y, v, g, S, C, x, D, E, w, b, I, M, V, R), _ = p(T.info, { jsonparse: r, categorical: i, table: a, tree: n, matrix: o, single: s, script: u, total: l, mode: d, targetDataView: f, dsrLength: h, id: m }); return { name: t.DataDsrToDataViewEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: c(), formatted: function () { return e.extendFormatted({ total: _.total, mode: _.mode, targetDataView: _.targetDataView, dsrLength: _.dsrLength, id: _.id }, { jsonparse: _.jsonparse, categorical: _.categorical, table: _.table, tree: _.tree, matrix: _.matrix, single: _.single, script: _.script }, T.formatted()) }, info: _, loggers: t.DataDsrToDataViewLoggers, logRatio: 1e-4 } } function s(r, i, a, n, o, s, u, l, d, f, h, m, y, v, g, S) { var C = t.Verbose(a, n, o, s, u, l, d, f, h, m, y, v, g, S), x = p(C.info, { targetDataView: r, id: i }); return { name: t.DataSampledDataViewKindAccessEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: c(), formatted: function () { return e.extendFormatted({ targetDataView: x.targetDataView, id: x.id }, null, C.formatted()) }, info: x, loggers: t.DataSampledDataViewKindAccessLoggers, logRatio: 1e-4 } } function u(r, i, a, n, o, s, u, l, d, f, h, m, y, v, g, S) { var C = t.Verbose(a, n, o, s, u, l, d, f, h, m, y, v, g, S), x = p(C.info, { targetDataView: r, id: i }); return { name: t.DataDataViewKindAccessEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: c(), formatted: function () { return e.extendFormatted({ targetDataView: x.targetDataView, id: x.id }, null, C.formatted()) }, info: x, loggers: t.DataDataViewKindAccessLoggers } } var c, l = jsCommon.Utility, p = jsCommon.UnionExtensions.mergeUnionType, d = e.telemetry.EventFactories; c = l ? l.generateGuid : Function.prototype, t.DataQueryDataEventName = "PBI.Data.QueryData", t.DataQueryData = r, d[t.DataQueryDataEventName] = function (r) { return e.telemetryEventFactory(t.DataQueryDataEventName, r, t.DataQueryDataLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, ["requestId"]) }, t.DataQueryCancellationEventName = "PBI.Data.QueryCancellation", t.DataQueryCancellation = i, d[t.DataQueryCancellationEventName] = function (r) { return e.telemetryEventFactory(t.DataQueryCancellationEventName, r, t.DataQueryCancellationLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DataGetConceptualSchemaEventName = "PBI.Data.GetConceptualSchema", t.DataGetConceptualSchema = a, d[t.DataGetConceptualSchemaEventName] = function (r) { return e.telemetryEventFactory(t.DataGetConceptualSchemaEventName, r, t.DataGetConceptualSchemaLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, ["requestId"]) }, t.DataExecuteQueryEventName = "PBI.Data.ExecuteQuery", t.DataExecuteQuery = n, d[t.DataExecuteQueryEventName] = function (r) { return e.telemetryEventFactory(t.DataExecuteQueryEventName, r, t.DataExecuteQueryLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, ["requestId"]) }, t.DataDsrToDataViewEventName = "PBI.Data.DsrToDataView", t.DataDsrToDataView = o, d[t.DataDsrToDataViewEventName] = function (r) { return e.telemetryEventFactory(t.DataDsrToDataViewEventName, r, t.DataDsrToDataViewLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, ["jsonparse", "categorical", "table", "tree", "matrix", "single", "script"]) }, t.DataSampledDataViewKindAccessEventName = "PBI.Data.SampledDataViewKindAccess", t.DataSampledDataViewKindAccess = s, d[t.DataSampledDataViewKindAccessEventName] = function (r) { return e.telemetryEventFactory(t.DataSampledDataViewKindAccessEventName, r, t.DataSampledDataViewKindAccessLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DataDataViewKindAccessEventName = "PBI.Data.DataViewKindAccess", t.DataDataViewKindAccess = u, d[t.DataDataViewKindAccessEventName] = function (r) { return e.telemetryEventFactory(t.DataDataViewKindAccessEventName, r, t.DataDataViewKindAccessLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) } })(t = e.telemetry || (e.telemetry = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = "UndefinedData", r = (function () { function r(t, r, i, a, n, o, s) { this.proxy = new e.ExecuteSemanticQueryProxy(t, r, n, i, o, s, a), this.featureSwitches = a, this.telemetryService = i } return r.prototype.execute = function (e) { return this.proxy.execute(e) }, r.prototype.transform = function (r, i, a, n) { return void 0 === r ? { dataView: { metadata: { columns: [] }, error: { code: t } } } : e.read(i, r, this.featureSwitches, this.telemetryService, a, n) }, r.prototype.stopCommunication = function () { this.proxy.stopCommunication() }, r.prototype.resumeCommunication = function () { this.proxy.resumeCommunication() }, Object.defineProperty(r.prototype, "cache", { get: function () { return this.proxy.cache() }, enumerable: !0, configurable: !0 }), r.prototype.setLocalCacheResult = function (e, t) { this.proxy.setLocalCacheResult(e, t) }, r.prototype.setPreferredMaxConnections = function (e) { this.proxy.setPreferredMaxConnections(e) }, r })(); e.DsrDataReader = r })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r = (function () { function r(e, r, i) { i = i || {}, this.promiseFactory = e.promiseFactory(), this.client = i.client || new t.BingSocialClient(r), this.tileRequestDataFactory = i.tileRequestDataFactory || new t.TileRequestDataFactory } return r.prototype.execute = function (t) { var r = t.command, i = r.searchKey, a = r.queryType; if (!i || !a) return null; var n = this.promiseFactory.defer(), o = this.tileRequestDataFactory.getTileRequestData(a); return o ? this.client.requestData(n, i, o) : n.reject(), e.createRejectablePromise2(n) }, r.prototype.transform = function (e) { return { dataView: e } }, r })(); t.BingSocialDataReader = r })(r = t.bingSocial || (t.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i; !(function (r) { function i(t, r, i, a, n) { var o = {}; o[i] = !0; var s = { displayName: t, queryName: t, index: r, isMeasure: !a, type: a ? a : e.ValueType.fromDescriptor({ numeric: !0 }), roles: o }; return n && (s = e.Prototype.inherit(s, (function (e) { return e.objects = { dataPoint: { fill: { solid: { color: n[t] } } } } }))), s } function a(e, t) { for (var r = t.split("."), i = 0, a = r; i < a.length; i++) { var n = a[i]; if (!(null != e && n in e)) return null; e = e[n] } return e } function n(e, r, i, a, n) { n = n || {}, void 0 === n.percentize && (n.percentize = !0); var u = t.SQExprBuilder.columnRef(t.SQExprBuilder.entity(null, "table"), "Column"), c = t.createCategoricalDataViewBuilder().withCategory(o(e, u, r, i, n.mapping)).withValues(s(e, a, n)).build(); return c.metadata.objects = { labels: { show: !0 }, categoryLabels: { show: !0 } }, c } function o(t, r, n, o, s) { for (var u = [], c = 0, l = t; c < l.length; c++) { var p = l[c], d = a(p, n); s && !(d = "function" == typeof s ? s(d) : s[d]) || u.push(d) } return { source: i(_.last(n.split(".")), 0, o, e.ValueType.fromDescriptor({ text: !0 })), identityFrom: { fields: [r] }, values: u } } function s(e, t, r) { var a = _.map(e, (function (e) { return e.Count })), n = i("Count", 1, t); r.percentize && (a = u(a, n)); var o = _.min(a), s = _.max(a); return n.aggregates = { min: o, max: s }, { columns: [{ source: n, values: a }] } } function u(e, t) { return t.objects = t.objects || {}, t.objects.general = { formatString: "0%" }, c(e) } function c(e) { var t = e.reduce((function (e, t) { return e + t }), 0); return e.map((function (e) { return e / t })) } r.createMetadataColumn = i, r.getFieldFromString = a, r.createDataView = n })(i = r.ChartDataViewConstructorUtils || (r.ChartDataViewConstructorUtils = {})) })(r = t.bingSocial || (t.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = (function () { function i() { } return i.prototype.formatResponse = function (e) { for (var t = e[0].value, i = 0, a = t; i < a.length; i++) { var n = a[i]; n.source = "Bing", n.CreatedAt = r.ChartDataViewConstructorUtils.getFieldFromString(n, "Request.RequestTime") } var o = this.getCountsPerTime(t, "source"), s = ["Bing"], u = { Bing: "#FFB900" }; return this.createLineChartDataView(s, o, u) }, i.prototype.getCountsPerTime = function (e, t, i) { for (var a = {}, n = 0, o = e; n < o.length; n++) { var s = o[n], u = s.CreatedAt, c = r.ChartDataViewConstructorUtils.getFieldFromString(s, t); i && !(c = i[c]) || (a[u] = a[u] || {}, a[u][c] = s.Count) } return a }, i.prototype.createLineChartDataView = function (r, a, n) { var o = Object.keys(a), s = i.sortDateStrings(o), u = s.map((function (e) { return new Date(e) })), c = {}, l = {}, p = {}, d = {}; i.getTableData(s, r, a, c, l, p, d); var f = { source: { queryName: "CreatedAt", displayName: "CreatedAt", type: e.ValueType.fromDescriptor({ dateTime: !0 }), index: 0 }, values: u }, h = this.createMetadataColumns(r, n); return { metadata: { columns: h }, categorical: { values: t.DataViewTransform.createValueColumns(this.createValueColumns(r, h, c, l, p, d)), categories: [f] } } }, i.getTableData = function (e, t, r, i, a, n, o) { for (var s = 0, u = t; s < u.length; s++) { var c = u[s]; i[c] = [], o[c] = 0 } for (var l = 0, p = e; l < p.length; l++)for (var d = p[l], f = 0, h = t; f < h.length; f++) { var c = h[f], m = r[d][c] || 0; i[c].push(m), a[c] = a[c] ? Math.max(a[c], m) : m, n[c] = n[c] ? Math.min(n[c], m) : m, o[c] += m } }, i.prototype.createMetadataColumns = function (t, i) { for (var a = [r.ChartDataViewConstructorUtils.createMetadataColumn("CreatedAt", 0, "Category", e.ValueType.fromDescriptor({ text: !0 }))], n = 0; n < t.length; n++) { var o = t[n], s = r.ChartDataViewConstructorUtils.createMetadataColumn(o, n + 1, "Y", null, i); a.push(s) } return a }, i.prototype.createValueColumns = function (e, t, r, a, n, o) { for (var s = [], u = 0; u < e.length; u++) { var c = e[u]; s.push(i.createValueColumn(r[c], n[c], a[c], o[c], t[u + 1])) } return s }, i.createValueColumn = function (e, t, r, i, a) { return { source: a, values: e, min: t, max: r, subtotal: i } }, i.sortDateStrings = function (e) { return e.sort((function (e, t) { return new Date(e).getTime() - new Date(t).getTime() })) }, i })(); r.ActivityChartResponseFormatter = i })(r = t.bingSocial || (t.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r = (function () { function t() { } return t.prototype.formatResponse = function (e) { var t = parseInt(e[0], 10), r = parseInt(e[1], 10); if (0 === r) { var i = this.getMetadata("N/A"); return { single: { value: 0, column: i.columns[0] }, metadata: i } } var a = (t - r) / r, n = this.getMetadata("+0.0%;-0.0%"); return { single: { value: a, column: n.columns[0] }, metadata: n } }, t.prototype.getMetadata = function (t) { return { columns: [{ displayName: "Count Change", isMeasure: !0, type: e.ValueType.fromDescriptor({ numeric: !0 }), objects: { general: { formatString: t } } }] } }, t })(); t.CountChangeResponseFormatter = r })(r = t.bingSocial || (t.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r = (function () { function t() { } return t.prototype.formatResponse = function (t) { var r = { displayName: "Count", isMeasure: !0, type: e.ValueType.fromDescriptor({ integer: !0 }) }, i = { columns: [r] }; return { single: { value: t[0], column: r }, metadata: i } }, t })(); t.CountResponseFormatter = r })(r = t.bingSocial || (t.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e.prototype.formatResponse = function (e) { return { metadata: { columns: [] }, bingSocial: e[0].value } }, e })(); e.RawDataResponseFormatter = t })(t = e.bingSocial || (e.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e.prototype.formatResponse = function (e) { return { metadata: { columns: [] }, bingSocial: e[0].value } }, e })(); e.BingNewsResponseFormatter = t })(t = e.bingSocial || (e.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = (function () { function i(e, t) { this.fieldName = e, this.options = t || {} } return i.prototype.formatResponse = function (i) { var a = i[0].value; if (this.options.logarithmic) for (var n = 0, o = a; n < o.length; n++) { var s = o[n]; s.Count = Math.log(s.Count) } var u = r.ChartDataViewConstructorUtils.createDataView(a, this.fieldName, "Category", "Y", { mapping: this.options.mapping, percentize: !1 }); u.metadata.columns[0].type = e.ValueType.fromDescriptor({ geography: { country: !0 } }); var c = { selects: [{ type: e.ValueType.fromDescriptor({ text: !0 }), roles: { Category: !0 } }, { type: e.ValueType.fromDescriptor({ numeric: !0 }), roles: { Y: !0, Gradient: !0 } }], objects: { dataPoint: [{ properties: { fillRule: { linearGradient2: { min: { color: t.SQExprBuilder.text("#FFF0CC") }, max: { color: t.SQExprBuilder.text("#FFB600") } } } } }] } }; return t.DataViewTransform.apply({ prototype: u, objectDescriptors: { dataPoint: { properties: { fill: { type: { fill: { solid: { color: !0 } } } }, fillRule: { type: { fillRule: {} }, rule: { inputRole: "Gradient", output: { property: "fill", selector: ["Category"] } } } } } }, transforms: c, colorAllocatorFactory: powerbi.visuals.createColorAllocatorFactory(), dataViewMappings: powerbi.visuals.getTreemapCapabilities().dataViewMappings, dataRoles: null, visualStyle: e.visuals.visualStyles.create(), featureSwitches: {} }).dataViews[0] }, i })(); r.MapResponseFormatter = i })(r = t.bingSocial || (t.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function t(e, t) { this.fieldName = e, this.options = t || {} } return t.prototype.formatResponse = function (t) { var r = t[0].value; return e.ChartDataViewConstructorUtils.createDataView(r, this.fieldName, "Group", "Values", this.options) }, t })(); e.TreeMapResponseFormatter = t })(t = e.bingSocial || (e.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.urlTemplates = e, this.responseFormatter = t } return e.prototype.getUrlTemplates = function () { return this.urlTemplates }, e.prototype.getResponseFormatter = function () { return this.responseFormatter }, e })(); e.TileRequestData = t })(t = e.bingSocial || (e.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = "v6", r = "powerbi/providers/bingsocial/?source={{source}}&type={{type}}&searchKey={{searchKey}}&newsApiVersion={{newsApiVersion}}", i = (function () { function i() { } return i.prototype.getTileRequestData = function (e) { return i.tileRequestData[e] }, i.createUrl = function (e, i) { return r.replace(/{{source}}/g, e).replace(/{{type}}/g, i).replace(/{{newsApiVersion}}/g, t) }, i.languageMapping = { aa: "Afar", af: "Afrikaans", agq: "Aghem", ak: "Akan", sq: "Albanian", gsw: "Alsatian", am: "Amharic", ar: "Arabic", hy: "Armenian", as: "Assamese", ast: "Asturian", asa: "Asu", "az-Cyrl": "Azerbaijani (Cyrillic)", "az-Latn": "Azerbaijani (Latin)", ksf: "Bafia", "bm-Latn": "Bamanankan (Latin)", bn: "Bangla", bas: "Basaa", ba: "Bashkir", eu: "Basque", be: "Belarusian", bem: "Bemba", bez: "Bena", byn: "Blin", brx: "Bodo", "bs-Cyrl": "Bosnian (Cyrillic)", "bs-Latn": "Bosnian (Latin)", br: "Breton", bg: "Bulgarian", my: "Burmese", ca: "Catalan", "tzm-Arab": "Central Atlas Tamazight (Arabic)", "tzm-Latn": "Central Atlas Tamazight (Latin)", "tzm-Tfng": "Central Atlas Tamazight (Tifinagh)", "ku-Arab": "Central Kurdish", "chr-Cher": "Cherokee (Cherokee)", cgg: "Chiga", "zh-Hans": "Chinese (Simplified)", "zh-Hant": "Chinese (Traditional)", swc: "Congo Swahili", kw: "Cornish", co: "Corsican", hr: "Croatian", cs: "Czech", da: "Danish", prs: "Dari", dv: "Divehi", dua: "Duala", nl: "Dutch", dz: "Dzongkha", bin: "Edo", ebu: "Embu", en: "English", eo: "Esperanto", et: "Estonian", ee: "Ewe", ewo: "Ewondo", fo: "Faroese", fil: "Filipino", fi: "Finnish", fr: "French", fur: "Friulian", "ff-Latn": "Fulah", gl: "Galician", lg: "Ganda", ka: "Georgian", de: "German", el: "Greek", kl: "Greenlandic", gn: "Guarani", gu: "Gujarati", guz: "Gusii", ht: "Haitian", "ha-Latn": "Hausa (Latin)", haw: "Hawaiian", he: "Hebrew", hi: "Hindi", mww: "Hmong Daw", hu: "Hungarian", is: "Icelandic", ig: "Igbo", smn: "Inari Sami", id: "Indonesian", ia: "Interlingua", "iu-Cans": "Inuktitut (Canadian Aboriginal Syllabics)", "iu-Latn": "Inuktitut (Latin)", iv: "Invariant Language", ga: "Irish", xh: "isiXhosa", zu: "isiZulu", it: "Italian", ja: "Japanese", "jv-Latn": "Javanese (Latin)", dyo: "Jola-Fonyi", quc: "K'iche'", kea: "Kabuverdianu", kab: "Kabyle", kkj: "Kako", kln: "Kalenjin", kam: "Kamba", kn: "Kannada", kr: "Kanuri", "ks-Deva": "Kashmiri (Devanagari)", "ks-Arab": "Kashmiri (Perso-Arabic)", kk: "Kazakh", km: "Khmer", ki: "Kikuyu", rw: "Kinyarwanda", sw: "Kiswahili", kok: "Konkani", ko: "Korean", khq: "Koyra Chiini", ses: "Koyraboro Senni", nmg: "Kwasio", ky: "Kyrgyz", lkt: "Lakota", lag: "Langi", lo: "Lao", lv: "Latvian", ln: "Lingala", lt: "Lithuanian", dsb: "Lower Sorbian", lu: "Luba-Katanga", smj: "Lule Sami", luo: "Luo", lb: "Luxembourgish", luy: "Luyia", mk: "Macedonian", jmc: "Machame", mgh: "Makhuwa-Meetto", kde: "Makonde", mg: "Malagasy", ms: "Malay (Latin)", ml: "Malayalam", mt: "Maltese", mni: "Manipuri", gv: "Manx", mi: "Maori", arn: "Mapudungun", mr: "Marathi", mas: "Masai", mer: "Meru", mgo: "Meta'", moh: "Mohawk", "mn-Cyrl": "Mongolian (Cyrillic)", "mn-Mong": "Mongolian (Traditional Mongolian)", mfe: "Morisyen", mua: "Mundang", nqo: "N'Ko", naq: "Nama", ne: "Nepali", nnh: "Ngiemboon", jgo: "Ngomba", nd: "North Ndebele", kmr: "Northern Kurdish", se: "Northern Sami", nb: "Norwegian Bokmål", nn: "Norwegian Nynorsk", nus: "Nuer", nyn: "Nyankole", oc: "Occitan", or: "Odia", om: "Oromo", "os-Cyrl": "Ossetian (Cyrillic)", pap: "Papiamento", ps: "Pashto", fa: "Persian", pl: "Polish", pt: "Portuguese", "pa-Arab": "Punjabi (Arabic)", "pa-Guru": "Punjabi (Gurmukhi)", quz: "Quechua", otq: "Querétaro Otomi", ksh: "Ripuarian", ro: "Romanian", rm: "Romansh", rof: "Rombo", rn: "Rundi", ru: "Russian", rwk: "Rwa", ssy: "Saho", sah: "Sakha", saq: "Samburu", sg: "Sango", sbp: "Sangu", sa: "Sanskrit", gd: "Scottish Gaelic", seh: "Sena", "sr-Cyrl": "Serbian (Cyrillic)", "sr-Latn": "Serbian (Latin)", st: "Sesotho", nso: "Sesotho sa Leboa", tn: "Setswana", ksb: "Shambala", sn: "Shona", "sd-Arab": "Sindhi (Arabic)", "sd-Deva": "Sindhi (Devanagari)", si: "Sinhala", ss: "siSwati", sms: "Skolt Sami", sk: "Slovak", sl: "Slovenian", xog: "Soga", so: "Somali", nr: "South Ndebele", sma: "Southern Sami", es: "Spanish", "zgh-Tfng": "Standard Moroccan Tamazight (Tifinagh)", sv: "Swedish", syr: "Syriac", "shi-Latn": "Tachelhit (Latin)", "shi-Tfng": "Tachelhit (Tifinagh)", dav: "Taita", "tg-Cyrl": "Tajik (Cyrillic)", ta: "Tamil", twq: "Tasawaq", "tt-Cyrl": "Tatar (Cyrillic)", te: "Telugu", teo: "Teso", th: "Thai", bo: "Tibetan", tig: "Tigre", ti: "Tigrinya", to: "Tongan", tr: "Turkish", "tk-Latn": "Turkmen (Latin)", uk: "Ukrainian", hsb: "Upper Sorbian", ur: "Urdu", "ug-Arab": "Uyghur (Arabic)", "uz-Cyrl": "Uzbek (Cyrillic)", "uz-Latn": "Uzbek (Latin)", "uz-Arab": "Uzbek (Perso-Arabic)", "vai-Latn": "Vai (Latin)", "vai-Vaii": "Vai (Vai)", "ca-ES-valencia": "Valencian", ve: "Venda", vi: "Vietnamese", vo: "Volapük", vun: "Vunjo", wae: "Walser", cy: "Welsh", fy: "Western Frisian", wal: "Wolaytta", wo: "Wolof", ts: "Xitsonga", yav: "Yangben", ii: "Yi", yi: "Yiddish", yo: "Yoruba", yua: "Yucatec Maya", dje: "Zarma", az: "Azerbaijani", bm: "Bamanankan", bs: "Bosnian", tzm: "Central Atlas Tamazight", chr: "Cherokee", zh: "Chinese", ha: "Hausa", iu: "Inuktitut", jv: "Javanese", ks: "Kashmiri", mn: "Mongolian", os: "Ossetian", pa: "Punjabi", sr: "Serbian", sd: "Sindhi", zgh: "Standard Moroccan Tamazight", shi: "Tachelhit", tg: "Tajik", tt: "Tatar", tk: "Turkmen", ug: "Uyghur", uz: "Uzbek", vai: "Vai" }, i.languageOptions = { mapping: function (e) { if ("string" == typeof e && e) { for (var t, r = e; r;) { if (r in i.languageMapping) { t = i.languageMapping[r]; break } var a = Math.max(r.lastIndexOf("-"), 0); r = r.substring(0, a) } return t || e } } }, i.tileRequestData = { bingVolume: new e.TileRequestData([i.createUrl("Bing", "Volume")], new e.CountResponseFormatter), bingVolumeChange: new e.TileRequestData([i.createUrl("Bing", "Volume"), i.createUrl("Bing", "VolumeChange")], new e.CountChangeResponseFormatter), activity: new e.TileRequestData([i.createUrl("Bing", "Activity")], new e.ActivityChartResponseFormatter), languages: new e.TileRequestData([i.createUrl("Bing", "Language")], new e.TreeMapResponseFormatter("Query._Microsoft.Language", i.languageOptions)), news: new e.TileRequestData([i.createUrl("Bing", "News")], new e.BingNewsResponseFormatter), location: new e.TileRequestData([i.createUrl("Bing", "Location")], new e.MapResponseFormatter("User.Country", { logarithmic: !0 })) }, i })(); e.TileRequestDataFactory = i })(t = e.bingSocial || (e.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new a(e, t) } function r(e) { return e || "dsr" } e.createDataReaderFactory = t; var i, a = (function () { function e(e, t) { if (t) { var r = function (e) { }; for (var i in t) r(i) } this.plugins = e, this.extensions = t || {} } return e.prototype.getPlugin = function (e) { return this.plugins[r(e)] }, e.prototype.getExtension = function (e) { return this.extensions[e] }, e })(); !(function (e) { function t(e, t) { for (var r = a(t), n = [], o = 0, s = e; o < s.length; o++) { var u = s[o]; if (!r || _.includes(r, u.name)) { var c = i(u); _.includes(n, c) || n.push(c) } } return n } function i(e) { return r(e.type) } function a(e) { if (e) { var t = []; return new o(t).run(e), t } } function n(e) { return _.chain(e).map((function (e) { return i(e) })).uniq().value() } e.findTypes = t, e.readerType = i, e.findSchemas = a, e.uniqueReaderTypes = n; var o = (function () { function e(e) { this.schemas = e } return e.prototype.run = function (e) { for (var t = e.from(), r = 0, i = t.keys(); r < i.length; r++) { var a = i[r]; t.source(a).accept(this, void 0) } }, e.prototype.visitEntity = function (e) { var t = e.schema, r = this.schemas; _.includes(r, t) || r.push(t) }, e.prototype.visitSubquery = function (e) { this.run(e.subquery) }, e.prototype.visitExpr = function (e) { }, e })() })(i = e.DataReaderUtils || (e.DataReaderUtils = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new n(e, t) } function r(t, r, i) { for (var a = [], n = 0, o = r; n < o.length; n++) { var s = o[n], u = e.DataReaderUtils.readerType(s); u === t && a.push(s[u]) } return i(a) } function i(e, t) { if (e || t) return e ? function (r, i) { return e(r, i, t) } : t } var a = jsCommon.ArrayExtensions; e.createDataReaderProvider = t; var n = (function () { function t(e, t) { this.factory = e, this.hostServices = t, this.readers = {}, this.queryGen = {}, this.schemaReaders = {} } return t.prototype.reader = function (e) { var t = this; return this.findSinglePropertyDefinition(a.ensureArray(e), (function (e) { return e.reader(t.hostServices) }), _.noop, this.readers) }, t.prototype.readerType = function (e) { var t = this, r = this.resolvePluginProperty(a.ensureArray(e), (function (e) { return e.reader(t.hostServices) }), _.noop, this.readers); return r && r.type }, t.prototype.queryGenerator = function (e) { return this.findSinglePropertyDefinition(a.ensureArray(e), (function (e) { return e.queryGenerator && e.queryGenerator() }), _.noop, this.queryGen) }, t.prototype.queryExtensionLookup = function (t) { var n = a.ensureArray(t), o = _.chain(n).map((function (t) { return e.DataReaderUtils.readerType(t) })).uniq().value(), s = this.findSingleBasePropertyDefinition(o, (function (e) { return e.queryExtensionProvider && r(e.name, n, e.queryExtensionProvider) })); return i(this.findSingleExtensionPropertyDefinition(o, (function (e) { return e.queryExtensionProvider && r(e.name, n, e.queryExtensionProvider) })), s) }, t.prototype.schemaReader = function (e) { var t = this; return this.findSinglePropertyDefinition([e], (function (e) { return e.schemaReader && e.schemaReader(t.hostServices) }), (function (e) { return e.schemaReader && e.schemaReader(t.hostServices) }), this.schemaReaders) }, t.prototype.getCacheKey = function (e) { var t = a.ensureArray(e); return t.length < 2 ? t[0] : "[" + t.join(",") + "]" }, t.prototype.findSinglePropertyDefinition = function (e, t, r, i) { var a = this.getCacheKey(e), n = i[a]; if (n) return n; var o = this.resolvePluginProperty(e, t, r, i); return o ? i[a] = o.property : void 0 }, t.prototype.findSingleExtensionPropertyDefinition = function (e, t) { for (var r, i, a = 0, n = e; a < n.length; a++) { var o = n[a], s = this.factory.getPlugin(o); if (s) { if (i && i !== s.name) return; i = s.name } else { var u = this.factory.getExtension(o); if (!u) return; if (i && i !== u.extends) return; i = u.extends; var c = t(u); if (c) { if (r && c !== r) return; r = c } } } return r }, t.prototype.findSingleBasePropertyDefinition = function (e, t) { for (var r, i, a = 0, n = e; a < n.length; a++) { var o = n[a], s = this.factory.getPlugin(o); if (s) { if (i && i !== s.name) return; i = s.name; var u = t(s); if (u) { if (r && u !== r) return; r = u } } } return r }, t.prototype.resolvePluginProperty = function (e, t, r, i) { for (var a, n = 0, o = e; n < o.length; n++) { var s = o[n], u = this.resolveProperty(s, t, r, i); if (!u || a && u.property !== a.property) return; a = u } return a }, t.prototype.resolveProperty = function (e, t, r, i) { var a, n; if (i && (a = this.getCacheKey(e), n = i[a])) return { type: e, property: n }; var o = this.factory.getPlugin(e); if (o) { if (n = t(o), !n) return; return i && (i[a] = n), { type: e, property: n } } var s = this.factory.getExtension(e); return s ? (n = r(s)) ? (i && (i[a] = n), { type: e, property: n }) : this.resolveProperty(s.extends, t, r, i) : void 0 }, t })() })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { for (var t = e.length, i = 0; i < t; i++) { var a = e[i]; r.applyDataReductionDefaults(a) } } e.applyDataReductionDefaults = t; var r; !(function (e) { function t(e) { e.categorical && a(e.categorical), e.table && i(e.table), e.matrix && r(e.matrix) } function r(e) { e.rows && o(e.rows), e.columns && o(e.columns) } function i(e) { e.rows && o(e.rows) } function a(e) { if (!e.dataReductionAlgorithm) { e.categories && o(e.categories); var t = e.values; t && t.group && n(t) } } function n(e) { e.group.dataReductionAlgorithm || (e.group.dataReductionAlgorithm = s()) } function o(e) { e.dataReductionAlgorithm || (e.dataReductionAlgorithm = s()) } function s() { return { top: {} } } e.applyDataReductionDefaults = t })(r || (r = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function r(e) { var t = e.mappings; if (!t) return []; var r = new n(e.queryDefn, e.queryProjections, e.schema, e.objectDescriptors, e.objectDefinitions, e.roles || [], e.featureSwitches); return _.map(t, (function (e) { return r.compileMapping(e) })) } var i = jsCommon.ArrayExtensions, a = jsCommon.UnionExtensions; t.compileDataView = r; var n = (function () {
            function r(e, r, i, a, n, o, s) { this.featureSwitches = s, this.queryDefn = e, this.queryProjections = r, this.schema = i, this.objectDescriptors = a, this.objectDefinitions = n, this.roles = o, this.exprEvaluationContext = t.SQExprUtils.buildExprEvaluationContext(this.queryDefn.from()) } return r.prototype.compileMapping = function (e) { var t = this.compileMetadata(), r = { metadata: t }; return e.categorical && (r.categorical = this.compileCategorical(e.categorical)), e.table && (r.table = this.compileTable(e.table)), e.single && (r.single = this.compileSingle(e.single)), e.tree && (r.tree = this.compileTree(e.tree)), e.matrix && (r.matrix = this.compileMatrix(e.matrix)), e.scriptResult && (r.scriptResult = this.compileScriptResult(e.scriptResult, t)), e.usage && (r.usage = this.compileUsage(e.usage)), r }, r.prototype.compileMetadata = function () { for (var r = { columns: [] }, i = this.queryDefn.orderBy(), a = function (e) { var a = _.find(i, (function (r) { return t.SQExpr.equals(r.expr, e.expr) })), o = t.SQExprUtils.getParameterMetadata(e.expr, n.schema); r.columns.push({ displayName: void 0, queryName: e.name, type: n.tryGetExprType(e.expr), sort: a && a.direction, parameter: o }) }, n = this, o = 0, s = this.queryDefn.select(); o < s.length; o++) { a(s[o]) } var u = this.objectDescriptors, c = this.objectDefinitions; if (!c || !u) return r; var l = t.DataViewObjectEvaluationUtils.groupObjectsBySelector(c), p = t.createStaticEvalContext(e.visuals.visualStyles.create()); if (!_.isEmpty(l.metadataOnce)) { var d = this.evaluateMetadataOnceObjects(l.metadataOnce, p); d && (r.objects = d) } if (!_.isEmpty(l.metadata)) for (var f = 0, h = r.columns; f < h.length; f++) { var m = h[f], d = this.evaluateMetadataObjects(m, l.metadata, p); d && (m.objects = d) } return r }, r.prototype.evaluateMetadataOnceObjects = function (r, i) { for (var a, n = 0, o = r; n < o.length; n++) { var s = o[n], u = s.selector && s.selector.id, c = t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(i, this.objectDescriptors, s.objects, this.featureSwitches); c && (a || (a = {}), e.DataViewObjects.mergeObjects(a, c, u)) } return a }, r.prototype.evaluateMetadataObjects = function (r, i, a) { for (var n, o = 0, s = i; o < s.length; o++) { var u = s[o], c = u.selector; if (c.metadata && c.metadata === r.queryName) { var l = t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(a, this.objectDescriptors, u.objects, this.featureSwitches); return l && (n || (n = {}), e.DataViewObjects.mergeObjects(n, l, c.id)), n } } }, r.prototype.compileCategorical = function (e) { var t = {}; e.categories && (t.categories = this.compileRoleMappingWithReduction(e.categories)); var r = e.values; if (r) { var i = this.compileGrouped(r), n = this.compileList(r), o = this.compileRoleMapping(r); t.values = a.mergeUnionType(i, n, o) } return e.includeEmptyGroups && (t.includeEmptyGroups = e.includeEmptyGroups), null != e.dataVolume && (t.dataVolume = e.dataVolume), e.dataReductionAlgorithm && (t.dataReductionAlgorithm = this.compileReduction(e.dataReductionAlgorithm)), t }, r.prototype.compileTable = function (e) { var t = this.compileRoleMappingWithReduction(e.rows), r = this.compileListWithReduction(e.rows), i = a.mergeUnionType(t, r), n = { rows: i }; return null != e.dataVolume && (n.dataVolume = e.dataVolume), n }, r.prototype.compileSingle = function (e) { return { role: this.compileRole(e.role) } }, r.prototype.compileScriptResult = function (e, t) { return { dataInput: this.compileMapping(e.dataInput), script: this.compileScriptDefinition(e.script, t) } }, r.prototype.compileScriptDefinition = function (t, r) { var i = e.ScriptResultUtil.getScriptInputFromScriptDefinition(this.queryProjections, this.queryDefn.select(), this.schema, t, r.objects); return { source: t.source, provider: t.provider, scriptInput: i, scriptSourceDefault: t.scriptSourceDefault, scriptProviderDefault: t.scriptProviderDefault, scriptOutputType: t.scriptOutputType } }, r.prototype.compileTree = function (e) { var t = {}; return e.nodes && (t.nodes = this.compileForWithReduction(e.nodes)), e.values && (t.values = this.compileFor(e.values)), null != e.dataVolume && (t.dataVolume = e.dataVolume), t }, r.prototype.compileMatrix = function (e) { var t = {}; if (e.rows) { var r = this.compileForWithReduction(e.rows), i = this.compileListWithCompositeWithReduction(e.rows); t.rows = a.mergeUnionType(r, i) } if (e.columns && (t.columns = this.compileForWithReduction(e.columns)), e.values) { var r = this.compileRoleMapping(e.values), i = this.compileList(e.values); t.values = a.mergeUnionType(r, i) } return null != e.dataVolume && (t.dataVolume = e.dataVolume), t }, r.prototype.compileUsage = function (e) { if (e.regression || e.forecast) return e }, r.prototype.compileListWithReduction = function (e) {
                var t = this.compileList(e); if (t) return e.dataReductionAlgorithm && (t.dataReductionAlgorithm = this.compileReduction(e.dataReductionAlgorithm)), t
            }, r.prototype.compileList = function (e) { var t = this; if (e.select) { return { select: _.map(e.select, (function (e) { return t.compileRoleMapping(e) })) } } }, r.prototype.compileListWithCompositeWithReduction = function (e) { var t = this.compileListWithComposite(e); if (t) return e.dataReductionAlgorithm && (t.dataReductionAlgorithm = this.compileReduction(e.dataReductionAlgorithm)), t }, r.prototype.compileListWithComposite = function (e) { var t = this; if (e.select) { return { select: _.map(e.select, (function (e) { return t.compileRoleMappingWithComposite(e) })) } } }, r.prototype.compileGrouped = function (e) { var t = this; if (e.group) { var r = this.compileRole(e.group.by), i = _.map(e.group.select, (function (e) { return t.compileRoleMapping(e) })), a = { group: { by: r, select: i } }; return e.group.dataReductionAlgorithm && (a.group.dataReductionAlgorithm = this.compileReduction(e.group.dataReductionAlgorithm)), a } }, r.prototype.compileRoleMapping = function (e) { var t = this.compileBind(e), r = this.compileFor(e); return a.mergeUnionType(t, r) }, r.prototype.compileRoleMappingWithComposite = function (e) { var t = this.compileBind(e), r = this.compileFor(e), i = this.compileComposite(e); return a.mergeUnionType(t, r, i) }, r.prototype.compileRoleMappingWithReduction = function (e) { var t = this.compileRoleMapping(e), r = this.compileList(e); if (t || r) { var i = a.mergeUnionType(t, r); return i && e.dataReductionAlgorithm && (i.dataReductionAlgorithm = this.compileReduction(e.dataReductionAlgorithm)), i } }, r.prototype.compileBind = function (e) { if (e.bind) { return { bind: { to: this.compileRole(e.bind.to, e.bind.aggregates) } } } }, r.prototype.compileForWithReduction = function (e) { var t = this.compileFor(e); if (t) return e.dataReductionAlgorithm && (t.dataReductionAlgorithm = this.compileReduction(e.dataReductionAlgorithm)), t }, r.prototype.compileFor = function (e) { if (e.for) { return { for: { in: this.compileRole(e.for.in) } } } }, r.prototype.compileComposite = function (e) { var t = this; if (e.composite) { return { composite: _.map(e.composite, (function (e) { return t.compileRoleMapping(e) })) } } }, r.prototype.compileRole = function (e, r) { var a, n = this, o = this.queryDefn.select(), s = this.queryProjections[e], u = i.findItemWithName(this.roles, e); if (s && s.all().length > 0) { var c = !1; u && (c = t.ScalarKeyUtils.isScalarKeySupportedForRole(this.schema, this.queryDefn, this.queryProjections, u.name)); var l = this.getScalarKeyRoleItemQueryRef(s); a = _.map(s.all(), (function (e) { var t = e.queryRef === l; return n.createDataViewRoleItem(o.withName(e.queryRef), u, c, t) })) } var p = { role: e, items: a }, d = this.queryProjections[e]; return d && (d.showAll && (p.showAll = !0), d.activeProjectionRefs && (p.activeItems = d.activeProjectionRefs)), r && (p.aggregates = _.cloneDeep(r)), p }, r.prototype.getScalarKeyRoleItemQueryRef = function (e) { var t = e.activeProjectionRefs; return _.isEmpty(t) ? e.all()[0].queryRef : _.last(t) }, r.prototype.createDataViewRoleItem = function (e, t, r, i) { var a = { queryName: e.name }, n = this.tryGetExprType(e.expr); return n && (a.type = n), t && null != t.joinPredicate && (a.joinPredicate = t.joinPredicate), a.scalarKeyInfo = { hasScalarKey: r && i }, a }, r.prototype.tryGetExprType = function (e) { var t = e.getMetadata(this.schema, this.exprEvaluationContext); if (t) return t.type }, r.prototype.compileReduction = function (e) { if (e) { var t = {}; if (e.top && (t.top = {}, e.top.count && (t.top.count = e.top.count)), e.bottom && (t.bottom = {}, e.bottom.count && (t.bottom.count = e.bottom.count)), e.sample && (t.sample = {}, e.sample.count && (t.sample.count = e.sample.count)), e.window && (t.window = {}, e.window.count && (t.window.count = e.window.count)), e.binnedLineSample && (t.binnedLineSample = {}), e.overlappingPointsSample) { var r = e.overlappingPointsSample; t.overlappingPointsSample = {}, r.count && (t.overlappingPointsSample.count = r.count); var i = this.getCompiledRoleForCartesianRoleKind(0); i && (t.overlappingPointsSample.x = { role: i }); var a = this.getCompiledRoleForCartesianRoleKind(1); a && (t.overlappingPointsSample.y = { role: a }) } return t } }, r.prototype.getCompiledRoleForCartesianRoleKind = function (e) { var t = _.filter(this.roles, (function (t) { return t.cartesianKind === e })); if (1 === _.size(t)) return this.compileRole(t[0].name) }, r
        })()
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = jsCommon.Version; e.ObjectPropertyVersionWildcard = "*"; var r; !(function (r) { function i(t, r, i, n, o) { return a(o[t], r, i, n) || a(o[e.ObjectPropertyVersionWildcard], r, i, n) || { objectName: r, propertyName: i } } function a(e, r, i, a) { var n = e && e[r] && e[r][i]; if (n) { for (var o = n.currentId; n && t.gt(n.version, a);)o = n.previousId, n = n.previous; return o } } function n(e, r, i, a, n, s) { return o(e, r, null, i, a, n, s) === t.ZeroStr } function o(r, i, a, n, o, u, c) { return t.max(s(r[e.ObjectPropertyVersionWildcard], o, u, i, a, c), s(r[n], o, u, i, a, c)) } function s(r, i, a, n, o, s) { var c = r && r[i]; return c ? t.max(u(c[e.ObjectPropertyVersionWildcard], n, o, s), u(c[a], n, o, s)) : t.ZeroStr } function u(e, r, i, a) { if (!e) return t.ZeroStr; for (var n = e.length - 1; n >= 0; n--) { var o = e[n]; if (!t.lt(a, o.version)) break; var s = o.property.matchByContents; if (!s || s(r, i)) return o.version } return t.ZeroStr } r.getThemePropertyId = i, r.shouldApplyDefnToTheme = n, r.getVersionForDefinition = o })(r = e.DataViewObjectVersioning || (e.DataViewObjectVersioning = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; jsCommon.ArrayExtensions; !(function (t) { function r(e, t, r, a) { a && o(e, t, a), r && i(e, t, r) } function i(e, t, r) { var i = t.categories; if (!_.isEmpty(i)) { n(e, t, a(i, r)) } } function a(e, t) { for (var r = e[0].values.length, i = [], a = r - 1; a >= 0; a--)t(a, e) && i.push(a); return i } function n(t, r, i) { if (!_.isEmpty(i)) { if (e.DataViewCategoricalUtils.getRowCount(r) === i.length) return void c(t, r); var a = r.categories; if (!_.isEmpty(a)) for (var n = 0, o = a; n < o.length; n++) { var s = o[n]; p(s.values, i), p(s.identity, i) } var u = r.values; if (!_.isEmpty(u)) for (var l = 0, d = u; l < d.length; l++) { var f = d[l]; p(f.values, i) } } } function o(e, t, r) { var i = t.values && t.values.grouped(); if (!_.isEmpty(i)) { s(e, t, l(t.values && t.values.source, i, r)) } } function s(e, t, r) { if (!_.isEmpty(r)) { var i = t.values, a = i.grouped(); if (a.length === r.length) return void c(e, t); var n = a[0].values.length; if (n > 0) for (var o = e.columns, s = 0, l = r; s < l.length; s++) { for (var d = l[s], f = d * n, h = f, m = f + n; h < m; h++) { var y = i[h].source; u(o, y) } i.splice(f, n) } p(a, r), i.grouped = function () { return a } } } function u(e, t) { var r = e.indexOf(t); r >= 0 && e.splice(r, 1) } function c(e, t) { var r = t.categories; if (r) for (var i = 0, a = r; i < a.length; i++) { var n = a[i]; n.values.splice(0), n.identity.splice(0) } var o = t.values; if (o) { var s = o.grouped(); if (!_.isEmpty(s)) { for (var c = s[0], l = e.columns, p = function (e) { var t = e.source; if (t.groupName) { var r = _.find(l, (function (e) { return !e.groupName && e.index === t.index && e.isMeasure === t.isMeasure })); r ? (e.source = r, u(l, t)) : delete t.groupName } }, d = 0, f = c.values; d < f.length; d++) { p(f[d]) } var h = [{ values: c.values, objects: c.objects }]; if (o.grouped = function () { return h }, s.length >= 2) { var m = c.values.length; if (m > 0) { for (var y = s.length - 1, v = m * y, g = m, S = m + v; g < S; g++) { u(l, o[g].source) } o.splice(m, v) } } } for (var C = 0, x = o; C < x.length; C++) { var D = x[C]; D.values.splice(0), delete D.identity } } } function l(e, t, r) { for (var i = [], a = t.length - 1; a >= 0; a--)r(t[a], e) && i.push(a); return i } function p(e, t) { if (!_.isEmpty(t)) { if (e.length === t.length) return void e.splice(0); for (var r, i = 0, a = 0, n = t; a < n.length; a++) { var o = n[a]; void 0 === r || r === o + 1 ? (r = o, i++) : (e.splice(r, i), r = o, i = 1) } e.splice(r, i) } } t.removeGroupInstances = r })(t = e.QueryDataViewCategorical || (e.QueryDataViewCategorical = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r, i = e.data.QueryDataViewCategorical, a = jsCommon.StringExtensions; !(function (e) { function r(e, r) { if (!t.SQFilter.targetsEqual(e, r)) return !1; var i = e.condition, o = r.condition; if (i instanceof t.SQContainsExpr && o instanceof t.SQContainsExpr) { var s = n.getInfoIfFilteringByStringConstant(i), u = n.getInfoIfFilteringByStringConstant(o); if (s && u && t.SQExpr.equals(s.otherSide, u.otherSide)) return a.contains(m(s.constantValue), m(u.constantValue)) } return !1 } function s(e, t) { if (!_.some(t, (function (e) { return !c(e) }))) { for (var r = new o(e), i = 0, a = t; i < a.length; i++)a[i].condition.accept(r); return r.getClientSideFiltersIfAllSupported() } } function u(e, t) { if (!_.isEmpty(t) && !_.isEmpty(e.metadata.columns)) { var r = e.categorical; if (r) { var a = f(r.values && r.values.source, t), n = d(r.categories, t); i.removeGroupInstances(e.metadata, r, n, a) } return e } } function c(e) { return !e.target } function l(e) { var t = e.Condition; if (t.Contains) return t.Contains.SelectIndex } function p(e, t) { if (_.isEmpty(e) || _.isEmpty(t)) return []; for (var r = {}, i = 0, a = t; i < a.length; i++) { r[a[i].index] = !0 } return _.filter(e, (function (e) { return !!r[l(e)] })) } function d(e, t) { var r = p(t, _.map(e, (function (e) { return e.source }))); if (!_.isEmpty(r)) { return function (e, t) { for (var i = function (r) { if (_.every(t, (function (t) { return h(r, t.values[e]) }))) return { value: !0 } }, a = 0, n = r; a < n.length; a++) { var o = n[a], s = i(o); if ("object" == typeof s) return s.value } return !1 } } } function f(e, t) { if (e) { var r = p(t, [e]); if (!_.isEmpty(r)) { return function (e) { if (!!e.identity) for (var t = e.name, i = 0, a = r; i < a.length; i++) { var n = a[i]; if (h(n, t)) return !0 } return !1 } } } } function h(e, t) { var r = !1, i = e.Condition; if (i.Contains) if (_.isString(t)) { var n = m(t); r = !a.contains(n, i.Contains.LiteralValue) } else r = !0; return r } function m(e) { return e ? a.normalizeCase(e) : e } e.isMoreRestrictiveFilter = r, e.tryConvertToClientSideFilters = s, e.applyClientSideFilters = u, e.normalizeString = m })(r = t.ClientSideFilter || (t.ClientSideFilter = {})); var n, o = (function (e) { function i(t) { var r = e.call(this) || this; return r.clientSideFilters = [], r.selects = t, r } return __extends(i, e), i.prototype.visitContains = function (e) { if (!this.hasUnsupportedFilter()) { var i = !1, a = n.getInfoIfFilteringByStringConstant(e); if (a) { var o = a.constantValue, s = t.SQExprUtils.indexOfNamedExpr(this.selects, a.otherSide); if (s >= 0 && o) { var u = { Condition: { Contains: { SelectIndex: s, LiteralValue: r.normalizeString(o) } } }; this.clientSideFilters.push(u), i = !0 } } i || this.setUnsupportedFilter() } }, i.prototype.visitAnd = function (e) { this.hasUnsupportedFilter() || (e.left.accept(this), e.right.accept(this)) }, i.prototype.visitDefault = function (e) { this.setUnsupportedFilter() }, i.prototype.getClientSideFiltersIfAllSupported = function () { if (!this.hasUnsupportedFilter()) return this.clientSideFilters }, i.prototype.hasUnsupportedFilter = function () { return void 0 === this.clientSideFilters }, i.prototype.setUnsupportedFilter = function () { this.clientSideFilters = void 0 }, i })(t.DefaultSQExprVisitor); !(function (e) { function r(t) { if (t) { var r = e.getValueIfStringConstant(t.left); return r ? { constantValue: r, otherSide: t.right } : (r = e.getValueIfStringConstant(t.right), { constantValue: r, otherSide: t.left }) } } function i(e) { if (t.SQExpr.isConstant(e) && e.type.text) return e.value } e.getInfoIfFilteringByStringConstant = r, e.getValueIfStringConstant = i })(n || (n = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r = e.DataViewAnalysis, i = e.data.SQExprUtils, a = jsCommon.StringExtensions, n = (function () { function e(e, t, r, i, a, n, o) { this.warningType = e, this.propertyId = t, this.valueExpr = r, this.selector = i, this.objectDiplayName = a, this.propertyDisplayName = n, this.expectedValueType = o } return e.prototype.columnNameFromIndex = function (e) { }, Object.defineProperty(e.prototype, "code", { get: function () { switch (this.warningType) { case 1: return "DataBoundObjectQueryExtensionWarningInvalidType"; case 2: return "DataBoundObjectQueryExtensionWarningMissingReference"; case 0: return; default: debug.assertNever(this.warningType) } }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e, r) { if (r) { var i = [], n = e.get("NamePattern_Colon"), o = 1 === this.warningType, s = o ? "DataBoundExprWarning_InvalidType_Title" : "DataBoundExprWarning_MissingReference_Title", u = o ? "DataBoundExprWarning_InvalidType_Message" : "DataBoundExprWarning_MissingReference_Message"; i.push(a.format(e.get(s), t.getDisplayName(this.propertyDisplayName, e))), i.push(a.format(n, e.get("VisualWarning_PropertyEvaluation_Tooltip_Section"), t.getDisplayName(this.objectDiplayName, e))); var c = r(this.valueExpr); return i.push(a.format(n, e.get("Field_Source"), c)), o && this.expectedValueType && i.push(a.format(n, e.get("DataBoundExprWarning_ExpectedDataType"), t.DataBoundExprWarning.getPrimitiveValueType(this.expectedValueType, e))), i.push(e.get(u)), { message: i.join("\n"), displayableErrorInfo: [] } } }, e })(); t.DataBoundObjectQueryExtensionWarning = n; var o; !(function (a) { function o(e, t, r, i, a, n) { return u(e, t, r, i, a, n) } function s(e, t) { return !!u(e, null, t, {}, {}, {}) } function u(r, i, a, o, s, u) { function h(l, h, g, S, C) { var x, D = l[h], E = S.type; if (S.rule) { if (!p(S.rule.conditions, s, u)) return; var w = d(S.rule, r, o); if (_.isEmpty(w)) return; g = { data: _.map(w, (function (e) { return t.createDataViewScopeIdentity(e) })) }, x = t.DataViewObjectDefinitions.getDataBoundExprs(D, S.type, g, m, w[0]) } else if (E && E.dataBars) { if (g && g.metadata) { var b = m.withName(g.metadata); b && (_.isEmpty(g.data) && (g = _.cloneDeep(g), g.data = [t.DataViewWildcard.create()]), x = t.DataViewObjectDefinitions.getDataBoundExprs(D, S.type, g, m, m.withName(g.metadata).expr)) } } else x = t.DataViewObjectDefinitions.getDataBoundExprs(l[h], E, g, m); if (!_.isEmpty(x)) { if (void 0 !== f(g, m, o)) for (var I = 0, M = x; I < M.length; I++) { var V = M[I]; if (i) { var R = V.expr.getMetadata(i); if (null == R || !e.ValueType.isCompatibleTo(E, [R.type])) { var T = R ? 1 : 2, P = R ? e.ValueType.fromDescriptor(E) : null, N = c(C, a), F = new n(T, { objectName: C, propertyName: h }, V.expr, g, N.displayName, S.displayName, P); y.push(F); continue } } t.DataBoundExprExtractor.addUnique(v, V) } } } if (!_.isEmpty(a)) { for (var m = r.select(), y = [], v = [], g = 0, S = a; g < S.length; g++) { var C = S[g]; C.objects && C.descriptors && t.DataViewObjectDefinitions.visitPropertyDefinitions(C.objects, C.descriptors, h) } for (var x = [], D = 0, E = v; D < E.length; D++) { var w = E[D], b = w.selector, I = l(w, r); r = I.queryDefn; var M = { queryName: I.queryName, selector: b }; w.aggregates && (M.aggregates = w.aggregates), b && !_.isEmpty(b.data) && (M.joinPredicate = 0), x.push(M) } return _.isEmpty(x) && _.isEmpty(y) ? void 0 : { queryDefn: r, warnings: y, additionalProjections: x } } } function c(e, t) { for (var r = 0, i = t; r < i.length; r++) { var a = i[r], n = a.descriptors && a.descriptors[e]; if (n) return n } } function l(e, t) { var r, i = e.expr, a = e.aggregates, n = e.selector; return a || n && !_.isEmpty(n.data) ? (r = t.selectNameOf(i)) ? { queryName: r, queryDefn: t } : (t = t.addSelect(i), { queryName: t.selectNameOf(i), queryDefn: t }) : (t = t.addSelect(i), { queryName: _.last(t.select()).name, queryDefn: t }) } function p(e, t, i) { if (!e) return !0; for (var a = 0, n = e; a < n.length; a++) { var o = n[a], s = r.checkForConditionErrors(t, o, i); if (_.isEmpty(s)) return !0 } return !1 } function d(e, t, r) { var i = e.inputRole; if (i) { var a = r[i]; if (!_.isEmpty(a)) { return _.chain(t.select()).filter((function (e) { return _.includes(a, e.name) })).map((function (e) { return e.expr })).value() } } } function f(e, r, a) { if (t.Selector.equals(e, null)) return null; if (m(e, r)) { var n = e.data; if (!n) return null; for (var o = [], s = 0, u = n; s < u.length; s++) { var c = u[s]; if (t.Selector.isRoleWildcard(c)) { var l = h(a, c.roles, r); o.push.apply(o, l) } else if (t.Selector.isWildcard(c)) { var l = h(a, Object.keys(a), r); o.push.apply(o, l) } else t.Selector.isScopeWildcard(c) || t.Selector.isScopeTotal(c) ? o.push.apply(o, c.exprs) : t.Selector.isScopeIdentity(c) ? o.push(c.expr) : debug.assertNever(c) } if (0 !== o.length) { for (var p = [], d = 0, f = r; d < f.length; d++) { var y = f[d], v = i.indexOfExpr(o, y.expr); if (!(v < 0) && (o.splice(v, 1), p.push(y.name), 0 === o.length)) break } if (!(o.length > 0 || 0 === p.length)) return p } } } function h(e, t, r) { for (var i = [], a = 0, n = t; a < n.length; a++) { var o = n[a]; i.push.apply(i, e[o]) } var s = _.filter(r, (function (e) { return _.includes(i, e.name) })); return _.map(s, (function (e) { return e.expr })) } function m(e, t) { var r = e.metadata; if (!r) return !0; for (var i = 0, a = t; i < a.length; i++) { if (a[i].name === r) return !0 } } a.extend = o, a.needsToExtend = s, a.matchesAnyCondition = p, a.getScopeRefs = f })(o = t.DataBoundObjectQueryExtender || (t.DataBoundObjectQueryExtender = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t, i) { var a = t[i]; if (a) { var n = a.all(); return _.filter(_.map(n, (function (t) { return r(e, t) })), (function (e) { return e })) } } function r(e, t) { if (t) { var r = e.select().withName(t.queryRef); return r ? r.expr : void 0 } } e.tryGetExprs = t, e.tryGetExprByProjection = r })(t = e.ProjectionUtils || (e.ProjectionUtils = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(t, r, a, n) { var o = e.ProjectionUtils.tryGetExprs(r, a, n); if (_.isEmpty(o)) return !1; if (!(o[0] instanceof e.SQHierarchyLevelExpr)) return !1; var s = o[0]; if (1 !== e.SQExprGroupUtils.groupExprs(t, o).length) return !1; var u = e.SQExprConverter.asFieldPattern(s, t), c = e.SQHierarchyExprUtils.getConceptualHierarchyLevelFromExpr(t, u), l = c && c.column; if (!l) return !1; var p = l.type; if (!p.temporal || !p.temporal.year) return !1; if (!i(o[0], t)) return !1; var d = a[n], f = d.getLastActiveQueryReference(); if (f) { var h = d.all(), m = _.findIndex(h, (function (e) { return e.queryRef === f })); if (m === -1) return !1; for (var y = 0; y < m; y++)if (!_.includes(d.activeProjectionRefs, h[y].queryRef)) return !1 } return !0 } function i(t, r) { if (t) { t = e.VariationRewriter.run(t, r); var i = t.getTargetEntity(); if (i) { var a = e.SQExprUtils.getConceptualEntity(i, r), n = _.filter(a.properties, (function (e) { return e.type.temporal && e.type.temporal.paddedDateTableDate })); return 1 === n.length ? e.SQExprBuilder.columnRef(i, n[0].name) : void 0 } } } t.isScalarKeySupportedForRole = r, t.getScalarKeyExpr = i })(t = e.ScalarKeyUtils || (e.ScalarKeyUtils = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var r; !(function (r) {
            var i; !(function (r) {
                function i(e) { var r = []; p(e.from(), r); var i, n = s(e.where(), I.create), o = e.transforms(); if (!_.isEmpty(o)) { i = []; for (var u = 0, c = o; u < c.length; u++) { var l = c[u], d = _.map(l.input.parameters, (function (e) { return I.createNamed(e) })), f = { Name: l.name, Algorithm: l.algorithm, Input: { Parameters: d }, Output: void 0 }; if (l.input.table) { var h = g(l.input.table.columns); f.Input.Table = { Name: l.input.table.name, Columns: h } } if (l.output && l.output.table) { var m = g(l.output.table.columns); f.Output = { Table: { Name: l.output.table.name, Columns: m } } } i.push(f) } } for (var y = a(e.orderBy(), !1), v = [], S = e.select(), C = 0, x = S.length; C < x; C++)v.push(I.createNamed(S[C])); var D, E = e.groupBy(); if (E && E.length) { D = []; for (var C = 0, x = E.length; C < x; C++)D.push(I.createNamed(E[C])) } var w = { Version: t.SemanticQueryVersions.Version2, From: r, Select: v }; return n && (w.Where = n), i && (w.Transform = i), y && (w.OrderBy = y), D && (w.GroupBy = D), e.top() && (w.Top = e.top()), w } function a(e, t) { var r; if (e && e.length) { r = []; for (var i = 0, a = e.length; i < a; i++) { var n = e[i]; r.push({ Direction: n.direction, Expression: t ? I.createStandalone(n.expr) : I.create(n.expr) }) } } return r } function n(e) { var t; try { t = u(e) } catch (e) { } if (t && !o(t)) return t } function o(e) { for (var t = 0, r = e.select(); t < r.length; t++) { if (!r[t].expr) return !0 } return !1 } function s(e, t) { var r; if (!_.isEmpty(e)) { r = []; for (var i = 0, a = e; i < a.length; i++) { var n = a[i], o = { Condition: t(n.condition) }; _.isEmpty(n.target) || (o.Target = _.map(n.target, t)), r.push(o) } } return r } function u(e) { var r = e.Version ? e.Version : t.SemanticQueryVersions.Version0, i = r < t.SemanticQueryVersions.Version1, a = w.from(e.From), n = new t.SemanticQueryBuilder(a), o = e.Where; if (o) for (var s = 0, u = o.length; s < u; s++) { var c = w.filter(o[s], a); c && (i && (c = M.Upgrade(r, c)), n.addWhere(c)) } var l = e.Transform, p = a; if (!_.isEmpty(l)) { for (var d = {}, f = a.keys(), h = 0, m = f; h < m.length; h++) { var y = m[h]; d[y] = a.source(y) } for (var s = 0, u = l.length; s < u; s++) { if (l[s].Input && l[s].Input.Table) { var v = l[s].Input.Table.Name; d[v] = new C((void 0), v) } if (l[s].Output && l[s].Output.Table) { var v = l[s].Output.Table.Name; d[v] = new C((void 0), v) } } p = new t.SQFrom(d); for (var s = 0, u = l.length; s < u; s++)n.addTransform(w.transform(l[s], p)) } var g = e.OrderBy; if (g) for (var s = 0, u = g.length; s < u; s++)n.addOrderBy(w.sort(g[s], a)); for (var S = e.Select, x = {}, s = 0, u = S.length; s < u; s++)n.addSelect(w.select(S[s], x, p)); var D = e.GroupBy; if (D) for (var E = {}, s = 0, u = D.length; s < u; s++)n.addGroupBy(w.groupBy(D[s], E, a)); return e.Top && n.setTop(e.Top), n.toQuery() } function c(e, t) { return _.isEmpty(e) ? [] : _.map(e, (function (e) { return w.sort(e, t) })) } function l(e) { var r = []; p(e.from(), r); var i = s(e.where(), I.create); return { Version: t.SemanticQueryVersions.Version2, From: r, Where: i } } function p(e, t) { for (var r = e.keys(), i = new E(e), a = 0, n = r.length; a < n; a++)t.push(e.source(r[a]).accept(i, a)) } function d(e) { return w.from(e) } function f(e, r) { for (var i = e.Version ? e.Version : t.SemanticQueryVersions.Version0, a = i < t.SemanticQueryVersions.Version1, n = w.from(e.From), o = new t.SemanticQueryBuilder(n), s = e.Where, u = 0, c = s.length; u < c; u++) { var l = w.filter(s[u], n); l ? (a && (l = M.Upgrade(i, l)), o.addWhere(l)) : r && (_.isEmpty(r.RemovedIndexes) && (r.RemovedIndexes = []), r.RemovedIndexes.push(u)) } return o.toFilter() } function h(e) { return I.createStandalone(e) } function m(e) { return I.create(e) } function y(e) { return b.createStandalone(e) } function v(e, t) { return b.create(e, t) } function g(e) { return _.map(e, (function (e) { var t = { Expression: I.createNamed(e.expression) }; return e.role && (t.Role = e.role), t })) } var S = e.data.FilterKindDetector, C = e.data.SQFromEntitySource, x = e.data.SQFromSubquerySource, D = jsCommon.StringExtensions; r.serializeQuery = i, r.serializeSortDefinitions = a, r.tryDeserializeQuery = n, r.deserializeQuery = u, r.deserializeSortDefinitions = c, r.serializeFilter = l, r.serializeFrom = p, r.deserializeFrom = d; var E = (function () { function e(e) { this.from = e } return e.prototype.visitEntity = function (e, t) { return { Name: this.from.keys()[t], Entity: e.entity, Schema: e.schema } }, e.prototype.visitSubquery = function (e, t) { return { Name: this.from.keys()[t], Expression: { Subquery: { Query: r.serializeQuery(e.subquery) } }, Type: 2 } }, e.prototype.visitExpr = function (e, t) { return { Name: this.from.keys()[t], Expression: r.serializeExpr(e.expr), Type: 2 } }, e })(); r.SQFromSourceSerializer = E, r.deserializeFilter = f, r.serializeExpr = h, r.serializeExprWithRef = m, r.deserializeExpr = y, r.deserializeExprWithRef = v; var w; !(function (e) { function r(e) { for (var r = {}, i = 0, a = e.length; i < a; i++) { var n = e[i]; switch (n.Type) { case 2: n.Expression.Subquery ? r[n.Name] = new x(u(n.Expression.Subquery.Query)) : r[n.Name] = new t.SQFromExprSource(b.createFromSourceExpression(n.Expression)); break; default: r[n.Name] = new C(n.Schema, n.Entity) } } return new t.SQFrom(r) } function i(e, t) { var r = t ? b.create(e.Condition, t) : b.createStandalone(e.Condition); if (r) { var i = { condition: r }; if (e.Target) { i.target = []; for (var a = 0, n = e.Target; a < n.length; a++) { var o = n[a], s = t ? b.create(o, t) : b.createStandalone(o); if (!s) return; i.target.push(s) } } return i } } function a(e, t) { return { direction: e.Direction, expr: b.create(e.Expression, t) } } function n(t, r, i) { return e.toNamedQueryExpression(t, r, i) } function o(t, r, i) { return e.toNamedQueryExpression(t, r, i) } function s(t, r) { var i = _.map(t.Input.Parameters, (function (t) { return e.toNamedQueryExpression(t, {}, r) })), a = { name: t.Name, algorithm: t.Algorithm, input: { parameters: i }, output: {} }; if (t.Input.Table) { var n = l(t.Input.Table.Columns, r); a.input.table = { name: t.Input.Table.Name, columns: n } } if (t.Output && t.Output.Table) { var o = l(t.Output.Table.Columns, r); a.output.table = { name: t.Output.Table.Name, columns: o } } return a } function c(e, r, i) { var a = b.create(e, i), n = e.Name || D.findUniqueName(r, t.SQExprUtils.defaultName(a)); return r[n] = !0, { name: n, expr: a } } function l(t, r) { var i = {}; return _.map(t, (function (t) { return { role: t.Role, expression: e.toNamedQueryExpression(t.Expression, i, r) } })) } e.from = r, e.filter = i, e.sort = a, e.select = n, e.groupBy = o, e.transform = s, e.toNamedQueryExpression = c })(w || (w = {})); var b, I = (function () { function e(e) { this.standalone = e } return e.create = function (t) { return t.accept(e.instance) }, e.createNamed = function (t) { var r = t.expr.accept(e.instance); return t.name && (r.Name = t.name), r }, e.createStandalone = function (t) { return t.accept(e.standaloneInstance) }, e.prototype.visitColumnRef = function (e) { return { Column: { Expression: e.source.accept(this), Property: e.ref } } }, e.prototype.visitMeasureRef = function (e) { return { Measure: { Expression: e.source.accept(this), Property: e.ref } } }, e.prototype.visitNativeMeasure = function (e) { var t = { Language: e.language, Expression: e.expression, DataType: e.dataType }; e.proposedName && (t.ProposedName = e.proposedName), e.format && (t.Format = e.format); var r = e.expressionContentCache; return !r || !r.dependencies && null == r.unrecognizedIdentifiers ? { NativeMeasure: t } : (t.ExpressionContentCache = {}, r.dependencies && (t.ExpressionContentCache.Dependencies = this.serializeAll(r.dependencies)), null != r.unrecognizedIdentifiers && (t.ExpressionContentCache.UnrecognizedIdentifiers = r.unrecognizedIdentifiers), { NativeMeasure: t }) }, e.prototype.visitNativeColumn = function (e) { var t = { Language: e.language, Expression: e.expression, DataType: e.dataType, Source: e.source.accept(this) }; e.proposedName && (t.ProposedName = e.proposedName), e.format && (t.Format = e.format); var r = e.expressionContentCache; return !r || !r.dependencies && null == r.unrecognizedIdentifiers ? { NativeColumn: t } : (t.ExpressionContentCache = {}, r.dependencies && (t.ExpressionContentCache.Dependencies = this.serializeAll(r.dependencies)), null != r.unrecognizedIdentifiers && (t.ExpressionContentCache.UnrecognizedIdentifiers = r.unrecognizedIdentifiers), { NativeColumn: t }) }, e.prototype.visitAggr = function (e) { return { Aggregation: { Expression: e.arg.accept(this), Function: e.func } } }, e.prototype.visitPercentile = function (e) { var t = { Percentile: { Expression: e.arg.accept(this), K: e.k } }; return e.exclusive && (t.Percentile.Exclusive = e.exclusive), t }, e.prototype.visitRangePercent = function (e) { return { RangePercent: { Min: e.min.accept(this), Max: e.max.accept(this), Percent: e.percent } } }, e.prototype.visitHierarchy = function (e) { return { Hierarchy: { Expression: e.arg.accept(this), Hierarchy: e.hierarchy } } }, e.prototype.visitPropertyVariationSource = function (e) { var t = e.arg.accept(this), r = e.property, i = e.name; return { PropertyVariationSource: { Expression: { SourceRef: t.SourceRef }, Name: i, Property: r } } }, e.prototype.visitHierarchyLevel = function (e) { return { HierarchyLevel: { Expression: e.arg.accept(this), Level: e.level } } }, e.prototype.visitSelectRef = function (e) { return { SelectRef: { ExpressionName: e.expressionName } } }, e.prototype.visitBetween = function (e) { return { Between: { Expression: e.arg.accept(this), LowerBound: e.lower.accept(this), UpperBound: e.upper.accept(this) } } }, e.prototype.visitIn = function (e) { var t = this.serializeAll(e.args), r = e.values; if (r) { for (var i = [], a = 0, n = r.length; a < n; a++)i.push(this.serializeAll(r[a])); return { In: { Expressions: t, Values: i } } } return { In: { Expressions: this.serializeAll(e.args), Table: e.table.accept(this) } } }, e.prototype.visitEntity = function (e) { var t; if (this.standalone) { t = { Schema: e.schema, Entity: e.entity } } else t = { Source: e.variable }; return { SourceRef: t } }, e.prototype.visitSubqueryRef = function (e) { return { SourceRef: { Source: e.variable } } }, e.prototype.visitNamedQueryRef = function (e) { return this.standalone ? { NamedQueryReference: { Name: e.queryName } } : { SourceRef: { Source: e.variable } } }, e.prototype.visitAnd = function (e) { return { And: { Left: e.left.accept(this), Right: e.right.accept(this) } } }, e.prototype.visitOr = function (e) { return { Or: { Left: e.left.accept(this), Right: e.right.accept(this) } } }, e.prototype.visitCompare = function (e) { return { Comparison: { ComparisonKind: e.comparison, Left: e.left.accept(this), Right: e.right.accept(this) } } }, e.prototype.visitConditional = function (e) { var t = this, r = { Conditional: { Cases: _.map(e.cases, (function (e) { return t.visitCase(e) })) } }, i = e.defaultValue; return i && (r.Conditional.DefaultValue = i.accept(this)), r }, e.prototype.visitCase = function (e) { return { Condition: e.condition.accept(this), Value: e.value.accept(this) } }, e.prototype.visitContains = function (e) { return { Contains: { Left: e.left.accept(this), Right: e.right.accept(this) } } }, e.prototype.visitDateAdd = function (e) { return { DateAdd: { Expression: e.arg.accept(this), Amount: e.amount, TimeUnit: e.unit } } }, e.prototype.visitDateSpan = function (e) { return { DateSpan: { Expression: e.arg.accept(this), TimeUnit: e.unit } } }, e.prototype.visitExists = function (e) { return { Exists: { Expression: e.arg.accept(this) } } }, e.prototype.visitNot = function (e) { return { Not: { Expression: e.arg.accept(this) } } }, e.prototype.visitNow = function (e) { return { Now: {} } }, e.prototype.visitDefaultValue = function (e) { return { DefaultValue: {} } }, e.prototype.visitAnyValue = function (e) { var t = {}; return null != e.defaultValueOverridesAncestors && (t.DefaultValueOverridesAncestors = e.defaultValueOverridesAncestors), { AnyValue: t } }, e.prototype.visitFillRule = function (e) { var t = {}, r = e.rule; return r.linearGradient2 && (t.linearGradient2 = this.visitLinearGradient2(r.linearGradient2)), r.linearGradient3 && (t.linearGradient3 = this.visitLinearGradient3(r.linearGradient3)), { FillRule: { Input: e.input.accept(this), FillRule: t } } }, e.prototype.visitLinearGradient2 = function (e) { var t = { min: this.visitRuleStop(e.min), max: this.visitRuleStop(e.max) }, r = this.visitNullColoringStrategy(e.nullColoringStrategy); return r && (t.nullColoringStrategy = r), t }, e.prototype.visitLinearGradient3 = function (e) { var t = { min: this.visitRuleStop(e.min), mid: this.visitRuleStop(e.mid), max: this.visitRuleStop(e.max) }, r = this.visitNullColoringStrategy(e.nullColoringStrategy); return r && (t.nullColoringStrategy = r), t }, e.prototype.visitRuleStop = function (e) { var t = { color: e.color.accept(this) }; return e.value && (t.value = e.value.accept(this)), t }, e.prototype.visitNullColoringStrategy = function (e) { if (e) { var t = { strategy: e.strategy.accept(this) }; return e.color && (t.color = e.color.accept(this)), t } }, e.prototype.visitThemeDataColor = function (e) { return { ThemeDataColor: { ColorId: e.colorId, Percent: e.percent } } }, e.prototype.visitStartsWith = function (e) { return { StartsWith: { Left: e.left.accept(this), Right: e.right.accept(this) } } }, e.prototype.visitGroupRef = function (e) { var t = this; return { GroupRef: { Expression: e.source.accept(this), Property: e.ref, GroupedColumns: _.map(e.groupedExprs, (function (e) { return e.accept(t) })) } } }, e.prototype.visitConstant = function (e) { switch (e.type.primitiveType) { case 5: case 7: case 2: case 4: case 3: case 0: case 1: return { Literal: { Value: e.valueEncoded } } } }, e.prototype.visitArithmetic = function (e) { return { Arithmetic: { Left: e.left.accept(this), Right: e.right.accept(this), Operator: e.operator } } }, e.prototype.visitFloor = function (e) { var t = { Floor: { Expression: e.arg.accept(this), Size: e.size } }; return null != e.timeUnit && (t.Floor.TimeUnit = e.timeUnit), t }, e.prototype.visitResourcePackageItem = function (e) { return { ResourcePackageItem: { PackageName: e.packageName, PackageType: e.packageType, ItemName: e.itemName } } }, e.prototype.visitScopedEval = function (e) { return { ScopedEval: { Expression: e.expression.accept(this), Scope: this.serializeAll(e.scope) } } }, e.prototype.visitFilteredEval = function (t) { return { FilteredEval: { Expression: t.expression.accept(this), Filters: s(t.filters, this.standalone ? e.createStandalone : e.create) } } }, e.prototype.visitWithRef = function (e) { return { WithRef: { ExpressionName: e.expressionName } } }, e.prototype.visitTransformTableRef = function (e) { return { TransformTableRef: { Source: e.source } } }, e.prototype.visitTransformOutputRoleRef = function (e) { return { TransformOutputRoleRef: { Role: e.role, Transform: e.transform } } }, e.prototype.visitRoleRef = function (e) { return { RoleRef: { Role: e.role } } }, e.prototype.visitAllRolesRef = function (e) { return { AllRolesRef: {} } }, e.prototype.visitDiscretize = function (e) { return { Discretize: { Expression: e.source.accept(this), Count: e.count } } }, e.prototype.visitMember = function (e) { return { Member: { Expression: e.source.accept(this), Member: e.member } } }, e.prototype.serializeAll = function (e) { for (var t = [], r = 0, i = e.length; r < i; r++)t.push(e[r].accept(this)); return t }, e.instance = new e, e.standaloneInstance = new e((!0)), e })(), M = (function () { function e() { } return e.Upgrade = function (e, r) { if (!r) return null; if (!r.condition) return null; var i = S.run(r.condition); return e === t.SemanticQueryVersions.Version0 && 2 !== i ? { condition: r.condition } : r }, e })(); !(function (e) {
                    function r(e, t) { return d(e.Column, t) || y(e.Measure, t) || v(e.NativeMeasure, t) || g(e.NativeColumn, t) || s(e.SourceRef, t) || D(e.Aggregation, t) || S(e.SelectRef, t) || C(e.Percentile, t) || x(e.RangePercent, t) || u(e.Arithmetic, t) || c(e.Floor, t) || l(e.Discretize, t) || p(e.Member, t) || h(e.Hierarchy, t) || m(e.HierarchyLevel, t) || f(e.PropertyVariationSource, t) || E(e.And, t) || b(e.Between, t) || I(e.In, t) || M(e.Or, t) || V(e.Contains, t) || R(e.Comparison, t) || T(e.Conditional, t) || N(e.DateAdd, t) || F(e.DateSpan, t) || A(e.Exists, t) || Q(e.Not, t) || B(e.Now) || z(e.DefaultValue) || q(e.AnyValue) || G(e.StartsWith, t) || k(e.FillRule, t) || j(e.ThemeDataColor) || K(e.ResourcePackageItem, t) || L(e.ScopedEval, t) || O(e.FilteredEval, t) || W(e.WithRef, t) || U(e.TransformTableRef, t) || H(e.TransformOutputRoleRef, t) || oe(e.Literal) || se(e.GroupRef, t) || ue(e.RoleRef) || ce(e.AllRolesRef) || le(e.NamedQueryReference) || n(e) } function i(e) { return r(e, null) } function a(e, t) { for (var i = [], a = 0, n = e.length; a < n; a++)i.push(r(e[a], t)); return i } function n(e) {
                        return Z(e.Boolean) || X(e.DateTime) || $(e.DateTimeSecond) || X(e.Date) || ee(e.Decimal) || te(e.Integer) || re(e.Null) || ie(e.Number) || ae(e.String);
                    } function o(e) { return i(e) } function s(e, r) { if (e) { if (!r) { var i = e; return t.SQExprBuilder.entity(i.Schema, i.Entity) } var a = e, n = a.Source, o = r.source(n); return o ? t.isSQFromEntitySource(o) ? t.SQExprBuilder.entity(o.schema, o.entity, n) : t.isSQFromSubquerySource(o) ? t.SQExprBuilder.subqueryRef(n) : o.expr.as(n) : void 0 } } function u(e, i) { if (e) { var a = r(e.Left, i), n = r(e.Right, i); if (a && n) return t.SQExprBuilder.arithmetic(a, n, e.Operator) } } function c(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.floor(a, e.Size, e.TimeUnit) } } function l(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.discretize(a, e.Count) } } function p(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.member(a, e.Member) } } function d(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.columnRef(a, e.Property) } } function f(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.propertyVariationSource(a, e.Name, e.Property) } } function h(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.hierarchy(a, e.Hierarchy) } } function m(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.hierarchyLevel(a, e.Level) } } function y(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.measureRef(a, e.Property) } } function v(e, r) { if (e) { var i = void 0; return e.ExpressionContentCache && (i = { unrecognizedIdentifiers: e.ExpressionContentCache.UnrecognizedIdentifiers, dependencies: a(e.ExpressionContentCache.Dependencies) }), "dax" !== e.Language, t.SQExprBuilder.nativeMeasure(e.Language, e.Expression, e.DataType, e.ProposedName, i, e.Format) } } function g(e, i) { if (e) { var n = void 0; if (e.ExpressionContentCache && (n = { unrecognizedIdentifiers: e.ExpressionContentCache.UnrecognizedIdentifiers, dependencies: a(e.ExpressionContentCache.Dependencies) }), "dax" !== e.Language) return; if (!e.Source) return; var o = r(e.Source, i); return t.SQExprBuilder.nativeColumn(e.Language, e.Expression, e.DataType, o, e.ProposedName, n, e.Format) } } function S(e, r) { if (e) return t.SQExprBuilder.selectRef(e.ExpressionName) } function C(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.percentile(a, e.K, e.Exclusive || !1) } } function x(e, i) { if (e) { var a = r(e.Min, i), n = r(e.Max, i); if (a && n) return t.SQExprBuilder.rangePercent(a, n, e.Percent) } } function D(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.aggregate(a, e.Function) } } function E(e, i) { if (e) { var a = r(e.Left, i), n = r(e.Right, i); if (a && n) return t.SQExprBuilder.and(a, n) } } function b(e, i) { if (e) { var a = r(e.Expression, i), n = r(e.LowerBound, i), o = r(e.UpperBound, i); if (a && n && o) return t.SQExprBuilder.between(a, n, o) } } function I(e, i) { if (e) { if (e.Values) return t.SQExprBuilder.inValues(a(e.Expressions, i), _.map(e.Values, (function (e) { return a(e, i) }))); var n = r(e.Table, i); if (n) return t.SQExprBuilder.inTable(a(e.Expressions, i), n) } } function M(e, i) { if (e) { var a = r(e.Left, i), n = r(e.Right, i); if (a && n) return t.SQExprBuilder.or(a, n) } } function V(e, i) { if (e) { var a = r(e.Left, i), n = r(e.Right, i); if (a && n) return t.SQExprBuilder.contains(a, n) } } function R(e, i) { if (e) { var a = r(e.Left, i), n = r(e.Right, i); if (a && n) return t.SQExprBuilder.compare(e.ComparisonKind, a, n) } } function T(e, i) { if (e) { for (var a = e.Cases, n = a.length, o = new Array(n), s = 0; s < n; s++) { var u = P(a[s]); if (!u) { o = void 0; break } o[s] = u } if (e.DefaultValue) { var c = r(e.DefaultValue); if (o && c) return t.SQExprBuilder.conditional(o, c) } else if (o) return t.SQExprBuilder.conditional(o) } } function P(e) { if (e) { var t = r(e.Condition), i = r(e.Value); if (t && i) return { condition: t, value: i } } } function N(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.dateAdd(e.TimeUnit, e.Amount, a) } } function F(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.dateSpan(e.TimeUnit, a) } } function A(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.exists(a) } } function Q(e, i) { if (e) { var a = r(e.Expression, i); if (a) return t.SQExprBuilder.not(a) } } function B(e) { if (e) return t.SQExprBuilder.now() } function z(e) { if (e) return t.SQExprBuilder.defaultValue() } function q(e) { if (e) return t.SQExprBuilder.anyValue(e.DefaultValueOverridesAncestors) } function G(e, i) { if (e) { var a = r(e.Left, i), n = r(e.Right, i); if (a && n) return t.SQExprBuilder.startsWith(a, n) } } function k(e, i) { if (e) { var a = r(e.Input, i), n = e.FillRule, o = {}, s = n.linearGradient2, u = n.linearGradient3; if (s) { o.linearGradient2 = { min: J(s.min, i), max: J(s.max, i) }; var c = Y(s.nullColoringStrategy, i); c && (o.linearGradient2.nullColoringStrategy = c) } else if (u) { o.linearGradient3 = { min: J(u.min, i), mid: J(u.mid, i), max: J(u.max, i) }; var c = Y(u.nullColoringStrategy, i); c && (o.linearGradient3.nullColoringStrategy = c) } return t.SQExprBuilder.fillRule(a, o) } } function j(e) { if (e) return t.SQExprBuilder.themeDataColor(e.ColorId, e.Percent) } function K(e, r) { if (e) return t.SQExprBuilder.resourcePackageItem(e.PackageName, e.PackageType, e.ItemName) } function L(e, i) { if (e) { var n = r(e.Expression, i); if (n) return t.SQExprBuilder.scopedEval(n, a(e.Scope, i)) } } function O(e, i) { if (e) { var a = r(e.Expression, i); return t.SQExprBuilder.filteredEval(a, _.map(e.Filters, (function (e) { return w.filter(e, i) }))) } } function W(e, r) { if (e) return t.SQExprBuilder.withRef(e.ExpressionName) } function U(e, r) { if (e) return t.SQExprBuilder.transformTableRef(e.Source) } function H(e, r) { if (e) return t.SQExprBuilder.transformOutputRoleRef(e.Role, e.Transform) } function J(e, t) { if (e) { var i = { color: r(e.color, t) }; return e.value && (i.value = r(e.value, t)), i } } function Y(e, t) { if (e) { var i = { strategy: r(e.strategy, t) }; return e.color && (i.color = r(e.color, t)), i } } function Z(e) { if (e) return t.SQExprBuilder.boolean(e.Value) } function X(e) { if (e) { var r = ne(e); if (r) return t.SQExprBuilder.dateTime(r) } } function $(e) { if (e) { var r = ne(e); return t.SQExprBuilder.dateSpan(5, t.SQExprBuilder.dateTime(r)) } } function ee(e) { if (e) { var r = e.Value; return t.SQExprBuilder.decimal(r) } } function te(e) { if (e) { var r = e.Value; return t.SQExprBuilder.integer(r) } } function re(e) { if (e) return t.SQExprBuilder.nullConstant() } function ie(e) { if (e) return t.PrimitiveValueEncoding.parseValueToSQExpr(e.Value) } function ae(e) { if (e) { var r = e.Value; return t.SQExprBuilder.text(r) } } function ne(e) { return jsCommon.DateExtensions.tryDeserializeDate(e.Value) } function oe(e) { if (e) return t.PrimitiveValueEncoding.parseValueToSQExpr(e.Value) } function se(i, a) { if (i) { var n = r(i.Expression, a), o = _.map(i.GroupedColumns, (function (t) { return e.create(t, a) })); if (n && !_.isEmpty(o)) return t.SQExprBuilder.groupRef(i.Property, n, o) } } function ue(e) { if (e) return t.SQExprBuilder.roleRef(e.Role) } function ce(e) { if (e) return t.SQExprBuilder.allRolesRef() } function le(e) { if (e) return t.SQExprBuilder.namedQueryRef(e.Name) } e.create = r, e.createStandalone = i, e.createConst = n, e.createFromSourceExpression = o
                })(b || (b = {}))
            })(i = r.SemanticQuerySerializer || (r.SemanticQuerySerializer = {}))
        })(r = t.services || (t.services = {}))
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r; !(function (t) { t.Forecast = { name: "Forecast", inputRoles: [{ name: "X", visualDataRoleMatching: { cartesianKind: 0 } }, { name: "Y", visualDataRoleMatching: { cartesianKind: 1 } }], outputRoles: [{ name: "forecast.ForecastValue", algorithmRole: "Forecast", columnName: "forecastValue", kind: e.VisualDataRoleKind.Measure }, { name: "forecast.ConfidenceHighBound", algorithmRole: "UpperBound", columnName: "confidenceHighBound", kind: e.VisualDataRoleKind.Measure }, { name: "forecast.ConfidenceLowBound", algorithmRole: "LowerBound", columnName: "confidenceLowBound", kind: e.VisualDataRoleKind.Measure }] }, t.KMeansClustering = { name: "KMeansClustering", inputRoles: [{ name: "Attribute", visualDataRoleMatching: { matchMeasure: !0, skipJoinPredicateNone: !0 } }, { name: "Item", visualDataRoleMatching: { matchGrouping: !0 } }], outputRoles: [{ name: "Series", algorithmRole: "ClusterId", columnName: "clusterId", kind: e.VisualDataRoleKind.Grouping }] }, t.SpatialClustering = { name: "SpatialClustering", inputRoles: [{ name: "Attribute", visualDataRoleMatching: { matchMeasure: !0, skipJoinPredicateNone: !0 } }, { name: "Item", visualDataRoleMatching: { matchGrouping: !0 } }], outputRoles: [{ name: "Series", algorithmRole: "ClusterId", columnName: "clusterId", kind: e.VisualDataRoleKind.Grouping }] } })(r = t.plugins || (t.plugins = {})) })(r = t.transforms || (t.transforms = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r() { return new i } t.createTransformPluginService = r; var i = (function () { function t() { this.plugins = e.data.transforms.plugins } return t.prototype.getTransformPlugin = function (e) { if (e) return this.plugins[e] }, t })() })(r = t.transforms || (t.transforms = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r = e.data.DefaultSQExprVisitorWithArg, i = e.data.SQExprBuilder, a = e.data.SQHierarchyExpr, n = e.data.SQPropertyVariationSourceExpr, o = (e.data.SQEntityExpr, (function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return __extends(t, e), t.prototype.visitColumnRef = function (e, t) { if (e.hasGroupOnKeys(t)) { var r = e.getConceptualProperty(t), a = e.getTargetEntity(); return _.map(r.column.keys, (function (e) { return i.columnRef(a, e.name) })) } return [e] }, t.prototype.visitHierarchyLevel = function (e, t) { var r = e.arg.getTargetEntity(); if (!r) return [e]; if (e.arg instanceof a) { var o = void 0, s = r.schema, u = e.arg; if (u.arg instanceof n) { var c = u.arg, l = t.schema(s).findTargetEntityOfVariation(r.entity, c.property, c.name); if (!l) return [e]; o = i.entity(s, l.name) } else o = r; var p = t.schema(s).findHierarchyLevel(o.entity, u.hierarchy, e.level), d = p.column.name; return this.visitColumnRef(i.columnRef(o, d), t) } return [e] }, t.prototype.visitDefault = function (e) { return [e] }, t })(r)); t.SelectToIdentityExpressionsVisitor = o })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(e, t) { var r = e.length; if (1 === r) return { mapping: e[0] }; for (var n, o = [], s = e[0].updateType, u = 0; u < r; u++) { var c = e[u]; if (s = i(c.updateType, s), !c.categorical) return; 0 === u && (n = { metadata: c.metadata, categorical: {} }), a.mergeCategorical(n.categorical, c.categorical), o.push(a.createSplit(t, c.categorical)) } return n.updateType = s, { mapping: n, splits: o } } function i(e, t) { return null === e || 0 === e || null === t || 0 === t ? 0 : e === t ? e : 1 === e || 1 === t ? 1 : 2 } t.mergeMappings = r; var a; !(function (t) { function r(e, t) { if (t.categories) if (e.categories) { i(e, t) } else e.categories = t.categories; if (null != t.dataVolume || null != e.dataVolume) { var r = Math.max(t.dataVolume || 0, e.dataVolume || 0); t.dataVolume = e.dataVolume = r } if (t.dataReductionAlgorithm) if (e.dataReductionAlgorithm) { a(t.dataReductionAlgorithm, e.dataReductionAlgorithm) } else e.dataReductionAlgorithm = t.dataReductionAlgorithm; if (t.values) { var s = e.values; s || (s = e.values = {}); var u = t.values, c = u.group; if (n(s, u), o(s, u.select), c) { var l = e.values.group; l ? o(l, c.select) : e.values.group = { select: c.select.concat([]), by: c.by, dataReductionAlgorithm: c.dataReductionAlgorithm } } } } function i(e, t) { if (!e && !t) return !0; if (e && t) { if (!e.categories && !t.categories) return !0; if (e.categories && t.categories) { var r = e.categories, i = t.categories; if (!a(r.dataReductionAlgorithm, i.dataReductionAlgorithm)) return !1; var n = r, o = i; if (n.bind || o.bind) return _.isEqual(n.bind, o.bind); var s = r, u = i; if (s.for || u.for) return _.isEqual(s.for, u.for); var c = r, l = i; return !c.select && !l.select || _.isEqual(c.select, l.select) } } return !1 } function a(e, t) { return !e || !t || _.isEqual(e, t) } function n(e, t) { (t.bind || t.for) && (e.select || (e.select = []), e.select.push(t)) } function o(e, t) { var r; t && (e.select || (e.select = []), (r = e.select).push.apply(r, t)) } function s(t, r) { var i = { selects: {} }, a = { visitRole: function (e) { return u(i, t, e) } }; return e.CompiledDataViewMapping.visitCategoricalCategories(r.categories, a), e.CompiledDataViewMapping.visitGrouped(r.values, a), e.CompiledDataViewMapping.visitCategoricalValues(r.values, a), i } function u(e, t, r) { var i = r.items; if (!_.isEmpty(r.items)) for (var a = [], n = 0, o = i; n < o.length; n++) { var s = o[n], u = s.queryName, c = t[u]; a[c] || (e.selects[c] = !0, a[c] = !0) } } t.mergeCategorical = r, t.createSplit = s })(a || (a = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.None = 0] = "None", e[e.AllowCache = 1] = "AllowCache", e[e.AllowQuery = 2] = "AllowQuery", e[e.CacheResult = 4] = "CacheResult" })(t = e.QueryCacheOptions || (e.QueryCacheOptions = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i; !(function (r) { function i(e, r) { var i = n(e, r); if (i) return t.PrimitiveValueEncoding.parseValue(i.Value) } function a(e, r) { var i = n(e, r); if (i) return t.PrimitiveValueEncoding.parseValueToSQExpr(i.Value) } function n(e, t) { for (var r = 0, i = e.length; r < i; r++) { var a = e[r]; if (a.Id === t) return a } } function o(t, r) { t = t || 0; var i = 0; switch (t) { case 2048: i = 1; break; case 1: i = 3; break; case 3: i = 4; break; case 4096: i = 5; break; case 20: i = 6; break; case 4: i = 7; break; case 8: i = 9; break; case 67: i = 4, r = "Years"; break; case 35: i = 4, r = "Months" }return e.ValueType.fromPrimitiveTypeAndCategory(i, r) } function s(e, t) { var i = e.SecondaryHierarchy; return i ? t && t.Secondary ? r.getDynamicMember(i, t.Secondary.Groupings, 0) : r.getDynamicMemberFallback(i) : null } function u(e, t, i) { var a = e.PrimaryHierarchy; if (!a) return null; var n; return i && (n = void 0 !== e.Calculations), t && t.Primary ? r.getDynamicMember(a, t.Primary.Groupings, 0, n) : r.getDynamicMemberFallback(a, n) } function c(e, t, i, a) { if (0 === e.length) return null; if (!t || 0 === t.length) return r.getDynamicMemberFallback(e, a); var n = t[i].Member; if (!n) return r.getDynamicMemberFallback(e, a); for (var o = 0, s = e; o < s.length; o++) { var u = s[o]; if (u.Id === n) return u } return null } function l(e, t) { return 2 === e.length ? e[1] : void 0 === t || t === !0 ? e[0] : null } function p(e, t, r) { void 0 === r && (r = !0); var i = t.source.aggregates; switch (i || (t.source.aggregates = i = {}), t.aggregateKind) { case 1: return void (i.subtotal = e); case 2: return void (i.max = e); case 3: return void (i.min = e); case 4: return void (r || (i.single = e)); case 5: return void (i.count = e); case 6: return void (i.average = e); case 8: return void (i.median = e); case 7: var a = t.aggregate.Percentile, n = i.percentiles; n || (n = i.percentiles = []); var o = { k: a.K, value: e }; return null != a.Exclusive && (o.exclusive = a.Exclusive), void n.push(o) } } function d(e, t) { void 0 !== e.subtotal && (t.subtotal = e.subtotal), void 0 !== e.min && (t.min = e.min), void 0 !== e.max && (t.max = e.max), void 0 !== e.minLocal && (t.minLocal = e.minLocal), void 0 !== e.maxLocal && (t.maxLocal = e.maxLocal), void 0 !== e.count && (t.count = e.count) } function f(e, t, r, i) { return e + (i - t) * (r + 1) } r.findAndParseCalculation = i, r.findAndParseCalculationToSQExpr = a, r.findCalculation = n, r.describeDataType = o, r.getTopLevelSecondaryDynamicMember = s, r.getTopLevelPrimaryDynamicMember = u, r.getDynamicMember = c, r.getDynamicMemberFallback = l, r.fillMetadataColumnAggregate = p, r.copyAggregates = d; var h = (function () { function e() { } return Object.defineProperty(e.prototype, "name", { get: function () { return "maxLocal" }, enumerable: !0, configurable: !0 }), e.prototype.update = function (e) { if ("number" == typeof e && !isNaN(e)) { var t = this.current; this.current = void 0 === t ? e : Math.max(t, e) } }, e.prototype.value = function () { return this.current }, e })(); r.MaxValueAggregator = h; var m = (function () { function e() { } return Object.defineProperty(e.prototype, "name", { get: function () { return "minLocal" }, enumerable: !0, configurable: !0 }), e.prototype.update = function (e) { if ("number" == typeof e && !isNaN(e)) { var t = this.current; this.current = void 0 === t ? e : Math.min(t || 0, e) } }, e.prototype.value = function () { return this.current }, e })(); r.MinValueAggregator = m, r.computeAggIdx = f })(i = r.DataShapeUtility || (r.DataShapeUtility = {})) })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t = e.ClientErrorStrings, r = jsCommon.StringExtensions; e.DMTS_MultipleGatewaysWithAllDatasourcesToBindError = "DMTS_MultipleGatewaysWithAllDatasourcesToBindError", e.DMTS_DatasourceHasNoCredentialError = "DMTS_DatasourceHasNoCredentialError", e.DMTS_OAuthTokenRefreshFailedError = "DMTS_OAuthTokenRefreshFailedError", e.DM_GWPipeline_Client_GatewayUnreachable = "DM_GWPipeline_Client_GatewayUnreachable", e.DMTS_UserLostPermissionToDatasourceError = "DMTS_UserLostPermissionToDatasourceError", e.DMTS_UserNotFoundInADGraphError = "DMTS_UserNotFoundInADGraphError", e.DM_GWPipeline_Gateway_DataSourceAccessError = "DM_GWPipeline_Gateway_DataSourceAccessError", e.DM_GWPipeline_Gateway_ImpersonationError = "DM_GWPipeline_Gateway_ImpersonationError", e.DM_GWPipeline_Gateway_InvalidMashupConnectionString = "DM_GWPipeline_Gateway_InvalidMashupConnectionString", e.DM_GWPipeline_Gateway_DatabaseLoginError = "DM_GWPipeline_Gateway_DatabaseLoginError", e.DM_GWPipeline_Gateway_SqlTimeoutException = "DM_GWPipeline_Gateway_SqlTimeoutException", e.DM_GWPipeline_Gateway_AdomdTimeoutException = "DM_GWPipeline_Gateway_AdomdTimeoutException", e.DM_GWPipeline_Gateway_InvalidObjectNameException = "DM_GWPipeline_Gateway_InvalidObjectNameException", e.DM_GWPipeline_Gateway_InvalidConnectionCredentials = "DM_GWPipeline_Gateway_InvalidConnectionCredentials", e.DM_GWPipeline_Gateway_ConnectionBrokenException = "DM_GWPipeline_Gateway_ConnectionBrokenException", e.DM_GWPipeline_Gateway_MemoryError = "DM_GWPipeline_Gateway_MemoryError", e.DM_GWPipeline_Gateway_MissingStructureError = "DM_GWPipeline_Gateway_MissingStructureError", e.DM_GWPipeline_Gateway_UnprocessedStructureError = "DM_GWPipeline_Gateway_UnprocessedStructureError", e.DM_GWPipeline_Gateway_ModelLoadError = "DM_GWPipeline_Gateway_ModelLoadError", e.DM_GWPipeline_Gateway_CancellationError = "DM_GWPipeline_Gateway_CancellationError", e.DM_GWPipeline_Gateway_CancellationOrTimeoutError = "DM_GWPipeline_Gateway_CancellationOrTimeoutError", e.DM_GWPipeline_Gateway_QueryExecutionError = "DM_GWPipeline_Gateway_QueryExecutionError", e.DM_GWPipeline_Gateway_RecalculationRequiredError = "DM_GWPipeline_Gateway_RecalculationRequiredError", e.DM_GWPipeline_Gateway_TimeoutError = "DM_GWPipeline_Gateway_TimeoutError", e.DM_GWPipeline_Gateway_AdomdConnectError = "DM_GWPipeline_Gateway_AdomdConnectError", e.DM_GWPipeline_Gateway_MashupDataAccessError = "DM_GWPipeline_Gateway_MashupDataAccessError", e.DM_GWPipeline_Gateway_DatabaseConnectError = "DM_GWPipeline_Gateway_DatabaseConnectError", e.DM_GWPipeline_Gateway_ServerUnreachable = "DM_GWPipeline_Gateway_ServerUnreachable", e.RS_AccessDenied = "rsAccessDenied", e.azureValues = "azure:values", e.KnownDsrClientErrors = { ComplexSlicerNotAllowedWithMeasures: { localizedContent: "DsrError_ComplexSlicerNotAllowedWithMeasuresValue" }, ComplexHighlightsNotAllowed: { localizedContent: "DsrError_ComplexHighlightsNotAllowed_Details", localizedMessage: "DsrError_ComplexHighlightsNotAllowed_ShortMessage" }, CouldNotResolveModelReferencesInSemanticQuery: { localizedMessage: "DsrError_CouldNotResolveModelRefErrorMessage", localizedTitle: "DsrError_CouldNotResolveModelRefErrorKey", localizedContent: "DsrError_CouldNotResolveModelRefErrorValNoItems", localizedContentWithAffectedItems: "DsrError_CouldNotResolveModelRefErrorValFormat", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690865" }, ExclusivePercentileOutOfRange: { localizedMessage: "DsrError_ExclusivePercentileOutOfRangeMessage", localizedTitle: "DsrError_ExclusivePercentileOutOfRangeKey", localizedContent: "DsrError_ExclusivePercentileOutOfRangeValue" }, InvalidDataShapeNoOutputData: { localizedContent: "DsrError_InvalidDataShapeValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690860" }, InvalidUnconstrainedJoin: { localizedTitle: "DsrError_InvalidUnconstrainedJoinKey", localizedContent: "DsrError_InvalidUnconstrainedJoinValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690861" }, IsRelatedToManyNotSupportedForDetailTable: { localizedMessage: "DsrError_IsRelatedToManyNotSupportedForDetailTableMessage", localizedTitle: "DsrError_IsRelatedToManyNotSupportedForDetailTableKey", localizedContent: "DsrError_IsRelatedToManyNotSupportedForDetailTableValueNoItems", localizedContentWithAffectedItems: "DsrError_IsRelatedToManyNotSupportedForDetailTableValueFormat" }, AA_PowerBIScriptPayloadTooLargeError: { localizedMessage: "DsrError_ResourcesExceededMessage", localizedTitle: "DsrError_ResourcesExceededKey", localizedContent: "DsrError_ResourcesExceededValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=746290" }, AA_PowerBIScriptResultTooLargeError: { localizedMessage: "DsrError_ResourcesExceededMessage", localizedTitle: "DsrError_ResourcesExceededKey", localizedContent: "DsrError_ResourcesExceededValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=746291" }, AA_PowerBIScriptReturnedNoImageError: { localizedMessage: "DsrError_ScriptReturnedNoImageMessage", localizedTitle: "DsrError_ScriptReturnedNoImageKey", localizedContent: "DsrError_ScriptReturnedNoImageContent", helpLink: "https://go.microsoft.com/fwlink/?LinkId=733479" }, AA_PowerBIScriptRuntimeErrorError: { localizedTitle: "DsrError_ScriptRuntimeErrorKey", localizedMessage: "DsrError_ScriptRuntimeErrorMessage", useODataErrorMessageAsContent: !0, helpLink: "https://go.microsoft.com/fwlink/?LinkId=733477" }, AA_PowerBIScriptTimeoutError: { localizedMessage: "DsrError_ScriptTimeoutMessage", localizedTitle: "DsrError_ScriptTimeoutKey", localizedContent: "DsrError_ScriptTimeoutContent", helpLink: "https://go.microsoft.com/fwlink/?LinkId=733478" }, AA_PowerBIRequestsQueueOverflowError: { localizedTitle: "DsrError_RequestsQueueOverflowKey", localizedMessage: "DsrError_RequestsQueueOverflowMessage", localizedContent: "DsrError_RequestsQueueOverflowContent", helpLink: "https://go.microsoft.com/fwlink/?LinkId=799576" }, AA_PowerBIScriptRuntimeMaxMemoryError: { localizedTitle: "DsrError_ScriptRuntimeMaxMemoryKey", localizedMessage: "DsrError_ScriptRuntimeMaxMemoryMessage", localizedContent: "DsrError_ScriptRuntimeMaxMemoryContent", helpLink: "https://go.microsoft.com/fwlink/?LinkId=799578" }, AA_PowerBIScriptRuntimeMaxDiskIOError: { localizedTitle: "DsrError_ScriptRuntimeMaxDiskIOKey", localizedMessage: "DsrError_ScriptRuntimeMaxDiskIOMessage", localizedContent: "DsrError_ScriptRuntimeMaxDiskIOContent", helpLink: "https://go.microsoft.com/fwlink/?LinkId=799579" }, AA_PowerBIScriptMissingDependencyError: { localizedTitle: "DsrError_ScriptRuntimeMissingDependencyKey", localizedMessage: "DsrError_ScriptRuntimeMissingDependencyMessage", localizedContent: "DsrError_ScriptRuntimeMissingDependencyContent", helpLink: "https://go.microsoft.com/fwlink/?LinkId=799857" }, AA_PowerBIScriptSpecificPackageWithMissingDependencyError: { localizedTitle: "DsrError_ScriptRuntimeSpecificPackageWithMissingDependencyKey", localizedMessage: "DsrError_ScriptRuntimeSpecificPackageWithMissingDependencyMessage", useODataErrorMessageAsContent: !0, helpLink: "https://go.microsoft.com/fwlink/?LinkId=799858" }, AA_PowerBIScriptSpecificPackageMissingSpecificDependencyError: { localizedTitle: "DsrError_ScriptRuntimeSpecificPackageMissingSpecificDependencyKey", localizedMessage: "DsrError_ScriptRuntimeSpecificPackageMissingSpecificDependencyMessage", useODataErrorMessageAsContent: !0, helpLink: "https://go.microsoft.com/fwlink/?LinkId=799859" }, AA_PowerBIScriptMissingSpecificPackageError: { localizedTitle: "DsrError_ScriptRuntimeMissingSpecificPackageKey", localizedMessage: "DsrError_ScriptRuntimeMissingSpecificPackageMessage", useODataErrorMessageAsContent: !0, helpLink: "https://go.microsoft.com/fwlink/?LinkId=800225" }, ModelMeasuresNotSupportedForDetailTable: { localizedMessage: "DsrError_ModelMeasuresNotSupportedForDetailTableMessage", localizedTitle: "DsrError_ModelMeasuresNotSupportedForDetailTableKey", localizedContent: "DsrError_ModelMeasuresNotSupportedForDetailTableValueNoItems", localizedContentWithAffectedItems: "DsrError_ModelMeasuresNotSupportedForDetailTableValueFormat" }, ModelUnavailable: { localizedContent: "DsrError_ModelUnavailableValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690862" }, NoUniqueKeyForDetailTable: { localizedContent: "DsrError_NoUniqueKeyForDetailTableValue" }, OverlappingKeysOnOppositeHierarchies: { localizedTitle: "DsrError_OverlappingKeysKey", localizedContent: "DsrError_OverlappingKeysValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690863" }, rsQueryMemoryLimitExceeded: { localizedMessage: "DsrError_ResourcesExceededMessage", localizedTitle: "DsrError_ResourcesExceededKey", localizedContent: "DsrError_ResourcesExceededValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690864" }, rsQueryTimeoutExceeded: { localizedMessage: "DsrError_ResourcesExceededMessage", localizedTitle: "DsrError_ResourcesExceededKey", localizedContent: "DsrError_ResourcesExceededValue", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690864" }, rsAccessDenied: { localizedMessage: "DsrError_NoPermissionMessage", localizedTitle: "DsrError_NoPermissionKey", localizedContent: "DsrError_NoAccessForVisual", helpLink: "https://go.microsoft.com/fwlink/?LinkID=690862" }, UnsupportedDateTimeLiteral: { localizedMessage: "DsrError_UnsupportedDateTimeMessage", localizedTitle: "DsrError_UnsupportedDateTimeKey", localizedContent: "DsrError_UnsupportedDateTimeValueNoItems", localizedContentWithAffectedItems: "DsrError_UnsupportedDateTimeValueFormat" }, InvalidExtensionDax_UnclosedBracketIdentifier: { localizedContentWithAffectedItemsAndPosition: "DsrError_InvalidExtensionDax_UnclosedBracketIdentifier" }, InvalidExtensionDax_UnexpectedCloseParenthesis: { localizedContentWithAffectedItemsAndPosition: "DsrError_InvalidExtensionDax_UnexpectedCloseParenthesis" }, InvalidFilterComparisonIncompatibleExpressions: { localizedContent: "DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpression", localizedContentWithAffectedItems: "DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpressionWithAffectedItems" }, InvalidFilterConditionIncompatibleDataType: { localizedContent: "DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpression", localizedContentWithAffectedItems: "DsrError_InvalidFilterConditionIncompatibleDataTypeOrExpressionWithAffectedItems" }, ExtensionMeasureEmptyExpression: { localizedContentWithAffectedItems: "DsrError_ExtensionMeasureEmptyExpression" }, ExtensionMeasureNameNotUniqueModel: { localizedContentWithAffectedItems: "DsrError_ExtensionMeasureNameNotUniqueModel" }, ExtensionMeasureNameNotUnique: { localizedContentWithAffectedItems: "DsrError_ExtensionMeasureNameNotUnique" }, CouldNotResolveModelReferencesInQueryExtensionSchema: { localizedMessage: "DsrError_CouldNotResolveModelRefErrorMessage", localizedTitle: "DsrError_CouldNotResolveModelRefErrorKey", localizedContentWithAffectedItems: "DsrError_CouldNotResolveModelReferencesInQueryExtensionSchema" }, QueryExtensionMeasureError: { localizedContentWithAffectedItemsAndPosition: "DsrError_QueryExtensionMeasureError", localizedContentWithAffectedItemsAndPositionAndDetails: "DsrError_QueryExtensionMeasureErrorWithDetails" }, QueryExtensionMeasureUnexpectedEndOfUserInput: { localizedContentWithAffectedItems: "DsrError_QueryExtensionMeasureUnexpectedEndOfUserInput" }, UnsupportedDataSourceVariables: { localizedMessage: "DsrError_UnsupportedDataSourceVariablesMessage", localizedTitle: "DsrError_UnsupportedDataSourceVariablesKey", localizedContent: "DsrError_UnsupportedDataSourceVariablesContent" }, DataExtensionMissingResultSet: { localizedMessage: "DsrError_DataExtensionMissingResultSetMessage", localizedTitle: "DsrError_DataExtensionMissingResultSetKey", localizedContent: "DsrError_DataExtensionMissingResultSetContent" } }; var i = (function () {
        function i(e) { this.oDataError = e, this.oDataCode = this.parseCode() } return Object.defineProperty(i, "maxNumberOfCommaValues", { get: function () { return 9 }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "code", { get: function () { return this.oDataCode }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "oDataErrorMessage", { get: function () { if (this.oDataError && this.oDataError.message && this.oDataError.message.value) return this.oDataError.message.value }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "source", { get: function () { switch (this.oDataError.source) { case "PowerBI": return "PowerBI"; case "External": return "External"; case "Unknown": return; case "User": return i.isCodeKnown(this.code) ? "User" : void 0 } }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "AdditionalErrorMessages", { get: function () { if (this.oDataError) { var t = this.oDataError[e.azureValues]; if (!_.isEmpty(t)) for (var r = 0, i = t; r < i.length; r++) { var a = i[r]; if (!_.isEmpty(a.additionalMessages)) return a.additionalMessages } } }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "powerBiErrorDetails", { get: function () { if (this.oDataError) { var t = this.oDataError[e.azureValues]; if (!_.isEmpty(t)) for (var r = 0, i = t; r < i.length; r++) { var a = i[r]; if (!_.isEmpty(a.powerBiErrorDetails)) return a.powerBiErrorDetails } } }, enumerable: !0, configurable: !0 }), i.prototype.getDetails = function (t) { var r = this.oDataError[e.azureValues], a = null; if (r) for (var n = 0, o = r; n < o.length; n++) { var s = o[n]; if (s.details) { a = s.details; break } } var u = i.getErrorDetailsFromStatusCode(this.code, this.oDataErrorMessage, a, this.AdditionalErrorMessages, t), c = u.displayableErrorInfo[0].errorInfoKey; if (!i.isCodeKnown(this.code) && a && (u.displayableErrorInfo = []), a) { var l = 0 === u.displayableErrorInfo.length ? c : t.get("DsrError_MoreInfo"); u.displayableErrorInfo.push({ errorInfoKey: l, errorInfoValue: a }) } return u }, i.getErrorDetailsFromStatusCode = function (r, a, n, o, s) { var u = s.get("DsrError_Key"), c = s.get("DsrError_UnknownErrorValue"), l = s.get("DsrError_Message"), p = jsCommon.PowerBIDefaultHelpPage, d = e.KnownDsrClientErrors[r]; if (d) { u = d.localizedTitle ? s.get(d.localizedTitle) : u; c = i.getContent(r, n, o, d, s) || c, l = d.localizedMessage ? s.get(d.localizedMessage) : l, p = d.helpLink || p, d.useODataErrorMessageAsContent && (c = a || l) } var f = { message: l, displayableErrorInfo: [{ errorInfoKey: u, errorInfoValue: c }], helpLink: p }; return f.debugErrorInfo = [], !d && r && f.debugErrorInfo.push({ errorInfoKey: t.ErrorCode, errorInfoValue: r }), d && d.useODataErrorMessageAsContent || !a || f.debugErrorInfo.push({ errorInfoKey: t.ODataErrorMessage, errorInfoValue: a }), f }, i.getContent = function (t, a, n, o, s) { if (o.localizedContentWithAffectedItemsAndPosition || o.localizedContentWithAffectedItemsAndPositionAndDetails) { var u = i.findAdditionalMessageWithAffectedItemsAndPosition(t, n); if (o.localizedContentWithAffectedItemsAndPositionAndDetails && a && u) return r.format(s.get(o.localizedContentWithAffectedItemsAndPositionAndDetails), r.constructCommaSeparatedList(u.AffectedItems, s, i.maxNumberOfCommaValues), e.formattingService.formatValue(u.Line), e.formattingService.formatValue(u.Position), a); if (o.localizedContentWithAffectedItemsAndPosition && u) return r.format(s.get(o.localizedContentWithAffectedItemsAndPosition), r.constructCommaSeparatedList(u.AffectedItems, s, i.maxNumberOfCommaValues), e.formattingService.formatValue(u.Line), e.formattingService.formatValue(u.Position)) } if (o.localizedContentWithAffectedItems) { var c = i.getAffectedItemsFromStatusCode(t, n); if (c.length > 0) return r.format(s.get(o.localizedContentWithAffectedItems), r.constructCommaSeparatedList(c, s, i.maxNumberOfCommaValues)) } if (o.localizedContent) return s.get(o.localizedContent) }, i.findAdditionalMessageWithAffectedItemsAndPosition = function (e, t) { return _.find(t, (function (t) { return t.Code === e && !_.isEmpty(t.AffectedItems) && null != t.Position && null != t.Line })) }, i.getAffectedItemsFromStatusCode = function (e, t) { for (var r = 0, i = t; r < i.length; r++) { var a = i[r]; if (a.Code === e) return a.AffectedItems || [] } return [] }, i.prototype.parseCode = function () { var t = this.oDataError.code, r = this.oDataError[e.azureValues], a = []; if (r) for (var n = 0, o = r; n < o.length; n++) { var s = o[n]; s.additionalMessages && (a = s.additionalMessages) } if (a.length > 0) for (var u = 0, c = a; u < c.length; u++) { var l = c[u]; if (i.isCodeKnown(l.Code)) { t = l.Code; break } } return t }, i.isCodeKnown = function (e) {
            switch (e) {
                case "ComplexSlicerNotAllowedWithMeasures": case "ComplexHighlightsNotAllowed": case "ExclusivePercentileOutOfRange": case "InvalidDataShapeNoOutputData": case "InvalidFilterComparisonIncompatibleExpressions": case "InvalidFilterConditionIncompatibleDataType": case "InvalidUnconstrainedJoin": case "ModelUnavailable": case "OverlappingKeysOnOppositeHierarchies": case "rsQueryMemoryLimitExceeded": case "rsQueryTimeoutExceeded": case "CouldNotResolveModelReferencesInSemanticQuery": case "QueryExtensionMeasureUnexpectedEndOfUserInput": case "rsAccessDenied": case "NoUniqueKeyForDetailTable": case "IsRelatedToManyNotSupportedForDetailTable": case "ModelMeasuresNotSupportedForDetailTable": case "UnsupportedDateTimeLiteral": case "InvalidExtensionDax_UnclosedBracketIdentifier": case "InvalidExtensionDax_UnexpectedCloseParenthesis": case "ExtensionMeasureEmptyExpression": case "ExtensionMeasureNameNotUniqueModel": case "ExtensionMeasureNameNotUnique": case "CouldNotResolveModelReferencesInQueryExtensionSchema": case "QueryExtensionMeasureError":
                case "UnsupportedDataSourceVariables": case "DataExtensionMissingResultSet": return !0; default: return !1
            }
        }, i
    })(); e.DsrClientError = i
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.httpService = e } return e.prototype.requestData = function (e, t, r) { var i = [], a = r.getUrlTemplates(), n = r.getResponseFormatter(); t = this.formatSearchKey(t); for (var o = 0, s = a; o < s.length; o++) { var u = s[o], c = $.Deferred(); i.push(c), u = u.replace(/{{searchKey}}/g, encodeURIComponent(t)), this.makeRequest(u, c) } $.when.apply($, i).then.call(this, (function () { for (var t = [], r = 0; r < arguments.length; r++)t[r] = arguments[r]; var i = n.formatResponse(Array.prototype.slice.call(t)); e.resolve(i) }), e.reject) }, e.prototype.formatSearchKey = function (e) { return e = e.trim().toUpperCase(), e = this.removeEdgeBinaryOperator(e, "AND"), e = this.removeEdgeBinaryOperator(e, "OR") }, e.prototype.removeEdgeBinaryOperator = function (e, t) { return _.startsWith(e, t + " ") && (e = t.toLowerCase() + e.slice(t.length)), _.endsWith(e, " " + t) && (e = e.slice(0, e.length - t.length) + t.toLowerCase()), e }, e.prototype.makeRequest = function (e, t) { var r = this.httpService.powerbiRequestOptions(); r.responseType = "json", this.httpService.get(e, r).then((function (e) { var r = e.data; if ("string" == typeof r) try { r = JSON.parse(r) } catch (e) { return t.reject() } t.resolve(r) }), t.reject) }, e })(); e.BingSocialClient = t })(t = e.bingSocial || (e.bingSocial = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r = jsCommon.StringExtensions, i = (function () { function e() { } return e })(); t.LimitMetadata = i; var a = (function () { function i(e, t, r) { this.computeMetadata(e, r, t) } return Object.defineProperty(i.prototype, "code", { get: function () { return "DsrLimitsWarning" }, enumerable: !0, configurable: !0 }), i.prototype.computeMetadata = function (e, t, r) { if (this.limits = {}, e.Limits) { var a = i.getExceededLimitsDetails(e, r), n = e.Limits, o = !!a.Primary, s = !!a.Secondary, u = !!a.Intersection; if (e.ScriptVisualBinding) return void (this.hasScriptVisualBinding = !0); var c = e.Expressions && e.Expressions.Primary && e.Expressions.Primary.Groupings ? e.Expressions.Primary.Groupings : [], l = e.Expressions && e.Expressions.Secondary && e.Expressions.Secondary.Groupings ? e.Expressions.Secondary.Groupings : []; o && s ? (this.groupings = c.concat(l), this.limits.Primary = i.getLimitMetadata(n.Primary, t), this.limits.Secondary = i.getLimitMetadata(n.Secondary, t)) : o ? (this.groupings = c, this.limits.Primary = i.getLimitMetadata(n.Primary, t)) : s && (this.groupings = l, this.limits.Secondary = i.getLimitMetadata(n.Secondary, t)), u && (this.limits.Intersection = i.getLimitMetadata(n.Intersection, t)) } }, i.prototype.getDetails = function (e) { var t = !!this.limits.Primary, r = !!this.limits.Secondary, a = null, n = -1; return this.hasScriptVisualBinding ? a = e.get("DsrLimitWarning_TooMuchDataValMultipleColumns") : t || r ? t && r ? (n = this.limits.Primary.Type, a = this.getErrorInfoValue(this.groupings, e.get("DsrLimitsWarning_MultipleColumnsWithIssuesFormat"), e)) : t ? (n = this.limits.Primary.Type, a = this.getErrorInfoValue(this.groupings, i.getDetailedMessageFormatForOneColumn(n, e), e)) : (n = this.limits.Secondary.Type, a = this.getErrorInfoValue(this.groupings, i.getDetailedMessageFormatForOneColumn(n, e), e)) : this.limits.Intersection && (n = this.limits.Intersection.Type, a = i.getDetailedMessageFormatForOneColumn(n, e)), a || (a = e.get("DsrLimitWarning_TooMuchDataValMultipleColumns")), { message: i.getMessage(n, e), displayableErrorInfo: [{ errorInfoKey: i.getKey(n, e), errorInfoValue: a }], helpLink: i.getHelpLink(n) } }, i.getExceededLimitsDetails = function (e, t) { for (var r = e.Limits, i = {}, a = 0, n = t; a < n.length; a++) { var o = n[a]; r.Primary && o.Id === r.Primary.Id ? i.Primary = r.Primary : r.Secondary && o.Id === r.Secondary.Id ? i.Secondary = r.Secondary : r.Intersection && o.Id === r.Intersection.Id && (i.Intersection = r.Intersection) } return i }, i.prototype.getErrorInfoValue = function (e, t, i) { if (!e || 0 === e.length) return null; for (var a = [], n = 0, o = e.length; n < o; n++) { var s = e[n], u = this.getGroupingNameFromGroupingKeys(s); u && a.push(u) } var c, l = a.length; return 0 === l ? null : (c = 1 === l ? a[0] : a.join(i.get("ListJoin_Separator")), r.format(t, c)) }, i.prototype.getGroupingNameFromGroupingKeys = function (e) { for (var t = e.Keys, r = 0, i = t.length; r < i; r++) { var a = t[r]; if (null !== a.Select && void 0 !== a.Select) { if (!this.columnNameFromIndex) return; return this.columnNameFromIndex(a.Select) } } }, i.getMessage = function (e, t) { switch (e) { case 2: return t.get("DsrLimitWarning_RepresentativeSampleMessage"); case 3: case 4: return t.get("DsrLimitWarning_HighDensitySampleMessage"); default: return t.get("DsrLimitWarning_TooMuchDataMessage") } }, i.getKey = function (e, t) { switch (e) { case 2: return t.get("DsrLimitWarning_RepresentativeSampleKey"); case 3: case 4: return t.get("DsrLimitWarning_HighDensitySampleKey"); default: return t.get("DsrLimitWarning_TooMuchDataKey") } }, i.getDetailedMessageFormatForOneColumn = function (e, t) { switch (e) { case 2: return t.get("DsrLimitWarning_RepresentativeSampleVal"); case 3: return t.get("DsrLimitWarning_HighDensitySampleVal"); case 4: return t.get("DsrLimitWarning_OverlappingPointsDetails"); default: return t.get("DsrLimitWarning_TooMuchDataVal") } }, i.getHelpLink = function (e) { switch (e) { case 3: return "https://go.microsoft.com/fwlink/?linkid=848757"; case 4: return "https://go.microsoft.com/fwlink/?linkid=853820" } }, i.getLimitMetadata = function (e, t) { return e.Top ? { Type: 0, Count: i.getLimitCount(e.Top, t) } : e.Bottom ? { Type: 1, Count: i.getLimitCount(e.Bottom, t) } : e.Sample ? { Type: 2, Count: i.getLimitCount(e.Sample, t) } : e.BinnedLineSample ? { Type: 3, Count: i.getBinnedLineSampleCount(e.BinnedLineSample) } : e.OverlappingPointsSample ? { Type: 4, Count: i.getLimitCount(e.OverlappingPointsSample, t) } : { Type: -1, Count: null } }, i.getLimitCount = function (r, i) { if (r.Calc && i) { var a = t.DataShapeUtility.findCalculation(i, r.Calc); if (a) { var n = e.PrimitiveValueEncoding.parseValue(a.Value); if (_.isNumber(n)) return n } } return r.Count }, i.getBinnedLineSampleCount = function (e) { return e.MaxTargetPointCount }, i })(); t.DsrLimitsWarning = a })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { switch (e) { case 0: return r } } var r = "Warning"; e.getDsrMessageSeverityValue = t, e.KnownDsrMessages = { "ForecastErrorType.DataIsTooSmall": { localizedMessage: "DsrMessage_NotEnoughDataMessage", localizedTitle: "DsrMessage_NotEnoughDataTitle", localizedContent: "DsrMessage_NotEnoughDataContent", isTransformMessage: !0 }, "ForecastErrorType.TooManyMissingValues": { localizedMessage: "DsrMessage_DataIsTooRandomOrMissingValuesMessage", localizedTitle: "DsrMessage_DataIsTooRandomOrMissingValuesTitle", localizedContent: "DsrMessage_DataIsTooRandomOrMissingValuesContent", isTransformMessage: !0 }, "ForecastErrorType.NoDominantStepDetected": { localizedMessage: "DsrMessage_DataIsTooRandomOrMissingValuesMessage", localizedTitle: "DsrMessage_DataIsTooRandomOrMissingValuesTitle", localizedContent: "DsrMessage_DataIsTooRandomOrMissingValuesContent", isTransformMessage: !0 }, "ForecastErrorType.InputTimeStampsNotSorted": { localizedMessage: "DsrMessage_UnsortedDataMessage", localizedTitle: "DsrMessage_UnsortedDataTitle", localizedContent: "DsrMessage_UnsortedDataContent", isTransformMessage: !0 }, "ForecastErrorType.XAxisIsNull": { localizedMessage: "DsrMessage_ForecastXValueNullMessage", localizedTitle: "DsrMessage_ForecastXValueNullTitle", localizedContent: "DsrMessage_ForecastXValueNullContent", isTransformMessage: !0 }, "ForecastErrorType.InvalidSeasonality": { localizedMessage: "DsrMessage_ForecastInvalidSeasonalityMessage", localizedTitle: "DsrMessage_ForecastInvalidSeasonalityTitle", localizedContent: "DsrMessage_ForecastInvalidSeasonalityContent", isTransformMessage: !0 }, "ForecastErrorType.InvalidDataType": { localizedMessage: "DsrMessage_ForecastVariantDataTypeMessage", localizedTitle: "DsrMessage_ForecastVariantDataTypeTitle", localizedContent: "DsrMessage_ForecastVariantDataTypeContent", isTransformMessage: !0 }, "ForecastErrorType.Unexpected": { localizedMessage: "DsrMessage_ForecastErrorMessage", localizedTitle: "DsrMessage_ForecastErrorTitle", localizedContent: "DsrMessage_ForecastErrorContent", isTransformMessage: !0 }, ForecastTransformUnsupported: { localizedMessage: "DsrMessage_ForecastNotSupportedMessage", localizedTitle: "DsrMessage_ForecastNotSupportedTitle", localizedContent: "DsrMessage_ForecastNotSupportedContent", isTransformMessage: !0 }, "ClusteringErrorType.LessThanKDataPoints": { localizedMessage: "DsrMessage_ClusterTooManyClustersTitle", localizedTitle: "DsrMessage_ClusterTooManyClustersTitle", localizedContent: "DsrMessage_ClusterTooManyClustersContent", isTransformMessage: !0 }, "ClusteringErrorType.TooManyDataPoints": { localizedMessage: "DsrMessage_ClusterExceedsLimitTitle", localizedTitle: "DsrMessage_ClusterExceedsLimitTitle", localizedContent: "DsrMessage_ClusterExceedsLimitContent", isTransformMessage: !0 }, "ClusteringErrorType.InvalidDataType": { localizedMessage: "DsrMessage_ClusterVariantDataTypeTitle", localizedTitle: "DsrMessage_ClusterVariantDataTypeTitle", localizedContent: "DsrMessage_ClusterVariantDataTypeContent", isTransformMessage: !0 } }; var i = (function () { function t(e) { this.dataShapeMessage = e } return Object.defineProperty(t.prototype, "code", { get: function () { return this.dataShapeMessage.Code }, enumerable: !0, configurable: !0 }), t.prototype.getDetails = function (t) { var r = e.KnownDsrMessages[this.dataShapeMessage.Code]; return { message: t.get(r.localizedMessage), displayableErrorInfo: [{ errorInfoKey: t.get(r.localizedTitle), errorInfoValue: t.get(r.localizedContent) }] } }, t.prototype.isTransformMessage = function () { var t = e.KnownDsrMessages[this.code]; return t && t.isTransformMessage }, t })(); e.DsrMessage = i })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i(e) { if (2 === e.Version) return !0 } function a(e, t, r, i, a, o) { if (!t) return null; t.data && (t = t.data); var s; o && (s = o.createChildActivity("Parse Query Result")); var u = {}, c = t, l = jsCommon.performance.now(); _.isString(t) && (u.dsrLength = t.length, u.jsonParse = d((function () { c = JSON.parse(t) })), s && s.attachPerformanceActivityMetrics({ jsonParse: u.jsonParse })); var p = n(e, c.descriptor, c.dsr, r.enableCellLevelFormatting, c.requestId, c.clientSideFilters, a, u, i, l, c.timestamp, c.fromCache, c.metrics); return s && s.resolve(), p } function n(a, n, o, u, l, p, d, f, h, m, y, v, g) { if (!o) return null; f || (f = {}), 4 & a && (a |= 8); var S, C; if (i(o)) { if (C = "dsr2-read", performance && performance.mark && performance.mark(C + "-start"), f.mode = "V2", 1 !== _.size(o.DS)) return null; var x = r.createDsrParserContext(n), D = r.reader.V2.createDsrParser(o, x); S = c(new r.DataViewConverterContext(a, n, x), D, f), D.reset(); var E = D.dataShapes(); E.next(); if (E.limitsExceeded()) { S.warnings || (S.warnings = []); var w = new r.DsrLimitsWarning(n, r.toDsrV1Limit(E), r.toDsrV1Calc(E)); S.warnings.push(w), r.reader.V1.applyReductionMetadata(S.dataView, w.limits) } s(E, S), S.dataView && !_.isEmpty(p) && (t.ClientSideFilter.applyClientSideFilters(S.dataView, p), S.disallowPersisting = !0) } else C = "dsr1-read", performance && performance.mark && performance.mark(C + "-start"), f.mode = "V1Old", S = r.reader.V1.read(a, n, o, u, f, l, p, d); return S && (S.timestamp = y, S.fromCache = v, g && (S.performanceActivities = r.parseExecutionEvents(g.Events))), performance && (performance.mark && performance.mark(C + "-end"), performance.measure && performance.measure(C, C + "-start", C + "-end")), f.total = jsCommon.performance.now() - m, h && h.logEvent(e.telemetry.DataDsrToDataView, f.jsonParse, f.categorical, f.table, f.tree, f.matrix, f.single, f.script, f.total, f.mode, a, f.dsrLength, d), S } function o(e) { if (!e) return !1; var t = e.data; return _.isString(t) && (t = p.tryParseJSON(t)), !_.isEmpty(t) && u(t.dsr) } function s(e, t) { var i = e.messages(); if (i) for (; i.next();)r.KnownDsrMessages[i.code()] && i.severity() === r.getDsrMessageSeverityValue(0) && (t.warnings || (t.warnings = []), t.warnings.push(i.dsrMessage())) } function u(e) { if (e) if (i(e)) { for (var t = r.reader.V2.createDsrParser(e, void 0).dataShapes(); t.next();)if (t.hasRestartTokens()) return !0 } else for (var a = e.DataShapes, n = 0, o = a; n < o.length; n++) { var s = o[n]; if (!_.isEmpty(s.RestartTokens)) return !0 } return !1 } function c(e, t, i) { var a = { columns: e.createDataViewMetadataColumns() }, n = { dataView: { metadata: a } }; if (l(t, n), e.includes(2)) { var o, s = d((function () { o = r.converters.createMatrix(e, t, a), o && (n.dataView.matrix = o, t.lockCache()) })); o && (i.matrix = s) } if (e.includes(1)) { var u, c = d((function () { u = r.converters.categorical(e, t, a), u && (n.dataView.categorical = u, t.lockCache()) })); u && (i.categorical = c) } if (e.includes(8)) { var p, f = d((function () { p = r.converters.createTable(e, t, a), p && (n.dataView.table = p, t.lockCache()) })); p && (i.table = f) } if (e.includes(16)) { var h, m = d((function () { h = r.converters.createTree(e, t), h && (n.dataView.tree = h, t.lockCache()) })); h && (i.tree = m) } if (e.includes(4)) { var y, v = d((function () { y = r.converters.createSingle(e, t), y && (n.dataView.single = y) })); y && (i.single = v) } return n } function l(e, t) { e.reset(); var r = e.dataShapes(); r.next(), r.complete() || (t.dataView.metadata.segment = {}, t.restartToken = r.restartTokens()) } var p = jsCommon.JsonExtensions, d = jsCommon.PerfTimer.logTime; r.isDsrV2 = i, r.read = a, r.readDsr = n, r.containsRestartToken = o })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = jsCommon.EnumExtensions, r = (function () { function r(e, t, r) { this.targets = e, this.descriptor = t, this.selects = t.Select, this.selectIndexToColumn = {}, this.aggregateCalcMetadata = {}, this.calcInfo = {}, this.calcIdToColumnIndices = {}, this.dataMemberIdToIdentityBuilder = {}; var i = t.Expressions; this.primaryAxisGroupings = i && i.Primary && i.Primary.Groupings, this.secondaryAxisGroupings = i && i.Secondary && i.Secondary.Groupings, this.measureSelectIndices = [], this.dataMemberIdToMetadata = r.dataMemberIdToMetadata, this.maxPrimaryDepth = r.maxPrimaryDepth, this.maxSecondaryDepth = r.maxSecondaryDepth } return r.prototype.includes = function (e) { return t.hasFlag(this.targets, e) }, r.prototype.createDataViewMetadataColumns = function () { var t = this.selects; if (!_.isEmpty(t)) { var r = [], i = t.length; this.selectIndexToColumnIndex = new Array(i); for (var a = 0, n = i; a < n; a++) { var o = t[a]; if (o) { var s = this.createColumns(r, a), u = s.column, c = s.columnIdx, l = s.dynamicFormatColumn; this.selectIndexToColumn[a] = u, this.selectIndexToColumnIndex[a] = c, o.Kind === e.SelectKind.Measure && this.measureSelectIndices.push(a); var p = o.Aggregates; if (p) for (var d = 0, f = p; d < f.length; d++) { var h = f[d], m = this.getAggregateKind(h.Aggregate); this.createAggregateCalcMetadata(h.Ids, m, u, a, h.Aggregate) } var y = o.Value; y && (this.calcIdToColumnIndices[y] || (this.calcIdToColumnIndices[y] = []), this.calcIdToColumnIndices[y].push(c), null != o.Depth && null != o.SecondaryDepth || (this.aggregateCalcMetadata[y] = { source: u, aggregateKind: 4, selectIdx: a })), o.Kind === e.SelectKind.Measure && (o.Subtotal && this.createAggregateCalcMetadata(o.Subtotal, 1, u, a), o.SubtotalDynamicFormat && this.createAggregateCalcMetadata(_.map(o.SubtotalDynamicFormat, (function (e) { return e && e.Format })), 1, l, a), o.Count && this.createAggregateCalcMetadata(o.Count, 5, u, a), o.Max && this.createAggregateCalcMetadata(o.Max, 2, u, a), o.Min && this.createAggregateCalcMetadata(o.Min, 3, u, a)) } } this.parseAxisGroupings(this.primaryAxisGroupings), this.parseAxisGroupings(this.secondaryAxisGroupings); for (var v in this.calcIdToColumnIndices) _.size(this.calcIdToColumnIndices[v]) > 1 && (this.calcInfo[v].hasDuplicateColumnIndices = !0); return r } }, r.prototype.parseAxisGroupings = function (t) { if (t) for (var r = this.calcInfo, i = this.selects, a = 0, n = t; a < n.length; a++)for (var o = n[a], s = 0, u = o.Keys; s < u.length; s++) { var c = u[s]; null != c.Select ? r[i[c.Select].Value].forIdentity = !0 : c.Calc && (r[c.Calc] = { kind: e.SelectKind.Group, forIdentity: !0, isGroupKeyButNotSelect: !0 }) } }, r.prototype.createAggregateCalcMetadata = function (e, t, r, i, a) { for (var n = 0, o = e; n < o.length; n++) { var s = o[n], u = this.aggregateCalcMetadata[s] = { source: r, aggregateKind: t, selectIdx: i }; a && (u.aggregate = a) } }, r.prototype.getAggregateKind = function (e) { return e.Average ? 6 : e.Max ? 2 : e.Min ? 3 : e.Median ? 8 : e.Percentile ? 7 : void 0 }, r.prototype.createColumns = function (t, r) { var i = t.length, a = this.createMetadataColumn(r); t.push(a); var n = this.selects[r], o = n.Kind, s = this.calcInfo; if (s[n.Value] = { kind: o, columnIndex: i, selectIdx: r, calcKind: 1 }, n.Subtotal) for (var u = 0, c = n.Subtotal; u < c.length; u++) { var l = c[u]; s[l] = { columnIndex: i, kind: o, selectIdx: r, calcKind: 2 } } if (n.Highlight) { var p = n.Highlight.Value; p && (s[p] = { columnIndex: i, kind: o, selectIdx: r, calcKind: 3 }) } var d = this.tryCreateDynamicFormatColumnMetadata(r, a); if (d) { var f = i + 1; if (t.push(d), s[n.DynamicFormat.Format] = { columnIndex: f, kind: e.SelectKind.Measure, selectIdx: r, calcKind: 4 }, n.SubtotalDynamicFormat) for (var h = 0, m = n.SubtotalDynamicFormat; h < m.length; h++) { var l = m[h], y = l && l.Format; y && (s[y] = { columnIndex: f, kind: e.SelectKind.Measure, selectIdx: r, calcKind: 5 }) } var v = n.Highlight && n.Highlight.DynamicFormat && n.Highlight.DynamicFormat.Format; v && (s[v] = { columnIndex: f, kind: e.SelectKind.Measure, selectIdx: r, calcKind: 6 }) } return { column: a, columnIdx: i, dynamicFormatColumn: d } }, r.prototype.createMetadataColumn = function (t) { var r = this.selects[t], i = { displayName: "", index: t }; r.Format && (i.format = r.Format), i.type = e.DataShapeUtility.describeDataType(r.Type, r.DataCategory), r.Kind === e.SelectKind.Measure && (i.isMeasure = !0); var a = r.GroupKeys; if (a) for (var n = i.identityExprs = new Array(a.length), o = 0; o < a.length; o++)n[o] = e.convertKey(a[o], t, this.selects); return i }, r.prototype.tryCreateDynamicFormatColumnMetadata = function (e, t) { var r = this.selects[e]; if (r.DynamicFormat && r.DynamicFormat.Format) { var i = { displayName: "", isMeasure: !0 }; return t.formatSource = { formatString: i }, i } }, r })(); e.DataViewConverterContext = r })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r, i = e.Prototype; !(function (t) { function r(t, r, n) { var o = i.inherit(t); return a(t, o, "tree", r, e.telemetry.DataDataViewKindAccess, 16, n), a(t, o, "categorical", r, e.telemetry.DataSampledDataViewKindAccess, 1, n), a(t, o, "table", r, e.telemetry.DataSampledDataViewKindAccess, 8, n), a(t, o, "matrix", r, e.telemetry.DataSampledDataViewKindAccess, 2, n), a(t, o, "single", r, e.telemetry.DataSampledDataViewKindAccess, 4, n), o } function a(e, t, r, i, a, n, o) { var s = { enumerable: !0, configurable: !0, get: function () { return i.logEvent(a, n, o), delete t[r], e[r] }, set: function (t) { e[r] = t } }; Object.defineProperty(t, r, s) } t.wrapKindProperties = r })(r = t.DataViewTelemetry || (t.DataViewTelemetry = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(e) { var r = e.Select, a = e.Expressions, n = a && a.Primary && a.Primary.Groupings, o = a && a.Secondary && a.Secondary.Groupings, s = {}, u = n && [], c = o && []; if (n) for (var l = 0, p = n.length; l < p; l++)i(s, n[l], l, u, r); if (o) for (var l = 0, p = o.length; l < p; l++)c[l] = [], i(s, o[l], l, c, r); var d = 0, f = []; if (r && o) for (var l = 0; l < r.length; l++) { var h = r[l]; h && h.Kind === t.SelectKind.Measure && null == h.Depth && null == h.SecondaryDepth && (f[d++] = l) } return { intersectionMeasureCount: f.length, intersectionMeasureToSelectIndex: f, secondaryLeafDataMemberId: o && [], dataMemberIdToMetadata: s, selects: r, maxPrimaryDepth: _.size(n), maxSecondaryDepth: _.size(o), memberInstanceCalcMetadataCache: {}, calcIdToCalcMetadata: {}, intersectionCalcMetadataCache: {}, primaryDataMemberIdCache: u, secondaryDataMemberIdCache: c, instancesCalcCache: {}, lastIntersectionCalcCache: {}, locked: !1 } } function i(e, t, r, i, n) { var o = i[r] = [], s = a(t.Keys, n), u = t.Member; u && (o.push(u), e[u] = { identityFields: s, axisGrouping: t, kind: 1, depth: r + 1 }); var c = t.SubtotalMember; c && (o.push(c), e[c] = { identityFields: s, kind: 2, depth: r }) } function a(e, t) { for (var r = e.length, i = new Array(r), a = 0; a < r; a++)i[a] = n(e[a], e[a].Select, t); return i } function n(r, i, a) { var n = r.Source; if (!n) { var o = a[i].Name; if (!o) return; return e.SQExprBuilder.selectRef(o) } return e.SQExprBuilder.columnRef(e.SQExprBuilder.entity(t.schemaName(n), n.Entity || n.EntitySet), n.Property) } var o = (function () { function t(e) { this.values = e, this.parsedValues = new Array(e.length), this.parsedValueExprs = new Array(e.length) } return t.prototype.getCalcValue = function (t, r) { if (!(t >= this.parsedValues.length)) { var i = this.parsedValues[t]; return void 0 === i && (i = e.PrimitiveValueEncoding.parseOptimizedValue(this.values[t], r), this.parsedValues[t] = i), i } }, t.prototype.getCalcValueExpr = function (t, r, i) { if (!(r >= this.parsedValues.length)) { var a = this.parsedValueExprs[r]; return void 0 === a && (a = e.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(t, this.values[r], i), this.parsedValueExprs[r] = a), a } }, t })(), s = (function () { function e(e) { if (e) { this.resolvedValueDictionaries = {}; for (var t in e) this.resolvedValueDictionaries[t] = new o(e[t]) } } return e.prototype.getCalcValue = function (e, t, r) { if (t && "number" == typeof e) { var i = this.resolvedValueDictionaries[t]; return i.getCalcValue(e, r) } }, e.prototype.getCalcValueExpr = function (e, t, r, i) { if (r && "number" == typeof t) { var a = this.resolvedValueDictionaries[r]; return a.getCalcValueExpr(e, t, i) } }, e })(); t.ValueDictionaryHandler = s, t.createDsrParserContext = r, t.convertKey = n })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r = (function () { function t(e, t) { this.context = e, this.calcIdToGroupingKeysIndex = {}, this.initialize(t) } return t.prototype.initialize = function (e) { var t = this.context, r = t.selects, i = t.dataMemberIdToMetadata[e]; this.identityFields = i.identityFields, this.identityFieldsCount = this.identityFields.length; for (var a = i.axisGrouping, n = a.Keys, o = 0; o < this.identityFieldsCount; o++) { var s = n[o]; this.calcIdToGroupingKeysIndex[s.Calc || r[s.Select].Value] = o } }, t.prototype.reset = function () { this.identityParts = new Array(this.identityFieldsCount) }, t.prototype.addExpr = function (t, r) { var i = this.calcIdToGroupingKeysIndex[t], a = this.identityFields[i]; a && (this.identityParts[i] = e.SQExprBuilder.equal(a, r)) }, t.prototype.getIdentity = function () { for (var t, r = this.identityParts, i = this.identityFieldsCount, a = 0; a < i; a++)t = e.SQExprBuilder.and(t, r[a]); var n = e.createDataViewScopeIdentity(t); return n }, t.prototype.getIdentityFields = function () { return this.identityFields }, t })(); t.IdentityBuilder = r })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = e.DataShapeUtility.MaxValueAggregator, r = e.DataShapeUtility.MinValueAggregator, i = (function () { function i(e) { this.context = e, this.measureValueAggregatorsBySelectIdx = [] } return i.prototype.read = function (t, r) { void 0 === r && (r = !0); for (var i = this.context, a = i.selects, n = new Array(a.length), o = new Array(a.length); t.nextCalc();) { var s = i.aggregateCalcMetadata[t.calcId()]; s && s.aggregateKind && (e.DataShapeUtility.fillMetadataColumnAggregate(t.calcValue(), s, !1), 3 === s.aggregateKind && (n[s.selectIdx] = !0), 2 === s.aggregateKind && (o[s.selectIdx] = !0)) } r && this.addLocalAggregators(n, o) }, i.prototype.addLocalAggregators = function (e, i) { for (var a = this.measureValueAggregatorsBySelectIdx, n = this.context.measureSelectIndices, o = n.length, s = !1, u = 0; u < o; u++) { var c = n[u]; e[c] || (s = !0, a[c] || (a[c] = []), a[c].push(new r)), i[c] || (s = !0, a[c] || (a[c] = []), a[c].push(new t)) } this.hasLocalAggregators = s }, i.prototype.update = function (e, t) { if (this.hasLocalAggregators) { var r = this.measureValueAggregatorsBySelectIdx[t]; if (r) for (var i = 0, a = r; i < a.length; i++) { var n = a[i]; n.update(e) } } }, i.prototype.copyToColumns = function () { for (var e = this.context.measureSelectIndices, t = e.length, r = 0; r < t; r++) { var i = e[r], a = this.context.selectIndexToColumn[i], n = this.measureValueAggregatorsBySelectIdx[i]; if (n) { var o = a.aggregates; if (n) for (var s = 0, u = n; s < u.length; s++) { var c = u[s], l = c.value(); void 0 !== l && (a.aggregates || (o = a.aggregates = {}), a.aggregates[c.name] = l) } } } }, i })(); e.Aggregator = i })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i(e, t, r) { if (a.isCompatible(e)) return (new a).run(e, t, r) } r.categorical = i; var a = (function () { function r() { } return r.prototype.run = function (r, i, a) { this.metadata = a, this.context = r, this.dsrParser = i, this.selectIndexToCategoryColumn = {}, this.selectIndexToPrimaryValueColumn = {}, this.intersectionValueColumnsMap = [], this.primaryMeasureCount = 0, this.intersectionMeasureCount = 0, this.seriesSelectIndex = -1, this.primaryMeasureSelectIndexMap = [], this.intersectionMeasuresSelectIndexMap = [], this.selectIndexToValueColumnsMap = [], i.reset(), this.aggregator = new t.Aggregator(r); var n = this.dsrParser.dataShapes(); n.next(); var o = {}; if (0 === r.maxPrimaryDepth) { this.readSelectsAndCreateCategoryColumns(void 0, void 0); var s = o.values = e.DataViewTransform.createValueColumns(); this.readMeasuresWithNoGrouping(n, s) } else { var u = [], c = []; o.categories = u, this.readSelectsAndCreateCategoryColumns(u, c); var s = void 0; (this.intersectionMeasureCount > 0 || this.primaryMeasureCount > 0 || this.seriesSelectIndex >= 0) && (o.values = s = e.DataViewTransform.createValueColumns()), this.readSecondaryAndCreateValueColumns(s); var l = {}; this.readData(n, s, c, l), void 0 !== l.value && (o.lastMergeIndex = l.value) } return o }, r.isCompatible = function (e) { return e.maxPrimaryDepth <= 1 && e.maxSecondaryDepth <= 1 && !(0 === e.maxPrimaryDepth && e.maxSecondaryDepth > 0) && _.size(e.selects) > 0 }, r.prototype.readSelectsAndCreateCategoryColumns = function (e, r) { var i = this.context, a = i.selectIndexToColumn, n = i.selects, o = n.length, s = this.dsrParser.dataShapes().secondaryHierarchy(); this.primaryMeasureSelectIndexMap = new Array(n.length), this.intersectionMeasuresSelectIndexMap = new Array(n.length); for (var u = !!s, c = 0; c < o; c++) { var l = n[c]; if (l && l.Value) { if (l.Kind === t.SelectKind.Group) { if (null != l.SecondaryDepth) { this.seriesSelectIndex = c; continue } if (null != l.Depth) { var p = { source: a[c], values: [], identity: r }; e.push(p), this.selectIndexToCategoryColumn[c] = p } } else l.Kind === t.SelectKind.Measure && (u && null == l.Depth ? this.intersectionMeasuresSelectIndexMap[this.intersectionMeasureCount++] = c : this.primaryMeasureSelectIndexMap[this.primaryMeasureCount++] = c) } } }, r.prototype.readSecondaryAndCreateValueColumns = function (e) { var t = this.dsrParser.dataShapes().secondaryHierarchy(); return t ? (this.addIntersectionValueColumns(e, t), void (this.primaryMeasureCount > 0 && this.addPrimaryValueColumns(e))) : void this.addPrimaryValueColumns(e, !0) }, r.prototype.addIntersectionValueColumns = function (e, r) { for (var i, a = new Array, n = this.context; r.next();) { var o = r.id(), s = r.instances(); if (2 !== n.dataMemberIdToMetadata[o].kind) { var u = n.dataMemberIdToIdentityBuilder[o]; u || (u = new t.IdentityBuilder(n, o), n.dataMemberIdToIdentityBuilder[o] = u), i = u.getIdentityFields(); for (var c = -1; s.next();) { c++ , u.reset(); for (var l = void 0, p = void 0; s.nextCalc();) { p = s.calcId(); var d = this.context.calcInfo[p]; d.isGroupKeyButNotSelect || (l = s.calcValue()), d.forIdentity && u.addExpr(p, s.calcValueAsExpr()) } this.addIntersectionValueColumnsCore(e, a, p, l, c, u.getIdentity()) } 0 === e.length && 0 === a.length && this.addIntersectionValueColumnsCore(e, a, void 0, void 0, 0, void 0), e.grouped = function () { return a }, e.source = this.context.selectIndexToColumn[this.seriesSelectIndex], e.identityFields = i } else for (; s.next();); } }, r.prototype.addIntersectionValueColumnsCore = function (e, t, r, i, a, n) { for (var o = this.context, s = o.selects, u = this.intersectionMeasureCount, c = new Array(u), l = this.metadata.columns, p = function (t) { var r = void 0, u = d.intersectionMeasuresSelectIndexMap[t]; void 0 !== i ? (r = o.createColumns(l, u).column, r.groupName = i) : r = _.find(l, (function (e) { return e.index === u })); var p = d.createValueColumn(r, n, u, !!s[u].Highlight); e.push(p), c[t] = p; var f = s[u], h = d.intersectionValueColumnsMap[a]; h || (h = d.intersectionValueColumnsMap[a] = {}), h[f.Value] = p; var m = f.Highlight && f.Highlight.Value; m && (h[m] = p) }, d = this, f = 0; f < u; f++)p(f); var h = { values: c }; void 0 !== i && (h.name = i), void 0 !== n && (h.identity = n), t.push(h) }, r.prototype.addPrimaryValueColumns = function (e, t) { for (var r = new Array(this.primaryMeasureCount), i = this.context, a = i.selects, n = 0; n < this.primaryMeasureCount; n++) { var o = this.primaryMeasureSelectIndexMap[n], s = i.selectIndexToColumn[o], u = this.createValueColumn(s, void 0, o, !!a[o].Highlight); this.selectIndexToPrimaryValueColumn[o] = u, r[n] = u, e.push(u) } if (t && e) { var c = [{ values: r }]; e.grouped = function () { return c } } }, r.prototype.createValueColumn = function (e, t, r, i) { var a = { source: e, values: [] }; i && (a.highlights = []), t && (a.identity = t); var n = this.selectIndexToValueColumnsMap[r]; return n || (n = this.selectIndexToValueColumnsMap[r] = []), n.push(a), a }, r.prototype.readData = function (e, r, i, a) { var n = this.context, o = e.primaryHierarchy(); for (this.aggregator.read(e, 0 === this.intersectionMeasureCount); o.next();) { var s = o.id(), u = n.dataMemberIdToMetadata[s]; if (u) { var c = 1 === u.kind, l = n.dataMemberIdToIdentityBuilder[s]; !l && c && (l = new t.IdentityBuilder(n, s), n.dataMemberIdToIdentityBuilder[s] = l); for (var p = o.instances(); p.next();) { for (l && l.reset(), 1 === p.restartFlagKind() && (a.value = p.currentIndex()); p.nextCalc();)this.readPrimaryHierarchyCalc(p, l); l && i.push(l.getIdentity()), this.parseIntersections(p) } if (c) for (var d = l.getIdentityFields(), f = 0; f < n.selects.length; f++) { var h = this.selectIndexToCategoryColumn[f]; h && (h.identityFields = d) } } } this.aggregator.copyToColumns(), this.copyAggregatesToValueColumns() }, r.prototype.copyAggregatesToValueColumns = function () { for (var e = this.context.measureSelectIndices, r = this.context.selectIndexToColumn, i = e.length, a = 0; a < i; a++) { var n = e[a], o = r[n].aggregates; if (o) { var s = this.selectIndexToPrimaryValueColumn[n]; s && t.DataShapeUtility.copyAggregates(o, s); var u = this.selectIndexToValueColumnsMap[n]; if (u) for (var c = 0, l = u; c < l.length; c++) { var p = l[c]; t.DataShapeUtility.copyAggregates(o, p) } } } }, r.prototype.readPrimaryHierarchyCalc = function (e, r) { var i = e.calcId(), a = this.context.aggregateCalcMetadata[i]; if (a && 1 === a.aggregateKind) return void t.DataShapeUtility.fillMetadataColumnAggregate(e.calcValue(), a); var n = this.context.calcInfo[i]; if (n) { var o = e.calcValue(); if (n.kind === t.SelectKind.Group) n.isGroupKeyButNotSelect || this.selectIndexToCategoryColumn[n.selectIdx].values.push(o), n.forIdentity && r.addExpr(i, e.calcValueAsExpr()); else if (n.kind === t.SelectKind.Measure) { var s = n.calcKind; 1 === s ? (this.selectIndexToPrimaryValueColumn[n.selectIdx].values.push(o), this.aggregator.update(o, n.selectIdx)) : 3 === s && this.selectIndexToPrimaryValueColumn[n.selectIdx].highlights.push(o) } } }, r.prototype.parseIntersections = function (e) { var t = e.intersections(); if (t) for (var r = this.context.calcInfo, i = 0; t.next();) { var a = this.intersectionValueColumnsMap[i]; if (t.nextCalc()) { if (!this.parseIntersectionCalc(t, a, r)) continue; for (i++; t.nextCalc();)this.parseIntersectionCalc(t, a, r) } } }, r.prototype.parseIntersectionCalc = function (e, t, r) { var i = e.calcId(), a = r[i]; if (a) { switch (a.calcKind) { case 1: return t[i].values.push(e.calcValue()), !0; case 3: return t[i].highlights.push(e.calcValue()), !0; case 4: case 6: return !0; case 2: case 5: return !1 } } }, r.prototype.readMeasuresWithNoGrouping = function (e, t) { this.aggregator.read(e), this.aggregator.copyToColumns(); var r = e.primaryHierarchy(); if (r.next()) { this.addPrimaryValueColumns(t, !0); for (var i = this.context.calcInfo, a = r.instances(); a.next();)for (; a.nextCalc();) { var n = a.calcId(), o = i[n]; o && (1 === o.calcKind ? this.selectIndexToPrimaryValueColumn[o.selectIdx].values.push(a.calcValue()) : 3 === o.calcKind && this.selectIndexToPrimaryValueColumn[o.selectIdx].highlights.push(a.calcValue())) } } }, r })() })(r = t.converters || (t.converters = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (e) {
            var t; !(function (t) {
                function r(e, t, r) { return new i(e, t, r).run() } t.createMatrix = r; var i = (function () {
                    function t(t, r, i) { this.context = t, this.dsrParser = r, this.metadata = i, this.primaryHierarchyLevelsCount = t.maxPrimaryDepth, this.secondaryHierarchyLevelsCount = t.maxSecondaryDepth, this.aggregator = new e.Aggregator(t) } return t.prototype.run = function () { this.createHierarchiesSources(), this.valueSources = this.readValueSources(); var e = this.aggregator, t = this.dsrParser; t.reset(); var r = t.dataShapes(); this.calcInfoCache = {}; r.next(); e.read(r, 1 === this.primaryHierarchyLevelsCount && 0 === this.secondaryHierarchyLevelsCount); var i = r.secondaryHierarchy(), a = this.readHierarchy(1, i), n = r.primaryHierarchy(), o = this.readHierarchy(0, n); return e.copyToColumns(), { rows: o, columns: a, valueSources: this.valueSources } }, t.prototype.createHierarchiesSources = function () {
                        for (var t = this.context.selects, r = this.primaryHierarchyLevelsCount, i = this.secondaryHierarchyLevelsCount, a = this.primaryHierarchySources = new Array(r), n = this.secondaryHierarchySources = new Array(i), o = 0; o < r; o++)a[o] = []; for (var o = 0; o < i; o++)n[o] = []; for (var s = this.metadata.columns, u = s.length, c = this.columnIndexToZoneIndex = new Array(u), o = 0; o < u; o++) {
                            var l = s[o], p = l.index; if (null != p) {
                                var d = t[p], f = void 0; d.Kind === e.SelectKind.Group && (null != d.Depth ? f = a[d.Depth] : null != d.SecondaryDepth && (f = n[d.SecondaryDepth]),
                                    c[o] = f.length, f.push(l))
                            }
                        }
                    }, t.prototype.readHierarchy = function (e, t) { var r, i, a = this.measureCount; switch (e) { case 0: if (r = this.context.primaryAxisGroupings, i = this.primaryHierarchyLevelsCount, !r) return this.createRowHierarchyForNoGroupings(t); break; case 1: if (r = this.context.secondaryAxisGroupings, i = this.secondaryHierarchyLevelsCount, !r) return 0 === a ? { levels: [], root: { children: [] } } : this.createColumnHierarchyForNoGroupings() }for (var n = { levels: new Array(i), root: {} }, o = 0 === e ? this.primaryHierarchySources : this.secondaryHierarchySources, s = 0; s < i; s++)n.levels[s] = { sources: o[s] }; 1 === e && a > 1 && n.levels.push(this.createColumnHierarchyMeasuresLevel()); var u = this.context; return this.readNodeChildren(u, u.calcInfo, this.columnIndexToZoneIndex, u.dataMemberIdToIdentityBuilder, u.dataMemberIdToMetadata, n.root, t, 0, e), n }, t.prototype.readNodeChildren = function (t, r, i, a, n, o, s, u, c) { if (s && 0 !== s.count()) for (var l; s.next();) { var p = s.id(), d = n[p]; if (d) { var f = 2 === d.kind, h = f && 0 === u, m = void 0, y = void 0; f || (m = a[p], m || (m = a[p] = new e.IdentityBuilder(t, p)), y = m.getIdentityFields()); var v = s.instances(); if (!v || 0 === v.count()) continue; y && (o.childIdentityFields = y), l || (l = o.children = []); var g = this.calcInfoCache[p]; for (null == g && (g = this.calcInfoCache[p] = []); v.next();)l.push(this.readNode(t, a, n, r, i, v, u, f, h, g, c, m)) } } }, t.prototype.readNode = function (t, r, i, a, n, o, s, u, c, l, p, d) { var f = t.aggregateCalcMetadata, h = { level: s }; 1 === o.restartFlagKind() && (h.isMerge = !0), u ? h.isSubtotal = !0 : d.reset(); for (var m = [], y = 0; o.nextCalc(); y++) { var v = o.calcId(), g = l[y]; if (!g) { if (g = a[v], !g) continue; l[y] = g } var S = g.columnIndex, C = n[S], x = g.kind, D = void 0; if (x === e.SelectKind.Group) { var E = o.calcValueAsExpr(); D = E.value, g.isGroupKeyButNotSelect || (m[C] = { value: D, levelSourceIndex: C }), d.addExpr(v, E) } else if (x === e.SelectKind.Measure) { if (this.secondaryHierarchyLevelsCount > 0) continue; null == h.values && (h.values = {}); var w = h.values[C]; w || (w = h.values[C] = {}, C > 0 && (w.valueSourceIndex = C)), D = o.calcValue(), this.readNodeValueCalc(w, D, g), !c || 2 !== g.calcKind && 5 !== g.calcKind || e.DataShapeUtility.fillMetadataColumnAggregate(D, f[v]) } if (g.hasDuplicateColumnIndices) for (var b = 0, I = t.calcIdToColumnIndices[v]; b < I.length; b++) { var M = I[b], V = n[M]; m[V] || (m[V] = { value: D, levelSourceIndex: V }) } } u || (h.levelValues = m, h.value = m[0].value, h.identity = d.getIdentity()); var R = o.intersections(), T = o.members(); return R ? this.readIntersectionsValues(a, n, h, R) : T ? this.readNodeChildren(t, a, n, r, i, h, T, s + 1, p) : 1 === p && this.measureCount > 1 && (s === this.secondaryHierarchyLevelsCount - 1 || h.isSubtotal) && this.createColumnHierarchyMeasuresNodes(h), h }, t.prototype.readIntersectionsValues = function (e, t, r, i) { var a = this.measureCount; if (0 !== a) for (var n = r.values = {}, o = 0; i.next();) { for (var s = 0; s < a; s++) { var u = n[a * o + s] = {}; s > 0 && (u.valueSourceIndex = s) } for (; i.nextCalc();) { var c = e[i.calcId()]; if (c) { var l = t[c.columnIndex], u = n[a * o + l]; this.readNodeValueCalc(u, i.calcValue(), c) } } o++ } }, t.prototype.readNodeValueCalc = function (e, t, r) { switch (r.calcKind) { case 1: case 4: e.value = t, this.aggregator.update(t, r.selectIdx); break; case 2: case 5: e.value = t; break; case 3: case 6: e.highlight = t; break; default: debug.assertNever(r.calcKind) } }, t.prototype.createRowHierarchyForNoGroupings = function (e) { var t = { level: 0, values: {} }, r = { levels: [], root: { children: [t] } }; e.next(); var i = e.instances(); return this.readNodeForNoGroupings(t, i), r }, t.prototype.readNodeForNoGroupings = function (e, t) { var r = this.context.calcInfo, i = this.columnIndexToZoneIndex; t.next(); for (var a = e.values = {}; t.nextCalc();) { var n = t.calcId(), o = r[n]; if (o) { var s = i[o.columnIndex], u = a[s]; u || (u = a[s] = {}, s > 0 && (u.valueSourceIndex = s)), this.readNodeValueCalc(u, t.calcValue(), o) } } }, t.prototype.createColumnHierarchyForNoGroupings = function () { var e = [], t = {}; return this.measureCount > 0 && (e = [this.createColumnHierarchyMeasuresLevel()], this.createColumnHierarchyMeasuresNodes(t)), { levels: e, root: t } }, t.prototype.createColumnHierarchyMeasuresLevel = function () { for (var e = this.measureCount, t = new Array(e), r = 0; r < e; r++)t[r] = this.valueSources[r]; return { sources: t } }, t.prototype.createColumnHierarchyMeasuresNodes = function (e) { for (var t = null == e.level ? 0 : this.secondaryHierarchyLevelsCount, r = this.measureCount, i = e.children = new Array(r), a = e.isSubtotal, n = 0; n < r; n++) { var o = i[n] = { level: t }; n > 0 && (o.levelSourceIndex = n), a && (o.isSubtotal = !0) } }, t.prototype.readValueSources = function () { for (var e = this.context, t = e.selects, r = e.measureSelectIndices, i = r.length, a = e.selectIndexToColumn, n = e.selectIndexToColumnIndex, o = this.columnIndexToZoneIndex, s = [], u = 0; u < i; u++) { var c = r[u], l = t[c], p = n[c], d = a[c]; if (o[p] = s.length, s.push(d), l.DynamicFormat && l.DynamicFormat.Format) { var f = d.formatSource && d.formatSource.formatString; o[p + 1] = s.length, s.push(f) } } return this.measureCount = s.length, s }, t
                })()
            })(t = e.converters || (e.converters = {}))
        })(t = e.dsr || (e.dsr = {}))
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(e, t, r) { return new i(e, t, r).run() } t.createTable = r; var i = (function () { function t(t, r, i) { this.context = t, this.dsrParser = r, this.metadata = i, this.aggregator = new e.Aggregator(t) } return t.prototype.run = function () { if (this.isCompatible()) { var e = this.metadata, t = { columns: e.columns }, r = this.dsrParser; r.reset(); var i = r.dataShapes(), a = (i.next(), this.aggregator); a.read(i); var n = i.primaryHierarchy(); return 1 === this.context.maxPrimaryDepth ? this.readRows(t, n) : 0 === this.context.maxPrimaryDepth && this.readRowWithoutGrouping(t, n), a.copyToColumns(), t } }, t.prototype.readRows = function (t, r) { var i, a, n = this.context, o = this.getRowCellsCount(r); for (r.reset(); r.next();) { var s = r.id(), u = n.dataMemberIdToMetadata[s]; if (u) { var c = u.kind, l = r.instances(), p = []; if (1 === c) { var d = n.dataMemberIdToIdentityBuilder[s]; d || (d = n.dataMemberIdToIdentityBuilder[s] = new e.IdentityBuilder(n, s)); var f = u.axisGrouping, h = l.count(); i = new Array(h); for (var m = new Array(h), y = 0; l.next(); y++)1 === l.restartFlagKind() && (a = y), d.reset(), i[y] = this.readRow(l, f, p, o, d, !1), m[y] = d.getIdentity(); _.isEmpty(m) || (t.identity = m), t.identityFields = d.getIdentityFields() } else if (2 === c) { if (0 === o) continue; for (; l.next();) { for (var v = this.readRow(l, null, p, o, null, !0), g = v.length, y = 0; y < g; y++) { var S = v[y]; void 0 === S && (v[y] = null) } t.totals = v } } t.rows = i, void 0 !== a && (t.lastMergeIndex = a) } } }, t.prototype.readRow = function (t, r, i, a, n, o) { var s, u = this.aggregator, c = new Array(a), l = 0 === i.length; l && r && (s = this.createCalcIdToGroupingIdentityIndexMap(r), i.length = t.calcCount()); for (var p = this.context, d = p.aggregateCalcMetadata, f = 0; t.nextCalc(); f++) { var h = t.calcId(); if (l) { var m = s && s[h], y = p.calcInfo[h], v = y && y.columnIndex, g = y && y.selectIdx; !y || 3 !== y.calcKind && 6 !== y.calcKind || (v = null), i[f] = { axisGroupingIndex: m, columnIndex: v, hasDuplicateColumnIndices: y && y.hasDuplicateColumnIndices, isGroupKeyOnly: null != m && null == v, selectIndex: g, aggregateMetadata: d[h] } } var S = i[f]; if (null != S.columnIndex) { var C = t.calcValue(); if (c[S.columnIndex] = C, o ? e.DataShapeUtility.fillMetadataColumnAggregate(C, S.aggregateMetadata) : u.update(C, S.selectIndex), S.hasDuplicateColumnIndices) for (var x = 0, D = p.calcIdToColumnIndices[h]; x < D.length; x++) { var E = D[x]; void 0 === c[E] && (c[E] = C) } } n && n.addExpr(h, t.calcValueAsExpr()) } return c }, t.prototype.readRowWithoutGrouping = function (e, t) { if (t.next()) { var r = t.instances(), i = []; if (r.next()) { for (var a = []; r.nextCalc();) { var n = r.calcId(), o = this.context.calcInfo[n]; o && 3 !== o.calcKind && (a[o.columnIndex] = r.calcValue()) } i.push(a) } e.rows = i } }, t.prototype.getRowCellsCount = function (e) { for (e.reset(); e.next();) { var t = e.id(), r = this.context.dataMemberIdToMetadata[t]; if (r && 1 === r.kind) { var i = e.instances(); if (i.next()) { for (var a = 0; i.nextCalc();) { var n = i.calcId(), o = this.context.calcInfo[n]; !o || 1 !== o.calcKind && 2 !== o.calcKind || (o.hasDuplicateColumnIndices ? a += _.size(this.context.calcIdToColumnIndices[n]) : a++) } return a } } } return 0 }, t.prototype.createCalcIdToGroupingIdentityIndexMap = function (e) { for (var t = {}, r = e.Keys, i = this.context.selects, a = r.length, n = 0; n < a; n++) { var o = r[n]; t[o.Calc || i[o.Select].Value] = n } return t }, t.prototype.isCompatible = function () { var e = this.context; return 0 === e.maxSecondaryDepth && e.maxPrimaryDepth <= 1 }, t })() })(t = e.converters || (e.converters = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(e, t) { return new i(e, t).run() } t.createTree = r; var i = (function () { function t(t, r) { this.context = t, this.dsrParser = r, this.calcIndexToCalcMetadataDictionary = {}, this.aggregator = new e.Aggregator(t) } return t.prototype.run = function () { if (this.isCompatible()) { var e = {}; return this.parseTree(e), { root: e } } }, t.prototype.parseTree = function (e) { var t = this.dsrParser; t.reset(); var r = t.dataShapes(), i = (r.next(), this.context.maxPrimaryDepth); this.aggregator.read(r, 1 === i), 0 === i ? this.parseDataMembersWithNoGrouping(e, r.primaryHierarchy()) : this.parseDataMembers(e, r.primaryHierarchy(), 0), this.parseAggregates(e) }, t.prototype.parseDataMembers = function (t, r, i) { for (; r.next();) { var a = this.context, n = r.id(), o = a.dataMemberIdToMetadata[n]; if (o) { var s = r.instances(), u = this.calcIndexToCalcMetadataDictionary[n]; switch (u || (u = [], this.calcIndexToCalcMetadataDictionary[n] = u), o.kind) { case 1: var c = a.dataMemberIdToIdentityBuilder[n]; c || (c = new e.IdentityBuilder(a, n), a.dataMemberIdToIdentityBuilder[n] = c); var l = c.getIdentityFields(); l && (t.childIdentityFields = l), this.parseInstances(t, s, u, c, !1, i); break; case 2: this.parseInstances(t, s, u, null, !0, i) } } } }, t.prototype.parseInstances = function (t, r, i, a, n, o) { var s = this.context, u = this.aggregator, c = s.aggregateCalcMetadata, l = t.children; for (n || !l && r.count() > 0 && (l = t.children = new Array(r.count())); r.next();) { var p = void 0, d = void 0, f = void 0; n || a.reset(); var h = 0 === i.length; h && (i.length = r.calcCount()); for (var m = 0; r.nextCalc(); m++) { n && (p = t.values), p || (p = {}); var y = r.calcId(); if (h) { var v = s.calcInfo[y]; i[m] = v } var g = i[m]; if (g) { var S = r.calcValue(), C = g.calcKind, x = g.kind, D = g.selectIdx; if (n) this.addTreeNodeMeasureValues(p, D, C, S), 0 === o && e.DataShapeUtility.fillMetadataColumnAggregate(S, c[y]); else { var E = g.isGroupKeyButNotSelect; E || this.addTreeNodeMeasureValues(p, D, C, S), x === e.SelectKind.Group ? (E || (f = S), a.addExpr(y, r.calcValueAsExpr())) : x === e.SelectKind.Measure && 1 === C && (d = S, u.update(S, D)) } } } if (n) t.values = p, 1 === r.restartFlagKind() && (t.isMerge = !0); else { var w = { values: p, identity: a.getIdentity() }; void 0 !== f && (w.name = f), void 0 !== d && (w.value = d), 1 === r.restartFlagKind() && (w.isMerge = !0); var b = r.members(); b && this.parseDataMembers(w, b, o + 1), l[r.currentIndex()] = w } } }, t.prototype.addTreeNodeMeasureValues = function (e, t, r, i) { var a = e[t]; switch (!a && this.isSupportedMeasureType(r) && (a = e[t] = {}), r) { case 1: a.value = i; break; case 2: a.subtotal = i; break; case 3: a.highlight = i; break; case 4: case 5: case 6: } }, t.prototype.isSupportedMeasureType = function (e) { return 1 === e || 2 === e || 3 === e }, t.prototype.parseDataMembersWithNoGrouping = function (e, t) { t.next(); var r = t.instances(); r.next(); for (var i, a = this.context.calcInfo; r.nextCalc();) { e.values || (e.values = i = {}); var n = a[r.calcId()]; if (n) { var o = n.calcKind, s = r.calcValue(); this.addTreeNodeMeasureValues(i, n.selectIdx, o, s), 1 === o && (e.value = s) } } }, t.prototype.isCompatible = function () { return 0 === _.size(this.context.secondaryAxisGroupings) }, t.prototype.parseAggregates = function (t) { var r = this.context; this.aggregator.copyToColumns(); for (var i = r.measureSelectIndices, a = i.length, n = 0; n < a; n++) { var o = i[n], s = r.selectIndexToColumn[o].aggregates, u = t.values; if (s) { u || (u = t.values = {}); var c = u[o]; c || (c = u[o] = {}), e.DataShapeUtility.copyAggregates(s, c) } } }, t })() })(t = e.converters || (e.converters = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(e, t) { if (i.isCompatible(e)) return new i(e, t).run() } t.createSingle = r; var i = (function () { function t(t, r) { this.context = t, this.dsrParser = r, this.aggregator = new e.Aggregator(t) } return t.prototype.run = function () { return this.parseSingle() }, t.prototype.parseSingle = function () { var e = this.dsrParser; e.reset(); var t = e.dataShapes(); t.next(); return this.aggregator.read(t, !1), this.aggregator.copyToColumns(), 0 === this.context.maxPrimaryDepth ? this.parseMeasureValue(t.primaryHierarchy()) : this.parseSubtotal(t.primaryHierarchy()) }, t.prototype.parseMeasureValue = function (e) { for (; e.next();)return this.parseInstance(e.instances()) }, t.prototype.parseSubtotal = function (e) { for (; e.next();) { if (2 === this.context.dataMemberIdToMetadata[e.id()].kind) return this.parseInstance(e.instances()) } }, t.prototype.parseInstance = function (t) { for (var r, i, a = this.context, n = a.calcInfo; t.next();)for (; t.nextCalc();) { var o = t.calcId(), s = n[o]; if (s) { var u = s.calcKind, c = 2 === u; (1 === u || c) && (r = t.calcValue(), i = s.selectIdx, c && e.DataShapeUtility.fillMetadataColumnAggregate(r, a.aggregateCalcMetadata[o])) } } if (void 0 !== r) return { column: a.selectIndexToColumn[i], value: r } }, t.isCompatible = function (e) { return 0 === e.maxSecondaryDepth && 1 === e.measureSelectIndices.length }, t })() })(t = e.converters || (e.converters = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var r; !(function (i) {
            var a; !(function (a) {
                var n; !(function (a) {
                    function n(r, a, n, s, c, p, d, f) { if (!l(n)) return null; var h = n.DataShapes[0]; if (h["odata.error"]) { var m = new e.DsrClientError(h["odata.error"]); return p && (m.requestId = p), { error: m } } var y = new S(r, a, f, new C(a, h), s), v = u(y).read(a.Expressions, h, c), g = { dataView: v }; if (h.RestartTokens && (g.restartToken = h.RestartTokens), h.DataLimitsExceeded && h.DataLimitsExceeded.length > 0) { g.warnings || (g.warnings = []); var x = new i.DsrLimitsWarning(a, h.DataLimitsExceeded, h.Calculations); g.warnings.push(x), o(v, x.limits) } if (h.DataShapeMessages && h.DataShapeMessages.length > 0) for (var D = 0, E = h.DataShapeMessages; D < E.length; D++) { var w = E[D]; i.KnownDsrMessages[w.Code] && w.Severity === t.dsr.getDsrMessageSeverityValue(0) && (g.warnings || (g.warnings = []), g.warnings.push(new i.DsrMessage(w))) } return g.dataView && !_.isEmpty(d) && (t.ClientSideFilter.applyClientSideFilters(g.dataView, d), g.disallowPersisting = !0), g } function o(e, t) { if (e.metadata.dataReduction = {}, e.categorical) { var r = e.metadata.dataReduction.categorical = {}; t.Primary && (r.categories = s(t.Primary)), t.Secondary && (r.values = s(t.Secondary)), t.Intersection && (r.metadata = s(t.Intersection)) } if (e.matrix) { var r = e.metadata.dataReduction.matrix = {}; t.Primary && (r.rows = s(t.Primary)) } } function s(e) { switch (e.Type) { case 3: return { binnedLineSample: {} }; case 4: return { overlappingPointsSample: {} }; default: return {} } } function u(e) { if (null != e.scriptVisualBinding) return new y(e); for (var t = 0, r = 0, i = e.selects, a = 0, n = i.length; a < n; a++) { var o = i[a]; o && (null != o.Depth && (t = Math.max(t, o.Depth + 1)), null != o.SecondaryDepth && (r = Math.max(r, o.SecondaryDepth + 1))) } return r >= 1 && 1 === t ? new g(e) : new v(e) } function c(e, t) { var r = e.values; r || (r = e.values = {}); var i = r[t]; return i || (i = r[t] = {}), i } function l(e) { return e && 1 === _.size(e.DataShapes) } var p = jsCommon.EnumExtensions, d = jsCommon.PerfTimer, f = i.DataShapeUtility.MaxValueAggregator, h = i.DataShapeUtility.MinValueAggregator; a.read = n, a.applyReductionMetadata = o; var m; !(function (e) { function t(e, t, r, i) { var a = d.start("DSR.matrix(" + e.perfId + ")"), u = [], c = [], l = []; n(e, u, c, l, i.columns); var p = [], f = s(e, c, l.length, t, r, p), h = o(e, u, t, r, p), m = { root: h, levels: u }, y = { root: f, levels: c }, v = { rows: m, columns: y, valueSources: l }; return a(), v } function r(e) { for (var t = { sources: [] }, r = 0, i = e.length; r < i; r++)t.sources.push(e[r]); return t } function a(e, t, r) { for (var i = 0, a = t.length; i < a; i++) { var n = t[i]; if (n && n.index === r && void 0 === n.groupName) return n } return e.createColumns(t, r) } function n(e, t, n, o, s) { for (var u = e.selects, c = 0, l = u.length; c < l; c++) { var p = u[c]; if (p) { var d = a(e, s, c); if (p.Kind === i.SelectKind.Measure) o.push(d); else if (null != p.Depth) { var f = t[p.Depth]; null != f ? f.sources.push(d) : t[p.Depth] = r([d]) } else if (null != p.SecondaryDepth) { var h = n[p.SecondaryDepth]; null != h ? h.sources.push(d) : n[p.SecondaryDepth] = r([d]) } p.DynamicFormat && p.DynamicFormat.Format && e.enableCellLevelFormatting && o.push(d.formatSource.formatString) } } var m = o.length; (m > 1 || m > 0 && (0 === t.length || 0 === n.length)) && n.push(r(o)) } function o(e, t, r, a, n) { if (a.PrimaryHierarchy && 0 !== a.PrimaryHierarchy.length) { var o; r && r.Primary && (o = r.Primary.Groupings); var s = 0, u = 0; r && (s = l(r.Primary), u = l(r.Secondary)); var c = _.filter(e.selects, (function (e) { return e && e.Kind === i.SelectKind.Measure })); return f(e, t, a.PrimaryHierarchy, o, (function (t, r, i, a, o) { C(r, c, i, a, n, s, u, e.enableCellLevelFormatting), t.stats.primary++ })) } } function s(e, t, r, i, a, n) { if (!a.SecondaryHierarchy || 0 === a.SecondaryHierarchy.length) { var o = {}; return p(o, r, 0, !1), o } var s; return i && i.Secondary && (s = i.Secondary.Groupings), f(e, t, a.SecondaryHierarchy, s, (function (r, i, a, o, s) { if (s < t.length) if (o.isSubtotal) { var c = t.length - 1, l = t[c].sources.length; l > 1 && p(o, l, c, !0) } else { var d = t[s]; p(o, d.sources.length, s, !1) } n.push(u(o)), e.stats.secondary++ })) } function u(e) { return e.isSubtotal ? e.level : e.level + 1 } function l(e) { return e && e.Groupings ? e.Groupings.length : 0 } function p(e, t, r, i) { e.children = []; for (var a = 0; a < t; a++) { var n = { level: r }; a > 0 && (n.levelSourceIndex = a), e.children.push(n), i && (n.isSubtotal = !0) } } function f(e, t, r, i, a) { var n = {}; return h(e, t, n, r, i, 0, a), n } function h(e, t, r, i, a, n, o) { if (i) for (var s = e.selects, u = m(t, n), c = 0, l = i.length; c < l; c++)for (var p = i[c], d = 0, f = 0, g = p.Instances.length; f < g; f++) { var S = p.Instances[f]; if (0 === d && (d = v(s, a, n, p, S), 4 === d)) break; var C = { level: n }; if (r.children || (r.children = []), r.children.push(C), 1 === d) { var x = y(s, S.Calculations, u); if (!_.isEmpty(x)) { C.levelValues = x; var D = _.last(x); C.value = D.value, D.levelSourceIndex > 0 && (C.levelSourceIndex = D.levelSourceIndex) } } else 3 === d && (C.isSubtotal = !0); S.RestartFlag && 1 === S.RestartFlag && (C.isMerge = !0), a && 1 === d && (r.childIdentityFields = e.readKeys(a, n), C.identity = e.readIdentity(a, S, n)); var E = S.Members; E && E.length > 0 ? h(e, t, C, E, a, n + 1, o) : o && o(e, d, S, C, n + 1) } } function m(e, t) { var r = [], i = e && e[t] && e[t].sources; if (!_.isEmpty(i)) for (var a = 0, n = i.length; a < n; a++) { var o = i[a]; r[o.index] = a } return r } function y(e, t, r) { for (var a, n = 0, o = e.length; n < o; n++) { var s = e[n]; if (s && s.Value && s.Kind === i.SelectKind.Group) { var u = i.DataShapeUtility.findAndParseCalculation(t, s.Value); void 0 !== u && (a || (a = []), a.push({ levelSourceIndex: r[n], value: u })) } } return a } function v(e, t, r, a, n) { if (t && t.length > r && null != a.Id) { var o = t[r]; if (a.Id === o.Member) return 1; if (a.Id === o.SubtotalMember) return 3 } var s = n.Calculations; if (s) { for (var u = !1, c = 0, l = e.length; c < l; c++) { var p = e[c]; if (p && i.DataShapeUtility.findCalculation(s, p.Value)) { if (p.Kind === i.SelectKind.Group) return 1; u || p.Kind !== i.SelectKind.Measure || (u = !0) } } if (u) return 2 } return 4 } function g(e, t, r, i, a, n, o, s, u) { if (r) for (var c = { index: 0 }, l = 0, p = t.length; l < p; l++) { var d = t[l], f = d.Highlight, h = f && f.Value, m = f && f.DynamicFormat && f.DynamicFormat.Format; if (S(e, r, i, a, c, n, o, s, d, d.Value, h, d.Subtotal), d.DynamicFormat && d.DynamicFormat.Format && u) { var y = _.map(d.SubtotalDynamicFormat, (function (e) { return e && e.Format })); S(e, r, i, a, c, n, o, s, d, d.DynamicFormat.Format, m, y) } } } function S(e, t, r, a, n, o, s, l, p, d, f, h) { var m = c(r, a.index), y = null; if (3 !== e && (y = i.DataShapeUtility.findAndParseCalculation(t, d)), null == y) { var v = u(r), g = x(t, h, v, o, s, l); void 0 !== g && (y = g) } f && (m.highlight = i.DataShapeUtility.findAndParseCalculation(t, f)), m.value = y, n.index > 0 && (m.valueSourceIndex = n.index), a.index++ , n.index++ } function C(e, t, r, i, a, n, o, s) { var u = r.Intersections, c = { index: 0 }; if (u) { for (var l = 0, p = u.length; l < p; l++)if (u[l].Calculations) { var d = a[l]; g(e, t, u[l].Calculations, i, c, d, n, o, s) } } else g(e, t, r.Calculations, i, c, 0, n, o, s) } function x(e, t, r, a, n, o) { if (t) { var s = i.DataShapeUtility.computeAggIdx(r, a, n, o); if (s < t.length) return i.DataShapeUtility.findAndParseCalculation(e, t[s]) } } e.parse = t })(m || (m = {})); var y = (function () { function e(e) { this._context = e } return e.prototype.read = function (e, r, a) { var n = this, o = { metadata: { columns: [] } }; return a.script = d.logTime((function () { if (r.PrimaryHierarchy && r.PrimaryHierarchy.length > 0) { var e = r.PrimaryHierarchy[0]; if (e && e.Instances.length > 0) { var a = e.Instances[0], s = a.Calculations, u = n._context.scriptVisualBinding.PayloadCalculationId || n._context.scriptVisualBinding.ImageCalculationId, c = i.DataShapeUtility.findCalculation(s, u); if (c) { var l = c.Value, p = t.PrimitiveValueEncoding.parseBinary(l); p && (o.scriptResult = { payloadBase64: p }) } } } })), o }, e })(), v = (function () { function r(e) { this.context = e } return r.prototype.read = function (e, t, r) { var i = this, a = this.context, n = this.readMetadata(t.IsComplete), o = { metadata: n }, s = a.includes(16), u = a.includes(1), c = a.includes(4), l = a.includes(8); if (s || u || c || l) { var p, f = d.logTime((function () { p = i.parseTree(n.columns, e, t) })); s && (r.tree = f + d.logTime((function () { var e = i.createTree(n, p); e && (o.tree = e) }))), u && (r.categorical = f + d.logTime((function () { var e = i.categorize(n, p); e && (o.categorical = e) }))), c && (r.single = f + d.logTime((function () { var e = i.createSingleValue(n, p); e && (o.single = e) }))), l && (r.table = f + d.logTime((function () { var e = i.createTable(n, p); e && (o.table = e) }))) } return a.includes(2) && (r.matrix = d.logTime((function () { var r = m.parse(i.context, e, t, o.metadata); r && (o.matrix = r) }))), o }, r.prototype.readMetadata = function (e) { for (var t = { columns: [] }, r = this.context, i = r.selects, a = 0, n = i.length; a < n; a++) { i[a] ? r.createColumns(t.columns, a) : r.actionHistory |= 1 } return e || (t.segment = {}), t }, r.prototype.parseTree = function (e, t, a) { var n = d.start("DSR.tree(" + this.context.perfId + ")"), o = {}, s = this.context.selects; this.parseRootAggregates(e, o); var u = i.DataShapeUtility.getTopLevelPrimaryDynamicMember(a, t, !0); if (u) { var c = a.PrimaryHierarchy[0]; u !== c && this.parseValues(s, o, r.getFirstInstanceCalcs(c)); var l = void 0; t && t.Primary && (l = t.Primary.Groupings), this.parseRecursive(o, u, l, 0, e) } else _.isEmpty(a.PrimaryHierarchy) || this.parseValues(s, o, r.getFirstInstanceCalcs(a.PrimaryHierarchy[0])); return n(), o }, r.prototype.parseRecursive = function (e, t, r, a, n) { var o, s = this.context, u = t.Instances, c = u.length; c && (e.children = [], 0 === a && (o = x.create(e, s))), r && (e.childIdentityFields = s.readKeys(r, a)); for (var l = 0; l < c; l++) { var p = u[l], d = {}; e.children.push(d), p.RestartFlag && 1 === p.RestartFlag && (d.isMerge = !0), this.parseValues(s.selects, d, p.Calculations, o), r && (d.identity = s.readIdentity(r, p, a)); var f = p.Members; if (this.parseAggregates(s.selects, d, p.Calculations, f, a + 1), !_.isEmpty(f)) { var h = i.DataShapeUtility.getDynamicMember(f, r, a + 1); h && this.parseRecursive(d, h, r, a + 1) } } o && o.complete(n) }, r.getFirstInstanceCalcs = function (e) { var t = e.Instances; return t.length > 0 ? t[0].Calculations : null }, r.prototype.parseRootAggregates = function (e, t) { for (var r = 0, a = e.length; r < a; r++) { var n = e[r], o = n.aggregates; o && i.DataShapeUtility.copyAggregates(o, c(t, r)) } }, r.prototype.parseAggregates = function (e, t, r, a, n) { for (var o = 0, s = e.length; o < s; o++) { var u = e[o]; if (u) { var l = C.parseAggregates(u, r, a, n); if (l) { var p = this.context.selectIndexToColumnIndexMap[o]; i.DataShapeUtility.copyAggregates(l, c(t, p)) } } } }, r.prototype.parseValues = function (e, t, r, a) { if (!_.isEmpty(r)) for (var n = 0, o = 0, s = e.length; n < s; n++) { var u = e[n]; if (u) { if (u.Value) { var l = i.DataShapeUtility.findAndParseCalculation(r, u.Value); void 0 !== l && (u.Kind === i.SelectKind.Group ? t.name = l : (t.value = l, a && a.add(o, l)), c(t, o).value = l) } if (u.Highlight) { var p = i.DataShapeUtility.findAndParseCalculation(r, u.Highlight.Value); void 0 !== p && (c(t, o).highlight = p) } if (o++ , u.DynamicFormat && u.DynamicFormat.Format && this.context.enableCellLevelFormatting) { var l = i.DataShapeUtility.findAndParseCalculation(r, u.DynamicFormat.Format); c(t, o).value = l, o++ } } } }, r.prototype.categorize = function (e, r) { if (!this.canCategorize()) return null; for (var a, n = d.start("DSR.categorical(" + this.context.perfId + ")"), o = {}, s = 0, u = e.columns.length; s < u; s++) { var c = e.columns[s]; if (void 0 !== c.index) if (c.isMeasure) { var l = { source: c, values: [] }, p = c.aggregates; p && i.DataShapeUtility.copyAggregates(p, l), o.values || (o.values = t.DataViewTransform.createValueColumns()), o.values.push(l) } else a || (a = []), a.push({ columnIndex: s, metadataColumn: c }) } if (a) { o.categories = []; for (var f = void 0, h = 0, m = a.length; h < m; h++) { var y = a[h], v = r.children, g = { source: y.metadataColumn, values: [] }; if (v) for (var S = 0, C = v.length; S < C; S++) { var x = v[S]; if (g.values.push(x.values[y.columnIndex].value), 0 === h && (this.writeCategoricalValues(e, x, o.values), x.identity && (f || (f = []), f.push(x.identity))), x.isMerge) { var D = o; D.lastMergeIndex = S } } f && (g.identity = f), r.childIdentityFields && (g.identityFields = r.childIdentityFields), o.categories.push(g) } } else this.writeCategoricalValues(e, r, o.values); return n(), o }, r.prototype.canCategorize = function () { for (var e = this.context, t = e.selects, r = 0, i = t.length; r < i; r++) { var a = t[r]; if (a && a.Depth > 0) return !1 } return !0 }, r.prototype.createTree = function (t, r) { var i = this.context; if (!(2 & i.actionHistory || 1 & i.actionHistory)) return { root: r }; var a = e.Prototype.inherit(r), n = t.columns, o = r.values; if (o) { for (var s = {}, u = 0; u < n.length; u++) { var c = n[u]; void 0 !== c.index && void 0 !== o[u] && (s[c.index] = o[u]) } a.values = s } var l = r.children; return l && (a.children = this.removeFormatSourceFromTreeChildren(n, l)), { root: a } }, r.prototype.removeFormatSourceFromTreeChildren = function (t, r) { for (var i = r.length, a = _.map(r, (function (e) { return e })), n = 0; n < i; n++) { var o = e.Prototype.inherit(a[n]); a[n] = o; for (var s = {}, u = 0; u < t.length; u++) { var c = t[u]; void 0 !== c.index && void 0 !== a[n].values[u] && (s[c.index] = a[n].values[u]) } a[n].values = s; var l = a[n].children; l && (a[n].children = this.removeFormatSourceFromTreeChildren(t, l)) } return a }, r.prototype.createTable = function (e, t) { for (var r, i = this.context.selects, a = 0, n = i.length; a < n; a++) { if (i[a]) { var o = i[a].Depth; o >= 0 && (r = Math.max(o, r || 0)) } } if (r > 0) return null; var s, u, c = d.start("DSR.table(" + this.context.perfId + ")"), l = [], p = e.columns.length; if (r >= 0) { var f = t.children; if (f) for (var a = 0, h = f.length; a < h; a++) { var m = f[a]; this.toTableRow(m, p, l), m.isMerge && (s = a), m.identity && (u || (u = []), u.push(m.identity)) } } else this.toTableRow(t, p, l); var y = this.toTotals(t, p), v = { rows: l, columns: e.columns }; if (u && (v.identity = u), t.childIdentityFields && (v.identityFields = t.childIdentityFields), y && (v.totals = y), s >= 0) { v.lastMergeIndex = s } return c(), v }, r.prototype.toTableRow = function (e, t, r) { for (var i = [], a = 0; a < t; a++) { var n = e.values[a]; n && i.push(n.value) } r.push(i) }, r.prototype.toTotals = function (e, t) { var r = [], i = e.values, a = !1; if (i) for (var n = 0; n < t; n++) { var o = i[n], s = o ? o.subtotal : null; a = a || null != s, r.push(s) } return a ? r : null }, r.prototype.writeCategoricalValues = function (e, t, r) { for (var i = e.columns, a = 0, n = 0, o = i.length; n < o; n++) { var s = i[n]; if (s.isMeasure && void 0 !== s.index) { var u = t.values[n]; if (u) { var c = r[a++]; c.values.push(u.value), void 0 !== u.highlight && (c.highlights || (c.highlights = []), c.highlights.push(u.highlight)) } } } }, r.prototype.createSingleValue = function (t, r) { if (r.values) { for (var i = t.columns, a = null, n = void 0, o = 0, s = i.length; o < s; o++)if (i[o].isMeasure && null != i[o].index) { if (a) return null; a = i[o], n = o } if (!a) return null; var u = r.values[n]; if (!u) return null; var c = 0 === e.DataViewAnalysis.countGroups(t.columns) ? u.value : u.subtotal; return void 0 === c ? null : { column: a, value: c } } return null }, r })(), g = (function () { function e(e) { this._context = e, this._categoriesMetadata = [], this._primaryMeasureSelects = [], this._measureSelects = [], this._secondarySelects = [], this._seriesColumn = null } return e.prototype.read = function (e, t, r) { var i = this, a = this._context, n = { metadata: this.readMetadata(t.IsComplete) }; return a.includes(1) && (r.categorical = d.logTime((function () { var r = i.categorize(t, n.metadata, e); r && (n.categorical = r) }))), a.includes(2) && (r.matrix = d.logTime((function () { var r = m.parse(i._context, e, t, n.metadata); r && (n.matrix = r) }))), n }, e.prototype.readMetadata = function (e) { for (var t = { columns: [] }, r = this._context, a = r.selects, n = 0, o = a.length; n < o; n++) { var s = a[n]; if (s) if (s.Kind !== i.SelectKind.Measure) { var u = r.createColumns(t.columns, n); s.SecondaryDepth >= 0 ? (this._secondarySelects.push(s), this._secondaryDepth = Math.max(this._secondaryDepth || 0, s.SecondaryDepth), this._seriesColumn = u) : 0 === s.Depth && this._categoriesMetadata.push({ select: s, column: u }) } else 0 === s.Depth ? this._primaryMeasureSelects.push(s) : this._measureSelects.push(s) } return e || (t.segment = {}), t }, e.prototype.categorize = function (e, t, r) { if (0 !== this._secondaryDepth || 0 === this._categoriesMetadata.length) return null; var a, n, o = d.start("DSR.categorical(" + this._context.perfId + ", secondary)"); r && (r.Primary && (a = r.Primary.Groupings), r.Secondary && (n = r.Secondary.Groupings)); var s = i.DataShapeUtility.getTopLevelSecondaryDynamicMember(e, r), u = this.readColumnsFromSecondary(s, t, n, e.Calculations), c = i.DataShapeUtility.getTopLevelPrimaryDynamicMember(e, r), l = this.readCategoriesAndValues(c, t, u, a), p = { categories: l.categories, values: u }; return void 0 !== l.lastMergeIndex && (p.lastMergeIndex = l.lastMergeIndex), o(), p }, e.prototype.readColumnsFromSecondary = function (e, t, r, a) { var n, o = this._context; r && (n = o.readKeys(r, 0)); var s = [], u = o.selects, c = this._measureSelects.length, l = [], p = e.Instances, d = p.length; if (d) for (var f = 0; f < d; f++) { var h = p[f], m = h.Calculations, y = void 0; r && (y = o.readIdentity(r, h, 0)); for (var v = 0, g = this._secondarySelects.length; v < g; v++) { for (var S = this._secondarySelects[v], C = i.DataShapeUtility.findAndParseCalculation(m, S.Value), x = [], D = 0; D < c; D++) { var E = this._measureSelects[D], w = u.indexOf(E), b = o.createColumns(t.columns, w, !0); void 0 !== C && (b.groupName = C); var I = { source: b, values: [] }; y && (I.identity = y), this.addColumnAggregates(a, E, I), s.push(I), x.push(I) } l.push({ identity: y, name: C, values: x }) } } else { for (var D = 0; D < c; D++) { var E = this._measureSelects[D], w = u.indexOf(E), b = o.createColumns(t.columns, w), I = { source: b, values: [] }; this.addColumnAggregates(a, E, I), s.push(I) } l.push({ values: s.slice() }) } for (var D = 0, M = this._primaryMeasureSelects.length; D < M; D++) { var V = this._primaryMeasureSelects[D], w = u.indexOf(V), b = o.createColumns(t.columns, w), I = { source: b, values: [] }; s.push(I) } n && (s.identityFields = n); var R = this._seriesColumn; return R && (s.source = R), s.grouped = function () { return l }, s }, e.prototype.addColumnAggregates = function (e, t, r) { e && (t.Max && (r.max = i.DataShapeUtility.findAndParseCalculation(e, t.Max[0])), t.Min && (r.min = i.DataShapeUtility.findAndParseCalculation(e, t.Min[0]))) }, e.prototype.readCategoriesAndValues = function (e, t, r, a) { for (var n, o = [], s = this._categoriesMetadata, u = s.length, c = this._context, l = 0; l < u; l++) { var p = { source: s[l].column, values: [] }; o.push(p), a && (n || (n = []), p.identity = n, p.identityFields = c.readKeys(a, 0)) } for (var d, f = e.Instances, h = this._primaryMeasureSelects, l = 0, m = f.length; l < m; l++) { var y = f[l]; 1 === y.RestartFlag && (d = l); for (var v = 0; v < u; v++) { var p = o[v]; p.values.push(i.DataShapeUtility.findAndParseCalculation(y.Calculations, s[v].select.Value)) } n && n.push(c.readIdentity(a, y, 0)); for (var g = y.Intersections, S = 0, C = 0, x = g.length; C < x; C++)for (var D = g[C].Calculations, E = 0, w = this._measureSelects.length; E < w; E++) { var b = this._measureSelects[E], I = i.DataShapeUtility.findAndParseCalculation(D, b.Value); if (void 0 !== I) { var M = r[S++]; if (M.values.push(I), b.Highlight) { M.highlights || (M.highlights = []); var V = i.DataShapeUtility.findAndParseCalculation(D, b.Highlight.Value); M.highlights.push(V) } } } for (var C = 0, x = h.length; C < x; C++) { var b = h[C], D = y.Calculations, I = i.DataShapeUtility.findAndParseCalculation(D, b.Value), M = r[S++]; if (M.values.push(I), b.Highlight) { M.highlights || (M.highlights = []); var R = i.DataShapeUtility.findAndParseCalculation(D, b.Highlight.Value); M.highlights.push(R) } } } return { categories: o, lastMergeIndex: d } }, e })(), S = (function () {
                        function e(e, t, r, i, a) { this.targets = e, this.selects = t.Select, this.scriptVisualBinding = t.ScriptVisualBinding, this.perfId = r || "", this.stats = { id: r || void 0, primary: 0, secondary: 0 }, this.aggregateReader = i, this.enableCellLevelFormatting = a, this.cacheItems = [], this.selectIndexToColumnIndexMap = {} } return e.prototype.createColumns = function (e, t, r) { var i = e.length, a = this.columnMetadata(t, i, r); e.push(a); var n = e.length, o = this.tryCreatingDynamicFormatColumnMetadata(t, n, a); return o && e.push(o), a }, e.prototype.columnMetadata = function (e, t, r) { var a = this.selects[e], n = { displayName: "", index: e }; if (a.Format && (n.format = a.Format), n.type = i.DataShapeUtility.describeDataType(a.Type, a.DataCategory), a.Kind === i.SelectKind.Measure && (n.isMeasure = !0), !r) { var o = this.aggregateReader.compute(a, t); o && (n.aggregates = o) } var s = a.GroupKeys; if (s) for (var u = n.identityExprs = [], c = 0, l = s; c < l.length; c++) { var p = l[c], d = this.convertKey(p); u.push(d) } return this.selectIndexToColumnIndexMap[e] = t, n }, e.prototype.tryCreatingDynamicFormatColumnMetadata = function (e, t, r, a) { var n = this.selects[e]; if (this.enableCellLevelFormatting && n.DynamicFormat && n.DynamicFormat.Format) { var o = { displayName: "", isMeasure: !0 }; r.formatSource = { formatString: o }; var s = { Kind: i.SelectKind.Measure, Subtotal: _.map(n.SubtotalDynamicFormat, (function (e) { return e && e.Format })) }; if (!a) { var u = this.aggregateReader.compute(s, t); u && (o.aggregates = u) } return this.actionHistory |= 2, o } }, e.prototype.readIdentity = function (e, r, a) {
                            for (var n, o = this.readKeys(e, a), s = e[a].Keys, u = 0, c = s.length; u < c; u++) {
                                var l = s[u], p = l.Calc || this.selects[l.Select].Value, d = i.DataShapeUtility.findAndParseCalculationToSQExpr(r.Calculations, p), f = t.SQExprBuilder.equal(o[u], d); n = t.SQExprBuilder.and(n, f)
                            } return t.createDataViewScopeIdentity(n)
                        }, e.prototype.readKeys = function (e, t) { var r = this.getAxisCache(e), i = r.exprs[t]; if (void 0 === i) { i = r.exprs[t] = []; for (var a = e[t].Keys, n = 0, o = a.length; n < o; n++)i.push(this.convertKey(a[n])) } return i }, e.prototype.includes = function (e) { return p.hasFlag(this.targets, e) }, e.prototype.getAxisCache = function (e) { for (var t = this.cacheItems, r = 0, i = t.length; r < i; r++) { var a = t[r]; if (a.axisGroupings === e) return a } var n = { axisGroupings: e, exprs: [] }; return t.push(n), n }, e.prototype.convertKey = function (e) { var i = e.Source; return t.SQExprBuilder.columnRef(t.SQExprBuilder.entity(r.schemaName(i), i.Entity || i.EntitySet), i.Property) }, e
                    })(), C = (function () { function e(e, t) { this.selects = e.Select, this.dataShape = t } return e.prototype.compute = function (t, r, i) { var a = this.cache; if (a) { var n = a[r]; if (n) return n } if (t) { a || (this.cache = a = {}); var o = this.dataShape, s = e.parseAggregates(t, o.Calculations, o.PrimaryHierarchy, 0); return i && !s && (s = {}), a[r] = s, s } }, e.prototype.updateAggregates = function (e, t, r, i) { var a = this.compute(e, t, !0); if (a) return a[r] = i, a }, e })(); !(function (e) { function t(e, t, r, a) { var n = !_.isEmpty(r) && v.getFirstInstanceCalcs(r[0]); if (!_.isEmpty(t) || !_.isEmpty(n)) { var o; if (!_.isEmpty(n) && e.Subtotal) { var s = e.Subtotal[a]; if (s) { var u = i.DataShapeUtility.findAndParseCalculation(n, s); void 0 !== u && (o || (o = {}), o.subtotal = u) } } if (!_.isEmpty(t)) { if (e.Max) { var s = e.Max[a]; if (s) { var u = i.DataShapeUtility.findAndParseCalculation(t, s); void 0 !== u && (o || (o = {}), o.max = u) } } if (e.Min) { var s = e.Min[a]; if (s) { var u = i.DataShapeUtility.findAndParseCalculation(t, s); void 0 !== u && (o || (o = {}), o.min = u) } } if (e.Count) { var s = e.Count[a]; if (s) { var u = i.DataShapeUtility.findAndParseCalculation(t, s); void 0 !== u && (o || (o = {}), o.count = u) } } var c = e.Aggregates; if (c) for (var l = 0, p = c; l < p.length; l++) { var d = p[l], f = d.Aggregate, s = d.Ids[a]; if (s) { var u = i.DataShapeUtility.findAndParseCalculation(t, s); if (void 0 !== u) { var h = f.Percentile; if (h) { var m = { k: h.K, value: u }; h.Exclusive && (m.exclusive = h.Exclusive), o || (o = {}); var y = o.percentiles; y || (y = o.percentiles = []), y.push(m) } else f.Average ? (o || (o = {}), o.average = u) : f.Median && (o || (o = {}), o.median = u) } } } if (0 === a) { var s = e.Value; if (s) { var u = i.DataShapeUtility.findAndParseCalculation(t, s); void 0 !== u && (o || (o = {}), o.single = u) } } } return o } } e.parseAggregates = t })(C || (C = {})); var x = (function () { function e(e, t, r, i, a) { this.node = e, this.aggregateReader = t, this.selects = r, this.enableCellLevelFormatting = a, this.aggregators = i } return e.create = function (t, r) { for (var a = t.values, n = r.selects, o = !1, s = {}, u = 0, c = 0, l = n.length; u < l; u++) { var p = n[u]; if (p) if (p.Kind === i.SelectKind.Measure) { var d = void 0, m = void 0; if (a && (m = a[c])) { if (d = [], void 0 === m.min && d.push(new h), void 0 === m.max && d.push(new f), 0 === d.length) { c++; continue } } else d = [new h, new f]; s[c] = d, o = !0, c++ , p.DynamicFormat && p.DynamicFormat.Format && r.enableCellLevelFormatting && c++ } else c++ } if (o) return new e(t, r.aggregateReader, r.selects, s, r.enableCellLevelFormatting) }, e.prototype.add = function (e, t) { var r = this.aggregators[e]; if (r) for (var i = 0, a = r.length; i < a; i++)r[i].update(t) }, e.prototype.complete = function (e) { for (var t = this.aggregators, r = this.node, i = this.aggregateReader, a = 0, n = 0, o = this.selects.length; a < o; a++) { var s = this.selects[a]; if (s) { var u = t[n]; if (u) { for (var l = 0, p = u.length; l < p; l++) { var d = u[l], f = d.value(); if (void 0 !== f) { var h = d.name; c(r, n)[h] = f; e[n].aggregates = i.updateAggregates(s, n, h, f) } } n++ , s && s.DynamicFormat && s.DynamicFormat.Format && this.enableCellLevelFormatting && n++ } else n++ } } }, e })()
                })(n = a.V1 || (a.V1 = {}))
            })(a = i.reader || (i.reader = {}))
        })(r = t.dsr || (t.dsr = {}))
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i; !(function (i) { function a(e, t) { return new o(e, t) } function n(e) { var t = e.toString(2), r = t.substr(0, t.length - g); return parseInt(r, 2) } i.createDsrParser = a; var o = (function () { function e(e, t) { this.dsrParserContext = t, this.parser = new c(e.DS, this.dsrParserContext) } return e.prototype.dataShapes = function () { return this.parser }, e.prototype.reset = function () { this.parser.reset() }, e.prototype.lockCache = function () { this.dsrParserContext.locked || (this.dsrParserContext.locked = !0) }, e })(), s = (function () { function e(e) { this.calculationContainerKind = e, this.nullValuesHandler = new y, this.repeatedValuesHandler = new v } return e.prototype.initialize = function (e, t) { this.lastContainerCalculations = t, this.repeatedValuesHandler.initialize(e && e.R, t), this.nullValuesHandler.initialize(e && e.Ø) }, e.prototype.getCurrentCalc = function (e, t, r, i) { if (!r) return null; var a; return a = this.repeatedValuesHandler.tryRead(e), void 0 !== a ? a : (a = this.nullValuesHandler.tryRead(e), void 0 !== a ? (this.lastContainerCalculations[e] = null, a) : (t ? t.next() && (a = t.current(), this.lastContainerCalculations[e] = a) : (a = r[i], void 0 === a && (a = null), this.lastContainerCalculations[e] = a), a)) }, e })(), u = (function () { function t(e, t, r) { this.context = e, this.calcMetadataCacheKey = r, this.baseCalculationParser = new s(t) } return t.prototype.setCalculations = function (e) { this.calculationContainer = e; var t = this.context; if (t) { var i = this.calcMetadataCacheKey, a = e.S; a && (this.metadata = a, i && !t.locked && (t.memberInstanceCalcMetadataCache[i] = a), this.lastContainerCalculations || (this.lastContainerCalculations = new Array(a.length))), t.instancesCalcCache[i] && (this.lastContainerCalculations = t.instancesCalcCache[i]), this.baseCalculationParser.initialize(e, this.lastContainerCalculations); var n = e.C; a = this.getCalcMetadata(), a ? this.calcMetadataIt = new r.Iterator(a) : this.calcMetadataIt && this.calcMetadataIt.reset(), _.size(n) > 0 ? this.calcIt = new r.Iterator(n) : this.calcIt = void 0 } }, t.prototype.nextCalc = function () { var e = !1, t = this.calcMetadataIt; return t && (e = t.next() || e, e && (this.dsrCalcValue = this.baseCalculationParser.getCurrentCalc(t.index(), this.calcIt, this.calculationContainer, this.calcId())), t.done() && (this.context.instancesCalcCache[this.calcMetadataCacheKey] = this.lastContainerCalculations)), e || !1 }, t.prototype.calcId = function () { return this.metadata[this.calcMetadataIt.index()].N }, t.prototype.getCalcMetadata = function () { var e = this.metadata; return e || (e = this.metadata = this.context.memberInstanceCalcMetadataCache[this.calcMetadataCacheKey]), e }, t.prototype.calcValue = function () { var t = this.metadata[this.calcMetadataIt.index()], r = this.context.valueDictionaryHandler.getCalcValue(this.dsrCalcValue, t.DN, t.T); return void 0 === r && (r = e.PrimitiveValueEncoding.parseOptimizedValue(this.dsrCalcValue, t.T)), r }, t.prototype.calcValueAsExpr = function () { var t = this.calcMetadataIt.current(), r = this.calcValue(), i = this.context.valueDictionaryHandler.getCalcValueExpr(r, this.dsrCalcValue, t.DN, t.T); return i || (i = e.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(r, this.dsrCalcValue, t.T)), i }, t.prototype.calcCount = function () { return this.calcMetadataIt ? this.calcMetadataIt.count() : this.calcIt ? this.calcIt.count() : 0 }, t })(), c = (function (e) { function i(t, i) { var a = e.call(this, i, 1) || this; return a.parserContext = i, a.it = new r.Iterator(t), a } return __extends(i, e), i.prototype.reset = function () { this.it.reset() }, i.prototype.index = function () { return this.it.index() }, i.prototype.count = function () { return this.it.count() }, i.prototype.next = function () { this.primaryHierarchyParser = this.secondaryHierarchyParser = this.messageParser = void 0; var e = this.it.next(); if (e) { var r = this.it.current(); this.setCalculations(r), this.context && (this.context.valueDictionaryHandler = new t.ValueDictionaryHandler(r.ValueDicts)) } return e }, i.prototype.primaryHierarchy = function () { if (!this.primaryHierarchyParser && this.parserContext) { var e = this.it.current().PH; this.primaryHierarchyParser = e && new d(e, this.parserContext, 0, 0) } return this.primaryHierarchyParser }, i.prototype.secondaryHierarchy = function () { if (!this.secondaryHierarchyParser && this.parserContext) { var e = this.it.current().SH; this.secondaryHierarchyParser = e && new d(e, this.parserContext, 1, 0) } return this.secondaryHierarchyParser }, i.prototype.messages = function () { return !this.messageParser && _.size(this.it.current().Msg) > 0 && (this.messageParser = new p(this.it.current().Msg)), this.messageParser }, i.prototype.hasRestartTokens = function () { return _.size(this.restartTokens()) > 0 }, i.prototype.restartTokens = function () { return this.it.current().RT }, i.prototype.complete = function () { return this.it.current().IC }, i.prototype.limitsExceeded = function () { return _.size(this.it.current().DLEx) > 0 }, i.prototype.limits = function () { return this.limitsParser || (this.limitsParser = new l(this.it.current().DLEx)), this.limitsParser }, i })(u), l = (function () { function e(e) { this.it = new r.Iterator(e) } return e.prototype.next = function () { return this.it.next() }, e.prototype.id = function () { return this.it.current().N }, e.prototype.count = function () { return this.it.count() }, e })(), p = (function () { function e(e) { this.it = new r.Iterator(e) } return e.prototype.next = function () { return this.it.next() }, e.prototype.code = function () { return this.it.current().Code }, e.prototype.severity = function () { return this.it.current().Severity }, e.prototype.dsrMessage = function () { return new t.DsrMessage(this.it.current()) }, e })(), d = (function () { function e(e, t, i, a) { this.context = t, this.hierarchy = i, this.depth = a, this.it = new r.Iterator(e) } return e.prototype.count = function () { return this.it.count() }, e.prototype.reset = function () { this.it.reset(), this.dataMemberId = void 0 }, e.prototype.next = function () { this.instancesParser && (this.instancesParser = void 0), this.dataMemberId && (this.dataMemberId = void 0); var e = this.it.next(); if (e) { var t = this.dataMemberIdCache(); if (_.size(t) > 0) for (var r = this.it.current(), i = 0, a = t[this.depth]; i < a.length; i++) { var n = a[i]; r[n] && (this.dataMemberId = n) } if (void 0 === this.dataMemberId) { var o = Object.keys(this.it.current()); 1 === _.size(o) && (this.dataMemberId = o[0]) } } return e }, e.prototype.id = function () { return this.dataMemberId }, e.prototype.dataMemberIdCache = function () { return 0 === this.hierarchy ? this.context.primaryDataMemberIdCache : this.context.secondaryDataMemberIdCache }, e.prototype.instances = function () { if (!this.instancesParser) { var e = this.it.current()[this.dataMemberId]; this.instancesParser = e && new f(e, this.context, this.id(), this.hierarchy, this.depth) } return this.instancesParser }, e })(), f = (function (e) { function t(t, i, a, n, o) { var s = e.call(this, i, 2, a) || this; return s.parentDataMemberId = a, s.hierarchy = n, s.depth = o, s.it = new r.Iterator(t), s } return __extends(t, e), t.prototype.next = function () { var e = this.it.next(); if (e) { var t = this.it.current(); this.context.locked || t.M || 1 !== this.hierarchy || this.context.secondaryLeafDataMemberId.push(this.parentDataMemberId), this.setCalculations(t), this.dataMemberIt = void 0, this.intersectionParserDirty = !0 } return e }, t.prototype.count = function () { return this.it.count() }, t.prototype.currentIndex = function () { return this.it.index() }, t.prototype.intersections = function () { if (!this.intersectionParser) { this.intersectionParserDirty = !1; var e = this.it.current().X; return this.intersectionParser = e && new h(e, this.context, this.parentDataMemberId) } return this.intersectionParserDirty ? (this.intersectionParserDirty = !1, this.intersectionParser.reset(this.it.current().X), this.intersectionParser) : this.intersectionParser }, t.prototype.restartFlagKind = function () { return this.it.current().RF }, t.prototype.members = function () { if (!this.dataMemberIt) { var e = this.it.current().M; this.dataMemberIt = e && new d(e, this.context, this.hierarchy, this.depth + 1) } return this.dataMemberIt }, t })(u), h = (function () { function i(e, t, i) { this.context = t, this.parentDataMemberId = i, this.it = new r.Iterator(null), this.reset(e), this.baseCalculationParser = new s(3), this.intersectionMeasureCount = _.size(this.context.intersectionMeasureToSelectIndex), this.expectedIntersectionCount = _.size(this.context.secondaryLeafDataMemberId); var a = t.dataMemberIdToMetadata[i]; this.primaryMemberIsGroupMember = 1 === a.kind, this.primaryDataMemberDepth = a.depth, this.calcMetadataCache = t.intersectionCalcMetadataCache[i], this.calcMetadataCache || t.locked || (this.calcMetadataCache = t.intersectionCalcMetadataCache[i] = new Array(this.expectedIntersectionCount)) } return i.prototype.reset = function (e) { this.it.reset(e), this.logicalIntersectionIndex = -1, this.physicalIntersectionIndex = -1, this.hasIntersectionElements = e.length > 0 }, i.prototype.next = function () { if (this.resetCalcIt(), this.logicalIntersectionIndex++ , this.logicalIntersectionIndex >= this.expectedIntersectionCount) return !1; if (this.setIntersectionId(), this.it.count() === this.expectedIntersectionCount) { var e = this.it.next(); return e && this.initialize(this.it.current()), e } if (this.hasIntersectionElements) { var t = void 0; if ((0 === this.logicalIntersectionIndex || this.physicalIntersectionIndex < this.logicalIntersectionIndex) && this.it.next() && (t = this.it.current(), t.I || 0 === this.logicalIntersectionIndex ? this.physicalIntersectionIndex = t.I || 0 : this.physicalIntersectionIndex++), this.physicalIntersectionIndex === this.logicalIntersectionIndex) return t || (t = this.it.current()), this.initialize(t), !0 } return this.initialize(), !0 }, i.prototype.setIntersectionId = function () { this.intersectionId = this.parentDataMemberId + this.context.secondaryLeafDataMemberId[this.logicalIntersectionIndex] }, i.prototype.resetCalcIt = function (e) { var t = e && e.C; this.currentCalcIndex = -1, this.currentCalc = void 0, t ? this.calcIt = new r.Iterator(t) : this.calcIt = void 0 }, i.prototype.initialize = function (e) { if (this.resetCalcIt(e), e) { var t = e.S; if (t && !this.context.locked) { void 0 === this.intersectionCalcCount && (this.intersectionCalcCount = t.length), this.calcMetadataCache[this.logicalIntersectionIndex] = t; for (var r = this.context.calcIdToCalcMetadata, i = 0, a = t; i < a.length; i++) { r[a[i].N] = t } } } this.calculationContainer = e; var n = this.lastContainerCalculations = this.context.lastIntersectionCalcCache[this.intersectionId]; !n && this.intersectionId && (n = this.lastContainerCalculations = this.context.lastIntersectionCalcCache[this.intersectionId] = new Array(this.intersectionCalcCount)), this.baseCalculationParser.initialize(e, n); var o = this.getCalcMetadata(); o && (this.currentCalcMetadata = o, void 0 === this.intersectionCalcCount && (this.intersectionMeasureCount > 0 ? this.intersectionCalcCount = this.currentCalcMetadata.length : this.intersectionCalcCount = 0)) }, i.prototype.nextCalc = function () { var e = ++this.currentCalcIndex; return e < this.intersectionCalcCount ? (this.currentCalc = this.baseCalculationParser.getCurrentCalc(e, this.calcIt, this.calculationContainer, this.calcId()), !0) : (this.currentCalc = void 0, !1) }, i.prototype.calcId = function () { return this.currentCalcMetadata[this.currentCalcIndex].N }, i.prototype.getCalcMetadata = function () { var e = this.calcMetadataCache[this.logicalIntersectionIndex]; if (!e && !this.context.locked) { var t = this.getExpectedCalcId(); t && (e = this.calcMetadataCache[this.logicalIntersectionIndex] = this.context.calcIdToCalcMetadata[t]) } return e }, i.prototype.getExpectedCalcId = function () { if (0 !== this.intersectionMeasureCount) { var e = this.context, r = e.dataMemberIdToMetadata[e.secondaryLeafDataMemberId[this.logicalIntersectionIndex]], i = 1 === r.kind, a = this.currentCalcIndex < 0 ? e.intersectionMeasureToSelectIndex[0] : e.intersectionMeasureToSelectIndex[this.currentCalcIndex], n = e.selects[a]; if (i && this.primaryMemberIsGroupMember) return n.Value; if (n.Subtotal) { var o = t.DataShapeUtility.computeAggIdx(this.primaryDataMemberDepth, r.depth, e.maxPrimaryDepth, e.maxSecondaryDepth); return n.Subtotal.length > o && n.Subtotal[o] } } }, i.prototype.calcValue = function () { return void 0 !== this.currentCalc && null !== this.currentCalc ? this.parseCalcValue(this.currentCalc) : null }, i.prototype.parseCalcValue = function (t) { var r = this.calcMetadataCache[this.logicalIntersectionIndex][this.currentCalcIndex], i = this.context.valueDictionaryHandler.getCalcValue(t, r.DN, r.T); return void 0 === i && (i = e.PrimitiveValueEncoding.parseOptimizedValue(t, r.T)), i }, i.prototype.calcValueAsExpr = function () { if (void 0 !== this.currentCalc) return this.parseCalcValueExpr(this.currentCalc, this.calcValue()); if (this.it.index() === this.logicalIntersectionIndex) { var t = this.calcValue(); return null === t ? e.SQExprBuilder.nullConstant() : this.parseCalcValueExpr(this.it.current()[this.calcId()], t) } return e.SQExprBuilder.nullConstant() }, i.prototype.parseCalcValueExpr = function (t, r) { var i = this.calcMetadataCache[this.logicalIntersectionIndex][this.currentCalcIndex], a = this.context.valueDictionaryHandler.getCalcValueExpr(r, t, i.DN, i.T); return void 0 === a && (a = e.PrimitiveValueEncoding.parseOptimizedValueToSQExpr(r, t, i.T)), a }, i.prototype.calcCount = function () { return this.calcIt ? this.calcIt.count() : 0 }, i })(), m = (function () { function e() { } return e.prototype.initialize = function (t) { this.value = t, t > e.MaxSignedNumberFor32Bits ? this.overflowValue = n(t) : this.overflowValue = 0 }, e.prototype.hasBitAtPosition = function (e) { if (e > 52) return !1; if (this.value > 0) { var t = 0, r = this.value; return e < 31 ? t = 1 << e : (t = 1 << e - 31, r = this.overflowValue), (r & t) > 0 } }, e.MaxSignedNumberFor32Bits = Math.pow(2, 31) - 1, e })(); i.BitSequenceHandler = m; var y = (function () { function e() { this.bitSequenceHandler = new m } return e.prototype.initialize = function (e) { this.bitSequenceHandler.initialize(e) }, e.prototype.tryRead = function (e) { if (this.bitSequenceHandler.hasBitAtPosition(e)) return null }, e })(), v = (function () { function e() { this.bitSequenceHandler = new m } return e.prototype.initialize = function (e, t) { this.bitSequenceHandler.initialize(e), this.lastContainerCalculations = t }, e.prototype.tryRead = function (e) { if (this.bitSequenceHandler.hasBitAtPosition(e)) return this.lastContainerCalculations[e] }, e })(), g = 31; i.getLast33BitsIn64Bits = n })(i = r.V2 || (r.V2 = {})) })(r = t.reader || (t.reader = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r(e, t) { var r = t.options; if (1 === r.executionType) { var i = _.findIndex(e, (function (e) { return e.options.queryId === r.queryId })); if (i > -1) return !0 } return !1 } function i(e) { return !!t.isRejectableQueuedExecution(e) && e.execution.rejected() } var a = jsCommon.JsonComparer, n = (function () { function n(e, t, r, i) { this.maxBatches = e, this.queryExecuteCallback = t, this.pending = [], this.timeoutService = r, this.telemetryV2Enabled = i } return n.prototype.enqueue = function (t) { var i = this; if (!r(this.pending, t)) return this.pending.push(t), this.currentBatchDeferred || (this.currentBatchDeferred = t.options.telemetryV2Enabled ? new e.PbiDeferred((!0)) : $.Deferred(), this.timeoutService.setTimeout(0, this.telemetryV2Enabled).promise.then((function () { var e = i.createBatches(); i.clearPending(), i.queryExecuteCallback(e), i.currentBatchDeferred.resolve(), i.currentBatchDeferred = void 0 }))), t.options.telemetryV2Enabled ? this.currentBatchDeferred.promise : this.currentBatchDeferred.promise() }, n.prototype.clearPending = function () { this.pending = [] }, n.prototype.setMaxBatches = function (e) { this.maxBatches = e }, n.prototype.createBatches = function () { var e = [], t = this.sortQueriesByDataSource(); if (t.length >= this.maxBatches) for (var r = 0, i = t.length; r < i; ++r)e.push(this.createBatchFromDataSourceGroup(t[r])); else e = this.splitDataSourcesIntoBatches(t, this.maxBatches); return e }, n.prototype.sortQueriesByDataSource = function () { for (var e = [], t = this.pending, r = 0, a = t.length; r < a; ++r) { var n = t[r]; if (!i(n)) { var o = this.findDataSourceGroup(n.options.dataSources, e, n.options.cacheResponseOnServer); if (o) o.queuedExecutions.push(n); else { var s = { dataSources: n.options.dataSources, queuedExecutions: [n], cacheResponseOnServer: n.options.cacheResponseOnServer, cacheOptions: n.options.cacheOptions }; e.push(s) } } } return e }, n.prototype.findDataSourceGroup = function (e, t, r) { for (var i = 0, n = t.length; i < n; ++i) { var o = t[i]; if (a.equals(e, o.dataSources) && o.cacheResponseOnServer === r) return o } return null }, n.prototype.createBatchFromDataSourceGroup = function (e) { for (var r = [], i = [], a = e.queuedExecutions, n = [], o = [], s = [], u = 0, c = a.length; u < c; ++u) { var l = a[u], p = a[u].options; t.isRejectableQueuedExecution(l) ? (r.push(p.command), i.push(l.deferred), n.push(p.queryId), 1 === p.requestPriority && o.push(1)) : s.push(p.queryId) } return { dataSources: e.dataSources, queries: r, promises: i, cacheOptions: e.cacheOptions, cacheResponseOnServer: e.cacheResponseOnServer, queryIds: n, cancelQueryIds: s, priorities: o } }, n.prototype.splitDataSourcesIntoBatches = function (e, t) { for (var r = [], i = 0, a = e.length; i < a; ++i)r.push(this.createBatchFromDataSourceGroup(e[i])); return r = this.splitBatches(r, t) }, n.prototype.splitBatches = function (e, t) { for (var r = e.slice(); r.length < t;) { for (var i = void 0, a = 0, n = r.length; a < n; ++a) { var o = r[a]; o.queries.length > 1 && (!i || i.queries.length < o.queries.length) && (i = o) } if (!i) return r; r.push(this.splitBatch(i)), i = null } return r }, n.prototype.splitBatch = function (e) { var t = e.queries.length, r = e.queries.splice(t / 2), i = e.promises.splice(t / 2), a = e.queryIds.splice(t / 2), n = e.cancelQueryIds.length, o = []; return n && (o = e.cancelQueryIds.splice(n / 2)), { dataSources: e.dataSources, queries: r, promises: i, cacheOptions: e.cacheOptions, cacheResponseOnServer: e.cacheResponseOnServer, queryIds: a, cancelQueryIds: o, priorities: e.priorities } }, n })(); t.ExecuteSemanticQueryBatcher = n })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r(e, t, r, i, a, n, o) { return new c(e, t, r, i, a, n, o) } function i(e) { return _.head(e) } function a(e) { return null != e && void 0 !== e.deferred && void 0 !== e.execution } function n(e) { return !!a(e) && e.execution.pending() } var o = e.ClientErrorStrings, s = e.telemetry.DataQueryDataEventName, u = jsCommon.HttpUtils; t.createExecuteSemanticQueryProxyHttpCommunication = r, t.executeSemanticQueryRequestVersion1 = "1.0.0"; var c = (function () { function r(e, t, r, i, a, n, o) { this.httpService = e, this.impersonationStateProvider = n, this.promiseFactory = i, this.telemetryService = t, this.localeProvider = r, this.uri = a, this.featureSwitches = o } return r.prototype.execute = function (r, i, a, n, o, s, u) { var c = this, l = this.httpService.powerbiRequestOptions(null, "ExecuteSemanticQuery"), p = t.generateSemanticQueryRequest(r, i, this.localeProvider, a, n, this.impersonationStateProvider, o, s, u), d = this.featureSwitches && this.featureSwitches().telemetryV2, f = this.promiseFactory.defer(d), h = this.telemetryService.startEvent(e.telemetry.DataQueryData, this.uri, !0, null, null); return this.httpService.post(this.uri, p, l).then((function (e) { c.attachHttpMetadataToTelemetry(h.event, e), h.resolve(), f.resolve(c.attachHttpMetadataToResult(e)) }), (function (t) { c.attachHttpMetadataToTelemetry(h.event, t), h.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error, t.status)), f.reject(c.attachHttpMetadataToResult(t)) })), f.promise }, r.prototype.attachHttpMetadataToTelemetry = function (e, t) { e.info.endPoint = this.uri, e.info.clientAndServerRequestIdMatch = u.clientAndServerRequestIdMatch(t), e.info.responseRequestId = u.getResponseRequestId(t), e.info.requestId = t.requestId }, r.prototype.attachHttpMetadataToResult = function (e) { if (e && e.data) { var t = e.data; return t.requestId = e.responseRequestId || e.requestId, t.httpStatusCode = e.status, t } return { jobIds: null, results: null, requestId: e.responseRequestId || e.requestId, httpStatusCode: e.status } }, __decorate([e.MonitorWith(s)], r.prototype, "execute", null), r })(), l = 4, p = (function () { function r(r, i, a, n, o, s, u) { void 0 === s && (s = l); var c = this; this.communication = i, this.telemetryService = n, this.promiseFactory = r.promiseFactory(), this.delayedResultHandler = o ? o : new d, this.batcher = new t.ExecuteSemanticQueryBatcher(s, function (e) { for (var t = 0, r = e.length; t < r; ++t)c.executeBatch(e[t]) }, a, u && u.telemetryV2), this.queryCache = t.createQueryCache(this.promiseFactory, (function (e, t) { c.enqueueExecution({ options: e, deferred: t.deferred, execution: t.promise }) }), (function (t, r) { c.telemetryService.logEvent(e.telemetry.DataQueryCancellation, r), c.enqueueExecution({ options: t }) }), u) } return r.prototype.enqueueExecution = function (e) { this.isCommunicationStopped ? (this.pausedQueries = this.pausedQueries || [], this.pausedQueries.push(e)) : this.batcher.enqueue(e) }, r.prototype.execute = function (t) { if (!_.isEmpty(t.dataSources)) return this.queryCache.ensure(t); var r = this.promiseFactory.defer(t.telemetryV2Enabled), i = e.createRejectablePromise2(r); return r.resolve(t.command), i }, r.prototype.stopCommunication = function () { this.isCommunicationStopped = !0 }, r.prototype.resumeCommunication = function () { this.isCommunicationStopped = !1; var e = this.pausedQueries; if (e) { for (var t = 0, r = e.length; t < r; t++) { var i = e[t]; n(i) && this.batcher.enqueue(i) } this.pausedQueries = void 0 } }, r.prototype.cache = function () { return this.queryCache }, r.prototype.setLocalCacheResult = function (e, t) { this.queryCache.put(e.dataSources, e.command, t) }, r.prototype.setPreferredMaxConnections = function (e) { this.batcher.setMaxBatches(e) }, r.prototype.executeBatch = function (e) { var t = this, r = e.promises; this.communication.execute(e.queries, e.dataSources, e.cacheOptions, e.cacheResponseOnServer, e.queryIds, e.cancelQueryIds, e.priorities).then((function (e) { return t.onSuccess(e, r) }), (function (e) { return t.onError(e, r) })) }, r.prototype.onSuccess = function (r, i) { this.rejectExecutionsForMissingJobs(r, i); for (var a = r.jobIds, n = {}, o = 0, s = i.length; o < s; ++o)n[a[o]] = i[o]; for (var u = r.results, o = 0, s = u.length; o < s; ++o) { var c = u[o], l = c.result, p = c.jobId, d = n[p]; delete n[p]; var f = l.data, h = l.error; if (f) { var m = { descriptor: f.descriptor, dsr: f.dsr, metrics: f.metrics, requestId: r.requestId, timestamp: f.timestamp, fromCache: f.fromCache }; d.resolve(m) } else if (h) { var y = new e.ServiceErrorToClientError(h); y.requestId = r.requestId, d.reject(y) } else l.asyncResult && this.delayedResultHandler.registerDelayedResult(c.jobId, r.requestId, d) } if (!_.isEmpty(Object.keys(n))) { var h = new t.ExecuteSemanticQueryProxyError(r.requestId, "MissingJobResult"); for (var p in n) n[p].reject(h) } }, r.prototype.rejectExecutionsForMissingJobs = function (e, r) { var i = e.jobIds.length, a = r.length; if (a > i) for (var n = new t.ExecuteSemanticQueryProxyError(e.requestId, "MissingJobId"), o = i; o < a; o++)r[o].reject(n) }, r.prototype.onError = function (t, r) { var i; if (t && t.requestError && (i = new e.ServiceErrorToClientError(t.requestError)), i) i.requestId = t.requestId; else { var a = t.error, n = void 0, o = void 0, s = void 0; if (a) { n = a.message, o = a.code; var u = a["pbi.error"] && a["pbi.error"].exceptionCulprit; null != u && (s = e.errorDetailsHelper.getErrorSource(u)) } i = t && null != t.httpStatusCode && t.requestId ? new e.HttpClientError(t.httpStatusCode, t.requestId, o, n, s) : new f(t.requestId) } for (var c = 0, l = r.length; c < l; c++)r[c].reject(i) }, r })(); t.ExecuteSemanticQueryProxy = p; var d = (function () { function e() { } return e.prototype.registerDelayedResult = function (e, t, r) { r.reject(new h(e)) }, e.prototype.setQueryResolver = function (e) { }, e })(), f = (function (e) { function t(t) { var r = this; return r = e.call(this, "ExecuteSemanticQueryUnknownError") || this, r.httpRequestId = t, r } return __extends(t, e), Object.defineProperty(t.prototype, "requestId", { get: function () { return this.httpRequestId }, enumerable: !0, configurable: !0 }), t.prototype.getDetails = function (t) { var r = e.prototype.getDetails.call(this, t); return r.debugErrorInfo = r.debugErrorInfo || [], r.debugErrorInfo.push({ errorInfoKey: o.HttpRequestId, errorInfoValue: this.httpRequestId }), r }, t })(e.UnknownClientError), h = (function (e) { function t(t) { var r = this; return r = e.call(this, "DelayedQueryTimeoutError") || this, r.jobId = t, r } return __extends(t, e), t.prototype.getDetails = function (t) { var r = e.prototype.getDetails.call(this, t); return r.debugErrorInfo = r.debugErrorInfo || [], r.debugErrorInfo.push({ errorInfoKey: o.JobId, errorInfoValue: this.jobId }), r }, t })(e.UnknownClientError); t.single = i, t.isRejectableQueuedExecution = a })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r = (function () { function t(e, t) { this.requestId = e, this.errorCode = t } return Object.defineProperty(t.prototype, "code", { get: function () { return this.errorCode }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), t.prototype.getDetails = function (t) { return { message: t.get("ServiceError_CannotLoadVisual"), displayableErrorInfo: [{ errorInfoKey: t.get("ServiceError_ExecuteSemanticQueryErrorKey"), errorInfoValue: t.get("ServiceError_ExecuteSemanticQueryErrorValue") }, { errorInfoKey: t.get("AdditionalErrorInfo_ErrorText"), errorInfoValue: this.code }], debugErrorInfo: [{ errorInfoKey: e.ClientErrorStrings.ClientErrorCode, errorInfoValue: this.code }] } }, t })(); t.ExecuteSemanticQueryProxyError = r })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { for (var t = [], a = {}, n = 0, o = e; n < o.length; n++) { var s = o[n], u = { id: s.Id, name: s.Name, component: s.Component, start: i.parseIsoDate(s.Start).valueOf(), end: s.End ? i.parseIsoDate(s.End).valueOf() : void 0, metrics: s.Metrics, done: !0, rootId: void 0 }; s.ParentId ? (a[s.ParentId] || (a[s.ParentId] = []), a[s.ParentId].push(u)) : t.push(u) } return r(t, a), t } function r(e, t) { for (var i = 0, a = e; i < a.length; i++) { var n = a[i]; t[n.id] && (n.children = t[n.id], r(n.children, t)) } } var i = jsCommon.DateExtensions; e.parseExecutionEvents = t })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i, a = e.data.SQExprBuilder; !(function (e) { function r(e) { var t = e.mappings; if (1 !== t.length) return e; var r = i(t[0]); if (!r) return e; var a = e.queryRewrites; return a || (a = e.queryRewrites = []), n(e, r.queryNames, a), s(r), e } function i(e) { var r, i; if (t.CompiledDataViewMapping.visitMapping(e, { visitRole: function (e) { if (e.aggregates && !_.isEmpty(e.items)) { r || (r = {}, i = []); for (var t = 0, a = e.items; t < a.length; t++) { r[a[t].queryName] = e.aggregates } i.push(e) } } }), r) return { queryNames: r, roles: i } } function n(e, t, r) { var i = e.query.select(); for (var n in t) { var s = i.withName(n).expr, u = t[n], c = {}; u.min && (c.min = o(e, a.aggregate(s, 3))), u.max && (c.max = o(e, a.aggregate(s, 4))), r.push({ aggregatesAdded: { originalQueryRef: n, aggregates: c } }) } } function o(e, r) { e.query = e.query.addSelect(r); var i = e.query.select(), a = t.SQExprUtils.indexOfNamedExpr(i, r), n = i[a], o = e.additionalProjections; return o || (o = e.additionalProjections = []), o.push({ queryName: n.name, selector: null }), { index: a, expr: r, queryName: n.name } } function s(e) { for (var t = e.queryNames, r = 0, i = e.roles; r < i.length; r++) { var a = i[r]; _.remove(a.items, (function (e) { return t[e.queryName] })) } } e.run = r })(i = r.AggregatesQueryRewriter || (r.AggregatesQueryRewriter = {})) })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(e, t, r) { for (var a = [], n = [], o = { by: null, select: [] }, s = { categories: { select: a }, values: { group: o, select: n } }, u = {}, c = 0, l = t; c < l.length; c++) { var p = l[c]; if (!p.categorical) return; var d = p.categorical; i(d, u, a, n, o), null != d.dataVolume && null == s.dataVolume && (s.dataVolume = d.dataVolume) } var f = []; for (var h in u) { var m = u[h]; if (!_.isEmpty(m.categoryAndValueGroup) && !_.isEmpty(m.categoryOnly)) for (var y = 0, v = m.categoryAndValueGroup; y < v.length; y++) { var g = v[y], S = e.select(); e = e.addSelect(S.withName(h).expr); var C = e.select(), x = C.length - 1, D = C[x], E = g.roleItem.queryName; g.roleItem.queryName = D.name, f.push({ selectExprAdded: { selectIndex: x, namedSQExpr: D } }), f.push({ projectionQueryRefChanged: { role: g.roleName, oldQueryRef: E, newInternalQueryRef: g.roleItem.queryName } }) } } return { query: e, mappings: [{ metadata: t[0].metadata, categorical: s }], queryRewrites: _.isEmpty(f) ? void 0 : f, additionalProjections: r } } function i(t, r, i, o, s) { var u = t.values; if (u) { e.CompiledDataViewMapping.visitCategoricalCategories(t.categories, { visitRole: function (e) { n(i, e) } }); var c; e.CompiledDataViewMapping.visitGrouped(u, { visitRole: function (e) { if (s.by = e, e.items) for (var t = 0, i = e.items; t < i.length; t++) { var n = i[t]; a(r, e.role, n, !0), c = !0 } } }), e.CompiledDataViewMapping.visitCategoricalValues(u, { visitRole: function (e, t) { if (n(1 === t ? s.select : o, e), e.items) for (var i = 0, u = e.items; i < u.length; i++) { var l = u[i]; a(r, e.role, l, c) } } }) } } function a(e, t, r, i) { var a = r.queryName, n = e[a]; n || (n = e[a] = { categoryAndValueGroup: [], categoryOnly: [] }); var o = { roleName: t, roleItem: r }; i ? n.categoryAndValueGroup.push(o) : n.categoryOnly.push(o) } function n(e, t) { for (var r = { for: { in: t } }, i = 0, a = e; i < a.length; i++) { var n = a[i]; if (s.equals(n, r)) return } e.push(r) } var o, s = jsCommon.JsonComparer; !(function (e) { function t(e) { var t = e.mappings.length; return 1 === t ? e : t > 1 ? r(e.query, e.mappings, e.additionalProjections) : void 0 } e.run = t })(o = t.MultiMappedQueryRewriter || (t.MultiMappedQueryRewriter = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (e) {
            function t(t) { return t.Schema || e.DefaultSchemaName } e.DefaultSchemaName = void 0, e.schemaName = t; var r; !(function (e) { e[e.None = 0] = "None", e[e.Group = 1] = "Group", e[e.Measure = 2] = "Measure" })(r = e.SelectKind || (e.SelectKind = {}));
        })(t = e.dsr || (e.dsr = {}))
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t) { r(e, t, void 0) } function r(e, t, r) { t.visitDescriptor(e, r); var a = e.Select; if (a && a.length) for (var n = 0, o = a.length; n < o; n++)t.visitSelect(a[n], r); var s = e.Expressions; s && i(s, t, r) } function i(e, t, r) { t.visitExpressions(e, r), a(e.Primary, t, r); var i = e.Secondary; i && a(i, t, r) } function a(e, t, r) { t.visitDataShapeExpressionsAxis(e, r); for (var i = e.Groupings, a = 0, o = i.length; a < o; a++)n(i[a], t, r) } function n(e, t, r) { t.visitDataShapeExpressionsAxisGrouping(e, r); for (var i = e.Keys, a = 0, n = i.length; a < n; a++)o(i[a], t, r) } function o(e, t, r) { t.visitDataShapeExpressionsAxisGroupingKey(e, r), t.visitConceptualPropertyReference(e.Source, r) } e.traverseQueryBindingDescriptor = t, e.traverseQueryBindingDescriptorWithArg = r; var s = (function () { function e() { } return e.prototype.visitDescriptor = function (e, t) { }, e.prototype.visitSelect = function (e, t) { }, e.prototype.visitExpressions = function (e, t) { }, e.prototype.visitDataShapeExpressionsAxis = function (e, t) { }, e.prototype.visitDataShapeExpressionsAxisGrouping = function (e, t) { }, e.prototype.visitDataShapeExpressionsAxisGroupingKey = function (e, t) { }, e.prototype.visitConceptualPropertyReference = function (e, t) { }, e })(); e.DefaultQueryBindingDescriptorVisitorWithArg = s; var u = (function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return __extends(t, e), t })(s); e.DefaultQueryBindingDescriptorVisitor = u })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r() { return new a } function i(e) { for (var t = [], r = 0, i = e.length; r < i; r++) { var a = e[r]; a.entityRename && t.push(new o(a.entityRename)), a.propertyRename && t.push(new s(a.propertyRename)) } return t } t.createQueryCacheHandler = r; var a = (function () { function e() { } return e.prototype.apply = function (e, t, r) { var i = new n(r); e.rewriteCacheEntries("dsr", t, i) }, e })(), n = (function () { function r(t) { this.descriptorRewriters = i(t), this.schemaRewriters = e.createSchemaChangeRewriters(t) } return r.prototype.rewriteDataQueryCacheKey = function (e) { return e.Commands[0].SemanticQueryDataShapeCommand = this.rewriteCacheKey(e.Commands[0].SemanticQueryDataShapeCommand), e }, r.prototype.rewriteCacheKey = function (t) { for (var r = e.services.SemanticQuerySerializer, i = this.schemaRewriters, a = r.deserializeQuery(t.Query), n = 0, o = i.length; n < o; n++)a = a.rewrite(i[n]); return t.Query = r.serializeQuery(a), t }, r.prototype.rewriteCacheResult = function (e) { for (var r = this.descriptorRewriters, i = 0, a = r.length; i < a; i++) { var n = r[i]; t.traverseQueryBindingDescriptor(e.descriptor, n) } return e }, r })(), o = (function (e) { function r(t) { var r = e.call(this) || this; return r.change = t, r } return __extends(r, e), r.prototype.visitConceptualPropertyReference = function (e) { this.change.schema === t.schemaName(e) && e.Entity === this.change.before && (e.Entity = this.change.after) }, r })(t.DefaultQueryBindingDescriptorVisitor), s = (function (e) { function r(t) { var r = e.call(this) || this; return r.change = t, r } return __extends(r, e), r.prototype.visitConceptualPropertyReference = function (e) { this.change.schema === t.schemaName(e) && e.Property === this.change.before && (e.Property = this.change.after) }, r })(t.DefaultQueryBindingDescriptorVisitor) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = jsCommon.ArrayExtensions, r = (function () { function r(e, t) { !t.ScriptVisualBinding, this._metadata = e, this._binding = t } return r.prototype.getSelectRestatements = function () { return this.getRestatements() }, r.prototype.getGroupRestatements = function () { return this.getRestatements(e.SelectKind.Group) }, r.prototype.getMeasureRestatements = function () { return this.getRestatements(e.SelectKind.Measure) }, r.prototype.getFilterRestatements = function () { var e = this._metadata.Filters; if (_.isEmpty(e)) return null; for (var r = [], i = 0, a = e.length; i < a; i++) { var n = e[i]; r.push(n ? n.Restatement : "") } return t.emptyToNull(r) }, r.prototype.getRestatements = function (e) { var r = this._metadata, i = this._binding, a = []; if (!i.ScriptVisualBinding) for (var n = 0, o = r.Select.length; n < o; n++) { var s = i.Select[n], u = r.Select[n]; s && (void 0 !== e && s.Kind !== e || a.push(u.Restatement || "")) } return t.emptyToNull(a) }, r })(); e.QueryDescription = r })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i() { return new f(t.services.SemanticQuerySerializer) } function a(e, t, r, i, a, n, s, u, c, l, p, d) { var f = n; if (n) for (var m = 0, y = o([r], i); m < y.length; m++) { var v = y[m]; f = f.rewrite(v) } var g; return n && (g = [e.serializeFilter(f)]), h.generateBaseDataShapeBinding(t, r, i, a, g, s, u, c, l, e, p, d) } function n(e) { for (var t, r = e.select(), i = r.length - 1; i >= 0; i--)p.isConstant(r[i].expr) && (r.splice(i, 1), t = !0); return t ? e.select(r) : e } function o(e, t) { return [new m, new v(e, t), new y] } var s = jsCommon.ArrayExtensions, u = e.data.services, c = e.data.FilterKindDetector, l = e.data.dsr.SelectToIdentityExpressionsVisitor, p = e.data.SQExpr; r.createQueryGenerator = i; var d = 1e3, f = (function () { function i(e) { this.serializer = e } return i.prototype.execute = function (e) { var t = this.executeForQueryOnlyImpl(e); if (!t || !t.dataShapeBinding && t.mergedQueries && t.mergedQueries.mapping && 2 === t.mergedQueries.mapping.updateType) return { command: void 0 }; var r = t.mergedQueries, i = t.dataShapeBinding, a = t.query; this.adjustIntersectionDataReduction(i, r.mapping, a, e.highVolumeOverride), _.isEmpty(a.groupBy()) || this.applyDataReductionForGroupByQuery(i, a); var n = t.mergedQueries && t.mergedQueries.mapping && 1 === t.mergedQueries.mapping.updateType && _.isEmpty(e.additionalProjections); return { command: this.createDataQuery(a, t.queryExtensionSchema, e.dataSourceVariables, i, t.compiledDataViewMappings, e.dataWindow, e.executionMetricsKinds), splits: r.splits, queryRewrites: t.queryRewrites, deferred: n } }, i.prototype.executeForQueryOnly = function (e) { var t = this.executeForQueryOnlyImpl(e); return t && t.query }, i.prototype.produceIdentities = function (e, t) { var r = new l; return e.accept(r, t) }, i.prototype.executeForQueryOnlyImpl = function (e) { var i = this.getQueryableMappings(e.mappings), n = this.prepareQuery(e.query, i, e.additionalProjections), o = n.query, s = n.mappings, u = n.queryRewrites, c = n.additionalProjections, l = h.getIndicesByName(o), p = r.mergeMappings(i, l); t.applyDataReductionDefaults(e.mappings); var d; e.highVolumeOverride && (d = 6), p.mapping.categorical && h.updateMappingsWithScalarKeys(p.mapping, l); var f = a(this.serializer, l, p.mapping, o.select(), c, e.highlightFilter, e.restartToken, o.groupBy(), d, e.expansionStates, e.keepProjectionOrder, e.supportsExecutionType); t.DataViewPivotCategoricalToPrimaryGroups.pivotBinding(f, s, p.mapping, o.select(), 3, d), this.queryHasMeasureFilter(o) && (this.processTargetsForMeasureFilters(o, s, f), o = this.adjustQueryMeasureFilters(o, f)); var m; if (e.queryExtensionLookup) { var y = e.queryExtensionLookup(o, u); o = y.query, m = y.extensions, u = y.queryRewrites } return { query: o, queryExtensionSchema: m, mergedQueries: p, dataShapeBinding: f, compiledDataViewMappings: s, queryRewrites: u } }, i.prototype.hasAmbiguousEqualitySemantics = function (e) { return p.equals(e, t.SQExprBuilder.boolean(!1)) || p.equals(e, t.SQExprBuilder.integer(0)) }, i.prototype.getQueryableMappings = function (e) { return _.filter(e, (function (e) { return !e.usage || !e.usage.regression })) }, i.prototype.prepareQuery = function (e, t, r) { for (var i = 0, a = o(t, e.select()); i < a.length; i++) { var s = a[i]; e = e.rewrite(s) } var u = this.rewriteQuery(e, t, r); return u.query = n(u.query), u }, i.prototype.rewriteQuery = function (e, t, i) { var a = { query: e, mappings: t, additionalProjections: i }; return a = r.MultiMappedQueryRewriter.run(a), a = r.AggregatesQueryRewriter.run(a) }, i.prototype.adjustIntersectionDataReduction = function (e, r, i, a) { if (r.categorical) { var n = r.categorical; if (n.dataReductionAlgorithm) if (e.DataReduction && e.DataReduction.Intersection) e.Primary && !e.Secondary && (e.DataReduction.Primary = e.DataReduction.Intersection, e.DataReduction.Intersection = void 0); else { var o = e.Primary && (!e.DataReduction || !e.DataReduction.Primary), s = e.Secondary && (!e.DataReduction || !e.DataReduction.Secondary); if (!o && !s) return; e.DataReduction || (e.DataReduction = { DataVolume: n.dataVolume || (a ? 6 : 3) }), o && (e.DataReduction.Primary = t.DataShapeBindingDataReduction.createFrom(n.dataReductionAlgorithm, i.select())), s && (e.DataReduction.Secondary = t.DataShapeBindingDataReduction.createFrom(n.dataReductionAlgorithm, i.select())) } } }, i.prototype.applyDataReductionForGroupByQuery = function (e, r) { e.DataReduction = {}, e.DataReduction.Primary = t.DataShapeBindingDataReduction.createFrom({ top: { count: d } }, r.select()) }, i.prototype.generateScriptVisualCommand = function (t, r) { var i = e.ScriptResultUtil.extractScriptResult(t); if (i || (i = e.ScriptResultUtil.extractScriptResultDefaultFromDataViewMappings(t)), !i) return null; var a = { Version: 0, Script: i.source, RenderingEngine: i.provider, ScriptOutputType: i.outputType }; r && r.height && r.width && (a.ViewportWidthPx = r.width, a.ViewportHeightPx = r.height); var n = e.ScriptResultUtil.findScriptResultMapping(t); return n && n.script.scriptInput && (a.ScriptInput = n.script.scriptInput), { ScriptVisualCommand: a } }, i.prototype.queryHasMeasureFilter = function (e) { for (var t = 0, r = e.where(); t < r.length; t++) { var i = r[t]; if (1 === c.run(i.condition)) return !0 } return !1 }, i.prototype.removeExprFromTargetExprs = function (e, t) { for (var r = 0, i = e; r < i.length; r++) { var a = i[r], n = a.target; if (null != n) for (var o = 0, s = n.length; o < s; o++)p.equals(n[o], t) && n.splice(o, 1) } }, i.prototype.processTargetsForMeasureFilters = function (e, r, i) { for (var a = this, n = this.getProjectedSelectIndexMap(i), o = 0, u = r; o < u.length; o++) { var c = u[o]; t.CompiledDataViewMapping.visitMapping(c, { visitRole: function (t) { var r = t.activeItems, i = t.items; if (r && !_.isEmpty(r) && !_.isEmpty(i)) for (var o = _.findIndex(i, (function (e) { return _.includes(r, e.queryName) })), u = 0; u < o; u++) { var c = i[u].queryName, l = e.select(), p = s.indexWithName(l, c); if (!n[p]) { var d = l[p].expr; a.removeExprFromTargetExprs(e.where(), d) } } } }) } }, i.prototype.adjustQueryMeasureFilters = function (e, r) { var i = e.where(), a = [], n = []; if (_.isEmpty(r.Primary.Groupings) || _.isEmpty(r.Primary.Groupings[0].Projections) || !_.isEmpty(r.Secondary)) return e; for (var o = e.select(), s = r.Primary.Groupings[0].Projections, u = 0, c = s; u < c.length; u++) { var l = c[u], p = o[l]; if (!t.SQExprUtils.isMeasure(p.expr)) return e } for (var d = 0, f = i; d < f.length; d++) { var h = f[d]; if (_.isEmpty(h.target)) n.push(h); else { if (h.target.length > 1) return e; a.push(h) } } if (_.isEmpty(a)) return e; var m = t.SemanticQuery.createWith({ from: e.from(), select: e.select(), orderBy: e.orderBy(), top: e.top(), transforms: e.transforms(), groupBy: e.groupBy(), where: n }), y = t.SemanticFilter.fromMeasureFilters(e, a); return m = m.addSemanticFilter(y) }, i.prototype.getProjectedSelectIndexMap = function (e) { return e ? _.chain([e.Primary, e.Secondary]).filter((function (e) { return e && !_.isEmpty(e.Groupings) })).map((function (e) { return e.Groupings })).flatten().filter((function (e) { return !_.isEmpty(e.Projections) })).map((function (e) { return e.Projections })).flatten(!1).reduce((function (e, t) { return e[t] = !0, e }), {}).value() : {} }, i.prototype.createDataQuery = function (e, t, r, i, a, n, o) { var s = { Query: this.serializer.serializeQuery(e), Binding: i }; t && (s.Extension = t), r && (s.DataSourceVariables = r), o && (s.ExecutionMetricsKind = o); var u = { SemanticQueryDataShapeCommand: s }, c = { Commands: [u] }, l = this.generateScriptVisualCommand(a, n); return l && c.Commands.push(l), c }, i })(); r.generateDataShapeBinding = a; var h; !(function (e) { function r(e, t, o, s, u, l, p, d, f, h, m, v) { var g = new y(e, o, m).withRestartToken(l).withHighlightFilter(u).withAdditionalProjections(s); if (t.table && (g = g.withGroupBy(p)), 2 !== t.updateType || !v) if (t.categorical) i(g, t.categorical); else if (t.table) a(g, t.table); else if (t.matrix) n(g, t.matrix, f); else if (t.tree) c(g, t.tree); else if (t.scriptResult) return r(e, t.scriptResult.dataInput, o, s); return d && g.withDataVolume(d), g.toBinding(t) } function i(e, r) { t.CompiledDataViewMapping.visitCategoricalCategories(r.categories, { visitRole: function (t) { e.withPrimaryGrouping(t.items, t.activeItems, t.showAll, t.subtotalType, !0) }, visitReduction: function (t) { e.withPrimaryDataReduction(t) } }), t.CompiledDataViewMapping.visitGrouped(r.values, { visitRole: function (t) { e.withSecondaryGrouping(t.items, t.activeItems, t.showAll, t.subtotalType) }, visitReduction: function (t) { e.withSecondaryDataReduction(t) } }), t.CompiledDataViewMapping.visitCategoricalValues(r.values, { visitRole: function (t, r) { e.withInnermostGrouping(t.items, t.showAll, t.subtotalType, void 0, 1 !== r) } }), e.withIntersectionDataReduction(r.dataReductionAlgorithm).withDataVolume(r.dataVolume).withIncludeEmptyGroups(r.includeEmptyGroups) } function a(e, r) { t.CompiledDataViewMapping.visitTable(r, { visitRole: function (t) { e.withPrimaryGrouping(t.items, t.activeItems, t.showAll, t.subtotalType, !0) }, visitReduction: function (t) { e.withPrimaryDataReduction(t) } }), e.withDataVolume(r.dataVolume) } function n(e, r, i) { var a = new m(e); t.CompiledDataViewMapping.visitMatrixRows(r.rows, a); var n = o(a.primaryRoleItems, a.primaryActiveRoleItems, a.primaryRoles, i); n && e.withPrimaryExpansion(n), t.CompiledDataViewMapping.visitMatrixColumns(r.columns, { visitRole: function (t) { e.withSecondaryGroupingNested(t.items, t.activeItems, t.showAll, t.subtotalType) }, visitReduction: function (t) { e.withSecondaryDataReduction(t) } }), t.CompiledDataViewMapping.visitMatrixValues(r.values, { visitRole: function (t) { e.withInnermostGrouping(t.items, t.showAll, t.subtotalType, !0) } }), e.withDataVolume(r.dataVolume) } function o(e, t, r, i) { if (!_.isEmpty(i)) { var a = _.find(i, (function (e) { return _.isEqual(e.roles, r) })); if (!_.isEmpty(a.levels)) { e = _.uniqBy(e, (function (e) { return e.queryName })), t = _.uniq(t); var n = _.isEmpty(t) ? e.length : t.length, o = n - 1; return u.DataShapeBindingExpansionStateSerializer.serializeExpansionState(a, o) } } } function c(e, r) { t.CompiledDataViewMapping.visitTreeNodes(r.nodes, { visitRole: function (t) { e.withPrimaryGroupingNested(t.items, t.activeItems, t.showAll, t.subtotalType) }, visitReduction: function (t) { e.withPrimaryDataReduction(t) } }), t.CompiledDataViewMapping.visitTreeValues(r.values, { visitRole: function (t) { e.withInnermostGrouping(t.items, t.showAll, t.subtotalType) } }), e.withDataVolume(r.dataVolume) } function l(e) { for (var t = {}, r = e.select(), i = e.groupBy(), a = 0, n = r.length; a < n; a++)t[r[a].name] = a; for (var a = 0, n = i.length; a < n; a++)t[i[a].name] = a; return t } function p(e, t) { if (t) for (var r = 0, i = t.Groupings; r < i.length; r++) { var a = i[r]; if (_.includes(a.Projections, e)) return !0 } } function d(e) { switch (e) { case 1: return 1; case 2: return 2; case 0: return } } function f(e) { var t = { K: e.k }; return e.exclusive && (t.Exclusive = e.exclusive), { Percentile: t } } function h(e, r) { var i = (function () { function e(e) { this.indicesByName = e } return e.prototype.visitRole = function (e, t) { if (!_.isEmpty(e.items)) { for (var r, i = 0, a = e.items; i < a.length; i++) { var n = a[i]; n.scalarKeyInfo && null != n.scalarKeyInfo.scalarKeyQueryName && (r = n.scalarKeyInfo.scalarKeyQueryName) } r && (this.primaryScalarKey = this.indicesByName[r]) } }, e })(), a = new i(r); t.CompiledDataViewMapping.visitMapping(e, a), null != a.primaryScalarKey && t.CompiledDataViewMapping.visitMapping(e, { visitRole: function () { }, visitReduction: function (e) { e.binnedLineSample && (e.binnedLineSample.primaryScalarKey = a.primaryScalarKey) } }) } e.generateBaseDataShapeBinding = r; var m = (function () { function e(e) { this.inComposite = !1, this.startedCompositeNest = !1, this.builder = e } return e.prototype.visitRole = function (e) { var t, r; if (this.inComposite) { var i = this.startedCompositeNest; this.startedCompositeNest = !0, this.builder.withPrimaryGrouping(e.items, e.activeItems, e.showAll, e.subtotalType, i) } else this.builder.withPrimaryGroupingNested(e.items, e.activeItems, e.showAll, e.subtotalType); this.primaryRoleItems || (this.primaryRoleItems = []), this.primaryRoles || (this.primaryRoles = []), this.primaryRoles.push(e.role), (t = this.primaryRoleItems).push.apply(t, e.items), _.isEmpty(e.activeItems) || (this.primaryActiveRoleItems || (this.primaryActiveRoleItems = []), (r = this.primaryActiveRoleItems).push.apply(r, e.activeItems)) }, e.prototype.visitReduction = function (e) { this.builder.withPrimaryDataReduction(e) }, e.prototype.enterComposite = function () { this.inComposite = !0, this.startedCompositeNest = !1 }, e.prototype.exitComposite = function () { this.inComposite = !1, this.startedCompositeNest = !1 }, e })(); e.getIndicesByName = l, e.updateMappingsWithScalarKeys = h; var y = (function () { function e(e, t, r) { this.indicesByName = e, this.querySelects = t, this.reduction = { DataVolume: 3 }, this.joinPredicateBehaviors = [], this.insertProjection = r ? s.insertUnique : s.insertSorted } return e.prototype.withRestartToken = function (e) { return this.restartToken = e, this }, e.prototype.withDataVolume = function (e) { return null == e ? this : (this.reduction.DataVolume = e, this) }, e.prototype.withIncludeEmptyGroups = function (e) { return this.includeEmptyGroups = e, this }, e.prototype.withHighlightFilter = function (e) { return this.highlightFilter = e, this }, e.prototype.withGroupBy = function (e) { return _.isEmpty(e) || (this.groupByNames = _.map(e, (function (e) { return e.name }))), this }, e.prototype.withPrimaryGrouping = function (e, t, r, i, a) { if (e = this.filterItems(e, t), _.isEmpty(e)) return this; var n; return this.primary ? a ? n = _.last(this.primary.Groupings) : (n = { Projections: [] }, this.primary.Groupings.push(n)) : (n = { Projections: [] }, this.primary = { Groupings: [n] }), this.updateGrouping(n, e, r, i), this }, e.prototype.withPrimaryExpansion = function (e) { return this.ensurePrimaryAxis(), this.primary.Expansion = e, this }, e.prototype.ensurePrimaryAxis = function () { this.primary || (this.primary = { Groupings: [] }) }, e.prototype.ensureSecondaryAxis = function () { this.secondary || (this.secondary = { Groupings: [] }) }, e.prototype.withPrimaryGroupingNested = function (e, t, r, i) { if (e = this.filterItems(e, t), _.isEmpty(e)) return this; this.primary || (this.primary = { Groupings: [] }); var a; return a = this.primary.Groupings, this.withNested(a, e, r, i) }, e.prototype.withSecondaryGrouping = function (e, t, r, i) { if (e = this.filterItems(e, t), _.isEmpty(e)) return this; var a; if (this.primary) { var n = _.last(this.primary.Groupings); this.containsAll(n, e) ? a = n : (this.secondary || (this.secondary = { Groupings: [] }), a = { Projections: [] }, this.secondary.Groupings.push(a)) } else a = { Projections: [] }, this.primary = { Groupings: [a] }, this.pivotedSecondaryToPrimary = !0; return this.updateGrouping(a, e, r, i), this }, e.prototype.withSecondaryExpansion = function (e) { return this.ensureSecondaryAxis(), this.secondary.Expansion = e, this }, e.prototype.withSecondaryGroupingNested = function (e, t, r, i) { if (e = this.filterItems(e, t), _.isEmpty(e)) return this; var a; return this.primary ? (this.secondary || (this.secondary = { Groupings: [] }), a = this.secondary.Groupings) : (a = [], this.primary = { Groupings: a }, this.pivotedSecondaryToPrimary = !0), this.withNested(a, e, r, i) }, e.prototype.withInnermostGrouping = function (e, t, r, i, a) { if (e = this.filterItems(e, null), _.isEmpty(e)) return this; var n; if (i && this.secondary ? n = _.last(this.secondary.Groupings) : this.primary ? n = _.last(this.primary.Groupings) : (n = { Projections: [] }, this.primary = { Groupings: [n] }), this.updateGrouping(n, e, t, r), this.secondary && a) for (var o = _.last(this.secondary.Groupings), s = this.indicesByName, u = 0, c = e; u < c.length; u++) { var l = c[u]; this.addSuppressedProjection(o, s[l.queryName]) } return this }, e.prototype.withPrimaryDataReduction = function (e) { return e && this.primary ? (this.reduction.Primary = t.DataShapeBindingDataReduction.createFrom(e, this.querySelects), this) : this }, e.prototype.withSecondaryDataReduction = function (e) { return this.pivotedSecondaryToPrimary ? this.withPrimaryDataReduction(e) : e && this.secondary ? (this.reduction.Secondary = t.DataShapeBindingDataReduction.createFrom(e, this.querySelects), this) : this }, e.prototype.withIntersectionDataReduction = function (e) { return e ? this.reduction.Primary || this.reduction.Secondary ? this : e.binnedLineSample ? (this.reduction.Intersection = t.DataShapeBindingDataReduction.createFrom(e, this.querySelects), this) : this : this }, e.prototype.updateGrouping = function (e, t, r, i) { this.addProjections(e.Projections, t); var a = this.indicesByName; if (r) { e.ShowItemsWithNoData || (e.ShowItemsWithNoData = []); for (var n = 0, o = t; n < o.length; n++) { var s = o[n]; this.insertProjection(e.ShowItemsWithNoData, a[s.queryName]) } } for (var u = t[0].subtotalType, c = 1, l = t.length; c < l; c++)if (t[c].subtotalType !== u) { u = void 0; break } var p = d(null != u ? u : i); null != p && (e.Subtotal = p); var f = this.groupByNames; f && (e.GroupBy = _.map(f, (function (e) { return a[e] }))) }, e.prototype.withNested = function (e, t, r, i) { for (var a = 0, n = t; a < n.length; a++) { var o = n[a], s = { Projections: [] }; this.updateGrouping(s, [o], r, i), e.push(s) } return this }, e.prototype.filterItems = function (e, t) { if (!_.isEmpty(e)) { e = _.uniqBy(e, (function (e) { return e.queryName })); var r, i = this.indicesByName; t && (r = []); for (var a = 0, n = e.length; a < n; a++) { var o = e[a], u = null, c = t && !_.isEmpty(t) && !_.includes(t, o.queryName); null == i[o.queryName] ? u = a - 1 : (c || this.isReferenced(o)) && (u = a), null == u ? r && r.push(o) : r || (r = u < 0 ? [] : s.range(e, 0, u)) } return r || e } }, e.prototype.isReferenced = function (e) { var t = this.indicesByName[e.queryName]; return p(t, this.primary) || p(t, this.secondary) || _.includes(this.projections, t) }, e.prototype.containsAll = function (e, t) { for (var r = e.Projections, i = this.indicesByName, a = 0, n = t; a < n.length; a++) { var o = n[a]; if (!_.includes(r, i[o.queryName])) return !1 } return !0 }, e.prototype.addProjections = function (e, t) { for (var r = this.indicesByName, i = 0, a = t; i < a.length; i++) { var n = a[i], o = r[n.queryName]; this.insertProjection(e, o), this.addJoinPredicateBehavior(o, n.joinPredicate) } }, e.prototype.addJoinPredicateBehavior = function (e, t) { this.joinPredicateBehaviors[e] ? void 0 === t && (this.joinPredicateBehaviors[e].behavior = t) : this.joinPredicateBehaviors[e] = { behavior: t } }, e.prototype.withAdditionalProjections = function (e) { return _.isEmpty(e) || (this.additionalProjections = e), this }, e.prototype.applyAdditional = function (e) { var r = this, i = this.querySelects, a = this.additionalProjections, n = g.findActive(e); if (!_.isEmpty(a)) for (var o = this.primary, s = this.secondary, u = this.projections, c = 0, l = a; c < l.length; c++) { var p = l[c], d = t.DataBoundObjectQueryExtender.getScopeRefs(p.selector, i, n), f = this.indicesByName[p.queryName]; if (this.applyAggregates(f, p.aggregates), null !== d) { var h = _.map(d, (function (e) { return r.indicesByName[e] })), m = s && !_.isEmpty(s.Groupings), y = o && this.addAdditional(f, h, o.Groupings); y && m && this.addSuppressedProjection(_.last(s.Groupings), f), y || (y = m && this.addAdditional(f, h, s.Groupings)), y && this.addJoinPredicateBehavior(f, p.joinPredicate) } else { if (p.aggregates) continue; u || (this.projections = u = []), this.insertProjection(u, f), this.addJoinPredicateBehavior(f, p.joinPredicate) } } }, e.prototype.addAdditional = function (e, t, r) { for (var i = 0, a = r.length; i < a; i++) { var n = r[i], o = n.Projections; if (_.remove(t, (function (e) { return _.includes(o, e) })), 0 === t.length) return this.insertProjection(_.last(r).Projections, e), !0 } return !1 }, e.prototype.addSuppressedProjection = function (e, t) { e.SuppressedProjections || (e.SuppressedProjections = []), this.insertProjection(e.SuppressedProjections, t) }, e.prototype.applyAggregates = function (e, t) { if (t) { var r = this.aggregates; r || (r = this.aggregates = []); var i = [], a = { Select: e, Aggregations: i }; if (t.min && i.push({ Min: {} }), t.max && i.push({ Max: {} }), t.average && i.push({ Average: {} }), t.median && i.push({ Median: {} }), t.percentiles) for (var n = 0, o = t.percentiles; n < o.length; n++) { var s = o[n]; i.push(f(s)) } r.push(a) } }, e.prototype.toBinding = function (e) { this.applyAdditional(e); var t = this.primary, r = this.projections; if (!t) { if (!r) return; t = { Groupings: [{ Projections: r }] }, r = null } var i = this.restartToken; i && this.reduction.Primary && this.reduction.Primary.Window && (this.reduction.Primary.Window.RestartTokens = i); var a = { Primary: t }; this.secondary && (a.Secondary = this.secondary), r && (a.Projections = r), (this.reduction.Primary || this.reduction.Secondary || this.reduction.Intersection) && (a.DataReduction = this.reduction), this.includeEmptyGroups && (a.IncludeEmptyGroups = this.includeEmptyGroups); var n = this.aggregates; n && (a.Aggregates = n); for (var o = [], s = 0; s < this.joinPredicateBehaviors.length; s++)this.joinPredicateBehaviors[s] && 0 === this.joinPredicateBehaviors[s].behavior && o.push(s); return _.isEmpty(o) || (a.SuppressedJoinPredicates = o), a.Version = 1, this.highlightFilter && (a.Highlights = this.highlightFilter), a }, e })() })(h || (h = {})); var m = (function (e) { function r() { return null !== e && e.apply(this, arguments) || this } return __extends(r, e), r.prototype.visitScopedEval = function (e) { return _.isEmpty(e.scope) ? e : t.SQExprBuilder.scopedEval(e.expression, _.filter(e.scope, (function (e) { return !p.isWithRef(e) }))) }, r })(t.SQExprRewriter), y = (function (e) { function r() { return null !== e && e.apply(this, arguments) || this } return __extends(r, e), r.prototype.visitGroupRef = function (e) { return new t.SQColumnRefExpr(e.source, e.ref) }, r })(t.SQExprRewriter), v = (function (e) { function r(t, r) { var i = e.call(this) || this; return i.mappings = t, i.selects = r, i } return __extends(r, e), r.prototype.visitScopedEval = function (e) { for (var r = [], i = !1, a = 0, n = e.scope; a < n.length; a++) { var o = n[a]; if (p.isRoleRef(o)) { i = !0; for (var s = 0, u = this.mappings; s < u.length; s++) { var c = u[s], l = g.findActive(c), d = l[o.role]; if (d) for (var f = function (e) { var t = _.find(h.selects, (function (t) { return t.name === e })); t && r.push(t.expr) }, h = this, m = 0, y = d; m < y.length; m++) { var v = y[m]; f(v) } } } else r.push(o) } return i ? t.SQExprBuilder.scopedEval(e.expression, _.uniqBy(r, (function (e) { return t.services.SemanticQuerySerializer.serializeExpr(e) }))) : e }, r })(t.SQExprRewriter), g = (function () { function e() { this.queryReferencesByRole = {} } return e.findActive = function (r) { var i = new e; return t.CompiledDataViewMapping.visitMapping(r, i), i.queryReferencesByRole }, e.prototype.visitRole = function (e) { var t = e.items; _.isEmpty(e.activeItems) || (t = _.filter(t, (function (t) { return _.includes(e.activeItems, t.queryName) }))), this.queryReferencesByRole[e.role] = _.map(t, (function (e) { return e.queryName })) }, e })() })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var r; !(function (r) {
            function i(e, t, r, i) { return new l(e, t, r, i) } function a(e) { return e && e.Window && null != e.Window.RestartTokens } function n(e) { return !e || !!e.Window } function o(e, t) { if (r.isDsrV2(e)) { if (!t) return !1; for (var i = r.reader.V2.createDsrParser(e, void 0).dataShapes(); i.next();)if (!i.complete() || i.limitsExceeded() || i.hasRestartTokens()) return !1; return !0 } return _.every(e.DataShapes, (function (e) { return e && e.IsComplete && _.isEmpty(e.DataLimitsExceeded) && !e.RestartTokens })) } function s(e) { if (e && e.From && e.Select) return t.services.SemanticQuerySerializer.deserializeQuery(e) } var u = jsCommon.Utility; r.createQueryCache = i; var c, l = (function () { function t(e, t, r, i) { this.featureSwitches = i, this.createQuery = t, this.createCancelQuery = r, this.promiseFactory = e, this.cacheByModel = {} } return t.prototype.ensure = function (r) { var i = this, n = r.command, s = n.Commands[0].SemanticQueryDataShapeCommand, u = this.ensureCache(r.dataSources), l = c.generateCacheKeyDataQuery(n); if (u.hasCacheEntry(l)) { if (t.allowCacheOrDefault(r)) return u.bindCacheEntry(l, void 0, r.telemetryV2Enabled); u.clearEntry(l) } var p = c.createCacheItemContext(n, this.featureSwitches, l), d = this.findEquivalentCache(r, u, p); if (d) return d; var f = u.createCacheEntry(l, p, this.rewriteCacheDataWithoutExecutionMetrics, r.telemetryV2Enabled), h = _.assign({}, r, { queryId: p.queryId, executionType: 0 }); f.promise.catch((function (t) { e.isHttpClientError(t) || i.featureSwitches && i.featureSwitches.queryCancellation && i.createCancelQuery({ dataSources: h.dataSources, command: h.command, allowCache: h.allowCache, allowClientSideFilters: h.allowClientSideFilters, cacheResponseOnServer: h.cacheResponseOnServer, ignoreViewportForCache: h.ignoreViewportForCache, cacheOptions: h.cacheOptions, queryId: h.queryId, executionType: 1 }, t && t.queryCancellationSource) })), this.createQuery(h, f); var m = u.bindCacheEntry(l, void 0, r.telemetryV2Enabled); return s.Binding && s.Binding.DataReduction && (a(s.Binding.DataReduction.Primary) || a(s.Binding.DataReduction.Secondary)) || m.then((function (e) { e && e.dsr && o(e.dsr, i.featureSwitches && i.featureSwitches.dsrV2) && (p.hasAllData = !0) })), m }, t.prototype.clear = function (e) { var t = this.getCache(e); t && t.clearAllEntries() }, t.prototype.rewrite = function (e, t) { var r = this, i = this.getCache(e); if (i) { var a = {}; t.rewriteCacheKey && t.rewriteDataQueryCacheKey && (a.rewriteKey = function (e) { var a = JSON.parse(e), n = i.getEntryContext(e); if (n.compositeDataQuery) { var o = a, s = t.rewriteDataQueryCacheKey(o); if (s && s !== o) { var u = c.createCacheItemContextForCompositeDataQuery(s, r.featureSwitches); _.assign(n, u) } } else { var l = a, p = t.rewriteCacheKey(l); if (p && p !== l) { var u = c.createCacheItemContextForNonCompositeDataQuery(p, r.featureSwitches); _.assign(n, u) } } return n.key }), t.rewriteCacheResult && (a.rewriteResult = function (e) { var r = e, i = t.rewriteCacheResult({ descriptor: r.descriptor, dsr: r.dsr }); return i ? { descriptor: i.descriptor, dsr: i.dsr } : { descriptor: r.descriptor, dsr: r.dsr } }), i.rewriteAllEntries(a) } }, t.prototype.put = function (e, t, r) { var i = this.ensureCache(e), a = t, n = c.generateCacheKeyDataQuery(a); if (i.hasCacheEntry(n)) i.putCacheResult(n, r, this.rewriteCacheDataWithoutExecutionMetrics); else { var o = c.createCacheItemContext(a, this.featureSwitches, n); i.createCacheEntry(n, o, this.rewriteCacheDataWithoutExecutionMetrics).deferred.resolve(r) } }, t.allowCacheOrDefault = function (e) { return e.allowCache !== !1 }, t.prototype.findEquivalentCache = function (e, r, i) { if (t.allowCacheOrDefault(e)) if (i.compositeDataQuery) { if (e.ignoreViewportForCache) for (var a = 0, n = r.keys(); a < n.length; a++) { var o = n[a], s = r.getEntryContext(o); if (s && s.keyWithoutViewport && s.keyWithoutViewport === i.keyWithoutViewport) return r.bindCacheEntry(s.key, void 0, e.telemetryV2Enabled) } } else for (var u = 0, c = r.keys(); u < c.length; u++) { var o = c[u], s = r.getEntryContext(o); if (s) { if (s.hasAllData && s.keyWithoutReduction === i.keyWithoutReduction) return r.bindCacheEntry(s.key, void 0, e.telemetryV2Enabled); var l = p.tryReuseCacheWithClientSideFilters(r, s, e, i, e.telemetryV2Enabled); if (l) return l } } }, t.prototype.getCache = function (e) { return this.cacheByModel[this.generateModelKey(e)] }, t.prototype.ensureCache = function (t) { var r = this.generateModelKey(t), i = this.cacheByModel, a = i[r]; return void 0 === a && (a = i[r] = new e.RejectablePromiseCache(this.promiseFactory)), a }, t.prototype.generateModelKey = function (e) { if (!_.isEmpty(e)) return JSON.stringify(_.map(e, (function (e) { return { dbName: e.dbName, vsName: e.vsName, schemaName: e.schemaName } }))) }, t.prototype.rewriteCacheDataWithoutExecutionMetrics = function (e) { if (e) { var t = __assign({}, e); return delete t.metrics, t.fromClientCache = !0, t } return e }, t })(); !(function (e) { function t(e, t, r) { return n(e) ? i(e, t, r) : a(e.Commands[0].SemanticQueryDataShapeCommand, t, r) } function r(e) { return n(e) ? y(e) : o(e.Commands[0].SemanticQueryDataShapeCommand) } function i(e, t, r) { return { key: r || y(e), keyWithoutReduction: v(e), keyWithoutViewport: g(e), keyWithoutFilter: void 0, queryFilters: void 0, compositeDataQuery: !0, queryId: c(t) } } function a(e, t, r) { var i = p.isDataShapeCommandSuitableForClientSideFiltering(e); return { key: r || o(e), keyWithoutReduction: h(e), keyWithoutViewport: void 0, keyWithoutFilter: i ? m(e) : void 0, queryFilters: i ? S(e) : void 0, compositeDataQuery: !1, queryId: c(t) } } function n(e) { return e.Commands.length > 1 } function o(e) { if (e) return JSON.stringify(e) } function c(e) { return e && e.queryCancellation ? u.generateGuid() : "" } function l(e) { e && e.Binding && "object" == typeof e.Binding && (e.Binding.DataReduction = void 0, e.Binding.Limits = void 0) } function d(e) { e && (e.ViewportHeightPx = void 0, e.ViewportWidthPx = void 0) } function f(e) { e && e.Query && e.Query.Where && (e.Query.Where = void 0) } function h(e) { if (e) { var t = _.cloneDeep(e); return l(t), JSON.stringify(t) } } function m(e) { if (e) { var t = _.cloneDeep(e); return f(t), JSON.stringify(t) } } function y(e) { if (e) return JSON.stringify(e) } function v(e) { if (e) { var t = _.cloneDeep(e); return l(t.Commands[0].SemanticQueryDataShapeCommand), JSON.stringify(t) } } function g(e) { if (e) { var t = _.cloneDeep(e); return d(t.Commands[1].ScriptVisualCommand), JSON.stringify(t) } } function S(e) { var t = e && e.Query; if (t && !_.isEmpty(t.Where)) { var r = s(t), i = r && r.where(); if (!_.isEmpty(i)) return i } } e.createCacheItemContext = t, e.generateCacheKeyDataQuery = r, e.createCacheItemContextForCompositeDataQuery = i, e.createCacheItemContextForNonCompositeDataQuery = a })(c || (c = {})); var p; !(function (e) {
                function r(e) { if (!e) return !1; var t = e.Binding && e.Binding.DataReduction, r = t && t.Primary, i = t && t.Secondary; return !(!n(r) || !n(i)) && (!a(r) && !a(i)) } function i(e, t, r, i, a) { if (void 0 === a && (a = !1), r.allowClientSideFilters) { var n = o(t, i); return _.isEmpty(n) ? void 0 : e.bindCacheEntry(t.key, (function (e) { return p(e, n) }), a) } } function o(e, t) { if (!t.compositeDataQuery && !!t.keyWithoutFilter && !e.compositeDataQuery && e.keyWithoutFilter && e.hasAllData && e.keyWithoutFilter === t.keyWithoutFilter && l(u(e.queryFilters, t.queryFilters), t.queryFilters)) { var r = u(t.queryFilters, e.queryFilters); if (!_.isEmpty(r)) return c(t, r) } } function u(e, r) {
                    return _.isEmpty(r) ? e : _.filter(e, (function (e) {
                        return !t.SQFilter.contains(r, e)
                    }))
                } function c(e, r) { var i = JSON.parse(e.key), a = s(i && i.Query); if (a) { return t.ClientSideFilter.tryConvertToClientSideFilters(a.select(), r) } } function l(e, r) { return _.every(e, (function (e) { return _.some(r, (function (r) { return t.ClientSideFilter.isMoreRestrictiveFilter(r, e) })) })) } function p(e, t) { var r = __assign({}, e); return r.clientSideFilters = t, r } e.isDataShapeCommandSuitableForClientSideFiltering = r, e.tryReuseCacheWithClientSideFilters = i, e.tryComputeClientSideFilters = o
            })(p || (p = {}))
        })(r = t.dsr || (t.dsr = {}))
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r, i = jsCommon.DateExtensions; !(function (r) { function a(e) { return c(e) } function n(e) { return c(e, !0) } function o(e) { if (!e) return null; if (_.startsWith(e, d)) { return e.substring(d.length, e.length - 1) } return null } function s(e, t) { if (null === e) return null; switch (t) { case 4: return "number" == typeof e ? e : parseInt(e, 10); case 2: case 3: return "number" == typeof e ? e : l(e); case 7: case 6: if ("number" == typeof e) { var r = new Date(e), a = new Date(r.getUTCFullYear(), r.getUTCMonth(), r.getUTCDate(), r.getUTCHours(), r.getUTCMinutes(), r.getUTCSeconds(), r.getUTCMilliseconds()), n = new Date(r.getTime() + 6e4 * a.getTimezoneOffset()); return n.epochTimeStamp = e, n } return i.parseIsoDate(e); case 1: return e; case 5: return "number" == typeof e ? 1 === e : e; case 13: return c(e) } } function u(r, i, a) { if (null === r) return t.SQExprBuilder.nullConstant(); switch (a) { case 4: return "number" == typeof i ? t.SQExprBuilder.integer(+r) : t.SQExprBuilder.fromRawValue(260, +r, i.toString()); case 2: return "number" == typeof i ? t.SQExprBuilder.decimal(+r) : t.SQExprBuilder.fromRawValue(258, +r, i.toString()); case 3: return "number" == typeof i ? t.SQExprBuilder.double(+r) : t.SQExprBuilder.fromRawValue(259, +r, i.toString()); case 7: case 6: return "number" == typeof i ? new t.SQConstantExpr(e.ValueType.fromExtendedType(519), r) : t.SQExprBuilder.fromRawValue(519, r, i.toString()); case 1: return t.SQExprBuilder.text(r.toString()); case 5: return t.SQExprBuilder.boolean(!!r); case 13: return c(i, !0) } } function c(e, r) { var a = typeof e; if ("string" === a) { if (_.endsWith(e, "L")) { var n = parseInt(e, 10); return r ? t.SQExprBuilder.integer(n, e) : n } if (_.endsWith(e, "D")) { var o = l(e); return r ? t.SQExprBuilder.double(o, e) : o } if (_.endsWith(e, "M")) { var s = l(e); return r ? t.SQExprBuilder.decimal(s, e) : s } if (_.endsWith(e, "'")) { if ("'" === e.charAt(0)) { var u = e.substring(1, e.length - 1).replace(p, "'"); return r ? t.SQExprBuilder.text(u, e) : u } if (0 === e.indexOf("datetime'")) { var c = e.replace(f, "'"), d = e.substring(9, c.length - 1), h = i.parseIsoDate(d); return r ? t.SQExprBuilder.dateTime(h, c) : h } } if ("null" === e) return r ? t.SQExprBuilder.nullConstant() : null; if ("true" === e) return !r || t.SQExprBuilder.boolean(!0); if ("false" === e) return !!r && t.SQExprBuilder.boolean(!1) } return "boolean" === a ? r ? t.SQExprBuilder.boolean(e) : e : null === e ? r ? t.SQExprBuilder.nullConstant() : null : e } function l(e) { var t = parseFloat(e); return isNaN(t) ? parseFloat(e.replace("INF", "Infinity")) : t } var p = /''/g, d = "base64'", f = /\.000'$/; r.parseValue = a, r.parseValueToSQExpr = n, r.parseBinary = o, r.parseOptimizedValue = s, r.parseOptimizedValueToSQExpr = u, r.parseTypeEncodedValue = c })(r = t.PrimitiveValueEncoding || (t.PrimitiveValueEncoding = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { for (var t = [], o = 0, s = e.length; o < s; o++) { var u = e[o]; u.measureMove && t.push(r(u.measureMove)), u.entityRename && t.push(i(u.entityRename)), u.propertyRename && t.push(a(u.propertyRename)), u.hierarchyLevelRename && t.push(n(u.hierarchyLevelRename)) } return t } function r(e) { return new s(e) } function i(e) { return new o(e) } function a(e) { return new u(e) } function n(e) { return new c(e) } e.createSchemaChangeRewriters = t, e.createMoveMeasureRewriter = r, e.createEntityRenameRewriter = i, e.createPropertyRenameRewriter = a, e.createHierarchyLevelRenameRewriter = n; var o = (function (t) { function r(e) { var r = this; return r = t.call(this) || this, r.change = e, r } return __extends(r, t), r.prototype.visitEntity = function (t) { var r = this.change; return t.schema === r.schema && t.entity === r.before ? new e.SQEntityExpr(t.schema, r.after, t.variable) : t }, r })(e.SQExprRewriter), s = (function (t) { function r(e) { var r = this; return r = t.call(this) || this, r.change = e, r } return __extends(r, t), r.prototype.visitMeasureRef = function (t) { var r = this.change, i = e.FieldExprPattern.toFieldExprEntityItemPattern(e.SQExprConverter.asFieldPattern(t)); if (i.schema === r.schema && i.entity === r.source && t.ref === r.property) { var a = new e.SQEntityExpr(i.schema, r.destination); return new e.SQMeasureRefExpr(a, r.property) } return t }, r })(e.SQExprRewriter), u = (function (t) { function r(e) { var r = this; return r = t.call(this) || this, r.change = e, r } return __extends(r, t), r.prototype.visitColumnRef = function (t) { var r = this.change; return this.matches(r, t) ? new e.SQColumnRefExpr(t.source, r.after) : t }, r.prototype.visitMeasureRef = function (t) { var r = this.change; return this.matches(r, t) ? new e.SQMeasureRefExpr(t.source, r.after) : t }, r.prototype.visitGroupRef = function (t) { var r = this, i = t, a = this.change; this.matches(a, t) && (i = new e.SQGroupRefExpr(a.after, t.source, t.groupedExprs)); var n = _.map(t.groupedExprs, (function (e) { return e.accept(r) })); return e.SQExprUtils.sequenceEqual(n, t.groupedExprs) || (i = new e.SQGroupRefExpr(i.ref, i.source, n)), i }, r.prototype.visitHierarchy = function (t) { var r = t.arg.accept(this); if (r !== t.arg) return new e.SQHierarchyExpr(r, t.hierarchy); var i = this.change; return this.hierarchyMatches(i, t) ? new e.SQHierarchyExpr(t.arg, i.after) : t }, r.prototype.visitPropertyVariationSource = function (t) { var r = this.change; return this.variationMatches(r, t) ? new e.SQPropertyVariationSourceExpr(t.arg, t.name, r.after) : t }, r.prototype.variationMatches = function (e, t) { var r = t.arg; return r.schema === e.schema && r.entity === e.entity && t.property === e.before }, r.prototype.hierarchyMatches = function (t, r) { var i = r.arg; if (e.SQExpr.isEntity(i)) return "Hierarchy" === t.objectType && i.schema === t.schema && i.entity === t.entity && r.hierarchy === t.before }, r.prototype.matches = function (t, r) { var i = e.FieldExprPattern.toFieldExprEntityItemPattern(e.SQExprConverter.asFieldPattern(r)); return i.schema === t.schema && i.entity === t.entity && r.ref === t.before }, r })(e.SQExprRewriter), c = (function (t) { function r(e) { var r = this; return r = t.call(this) || this, r.change = e, r } return __extends(r, t), r.prototype.visitHierarchyLevel = function (t) { var r = this.change; return this.matches(r, t) ? new e.SQHierarchyLevelExpr(t.arg, r.after) : t }, r.prototype.matches = function (t, r) { var i = e.SQExprConverter.asFieldPattern(r); if (!i.columnHierarchyLevelVariation) { var a = e.FieldExprPattern.toFieldExprEntityItemPattern(i), n = r.arg; return a.schema === t.schema && a.entity === t.entity && n.hierarchy === t.hierarchy && r.level === t.before } }, r })(e.SQExprRewriter) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function t(e) { this.clauses = { from: e, select: [] } } return t.prototype.addWhere = function (e) { var t = this.clauses; t.where || (t.where = []), t.where.push(e) }, t.prototype.addOrderBy = function (e) { var t = this.clauses; t.orderBy || (t.orderBy = []), t.orderBy.push(e) }, t.prototype.addSelect = function (e) { this.clauses.select.push(e) }, t.prototype.addGroupBy = function (e) { var t = this.clauses; t.groupBy || (t.groupBy = []), t.groupBy.push(e) }, t.prototype.addTransform = function (e) { var t = this.clauses; t.transforms || (t.transforms = []), t.transforms.push(e) }, t.prototype.setTop = function (e) { this.clauses.top = e }, t.prototype.toQuery = function () { return e.SemanticQuery.createWith(this.clauses, !0) }, t.prototype.toFilter = function () { var t = this.clauses; if (t.from && t.where) return new e.SemanticFilter(t.from, t.where) }, t })(); e.SemanticQueryBuilder = t })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.Version0 = 0] = "Version0", e[e.Version1 = 1] = "Version1", e[e.Version2 = 2] = "Version2" })(t = e.SemanticQueryVersions || (e.SemanticQueryVersions = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r(e, t) { return e.accept(new i(t)) } t.run = r; var i = (function (t) { function r(e) { var r = t.call(this) || this; return r.schema = e, r } return __extends(r, t), r.prototype.visitPropertyVariationSource = function (t) { var r = t.arg.getTargetEntity(); if (!r) return t; var i = r.schema, a = this.schema.schema(i).findTargetEntityOfVariation(r.entity, t.property, t.name); return a ? e.SQExprBuilder.entity(i, a.name) : t }, r })(e.SQExprRewriter) })(t = e.VariationRewriter || (e.VariationRewriter = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i(r) { for (var i = { Version: 0, Sources: [], GroupedColumns: [] }, a = new e.SQFrom, o = 0, s = r.groupedColumns; o < s.length; o++) { var u = s[o], c = e.SQExprRewriterWithSourceRenames.rewrite(u, void 0, a); i.GroupedColumns.push(t.SemanticQuerySerializer.serializeExprWithRef(c)) } if (r.groupItems) { i.GroupItems = []; for (var l = 0, p = r.groupItems; l < p.length; l++) { var d = p[l], f = { DisplayName: d.name }; if (d.expression) { var c = e.SQExprRewriterWithSourceRenames.rewrite(d.expression, void 0, a); f.Expression = t.SemanticQuerySerializer.serializeExprWithRef(c) } d.blankDefaultPlaceholder && (f.BlankDefaultPlaceholder = !0), i.GroupItems.push(f) } } r.binItem && (i.BinItem = { Expression: t.SemanticQuerySerializer.serializeExprWithRef(e.SQExprRewriterWithSourceRenames.rewrite(r.binItem, void 0, a)) }), t.SemanticQuerySerializer.serializeFrom(a, i.Sources); var h = r.partitionTable; if (h) { i.PartitionTable = { Definition: { TableDefinition: t.SemanticQuerySerializer.serializeQuery(h.mappingTable), ItemIdColumns: h.itemIdColumns, PartitionIdColumn: h.partitionIdColumn } }; var m = h.partitions; m && (i.PartitionTable.Definition.Partitions = n(m)); var y = r.partitionTableResult; y && (i.PartitionTable.Result = { TableName: y.tableName, PartitionIdColumn: y.partitionIdColumn }); var v = r.partitionTable.defaultPartitionPrefix; v && (i.PartitionTable.Definition.DefaultPartitionPrefix = v) } return i } function a(e) { if (0 === e.Version) { for (var r = { groupedColumns: [] }, i = t.SemanticQuerySerializer.deserializeFrom(e.Sources), a = 0, n = e.GroupedColumns; a < n.length; a++) { var o = n[a]; r.groupedColumns.push(t.SemanticQuerySerializer.deserializeExprWithRef(o, i)) } if (e.GroupItems) { r.groupItems = []; for (var s = 0, u = e.GroupItems; s < u.length; s++) { var c = u[s], l = { name: c.DisplayName }; c.Expression && (l.expression = t.SemanticQuerySerializer.deserializeExprWithRef(c.Expression, i)), c.BlankDefaultPlaceholder && (l.blankDefaultPlaceholder = !0), r.groupItems.push(l) } } if (e.BinItem && (r.binItem = t.SemanticQuerySerializer.deserializeExprWithRef(e.BinItem.Expression, i)), e.PartitionTable) { var p = e.PartitionTable.Definition, d = p.TableDefinition; r.partitionTable = { mappingTable: t.SemanticQuerySerializer.deserializeQuery(d), itemIdColumns: p.ItemIdColumns, partitionIdColumn: p.PartitionIdColumn }; var f = p.Partitions; f && (r.partitionTable.partitions = _.map(f, (function (e) { return { displayName: e.DisplayName, partitionIds: _.map(e.PartitionIds, t.SemanticQuerySerializer.deserializeExpr) } }))); var h = e.PartitionTable.Result; h && (r.partitionTableResult = { tableName: h.TableName, partitionIdColumn: h.PartitionIdColumn }); var m = p.DefaultPartitionPrefix; m && (r.partitionTable.defaultPartitionPrefix = m) } return r } } function n(e) { return _.map(e, (function (e) { return { DisplayName: e.displayName, PartitionIds: _.map(e.partitionIds, t.SemanticQuerySerializer.serializeExpr) } })) } function o(t, r) { for (var i = s(t), a = new e.SQFrom, n = i.groupedColumns, o = 0; o < n.length; o++)n[o] = e.SQExprRewriterWithSourceRenames.rewrite(n[o], a, r); for (var u = i.groupItems, c = 0, l = u; c < l.length; c++) { var p = l[c]; p.expression && (p.expression = e.SQExprRewriterWithSourceRenames.rewrite(p.expression, a, r)) } var d = i.binItem; return d && (i.binItem = e.SQExprRewriterWithSourceRenames.rewrite(d, a, r)), i } function s(e) { return a(i(e)) } r.serialize = i, r.deserialize = a, r.serializePartitions = n, r.normalizeFromRefs = o })(r = t.SemanticGroupingSerializer || (t.SemanticGroupingSerializer = {})) })(t = e.services || (e.services = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r = e.ClientErrorStrings, i = (function () { function e() { } return Object.defineProperty(e.prototype, "code", { get: function () { return "RealTimeLongPollError" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e) { return { message: e.get("Realtime_longPollErrorValue"), displayableErrorInfo: [{ errorInfoKey: e.get("Realtime_longPollErrorKey"), errorInfoValue: e.get("Realtime_longPollErrorValue") }], debugErrorInfo: [{ errorInfoKey: r.ClientErrorCode, errorInfoValue: this.code }] } }, e })(); t.RealTimeLongPollError = i; var a = (function () { function e() { } return Object.defineProperty(e.prototype, "code", { get: function () { return "RealTimeGetHistory" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e) { return { message: e.get("Realtime_retrieveHistoryValue"), displayableErrorInfo: [{ errorInfoKey: e.get("Realtime_retrieveHistoryKey"), errorInfoValue: e.get("Realtime_retrieveHistoryValue") }], debugErrorInfo: [{ errorInfoKey: r.ClientErrorCode, errorInfoValue: this.code }] } }, e })(); t.RealTimeGetHistoryClientError = a; var n = (function () { function e() { } return Object.defineProperty(e.prototype, "code", { get: function () { return "RTMessageExceedLimit" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "ignorable", { get: function () { return !0 }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e) { return { message: e.get("Realtime_MessageExceedLimitValue"), displayableErrorInfo: [{ errorInfoKey: e.get("Realtime_MessageExceedLimitKey"), errorInfoValue: e.get("Realtime_MessageExceedLimitValue") }], debugErrorInfo: [{ errorInfoKey: r.ClientErrorCode, errorInfoValue: this.code }] } }, e })(); t.MessageExceedLimitClientError = n; var o = (function () { function e() { } return Object.defineProperty(e.prototype, "code", { get: function () { return "FailedRealTimeUpdate" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e) { return { message: e.get("Realtime_UpdateFailedValue"), displayableErrorInfo: [{ errorInfoKey: e.get("Realtime_UpdateFailedKey"), errorInfoValue: e.get("Realtime_UpdateFailedValue") }], debugErrorInfo: [{ errorInfoKey: r.ClientErrorCode, errorInfoValue: this.code }] } }, e })(); t.FailedRealTimeUpdateClientError = o; var s = (function () { function e() { } return Object.defineProperty(e.prototype, "code", { get: function () { return "RealTimePubNubCredentials" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e) { return { message: e.get("Realtime_PubNubGetCredentialsFailedValue"), displayableErrorInfo: [{ errorInfoKey: e.get("Realtime_PubNubGetCredentialsFailedKey"), errorInfoValue: e.get("Realtime_PubNubGetCredentialsFailedValue") }], debugErrorInfo: [{ errorInfoKey: r.ClientErrorCode, errorInfoValue: this.code }] } }, e })(); t.RealTimePubNubGetCredentialsClientError = s; var u = (function () { function e() { } return Object.defineProperty(e.prototype, "code", { get: function () { return "EmptyData" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e) { return { message: e.get("ServiceError_CannotLoadVisual"), displayableErrorInfo: [{ errorInfoKey: e.get("ServiceError_ExecuteSemanticQueryErrorKey"), errorInfoValue: e.get("InvalidDataFormat_DataFormatIsInvalid") }], debugErrorInfo: [{ errorInfoKey: r.ClientErrorCode, errorInfoValue: this.code }] } }, e })(); t.EmptyDataClientError = u; var c = (function () { function e() { } return Object.defineProperty(e.prototype, "code", { get: function () { return "InvalidDataResponse" }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "ignorable", { get: function () { return !1 }, enumerable: !0, configurable: !0 }), e.prototype.getDetails = function (e) { return { message: e.get("ServiceError_CannotLoadVisual"), displayableErrorInfo: [{ errorInfoKey: e.get("ServiceError_ExecuteSemanticQueryErrorKey"), errorInfoValue: e.get("InvalidDataResponse_ServerError") }], debugErrorInfo: [{ errorInfoKey: r.ClientErrorCode, errorInfoValue: this.code }] } }, e })(); t.InvalidDataResponseClientError = c })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t, r) { return new n(e, t, r) } function i(e, t, r) { return new o(e, t, r) } var a = jsCommon.JsonComparer; t.createDataProxy = r, t.createSingleExecutableDataProxy = i; var n = (function () { function e(e, t, r) { this.promiseFactory = e, this.dataReaderProvider = t, this.dataReaders = {}, this.telemetryService = r } return e.prototype.execute = function (e) { return this.getReader(e.type).execute(e.query, e.kinds, e.perfId) }, e.prototype.getReader = function (e) { var t = this.dataReaders[e]; if (t) return t; var r = this.dataReaderProvider.reader(e); return this.dataReaders[e] = new s(e, r, this.promiseFactory, this.telemetryService) }, e.prototype.stopCommunication = function (e) { this.getReader(e).stopCommunication() }, e.prototype.resumeCommunication = function (e) { this.getReader(e).resumeCommunication() }, e.prototype.clearCache = function (e, t) { this.getReader(e).clearCache(t) }, e.prototype.rewriteCacheEntries = function (e, t, r) { this.getReader(e).rewriteCacheEntries(t, r) }, e.prototype.setLocalCacheResult = function (e, t) { return this.getReader(e.type).setLocalCacheResult(e.query, t) }, e })(), o = (function () { function t(e, t, r) { this.proxy = e, this.promiseFactory = t, this.timeoutService = r } return t.prototype.execute = function (t) { var r = this, i = this.lastExecute; if (i && i.promise.pending()) { if (a.equals(t, i.query)) { var n = e.createRejectablePromise2(i.deferred); return n.matchesLastExecuteQuery = !0, n } this.lastExecute.promise.reject(new e.QueryCancellationClientError("NewQuery")) } var o = t && t.query && t.query.telemetryV2Enabled, s = this.promiseFactory.defer(o), u = e.createRejectablePromise2(s), c = this.lastExecute = { query: t, deferred: s, promise: u }; return this.queuedExecution || (this.queuedExecution = !0, this.timeoutService.setTimeout(0, o).promise.then((function () { r.queuedExecution = !1; var e = r.lastExecute, t = r.proxy.execute(e.query); t.then((function (t) { return e.deferred.resolve(t) }), (function (t) { return e.deferred.reject(t) })), e.promise.catch((function (e) { return t.reject(e) })) }))), u.finally((function () { c === r.lastExecute && (r.lastExecute = void 0) })), u }, t.prototype.cancelQuery = function (t) { var r = this.lastExecute; r && r.promise.pending() && r.promise.reject(new e.QueryCancellationClientError(t)) }, t })(), s = (function () { function r(e, t, r, i) { this.name = e, this.reader = t, this.promiseFactory = r, this.telemetryService = i } return r.prototype.execute = function (r, i, a) { var n = this, o = this.promiseFactory.defer(r.telemetryV2Enabled), s = this.reader; if (s.execute) { var u = s.execute(r, a); u.then((function (s) { if (s) { var u = n.transform(s, i, a, r.performanceActivity), c = u.error; if (c) return o.reject(c), void n.telemetryService.logEvent(e.telemetry.DataExecuteQuery, s.requestId, void 0, !0, "PowerBI", c.code); o.resolve({ dataReaderResult: u, dataViewSource: { data: s } }) } else o.reject(new t.EmptyDataClientError), n.telemetryService.logEvent(e.telemetry.DataExecuteQuery, void 0, void 0, !0, "PowerBI", "DataProxy_EmptyData") }), (function (t) { o.reject(t), t && t.ignorable || n.telemetryService.logEvent(e.telemetry.DataExecuteQuery, t ? t.requestId : void 0, void 0, !0, "PowerBI", t ? t.code : "DataProxy_ProviderError") })); var c = e.createRejectablePromise2(o); return c.catch((function (r) { r = r || new t.InvalidDataResponseClientError, u.reject(r), r.ignorable || n.telemetryService.logEvent(e.telemetry.DataExecuteQuery, r.requestId, void 0, !0, "PowerBI", r.code) })), c } return r.command ? o.resolve({ dataReaderResult: this.transform(r.command, i, a) }) : o.reject(), e.createRejectablePromise2(o) }, r.prototype.stopCommunication = function () { var e = this.reader; e.stopCommunication && e.stopCommunication() }, r.prototype.resumeCommunication = function () { var e = this.reader; e.resumeCommunication && e.resumeCommunication() }, r.prototype.clearCache = function (e) { var t = this.reader.cache; t && t.clear(e) }, r.prototype.rewriteCacheEntries = function (e, t) { var r = this.reader.cache; r && r.rewrite(e, t) }, r.prototype.setLocalCacheResult = function (e, t) { var r = this.reader; r.setLocalCacheResult && r.setLocalCacheResult(e, t) }, r.prototype.transform = function (e, t, r, i) { var a = this.reader; if (a.transform) return a.transform(e, t || 31, r, i); var n = { metadata: { columns: [] } }; return n[this.name] = e, { dataView: n } }, r })() })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t, r, i) { return new n(e, t, r, i) } function i(e) { return _.groupBy(e, (function (e) { return t.DataReaderUtils.readerType(e) })) } var a = e.data.FederatedConceptualSchema; t.createConceptualSchemaProxy = r; var n = (function () { function r(e, t, r, i) { this.promiseFactory = e, this.dataReaderProvider = t, this.featureSwitchService = r, this.validator = i, this.individualConceptualSchemaCache = {}, this.mergedConceptualSchemaCache = {} } return r.prototype.get = function (e) { var t = this, r = this.featureSwitchService && this.featureSwitchService.featureSwitches && this.featureSwitchService.featureSwitches.telemetryV2; if (!e) return this.promiseFactory.reject({}, r); var n = this.generateSchemaKey(e), o = this.mergedConceptualSchemaCache[n]; if (this.isSchemaPaused(o)) return this.promiseFactory.reject(this.getPauseReason(o), r); if (o && o.promise) return o.promise; var s = this.promiseFactory.defer(r), u = { deferred: s, promise: s.promise }; this.mergedConceptualSchemaCache[n] = u, u.promise.then((function () { return delete u.deferred }), (function () { return delete t.mergedConceptualSchemaCache[n] })); var c = [], l = i(e), p = function (e) { var i = l[e], a = d.generateSchemaKey(i), n = d.individualConceptualSchemaCache[a]; if (d.isSchemaPaused(n)) return c.push(d.promiseFactory.reject(d.getPauseReason(n), r)), "continue"; if (n) return c.push(n.promise), "continue"; var o = d.promiseFactory.defer(r), s = o.promise; c.push(s), d.individualConceptualSchemaCache[a] = { deferred: o, promise: s }, s.finally((function () { t.individualConceptualSchemaCache[a] && delete t.individualConceptualSchemaCache[a].deferred })); var u = d.dataReaderProvider.schemaReader(e); return u ? void u.execute({ dataSources: i }).then((function (e) { return t.onSuccess(u, e, a, o) }), (function (e) { return t.onError(u, e, a, o) })) : (o.reject(), "continue") }, d = this; for (var f in l) p(f); return this.promiseFactory.all(c, r).then((function (e) { var r = a.merge(e); t.validator && t.validator.validate(r), u.result = r, s.resolve(r) })).catch((function (e) { s.reject(e) })), u.promise }, r.prototype.getWithWireContract = function (e) { var r = this; return e && _.uniqBy(e, (function (e) { return t.DataReaderUtils.readerType(e) })).length > 1 ? this.promiseFactory.reject() : this.get(e).then((function (t) { var i = r.individualConceptualSchemaCache[r.generateSchemaKey(e)]; if (i) return { data: i.data, contract: t } })) }, r.prototype.getLatestCapabilities = function (e, t) { var r = i(e); for (var a in r) { var n = r[a], o = this.generateSchemaKey(n), s = this.individualConceptualSchemaCache[o]; if (s && s.result) { var u = s.result.schema(t); if (u) return u.capabilities } } }, r.prototype.clearCache = function (e, t) { var r = this; if (!t) return this.rejectPendingDeferred(e), this.individualConceptualSchemaCache = {}, void (this.mergedConceptualSchemaCache = {}); var a = i(t); for (var n in a) { var o = a[n], s = this.generateSchemaKey(o); this.rejectPendingDeferred(e, s), delete this.individualConceptualSchemaCache[s], this.forMergedSchemasContainingKey(s, (function (e, t) { delete r.mergedConceptualSchemaCache[e] })) } }, r.prototype.stopCommunication = function (e, t) { var r, a, n = { clientError: e }; if (t) { var o = i(t); for (var s in o) { var u = o[s]; r = this.generateSchemaKey(u), a = this.individualConceptualSchemaCache[r], a || (a = {}, this.individualConceptualSchemaCache[r] = a), a.pauseReason = n, this.rejectPendingDeferred(n, r) } } else { var c = { clientError: null }; this.pauseAllSchemasReason = n || c, this.rejectPendingDeferred(n) } }, r.prototype.resumeCommunication = function (e) { var t, r = this; e ? t = _.map(i(e), (function (e) { return r.generateSchemaKey(e) })) : (this.pauseAllSchemasReason = void 0, t = Object.keys(this.individualConceptualSchemaCache)); for (var a = 0, n = t; a < n.length; a++) { var o = n[a], s = this.individualConceptualSchemaCache[o]; this.isSchemaPaused(s) && (delete this.individualConceptualSchemaCache[o], this.forMergedSchemasContainingKey(o, (function (e) { return delete r.mergedConceptualSchemaCache[e] }))) } }, r.prototype.isSchemaPaused = function (e) { return !!this.pauseAllSchemasReason || e && !e.promise }, r.prototype.getPauseReason = function (e) { return e && e.pauseReason ? e.pauseReason : this.pauseAllSchemasReason }, r.prototype.rejectPendingDeferred = function (e, t) { var r, i; t ? (r = {}, r[t] = null) : r = this.individualConceptualSchemaCache; for (var a in r) i = this.individualConceptualSchemaCache[a], i && (i.deferred && i.deferred.reject(e), delete i.promise, delete i.deferred, this.forMergedSchemasContainingKey(a, (function (t, r) { r.deferred && r.deferred.reject(e), delete r.promise, delete r.deferred }))) }, r.prototype.onSuccess = function (e, t, r, i) { var a = e.transform(t); if (a.error) return void this.onErrorCore(a, r, i); var n = this.individualConceptualSchemaCache[r]; n && (n.result = a.schema, n.data = t.data), i.resolve(a.schema) }, r.prototype.onError = function (e, t, r, i) { var a = e.transform(t); this.onErrorCore(a, r, i) }, r.prototype.onErrorCore = function (t, r, i) { var a = this; delete this.individualConceptualSchemaCache[r], t.error && t.error.serviceError && (t.error.clientError = new e.ServiceErrorToClientError(t.error.serviceError), t.error.clientError.requestId = t.error.requestId), i.reject(t.error), this.forMergedSchemasContainingKey(r, (function (e) { delete a.mergedConceptualSchemaCache[e] })) }, r.prototype.forMergedSchemasContainingKey = function (e, t) { for (var r = _.map(JSON.parse(e), (function (e) { return JSON.stringify(e) })), i = 0, a = r; i < a.length; i++) { var n = a[i]; for (var o in this.mergedConceptualSchemaCache) _.includes(o, n) && t(o, this.mergedConceptualSchemaCache[o]) } }, r.prototype.generateSchemaKey = function (e) { return JSON.stringify(_.chain(e).map((function (e) { return { id: e.id, name: e.name, type: t.DataReaderUtils.readerType(e) } })).orderBy(["type", "name", "id"]).value()) }, r })() })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r = jsCommon.EnumExtensions, i = (function () { function e() { } return e.getDataPointsDescription = function (e, t) { if (e && !_.isEmpty(t)) { var r = 0; if (e.matrix) r = 2; else if (e.table) r = 8; else { if (!e.categorical) return; r = 1 } for (var i = [], a = 0, n = t; a < n.length; a++) { var o = n[a], s = this.query([e], o, r, [], !0); i.push({ selector: o, values: s }) } return i } }, e.query = function (e, i, u, c, l) { if (_.isEmpty(e) || !i) return []; if (_.some(i.data, (function (e) { return !t.Selector.isScopeIdentity(e) }))) return []; var p; p = c && !l ? c : i.metadata ? [i.metadata] : void 0; var d = []; if (r.hasFlag(u, 8)) for (var f = 0, h = e; f < h.length; f++) { var m = h[f], y = new s(i, p, l); a.visitTable(m.table, y), d.push.apply(d, y.valueDetails) } else if (r.hasFlag(u, 1)) for (var v = 0, g = e; v < g.length; v++) { var m = g[v], y = new n(i, p, l); a.visitCategorical(m, y), d.push.apply(d, y.valueDetails) } else if (r.hasFlag(u, 2)) for (var S = 0, C = e; S < C.length; S++) { var m = C[S], y = new o(i); a.visitMatrix(m.matrix, y), d.push.apply(d, y.valueDetails) } return d }, e })(); t.DataViewQueryEngine = i; var a, n = (function () { function t(e, t, r) { this.ignoreQueryName = r, this.requestedValues = t, this.identities = e.data, this.valueDetails = [] } return t.prototype.visitCategoryColumns = function (t, r) { if (!_.isEmpty(t)) for (var i = function (t) { if (a.ignoreQueryName || _.includes(a.requestedValues, t.source.queryName)) for (var i = 0; i < t.identity.length; i++) { var n = t.identity[i]; if (_.includes(a.identities, n)) { var o = _.find(r.columns, (function (e) { return e.index === t.source.index })); a.valueDetails.push({ identity: n, value: t.values[i], expr: o.expr, formattedValue: e.visuals.valueFormatter.format(t.values[i], t.source.format) }); break } } }, a = this, n = 0, o = t; n < o.length; n++) { var s = o[n]; i(s) } }, t.prototype.visitValueColumnGroups = function (t, r) { if (!_.isEmpty(t) && r && (this.ignoreQueryName || _.includes(this.requestedValues, r.queryName))) for (var i = 0, a = t; i < a.length; i++) { var n = a[i]; if (_.includes(this.identities, n.identity)) return void this.valueDetails.push({ value: n.name, formattedValue: e.visuals.valueFormatter.format(n.name, r.format), expr: r.expr, identity: n.identity }) } }, t.prototype.visitValueColumn = function (e) { return !!_.isEmpty(this.requestedValues) || _.includes(this.requestedValues, e.source.queryName) }, t.prototype.visitValue = function (t, r, i, n, o) { a.isIdentityFilteredOut(this.identities, r.data) || this.valueDetails.push({ expr: i.expr, value: t, formattedValue: e.visuals.valueFormatter.format(t, i.format), identity: _.head(r.data) }) }, t })(), o = (function () { function r(e) { this.valueDetails = [], this.identitiesToSearch = t.Selector.toScopeIdentities(e) } return r.prototype.visitHierarchy = function (e) { for (var t = e.root; t && t.children && this.identitiesToSearch.length > 0;)t = this.searchNode(t, e.levels) }, r.prototype.searchNode = function (t, r) { for (var i = 0, a = this.identitiesToSearch; i < a.length; i++)for (var n = a[i], o = 0, s = t.children; o < s.length; o++) { var u = s[o]; if (u.identity === n) { var c = u.levelValues, l = r[u.level || 0]; if (!_.isEmpty(c)) for (var p = 0, d = c; p < d.length; p++) { var f = d[p], h = l.sources[f.levelSourceIndex || 0]; this.valueDetails.push({ expr: h.expr, identity: n, value: f.value, formattedValue: e.visuals.valueFormatter.format(f.value, h.format) }) } return _.remove(this.identitiesToSearch, n), u } } }, r })(), s = (function () { function t(e, t, r) { this.ignoreQueryName = r, this.requestedValues = t, this.identities = e.data, this.valueDetails = [], this.requestedColumnsIndices = [] } return t.prototype.visitColumn = function (e, t) { (this.ignoreQueryName || e.isMeasure && (_.isEmpty(this.requestedValues) || _.includes(this.requestedValues, e.queryName))) && this.requestedColumnsIndices.push(t) }, t.prototype.visitRow = function (t, r) { t.rows[r]; if (!t.identity || !a.isIdentityFilteredOut(this.identities, [t.identity[r]])) for (var i = 0, n = this.requestedColumnsIndices; i < n.length; i++) { var o = n[i], s = t.rows[r][o], u = t.columns[o]; this.valueDetails.push({ expr: u.expr, value: s, formattedValue: e.visuals.valueFormatter.format(s, u.format), identity: t.identity && t.identity[r] }) } }, t })(); !(function (r) { function i(t, r) { if (t) for (var i = function (t) { if (!_.some(r, (function (r) { return e.DataViewScopeIdentity.equals(t, r) }))) return { value: !0 } }, a = 0, n = t; a < n.length; a++) { var o = n[a], s = i(o); if ("object" == typeof s) return s.value } return !1 } function a(e, r) { var i = e.categorical; if (i && !_.isEmpty(i.values)) { var a = t.DataViewConcatenateCategoricalColumns.getUntransformedCategories(i); r.visitCategoryColumns(a, e.metadata); var n = _.head(i.categories), o = n && _.clone(n.identity), s = i.values.grouped(); r.visitValueColumnGroups(s, i.values.source); for (var u = 0, c = s; u < c.length; u++)for (var l = c[u], p = l.identity, d = 0, f = l.values; d < f.length; d++) { var h = f[d]; if (r.visitValueColumn(h)) for (var m = Object.keys(h.values), y = 0; y < m.length; y++) { var v = m[y], g = h.values[v], S = h.source, C = { data: o ? [o[y]] : [], metadata: S.queryName }; p && C.data.push(p), r.visitValue(g, C, h.source, i.categories, y) } } } } function n(e, t) { if (e && !_.isEmpty(e.rows)) { for (var r = e.columns, i = 0; i < r.length; i++)t.visitColumn(r[i], i); for (var a = 0; a < e.rows.length; a++)t.visitRow(e, a) } } function o(e, t) { e.rows && t.visitHierarchy(e.rows), e.columns && t.visitHierarchy(e.columns) } r.isIdentityFilteredOut = i, r.visitCategorical = a, r.visitTable = n, r.visitMatrix = o })(a = t.DataViewScan || (t.DataViewScan = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return { validate: _.noop } } e.createDefaultFederatedSchemaValidator = t })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (t) {
            var r; !(function (r) { function i(r, i) { if (!_.isEmpty(r.levels) && 0 !== i) { var o = n(r.root, -1, i, r.levels); if (!(!o || _.isEmpty(o.Values) && _.isEmpty(o.Children))) { for (var s = i < r.levels.length ? i : r.levels.length, u = new Array(s), c = new e.SQFrom(null), l = 0; l < s; l++)u[l] = a(r.levels[l], c); var p = []; return t.SemanticQuerySerializer.serializeFrom(c, p), { From: p, Levels: u, Instances: o } } } } function a(r, i) { return { Expressions: _.map(r.identityKeys, (function (r) { var a = e.SQExprRewriterWithSourceRenames.rewrite(r, i, i); return t.SemanticQuerySerializer.serializeExprWithRef(a) })), Default: r.isCollapsed ? 0 : 1 } } function n(e, r, i, a) { var o = r === -1, s = r + 1 === i, u = !o && !!a[r].isCollapsed; if (!e.isToggled && (u || s || _.isEmpty(e.children))) return null; var c = !o && !u && e.isToggled, l = {}; if (_.isEmpty(e.identityValues) || (l.Values = _.map(e.identityValues, (function (e) { return t.SemanticQuerySerializer.serializeExpr(e) }))), !s && !_.isEmpty(e.children) && !c) { for (var p = [], d = 0, f = e.children; d < f.length; d++) { var h = f[d], m = n(h, r + 1, i, a); m && p.push(m) } _.isEmpty(p) || (l.Children = p) } return l } r.serializeExpansionState = i, r.serializeLevelExpansionState = a })(r = t.DataShapeBindingExpansionStateSerializer || (t.DataShapeBindingExpansionStateSerializer = {}));
        })(t = e.services || (e.services = {}))
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r, i = e.data.ExpansionState; !(function (r) { function a(e) { return _.filter(_.map(e, (function (e) { return n(e) })), (function (e) { return e })) } function n(t) { if (e.data.ExpansionState.hasNodes(t)) { var r = { roles: t.roles }; return _.isEmpty(t.levels) || (r.levels = _.map(t.levels, (function (e) { return o(e) })), r.root = s(t.root)), r } } function o(e) { if (e) { var r = { queryRefs: _.clone(e.queryRefs) }; return e.isCollapsed && (r.isCollapsed = !0), e.identityKeys && (r.identityKeys = _.map(e.identityKeys, (function (e) { return t.SemanticQuerySerializer.serializeExpr(e) }))), r } } function s(e) { var r = { identityValues: e.identityValues ? _.map(e.identityValues, (function (e) { return t.SemanticQuerySerializer.serializeExpr(e) })) : null }; if (e.isToggled && (r.isToggled = !0), !_.isEmpty(e.children)) { r.children = []; for (var i = 0, a = e.children; i < a.length; i++) { var n = a[i], o = s(n); r.children.push(o) } } return r } function u(e) { if (e) { for (var t = [], r = 0, a = e; r < a.length; r++) { var n = a[r]; if (n) { var o = new i(n.roles); _.isEmpty(n.levels) || (o.levels = _.map(n.levels, (function (e) { return c(e) })), o.root = l(n.root, -1, null, o.levels)), t.push(o) } } return t } } function c(e) { var r = { queryRefs: _.clone(e.queryRefs), isCollapsed: !!e.isCollapsed, toggledNodes: [] }; return e.identityKeys && (r.identityKeys = _.map(e.identityKeys, (function (e) { return t.SemanticQuerySerializer.deserializeExpr(e) }))), r } function l(e, r, i, a) { var n = { identityValues: e.identityValues ? _.map(e.identityValues, (function (e) { return t.SemanticQuerySerializer.deserializeExpr(e) })) : null, parent: i, children: [] }; if (e.isToggled && (n.isToggled = !0, a[r].toggledNodes.push(n)), !_.isEmpty(e.children)) { var o = r + 1; n.children = _.map(e.children, (function (e) { return l(e, o, n, a) })) } return n } r.serializeExpansionStates = a, r.deserializeExpansionStates = u })(r = t.ExpansionStateSerializer || (t.ExpansionStateSerializer = {})) })(r = t.services || (t.services = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i; !(function (e) { var t; !(function (e) { function t(e, t) { var r = e && e[t]; if (r) { for (var i, a = 0, n = r.length; a < n; a++) { var o = r[a]; if (null == o.selector) { i = o; break } } if (i) return i.properties } } e.getObjectDefinitionProperties = t })(t = e.DataViewObjectDefinitions || (e.DataViewObjectDefinitions = {})) })(i = r.wireContracts || (r.wireContracts = {})); var a; !(function (i) { function a(e, t) { if (e) { var r = {}; for (var i in e) { var a = void 0; if (!t || (a = t[i])) for (var n = e[i], o = r[i] = [], s = 0, u = n.length; s < u; s++)o.push(c(n[s], a, !t)) } return r } } function n(e) { if (e) return _.map(e, l) } function o(e) { if (e) return _.map(e, M) } function s(e) { if (e) return { category: e.categoryString, underlyingType: e.extendedType } } function u(t) { if (t) return new e.ValueType(t.underlyingType, t.category) } function c(e, t, r) { if (e) { var i = { properties: h(e.properties, t ? t.properties : null, r) }, a = l(e.selector); return a && (i.selector = a), i } } function l(e) { if (null === e) return null; if (e) { var t = {}; return e.data && (t.data = _.chain(e.data).map((function (e) { return f(e) })).filter((function (e) { return null != e })).value()), e.metadata && (t.metadata = e.metadata), e.id && (t.id = e.id), t } } function p(e) { if (e) { var t = {}; if (e.dataMap) { t.dataMap = {}; for (var r in e.dataMap) t.dataMap[r] = _.chain(e.dataMap[r]).map((function (e) { return f(e) })).filter((function (e) { return null != e })).value() } return e.metadata && (t.metadata = e.metadata), e.id && (t.id = e.id), t } } function d(e) { if (e) return _.map(e, (function (e) { return { objectName: e.objectName, selectorsByColumn: p(e.selectorsByColumn) } })) } function f(e) { return e.scopeId ? w(e) : e.wildcard ? t.DataViewScopeWildcard.fromExprs(_.map(e.wildcard, r.SemanticQuerySerializer.deserializeExpr)) : e.roles ? t.DataViewRoleWildcard.fromRoles(e.roles) : e.total ? t.DataViewScopeTotal.fromExprs(_.map(e.total, r.SemanticQuerySerializer.deserializeExpr)) : e.dataViewWildcard ? t.DataViewWildcard.create(e.dataViewWildcard.matchingOption) : void 0 } function h(e, t, r) { if (e) { var i = {}; for (var a in e) { var n = m(e[a], t ? t[a] : null, r); void 0 !== n && (i[a] = n) } return i } } function m(e, t, i) { if (t) { var a = L(t.type); return a.value ? y(e, a.value) : v(e, a.structural) } if (i && e) { if (e.expr) return r.SemanticQuerySerializer.deserializeExpr(e.expr); if (e.solid) return v(e, J); if (e.filter) return r.SemanticQuerySerializer.deserializeFilter(e.filter) } } function y(e, t) { if (void 0 !== t.primitiveType && e.expr) return r.SemanticQuerySerializer.deserializeExpr(e.expr) } function v(t, i) { if (!(i.fill && i.fill.solid && i.fill.solid.color && t)) { if (i.fillRule) { var a = t, n = O(a, y); if (n) return n } var o = t; return i.filter && o && o.filter ? r.SemanticQuerySerializer.deserializeFilter(o.filter) : i.image && o && o.image ? g(o.image) : i.geoJson && o && o.geoJson ? S(o.geoJson) : i.paragraphs && t ? C(t) : i.queryTransform && t ? x(t) : i.dataBars && t ? D(t) : i.icon && t && "Icon" === t.kind ? E(t) : void 0 } var s = t; if (s.solid && s.solid.color) return { solid: { color: y(s.solid.color, e.ValueType.fromPrimitiveTypeAndCategory(1)) } } } function g(t) { var r = { name: y(t.name, H), url: y(t.url, e.ValueType.fromDescriptor(e.ImageDefinition.urlType)) }; return t.scaling && (r.scaling = y(t.scaling, H)), r } function S(e) { return { type: y(e.type, H), name: y(e.name, H), content: y(e.content, H) } } function C(e) { return _.map(e, (function (e) { var t = { textRuns: _.map(e.textRuns, (function (e) { var t = { value: y(e.value, H) || e.value }; return e.textStyle && (t.textStyle = e.textStyle), e.url && (t.url = e.url), t })) }; return e.horizontalTextAlignment && (t.horizontalTextAlignment = e.horizontalTextAlignment), t })) } function x(e) { return { algorithm: e.algorithm, parameters: _.map(e.parameters, (function (e) { return { name: e.Name, expr: r.SemanticQuerySerializer.deserializeExpr(e) } })) } } function D(e) { return { minValue: e.minValue ? y(e.minValue, U) : void 0, maxValue: e.maxValue ? y(e.maxValue, U) : void 0, positiveColor: v(e.positiveColor, J), negativeColor: v(e.negativeColor, J), axisColor: v(e.axisColor, J), reverseDirection: y(e.reverseDirection, W), hideText: y(e.hideText, W) } } function E(e) { var t = { kind: "Icon" }; return e.layout && (t.layout = y(e.layout, H)), e.verticalAlignment && (t.verticalAlignment = y(e.verticalAlignment, W)), e.value && (t.value = y(e.value, H)), t } function w(e) { if (e.scopeId) { var i = r.SemanticQuerySerializer.deserializeExpr(e.scopeId); if (i) return t.createDataViewScopeIdentity(i) } } function b(e, t) { if (e) { var r = {}; for (var i in e) { var a = void 0; if (!t || (a = t[i])) for (var n = e[i], o = r[i] = [], s = 0, u = n.length; s < u; s++)o.push(I(n[s], a, !t)) } return r } } function I(e, t, r) { if (e) { var i = F(e.properties, t ? t.properties : null, r); if (i) { var a = { properties: i }, n = M(e.selector); return n && (a.selector = n), a } } } function M(e) { if (null === e) return null; if (e) { var t = {}; return e.data && (t.data = _.chain(e.data).map((function (e) { return T(e) })).filter((function (e) { return null != e })).value()), e.metadata && (t.metadata = e.metadata), e.id && (t.id = e.id), t } } function V(e) { if (e) { var t = {}; if (e.dataMap) { t.dataMap = {}; for (var r in e.dataMap) { var i = jsCommon.ArrayExtensions.ensureArray(e.dataMap[r]); t.dataMap[r] = _.chain(i).map((function (e) { return T(e) })).filter((function (e) { return null != e })).value() } } return e.metadata && (t.metadata = e.metadata), e.id && (t.id = e.id), t } } function R(e) { if (e) return _.map(e, (function (e) { return { objectName: e.objectName, selectorsByColumn: V(e.selectorsByColumn) } })) } function T(e) { return t.Selector.isScopeIdentity(e) && e.expr ? P(e) : t.Selector.isScopeWildcard(e) && e.exprs ? { wildcard: _.map(e.exprs, r.SemanticQuerySerializer.serializeExpr) } : t.Selector.isRoleWildcard(e) && e.roles ? { roles: e.roles } : t.Selector.isScopeTotal(e) && e.exprs ? { total: _.map(e.exprs, r.SemanticQuerySerializer.serializeExpr) } : t.Selector.isWildcard(e) ? { dataViewWildcard: N(e) } : void 0 } function P(e) { return { scopeId: r.SemanticQuerySerializer.serializeExpr(e.expr) } } function N(e) { return { matchingOption: e.matchingOption } } function F(e, t, r) { if (e) { var i = {}; for (var a in e) { var n = t ? t[a] : null; if (r || n) { var o = A(e[a], n, r); void 0 === o || (i[a] = o) } } return i } } function A(e, i, a) { if (i) { var n = L(i.type); return n.value ? Q(e, n.value) : B(e, n.structural) } if (a && e) { if (e instanceof t.SQExpr) return { expr: r.SemanticQuerySerializer.serializeExpr(e) }; if (e instanceof t.SemanticFilter) return { filter: r.SemanticQuerySerializer.serializeFilter(e) }; if (e.solid) return B(e, J) } } function Q(e, i) { if (void 0 !== i.primitiveType && e instanceof t.SQExpr) return { expr: r.SemanticQuerySerializer.serializeExpr(e) } } function B(t, i) { if (t) { if (i.fill && i.fill.solid && i.fill.solid.color) { return { solid: { color: Q(t.solid.color, e.ValueType.fromPrimitiveTypeAndCategory(1)) } } } if (i.fillRule) { var a = t, n = O(a, Q); if (n) return n } if (i.filter) return { filter: r.SemanticQuerySerializer.serializeFilter(t) }; if (i.image) return { image: z(t) }; if (i.geoJson) return { geoJson: q(t) }; if (i.paragraphs) { return G(t) } return i.queryTransform ? k(t) : i.dataBars ? j(t) : i.icon && "Icon" === t.kind ? K(t) : void 0 } } function z(t) { var r = { name: Q(t.name, H), url: Q(t.url, e.ValueType.fromDescriptor(e.ImageDefinition.urlType)) }; return t.scaling && (r.scaling = Q(t.scaling, H)), r } function q(e) { return { type: Q(e.type, H), name: Q(e.name, H), content: Q(e.content, H) } } function G(e) { return _.map(e, (function (e) { var t = { textRuns: _.map(e.textRuns, (function (e) { var t = { value: Q(e.value, H) || e.value }; return e.textStyle && (t.textStyle = e.textStyle), e.url && (t.url = e.url), t })) }; return e.horizontalTextAlignment && (t.horizontalTextAlignment = e.horizontalTextAlignment), t })) } function k(e) { return { algorithm: e.algorithm, parameters: _.map(e.parameters, (function (e) { var t = r.SemanticQuerySerializer.serializeExpr(e.expr); return t.Name = e.name, t })) } } function j(e) { return { minValue: Q(e.minValue, U), maxValue: Q(e.maxValue, U), positiveColor: B(e.positiveColor, J), negativeColor: B(e.negativeColor, J), axisColor: B(e.axisColor, J), reverseDirection: Q(e.reverseDirection, W), hideText: Q(e.hideText, W) } } function K(e) { var t = { kind: "Icon" }; return e.layout && (t.layout = Q(e.layout, H)), e.verticalAlignment && (t.verticalAlignment = Q(e.verticalAlignment, W)), e.value && (t.value = Q(e.value, H)), t } function L(t) { var r = e.ValueType.fromDescriptor(t); return 0 !== r.primitiveType ? { value: r } : { structural: t } } function O(t, r) { if (t.linearGradient2) { var i = t.linearGradient2, a = { min: { color: r(i.min.color, e.ValueType.fromPrimitiveTypeAndCategory(1)) }, max: { color: r(i.max.color, e.ValueType.fromPrimitiveTypeAndCategory(1)) } }; return i.min.value && (a.min.value = r(i.min.value, e.ValueType.fromPrimitiveTypeAndCategory(3))), i.max.value && (a.max.value = r(i.max.value, e.ValueType.fromPrimitiveTypeAndCategory(3))), i.nullColoringStrategy && (a.nullColoringStrategy = { strategy: r(i.nullColoringStrategy.strategy, e.ValueType.fromPrimitiveTypeAndCategory(1)) }, i.nullColoringStrategy.color && (a.nullColoringStrategy.color = r(i.nullColoringStrategy.color, e.ValueType.fromPrimitiveTypeAndCategory(1)))), { linearGradient2: a } } if (t.linearGradient3) { var i = t.linearGradient3, a = { min: { color: r(i.min.color, e.ValueType.fromPrimitiveTypeAndCategory(1)) }, mid: { color: r(i.mid.color, e.ValueType.fromPrimitiveTypeAndCategory(1)) }, max: { color: r(i.max.color, e.ValueType.fromPrimitiveTypeAndCategory(1)) } }; return i.min.value && (a.min.value = r(i.min.value, e.ValueType.fromPrimitiveTypeAndCategory(3))), i.mid.value && (a.mid.value = r(i.mid.value, e.ValueType.fromPrimitiveTypeAndCategory(3))), i.max.value && (a.max.value = r(i.max.value, e.ValueType.fromPrimitiveTypeAndCategory(3))), i.nullColoringStrategy && (a.nullColoringStrategy = { strategy: r(i.nullColoringStrategy.strategy, e.ValueType.fromPrimitiveTypeAndCategory(1)) }, i.nullColoringStrategy.color && (a.nullColoringStrategy.color = r(i.nullColoringStrategy.color, e.ValueType.fromPrimitiveTypeAndCategory(1)))), { linearGradient3: a } } return null } var W = e.ValueType.fromDescriptor({ bool: !0 }), U = e.ValueType.fromDescriptor({ numeric: !0 }), H = e.ValueType.fromDescriptor({ text: !0 }), J = { fill: { solid: { color: !0 } } }; i.deserializeObjects = a, i.deserializeSelectors = n, i.serializeSelectors = o, i.serializeValueType = s, i.deserializeValueType = u, i.deserializeSelector = l, i.deserializeSelectorsByColumn = p, i.deserializeVisualObjects = d, i.deserializeObjectProperty = m, i.deserializeScopeIdentity = w, i.serializeObjects = b, i.serializeSelector = M, i.serializeSelectorsByColumn = V, i.serializeVisualObjects = R, i.serializeScopeIdentity = P, i.serializeObjectProperty = A })(a = r.DataViewObjectSerializer || (r.DataViewObjectSerializer = {})) })(r = t.services || (t.services = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i, a = e.data.services.ExpansionStateSerializer; !(function (i) { function n(e) { return r.DataViewTransformActionsUpgrade.V1.upgradeDataViewSelectTransform(e), _.map(e, (function (e) { var t = { displayName: e.displayName, format: e.format, kpi: e.kpi, queryName: e.queryName, roles: e.roles, sort: e.sort, sortOrder: e.sortOrder, type: r.DataViewObjectSerializer.deserializeValueType(e.type) }; return e.expr && (t.expr = r.SemanticQuerySerializer.deserializeExpr(e.expr)), e.aggregateSources && (t.aggregateSources = e.aggregateSources), t })) } function o(e) { return _.map(e, (function (e) { var t = { displayName: e.displayName, format: e.format, kpi: e.kpi, queryName: e.queryName, roles: e.roles, sort: e.sort, sortOrder: e.sortOrder, type: r.DataViewObjectSerializer.serializeValueType(e.type) }; return e.expr && (t.expr = r.SemanticQuerySerializer.serializeExpr(e.expr)), e.aggregateSources && (t.aggregateSources = e.aggregateSources), t })) } function s(e, t) { e = e || {}; var n = { objects: e.objects, projectionOrdering: e.roles && e.roles.ordering, projectionActiveItems: e.roles && e.roles.activeItems, splits: e.splits, queryMetadata: null, visualElements: null }; return e && e.objects && (n.objects = r.DataViewObjectSerializer.serializeObjects(e.objects, t)), e && e.selects && (n.selects = i.serializeDataViewSelectTransforms(e.selects)), e && !_.isEmpty(e.expansionStates) && (n.expansionStates = a.serializeExpansionStates(e.expansionStates)), n } function u(e, t) { var n = e.objects ? r.DataViewObjectSerializer.deserializeObjects(e.objects, t) : null, o = i.createTransformActions(e.queryMetadata, e.visualElements, t, n) || {}, s = e && e.projectionActiveItems; return _.isEmpty(s) || l(s), o.roles = { ordering: e.projectionOrdering, activeItems: s }, o.splits = e.splits, e.selects && (o.selects = i.deserializeDataViewSelectTransforms(e.selects)), e.expansionStates && (o.expansionStates = a.deserializeExpansionStates(e.expansionStates)), p(o), o } function c(e) { return _.isString(e[0]) } function l(e) { for (var t in e) { var r = e[t], i = void 0; if (!_.isEmpty(r) && c(r)) { var a = r; i = _.map(a, (function (e) { return { queryRef: e } })) } e[t] = i || r } } function p(e) { var t, r = "Y", i = "Y2", a = e.roles && e.roles.ordering; if (a) { var n = a[r] && 1 === a[r].length && _.includes(a[i], a[r][0]) ? a[r][0] : void 0; if (void 0 !== n) { var o = e.splits && 2 === e.splits.length && !e.splits[0].selects[n] && e.splits[1].selects[n] ? e.splits[0] : void 0; if (o) { var s = _.chain(Object.keys(o.selects)).filter((function (e) { return o.selects[e] })).map((function (e) { return parseInt(e, 10) })).maxBy((function (e) { return e })).value(); if (s !== Number.NEGATIVE_INFINITY) { if (e.selects && e.selects.length === s) { var u = e.selects[n]; if (u && u.roles[r] && u.roles[i]) { delete u.roles[r]; var c = __assign({}, u); c.roles = (t = {}, t[r] = !0, t), c.queryName = u.queryName, e.selects[s] = c, e.roles.ordering[r] = [s] } } } } } } } function d(e) { return JSON.stringify(e) } function f(e, r, i, a) { if (e && !_.isEmpty(e.Select) || !_.isEmpty(r) || a) { var n = {}; if (e) { var o = e.Select; if (o) for (var s = n.selects = [], u = 0, c = o.length; u < c; u++) { var l = o[u]; if (l) { var p = h(l, u); if (s.push(p), p.format && i) { var d = t.DataViewObjectDescriptors.findFormatString(i); d && (a || (a = {}), t.DataViewObjectDefinitions.setValue(a, d, { metadata: p.queryName }, t.SQExprBuilder.text(p.format))) } } else s.push(null) } } if (r) { var f = r.length; f > 1 && (n.splits = []); for (var u = 0; u < f; u++) { var m = r[u]; m.Settings && 0 === u && (a = S(m.Settings, a)), m.DataRoles && (n.selects || (n.selects = []), n.roles || (n.roles = { ordering: {} }), y(m.DataRoles, n.selects, n.roles.ordering)), n.splits && n.splits.push(g(m.DataRoles)) } } return a && (n.objects = a), n } } function h(t, r) { var i = {}; return t.Restatement && (i.displayName = t.Restatement), t.Name ? i.queryName = t.Name : i.queryName || (i.queryName = "$select" + r), t.Format && (i.format = t.Format), t.Type && (i.type = m(t.Type, e.data.conceptualDataCategoryToString(t.DataCategory))), t.kpi && (i.kpi = t.kpi), t.kpiStatusGraphic && (i.kpi = { graphic: t.kpiStatusGraphic }), i } function m(t, r) { t = t || 0; var i = 0; switch (t) { case 2048: i = 1; break; case 1: i = 3; break; case 3: i = 4; break; case 4096: i = 5; break; case 20: i = 6; break; case 4: i = 7; break; case 8: i = 9; break; case 67: i = 4, r = "Year"; break; case 35: i = 4, r = "Month" }return e.ValueType.fromPrimitiveTypeAndCategory(i, r) } function y(e, t, r) { for (var i = 0, a = e.length; i < a; i++) { var n = e[i], o = n.Projection, s = n.Name, u = t[o]; void 0 === u && (v(t, o), u = t[o] = {}); var c = u.roles; void 0 === u.roles && (c = u.roles = {}), c[s] = !0; var l = r[s]; void 0 === l && (l = r[s] = []), l.push(o) } } function v(e, t) { for (var r = e.length; r < t; r++)e[r] = {} } function g(e) { var t = {}, r = { selects: t }; if (e) for (var i = 0, a = e.length; i < a; i++) { var n = e[i]; t[n.Projection] = !0 } return r } function S(e, r) { if (e) { r || (r = {}); for (var i in e) { var a = e[i], n = i, o = a, s = "general"; switch (i) { case "hasScalarCategoryAxis": s = "categoryAxis", n = "axisType", o = t.SQExprBuilder.text(a ? "Scalar" : "Categorical"); break; case "Totals": n = "totals", o = t.SQExprBuilder.boolean(!!a); break; case "textboxSettings": n = "paragraphs", a && a.paragraphs && (o = a.paragraphs); break; case "VisualType1": n = "visualType1", o = t.SQExprBuilder.text(a); break; case "VisualType2": n = "visualType2", o = t.SQExprBuilder.text(a); break; case "imageVisualSettings": n = "imageUrl", a && a.imageUrl && (o = t.SQExprBuilder.text(a.imageUrl)); break; default: continue }C(r, s, n, o) } return r } } function C(e, t, r, i) { var a = e[t]; void 0 === a && (a = e[t] = []); var n = a[0]; void 0 === n && (n = a[0] = { properties: {} }), n.properties[r] = i } i.deserializeDataViewSelectTransforms = n, i.serializeDataViewSelectTransforms = o, i.serializeDataViewTransformActions = s, i.deserializeDataViewTransformActions = u, i.serializeTransformActions = d, i.createTransformActions = f, i.upgradeSettingsToObjects = S })(i = r.DataViewTransformActionsSerializer || (r.DataViewTransformActionsSerializer = {})) })(r = t.services || (t.services = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i, a = { get: function (e) { return e }, getOptional: function (e) { return e } }; !(function (r) { function i(e, t) { var r = {}; for (var i in e) r[i] = o(e[i], t || a); return r } function n(e) { var t = {}; for (var r in e) t[r] = s(e[r]); return t } function o(e, r) { if (e) { var i = { properties: {} }; e.displayName && (i.displayName = t.getDisplayName(e.displayName, r)), e.description && (i.description = t.getDisplayName(e.description, r)); for (var a in e.properties) i.properties[a] = u(e.properties[a], r); return i } } function s(e) { var r = { properties: {} }; e.displayName && (r.displayName = t.createDisplayNameGetter(e.displayName)), e.description && (r.description = t.createDisplayNameGetter(e.description)); for (var i in e.properties) r.properties[i] = c(e.properties[i]); return r } function u(e, r) { var i = { type: l(e.type, r) }; return e.rule && (i.rule = e.rule), e.displayName && (i.displayName = t.getDisplayName(e.displayName, r)), e.description && (i.description = t.getDisplayName(e.description, r)), e.placeHolderText && (i.placeHolderText = t.getDisplayName(e.placeHolderText, r)), i } function c(e) { var r = { type: p(e.type) }; return e.displayName && (r.displayName = t.createDisplayNameGetter(e.displayName)), e.description && (r.description = t.createDisplayNameGetter(e.description)), e.placeHolderText && (r.placeHolderText = t.createDisplayNameGetter(e.placeHolderText)), e.rule && (r.rule = e.rule), r } function l(t, r) { var i, a = e.ValueType.fromDescriptor(t); return i = a && a.enum ? { enumeration: f(a.enum, r) } : t } function p(t) { var r; return r = e.ValueType.fromDescriptor(t) ? d(t) : t } function d(e) { var t; if (e.enumeration) { t = { enumeration: h(e.enumeration) } } else { t = {}; for (var r in e) t[r] = e[r] } return t } function f(e, t) { return _.map(e.members(), (function (e) { return m(e, t) })) } function h(t) { return e.createEnumType(t) } function m(e, r) { return { displayName: t.getDisplayName(e.displayName, r), value: e.value } } r.serialize = i, r.deserialize = n, r.serializePropertyDescriptor = u, r.deserializePropertyDescriptor = c })(i = r.DataViewObjectDescriptorSerializer || (r.DataViewObjectDescriptorSerializer = {})) })(r = t.services || (t.services = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { if (e) for (var t = 0, r = e; t < r.length; t++) { var i = r[t]; i.kpiStatusGraphic && (i.kpi = { graphic: i.kpiStatusGraphic }) } } e.upgradeDataViewSelectTransform = t })(t = e.V1 || (e.V1 = {})) })(t = e.DataViewTransformActionsUpgrade || (e.DataViewTransformActionsUpgrade = {})) })(t = e.services || (e.services = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.type = "tabular" })(t = e.tabular || (e.tabular = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t() { return new s } function r(e) { var t = []; e = a(e); for (var r in e) if (e.hasOwnProperty(r)) { var n = e[r], o = void 0; if (!n) continue; _.isDate(n) || null != i(n.toString().substr(0, 26)) ? o = { dateTime: !0 } : isNaN(+n) ? _.isString(n) && (o = { text: !0 }) : o = { numeric: !0 }, o && t.push({ name: r, type: o }) } return t } function i(e) { var t = null, r = +e; if (isNaN(r)) t = jsCommon.DateExtensions.parseIsoDate(e.toString()); else { var i = new Date; i.setDate(i.getDate() - o); var a = i.getTime(); i = new Date, i.setDate(i.getDate() + o); var n = i.getTime(); r < a && (r *= 1e3), r > a && r < n && (t = new Date(r)) } return t } function a(e) { try { return n(e) } catch (e) { } return e } function n(e, t, r) { return t || (t = {}), _.isObject(e) ? _.forOwn(e, (function (e, i) { n(e, t, r ? r + "." + i : i) })) : t[r] = e, t } e.createTabularDataCache = t, e.getColumnsMetadata = r, e.parseDate = i, e.flattenJSON = a, e.MaxRealTimeDataWindowInMs = 36e5; var o = 7, s = (function () { function t() { this.clear() } return t.prototype.add = function (e) { var t = this.getKey(e.modelId, e.name); return this.tabularDataMap[t] = e, t }, t.prototype.get = function (e) { return this.tabularDataMap[e] }, t.prototype.remove = function (e) { delete this.tabularDataMap[e] }, t.prototype.clear = function () { this.tabularDataMap = {} }, t.prototype.getKey = function (e, t) { return e + "_" + t }, t.prototype.mergeRows = function (e, t, r, i) { var a = this.getKey(e, t), n = this.get(a); if (!n || !n.rowGroups) { var o = { modelId: e, name: t, rowGroups: r, lastVersion: i, columns: n && n.columns }; return this.constructColumnsMetadataIfNeeded(o), this.fixUpValues(o.rowGroups, o.columns), void this.add(o) } var s = [], u = n.rowGroups || [], c = r || []; for (this.fixUpValues(c, n.columns); ;) { if (_.isEmpty(u) && _.isEmpty(c)) break; var l = _.head(u), p = _.head(c); l && !p ? (this.appendRow(s, l, i), u.shift()) : !l && p ? (this.appendRow(s, p, i), c.shift()) : l.version < p.version ? (this.appendRow(s, l, i), u.shift()) : p && (c.shift(), l.version === p.version && u.shift(), this.appendRow(s, p, i)) } n.rowGroups = s, n.lastVersion = i }, t.prototype.constructColumnsMetadataIfNeeded = function (e) { if (!e.columns) { var t = _.last(e.rowGroups); if (t) { var i = _.last(t.rows); i && (e.columns = r(i)) } } }, t.prototype.fixUpValues = function (e, t) { if (!_.isEmpty(e)) { for (var r = {}, n = {}, o = 0, s = t; o < s.length; o++) { var u = s[o]; r[u.name] = u.type && u.type.dateTime, n[u.name] = u.type && u.type.numeric } for (var c = 0, l = e; c < l.length; c++) { var p = l[c]; if (p.rows) for (var d = 0; d < p.rows.length; d++) { var f = p.rows[d] = a(p.rows[d]); for (var h in f) if (f.hasOwnProperty(h)) { var m = f[h]; if (m) if (r[h]) { var y = i(m); y && (f[h] = y) } else if (n[h]) { var v = parseFloat(m.toString()); isNaN(v) || (f[h] = v) } } } } } }, t.prototype.appendRow = function (t, r, i) { i - r.version > e.MaxRealTimeDataWindowInMs || t.push(r) }, t })() })(t = e.tabular || (e.tabular = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function r() { return new i(e.services.SemanticQuerySerializer) } t.createQueryGenerator = r; var i = (function () { function t(e) { this.serializer = e } return t.prototype.execute = function (t) { var r = t.query, i = { Query: this.serializer.serializeQuery(r), Binding: null }, a = { SemanticQueryDataShapeCommand: i }, n = e.SQExprUtils.getActiveTablesNames(r), o = n[0]; return { command: { dataWindow: t.dataWindow, tableName: o, mappings: t.mappings, Commands: [a] } } }, t.prototype.produceIdentities = function (e, t) { return [e] }, t })() })(t = e.tabular || (e.tabular = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i(e) { var t = _.indexOf(e, "."); return t < 0 || t >= e.length - 1 ? e : e.substr(t + 1) } var a = e.data.createDataViewScopeIdentity, n = "UndefinedData"; r.normalizedName = i; var o = (function () { function r(e, t) { this.promiseFactory = e.promiseFactory(), this.tabularDataCache = t, this.columnToIndexMap = {} } return r.prototype.execute = function (t) { var r = _.head(t.dataSources), i = t.command, a = this.buildDataView(i, r.modelId), n = this.promiseFactory.defer(); return n.resolve(a), e.createRejectablePromise(n) }, r.prototype.transform = function (e, t, r) { return null == e ? { dataView: { metadata: { columns: [] }, error: { code: n } } } : { dataView: e } }, r.prototype.buildDataView = function (e, t) { var a = this, n = e.mappings[0], o = this.tabularDataCache, s = o.get(o.getKey(t, e.tableName)), u = r.getLastVersion(s) - e.dataWindow; if (s.rowGroups) { var c = e && _.head(e.Commands); if (c) { var l = c.SemanticQueryDataShapeCommand; l && l.Query && l.Query.Select && l.Query.Select.map((function (e, t) { a.columnToIndexMap[i(e.Name)] = t })) } var p = this.filterTabularDataRowGroups(s.rowGroups, u), d = this.createDataView({ rowGroups: p, columns: s.columns, modelId: s.modelId, name: s.name }, n); return e.dataWindow && (d.metadata.objects = { categoryAxis: { duration: e.dataWindow } }), d } }, r.prototype.filterTabularDataRowGroups = function (e, t) { return _.filter(e, (function (e) { return e.version >= t })) }, r.prototype.createDataView = function (e, t) { var r = { metadata: { columns: [] } }, i = this.extractColumns(t), a = []; if (t.categorical) { var n = this.getCategoricalDataViewInfo(i.categorical, e); r.categorical = n.dataView, _.isEmpty(r.categorical.values) && (r.categorical.values = void 0), a.push.apply(a, n.columns) } if (t.table) { var o = this.getSingleDataViewInfo(i.table, e); r.single = o.dataView; var s = o.columns[0]; null == _.find(a, s) && a.push(s) } return r.metadata.columns = a, r }, r.prototype.getCategoricalDataViewInfo = function (e, r) { var i = t.createCategoricalDataViewBuilder(); if (!_.isEmpty(e.categories)) { var a = this.getCategoryColumnOption(e.categories, r); i.withCategory(a) } var n = this.getValueColumnOptions(e.categories, e.values, r); _.isEmpty(e.groupedValues) || e.groupedValues === e.categories ? i.withValues({ columns: n }) : this.addGroupValues(e, r, i, n); var o = i.build(); return { dataView: o.categorical, columns: o.metadata.columns } }, r.prototype.addGroupValues = function (e, t, a, n) { for (var o = i(e.groupedValues), s = this.getCategoryColumnOption(o, t), u = this.extractColumnValues(o, t), c = r.getUniqueValues(u), l = this.getValueToIndicesMap(u), p = {}, d = e.values, f = 0, h = d; f < h.length; f++)for (var m = h[f], y = i(m), v = this.extractColumnValues(y, t), g = 0, S = c; g < S.length; g++) { var C = S[g], x = r.valueToString(C); null == p[x] && (p[x] = []); var D = l[x], E = _.at(v, D); p[x].push({ values: E }) } var w = _.values(p); if (!_.isEmpty(w)) { var b = { groupColumn: s, valueColumns: n, data: w }; a.withGroupedValues(b) } }, r.prototype.getValueToIndicesMap = function (e) { for (var t = {}, i = 0, a = e.length; i < a; i++) { var n = r.valueToString(e[i]), o = t[n]; o ? o.push(i) : t[n] = [i] } return t }, r.prototype.getSingleDataViewInfo = function (e, t) { var r = this.getColumnMetadataAndValues(e, t), i = r.values.length - 1; return { dataView: { value: r.values[i], column: r.metadataColumn }, columns: [r.metadataColumn] } }, r.prototype.extractColumns = function (e) { var r = function (e, t) { var r = e.items; if (r) for (var i = 0, a = r; i < a.length; i++) { var n = a[i]; t.push(n.queryName) } }, i = {}, a = e.categorical; if (a) { var n = []; t.CompiledDataViewMapping.visitCategoricalCategories(a.categories, { visitRole: function (e) { r(e, n) } }); var o = []; t.CompiledDataViewMapping.visitCategoricalValues(a.values, { visitRole: function (e) { r(e, o) } }); var s = []; t.CompiledDataViewMapping.visitGrouped(a.values, { visitRole: function (e) { r(e, s) } }), i.categorical = { categories: n[0], groupedValues: s[0], values: o } } var u = e.table; if (u) { var c = []; t.CompiledDataViewMapping.visitTable(u, { visitRole: function (e) { r(e, c) } }), i.table = c[0] } return i }, r.prototype.getCategoryColumnOption = function (e, i) { var n = this.getColumnMetadataAndValues(e, i), o = r.getUniqueValues(n.values), s = t.SQExprBuilder.columnRef(t.SQExprBuilder.entity(null, i.name), e), u = _.map(o, (function (e) { return a(t.SQExprBuilder.equal(s, t.SQExprBuilder.text(e.toString()))) })); return { source: n.metadataColumn, values: o, identityFrom: { fields: [s], identities: u } } }, r.prototype.getValueColumnOptions = function (e, t, r) { for (var i = [], a = 0, n = t; a < n.length; a++) { var o = n[a], s = this.getColumnMetadataAndValues(o, r, e), u = s.values; e || _.isEmpty(u) || (u = [_.last(u)]); var c = { source: s.metadataColumn, values: u, minLocal: _.min(u), maxLocal: _.max(u) }; i.push(c) } return i }, r.prototype.getColumnMetadataAndValues = function (t, a, n) { var o, s = a.columns, u = i(t), c = this.columnToIndexMap[u]; if (n) { var l = i(n); o = this.extractUniqueColumnValues(u, a, l) } else o = this.extractColumnValues(u, a); var p = _.find(s, (function (e) { return e.name === u })); return { metadataColumn: r.createMetadataColumn(u, c, e.ValueType.fromDescriptor(p.type)), values: o } }, r.prototype.extractColumnValues = function (e, t) { for (var r = t.rowGroups, i = [], a = 0, n = r; a < n.length; a++)for (var o = n[a], s = 0, u = o.rows; s < u.length; s++) { var c = u[s]; i.push(c[e]) } return i }, r.prototype.extractUniqueColumnValues = function (e, t, i) { for (var a = t.rowGroups, n = {}, o = 0, s = a; o < s.length; o++)for (var u = s[o], c = 0, l = u.rows; c < l.length; c++) { var p = l[c], d = p[i], f = r.valueToString(d); n[f] = p[e] } return _.values(n) }, r.getLastVersion = function (e) { if (_.isEmpty(e.rowGroups)) return e.lastVersion ? e.lastVersion : Number.NEGATIVE_INFINITY; var t = Number.NEGATIVE_INFINITY; if (!e.rowGroups) return t; for (var r = 0, i = e.rowGroups; r < i.length; r++) { var a = i[r]; a.version > t && (t = a.version) } return t }, r.createMetadataColumn = function (e, t, r) { var i = { displayName: e, queryName: e, index: t, isMeasure: !1 }; return null != r && (i.type = r, i.isMeasure = !!r.numeric), i }, r.getUniqueValues = function (e) { return _.uniqBy(e, (function (e) { return r.valueToString(e) })) }, r.valueToString = function (e) { return _.isDate(e) ? e.getTime().toString() : e ? e.toString() : "" }, r })(); r.TabularDataReader = o })(r = t.tabular || (t.tabular = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { e.right = "right", e.left = "left", e.center = "center" })(t = e.alignment || (e.alignment = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { return e.Commands[0].SemanticQueryDataShapeCommand } function r(t, r, i, a, n, o, s, u, c) { var l = _.map(t, (function (e, t) { var r = { Query: e, CacheKey: n ? JSON.stringify(e) : void 0, CacheOptions: a ? a : void 0, QueryId: s && s[t] }; return _.isEmpty(c) || null == c[t] || (r.RequestPriority = c[t]), r })), p = _.map(u, (function (e) { return { QueryId: e } })), d = e.single(r), f = { version: e.executeSemanticQueryRequestVersion1, queries: l, cancelQueries: p, modelId: d.modelId, userPreferredLocale: i.getUserPreferredLocale() }; if (o && o.impersonating) { var h = o.getImpersonationState(); h.modelId === f.modelId && _.extend(f, h) } return f } e.transformDataQueryToSemanticQueryDataShapeCommand = t, e.generateSemanticQueryRequest = r })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r(e, t) { var r = e.table; if (!r) return ""; var n = r.columns, o = ""; o += i(n) + "\r\n", (null == t || t > r.rows.length) && (t = r.rows.length); for (var s = 0; s < t; s++) { for (var u = r.rows[s], l = [], p = 0, d = u.length; p < d; p++) { var f = n[p], h = f && f.type, m = f && f.format; l.push(a(u[p], h, m)) } l.length > 0 && (o += l.join(c) + "\r\n") } return o } function i(e) { for (var t = [], r = 0, i = e; r < i.length; r++) { var a = i[r]; t.push(o(a.displayName)) } return t.join(c) } function a(t, r, i) { if (null == t) return ""; r || (r = n(t)); var a = ""; return a = r.dateTime ? e.formattingService.formatValue(t, l) : r.bool || r.numeric && !i ? t.toString() : r.numeric ? e.formattingService.formatValue(t, s(i)) : t.toString(), o(a) } function n(t) { return _.isDate(t) ? e.ValueType.fromPrimitiveTypeAndCategory(6) : _.isBoolean(t) ? e.ValueType.fromPrimitiveTypeAndCategory(5) : _.isNumber(t) ? e.ValueType.fromPrimitiveTypeAndCategory(3) : e.ValueType.fromPrimitiveTypeAndCategory(1) } function o(e) { return null == e ? "" : (e = e.replace(/\"/g, '""'), _.includes(e, "\n") || _.includes(e, u) || _.includes(e, c) || _.includes(e, "\r") || 0 === e.length ? u + e + u : e) } function s(e) { return e.replace(/(\r\n|\n|\r|,)/g, "") } var u = '"', c = ",", l = "yyyy-MM-dd HH:mm:ss"; t.fromDataView = r })(r = t.CsvWriter || (t.CsvWriter = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var r; !(function (r) {
            var i, a = jsCommon.ArrayExtensions, n = t.ConceptualSchema, o = jsCommon.StringExtensions; !(function (r) {
                function i(e) { return { kpiGoalFmt: e.get("KpiGoalDisplayName"), kpiStatusFmt: e.get("KpiStatusDisplayName"), kpiTrendFmt: e.get("KpiTrendDisplayName") } } function s(e, t, r) {
                    var i = new n; i.name = t, i.entities = a.createWithName(), e.canEdit && (e.Capabilities || (e.Capabilities = {}), e.Capabilities.CanEdit = e.canEdit), i.capabilities = M(e.Capabilities); for (var o = 0, s = e.Entities; o < s.length; o++) {
                        var c = s[o]; i.entities.push(u(c, i.capabilities, r));
                    } for (var l = 0, p = e.Entities.length; l < p; ++l)E(i.entities[l], e.Entities[l], i.entities); return i
                } function u(e, t, r) { for (var i = e.Capabilities, n = e.Source, o = { name: e.Name, displayName: e.DisplayName || e.Name, description: e.Description, visibility: D(e.Hidden, e.ShowAsVariationsOnly, e.Private), calculated: e.Calculated, queryable: e.Queryable, properties: a.createWithName(), hierarchies: a.createWithName(), displayFolders: a.createWithName(), navigationProperties: a.createWithName(), errorMessage: e.ErrorMessage, isDateTable: e.IsDateTable === !0, source: { mode: n && n.Mode, refreshedTime: n && n.RefreshedTime, directQuerySourceType: n && n.DirectQuerySourceType, directQuerySourceName: n && n.DirectQuerySourceName }, capabilities: { canRefresh: !i || i.CanRefresh !== !1, canEditSource: t.canEdit && (!i || i.CanEditSource !== !1), canRename: t.canEdit && (!i || i.CanRename !== !1), canDelete: t.canEdit && (!i || i.CanDelete !== !1), canEditStorageMode: t.canEdit && (!i || i.CanEditStorageMode !== !1), supportsClustering: t.canEdit && (!i || i.SupportsClustering !== !1), supportsBinByCount: t.canEdit && (!i || i.SupportsBinByCount !== !1), limitOnNumberOfGroups: i && i.LimitOnNumberOfGroups || null, dataView: i && i.DataView || null } }, s = 0, u = e.Properties; s < u.length; s++) { var p = u[s]; o.properties.push(m(p)) } for (var y = 0, v = e.Properties.length; y < v; ++y) { var g = o.properties[y], S = e.Properties[y]; g.canDelete = t.canEdit && S.CanDelete !== !1; var C = S.Column; if (C) { var x = g.column = g.column || {}; C.Keys && (x.keys = d(C.Keys, o.properties)), C.OrderBy && (x.orderBy = d(C.OrderBy, o.properties)) } var E = S.Measure; if (E) { var w = g.measure = g.measure || {}; if (w.canEdit = E.canEdit !== !1, E.Kpi) { var b = w.kpi = f(E.Kpi, o.properties, t); h(b.goal, g, 1, r), h(b.status, g, 0, r), h(b.trend, g, 3, r) } E.Template && (w.template = { name: E.Template.DaxTemplateName }), null != E.DistributiveAggregate && (w.distributiveAggregate = E.DistributiveAggregate) } } if (e.Hierarchies) for (var I = 0, M = e.Hierarchies; I < M.length; I++) { var V = M[I]; o.hierarchies.push(l(V, o.properties)) } if (e.DisplayFolders) for (var R = 0, T = e.DisplayFolders; R < T.length; R++) { var P = T[R]; o.displayFolders.push(c(P, o.properties, o.hierarchies)) } return e.DefaultLabelColumnRef && (o.defaultLabel = o.properties.withName(e.DefaultLabelColumnRef)), e.DefaultFieldPropertyRefs && (o.defaultFields = _.map(e.DefaultFieldPropertyRefs, (function (e) { return o.properties.withName(e) }))), o } function c(e, t, r) { var i = { name: e.Name, displayName: e.DisplayName || e.Name, description: e.Description, properties: a.createWithName(), hierarchies: a.createWithName(), displayFolders: a.createWithName() }; if (e.DisplayItems) for (var n = 0, o = e.DisplayItems; n < o.length; n++) { var s = o[n]; s.PropertyRef && t ? i.properties.push(t.withName(s.PropertyRef)) : s.HierarchyRef && r ? i.hierarchies.push(r.withName(s.HierarchyRef)) : s.DisplayFolder && i.displayFolders.push(c(s.DisplayFolder, t, r)) } return i } function l(e, t) { for (var r = { name: e.Name, displayName: e.DisplayName || e.Name, description: e.Description, hidden: e.Hidden, levels: a.createWithName(), canDelete: e.CanDelete !== !1 }, i = 0, n = e.Levels; i < n.length; i++) { var o = n[i]; r.levels.push(p(o, t)) } return r } function p(e, t) { return { name: e.Name, displayName: e.DisplayName || e.Name, description: e.Description, column: t.withName(e.Column), canDelete: e.CanDelete !== !1 } } function d(e, t) { for (var r = a.createWithName(), i = 0, n = e; i < n.length; i++) { var o = n[i]; r.push(t.withName(o)) } return r } function f(e, t, r) { var i = r.normalizedFiveStateKpiRange, a = { statusMetadata: { graphic: e.StatusGraphic, normalizedFiveStateKpiRange: i }, status: t.withName(e.Status), goal: t.withName(e.Goal), trend: t.withName(e.Trend) }; return e.TrendGraphic && (a.trendMetadata = { graphic: e.TrendGraphic, normalizedFiveStateKpiRange: i }), a } function h(e, t, r, i) { if (e) { var a = t.displayName; switch (r) { case 1: a = o.format(i.kpiGoalFmt, a); break; case 0: a = o.format(i.kpiStatusFmt, a); break; case 3: a = o.format(i.kpiTrendFmt, a) }e.displayName = a, e.hidden = !1, e.kpiValue = t } } function m(t) { return { displayName: t.DisplayName || t.Name, description: t.Description, name: t.Name, type: e.ValueType.fromPrimitiveTypeAndCategory(t.DataType, t.DataCategory), column: t.Column ? y(t.Column) : null, kind: x(t), format: t.FormatString, hidden: t.Hidden, queryable: t.Queryable, errorMessage: t.ErrorMessage } } function y(e) { var r = { defaultAggregate: e.DefaultAggregate, idOnEntityKey: e.IdOnEntityKey, calculated: e.Calculated, variations: a.createWithName(), aggregateBehavior: e.AggregateBehavior }; return void 0 !== e.DefaultValue && (r.defaultValue = t.PrimitiveValueEncoding.parseValueToSQExpr(e.DefaultValue)), r } function v(e, t) { return {} } function g(e, t) { var r = { groupedColumns: _.map(e.GroupedColumns, (function (e) { return e.ColumnRef && !e.LevelRef ? t.properties.withName(e.ColumnRef) : e.LevelRef && !e.ColumnRef ? t.hierarchies.withName(e.LevelRef.Hierarchy).levels.withName(e.LevelRef.Level) : void 0 })) }; return e.BinningMetadata && (r.binningMetadata = S(e.BinningMetadata)), r } function S(e) { var t = {}; return e.BinSize && (t.binSize = C(e.BinSize)), t } function C(e) { return { value: e.Value, unit: e.Unit } } function x(e) { return e.Measure ? 1 : 0 } function D(e, t, r) { var i = 0; return e && (i = 1 | i), t && (i = 2 | i), r && (i = 4 | i), i } function E(e, t, r) { if (t.NavigationProperties) for (var i = 0, a = t.NavigationProperties; i < a.length; i++) { var n = a[i]; e.navigationProperties.push(w(n, e, r)) } if (t.Properties) for (var o = 0, s = t.Properties.length; o < s; ++o) { var u = t.Properties[o], c = u.Column; c && c.Variations && b(e.properties[o].column, c, e), c && c.GroupingMetadata && (e.properties[o].column.groupingMetadata = g(c.GroupingMetadata, e)), c && c.ParameterMetadata && (e.properties[o].column.parameterMetadata = v(c.ParameterMetadata, e)); var l = u.Measure; l && !_.isEmpty(l.DistributiveBy) && (e.properties[o].measure.distributiveBy = _.map(l.DistributiveBy, (function (e) { return r.withName(e) }))) } } function w(e, t, r) { var i = { name: e.Name, isActive: e.Active, sourceColumn: null, targetEntity: r.withName(e.TargetEntity), sourceMultiplicity: e.SourceMultiplicity, targetMultiplicity: e.TargetMultiplicity, behavior: e.Behavior || 0 }; if (e.SourceColumn) { var a = t.properties.withName(e.SourceColumn); a && (i.sourceColumn = a.column) } return i } function b(e, t, r) { for (var i = 0, a = t.Variations; i < a.length; i++) { var n = a[i]; e.variations.push(I(n, r)) } } function I(e, t) { var r = { name: e.Name, isDefault: e.Default, navigationProperty: null, defaultHierarchy: null, defaultProperty: null }, i = t; return e.NavigationProperty && (r.navigationProperty = t.navigationProperties.withName(e.NavigationProperty), i = r.navigationProperty.targetEntity), e.DefaultHierarchy && (r.defaultHierarchy = i.hierarchies.withName(e.DefaultHierarchy)), e.DefaultProperty && (r.defaultProperty = i.properties.withName(e.DefaultProperty)), r } function M(e) { return { canEdit: e && e.CanEdit || !1, discourageQueryAggregateUsage: e && e.DiscourageQueryAggregateUsage || !1, isExtendable: e && e.IsExtendable || !1, normalizedFiveStateKpiRange: e && e.NormalizedFiveStateKpiRange || !1, supportsMedian: e && e.SupportsMedian || !1, supportsPercentile: e && e.SupportsPercentile || !1, supportsScopedEval: e && e.SupportsScopedEval || !1, supportsStringMinMax: e && e.SupportsStringMinMax || !1, supportsMultiTableTupleFilters: e && e.SupportsMultiTableTupleFilters || !1, supportsTimeIntelligenceQuickMeasures: e && e.SupportsTimeIntelligenceQuickMeasures || !1, supportsCalculatedColumns: e && e.SupportsCalculatedColumns !== !1 || !1, supportsGrouping: e && e.SupportsGrouping !== !1 || !1, limitMultiColumnFiltersToQueryGroupColumns: e && e.LimitMultiColumnFiltersToQueryGroupColumns || !1, supportsBinnedLineSample: e && e.SupportsBinnedLineSample || !1, supportsOverlappingPointsSample: e && e.SupportsOverlappingPointsSample || !1, supportsQna: e && e.SupportsQna || !1, supportsInstanceFilters: e && e.SupportsInstanceFilters || !1, supportsDataSourceVariables: e && e.SupportsDataSourceVariables || !1, insights: e ? V(e.Insights) : {} } } function V(e) { return e ? { supportsDistributionFactors: e.SupportsDistributionFactors || !1, supportsExplainChange: e.SupportsExplainChange || !1, supportsExplore: e.SupportsExplore || !1, supportsKeyDrivers: e.SupportsKeyDrivers || !1, supportsRelatedInsights: e.SupportsRelatedInsights || !1 } : {} } r.createLocOptions = i, r.convertSchema = s, r.convertEntity = u, r.convertDisplayFolder = c, r.convertHierarchy = l, r.convertHierarchyLevel = p, r.convertProperty = m, r.convertColumn = y, r.convertVisibility = D, r.convertCapabilities = M, r.convertInsightsCapabilities = V
            })(i = r.ConceptualSchemaFactory || (r.ConceptualSchemaFactory = {}))
        })(r = t.dsr || (t.dsr = {}))
    })(t = e.data || (e.data = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i(e, t, r, i, a, n) { return new p(e, t, r, i, a, n) } function a(e, t, r, i) { return new l(e, t, r, i) } var n, o = e.telemetry.DataGetConceptualSchemaEventName, s = e.fillTelemetryEvent, u = jsCommon.HttpUtils, c = e.MonitorWith; !(function (e) { var t = (function () { function e() { } return e })(); e.InsightsCapabilities = t })(n = r.wireContracts || (r.wireContracts = {})), r.createConceptualSchemaReader = i, r.createConceptualSchemaProxyHttpCommunication = a; var l = (function () { function e(e, t, r, i) { this.httpService = e, this.promiseFactory = t, this.uri = r, this.featureSwitches = i } return e.prototype.execute = function (e, t) { var r = this, i = this.featureSwitches && this.featureSwitches().telemetryV2, a = this.promiseFactory.defer(i); return t.event.info.endPoint = this.uri, this.httpService.post(this.uri, e, this.httpService.powerbiRequestOptions(t.event, "GetConceptualSchema")).then((function (e) { r.setTelemetryEventInfo(t.event, e), a.resolve({ requestId: e.responseRequestId || e.requestId, schemas: e.data.schemas }) }), (function (e) { var i = e || {}; r.setTelemetryEventInfo(t.event, i), a.reject({ requestId: i.responseRequestId || i.requestId, error: i.error, status: i.status, schemas: void 0 }) })), a.promise }, e.prototype.setTelemetryEventInfo = function (e, t) { e.info.clientAndServerRequestIdMatch = u.clientAndServerRequestIdMatch(t), e.info.responseRequestId = u.getResponseRequestId(t), e.info.requestId = t.requestId }, e })(), p = (function () { function i(e, t, r, i, a, n) { this.promiseFactory = e, this.telemetryService = t, this.localeProvider = r, this.conceptualSchemaProxyCommunication = i, this.locOptions = a, this.featureSwitches = n } return i.prototype.execute = function (t) { var r = this, i = t.dataSources, a = this.featureSwitches && this.featureSwitches().telemetryV2; if (!i || i.length > 1) return this.promiseFactory.reject({}, a); var n = this.promiseFactory.defer(a), u = _.map(i, (function (e) { return e.name })), c = { modelIds: _.map(i, (function (e) { return e.id })), userPreferredLocale: this.localeProvider.getUserPreferredLocale() }, l = JSON.stringify(c.modelIds); a && s(o, { datasetIds: l }); var p = this.telemetryService.startEvent(e.telemetry.DataGetConceptualSchema, "", !0, null, null, l, null); return this.conceptualSchemaProxyCommunication.execute(c, p).then((function (e) { return r.onSuccess(e, u, n, p) }), (function (e) { return r.onError(e, n, p) })), n.promise }, i.prototype.transform = function (e) { var i = e; if (!i.data) return { schema: null, error: i.error }; for (var a = i.data, n = a.schemas, o = i.schemaNames, s = {}, u = 0, c = n.length; u < c; u++) { var l = o[u]; s[l] = r.ConceptualSchemaFactory.convertSchema(n[u].schema, l, this.locOptions) } return { schema: new t.FederatedConceptualSchema({ schemas: s }) } }, i.prototype.onSuccess = function (t, r, i, a) { if (_.isEmpty(t.schemas)) return void this.onError(t, i, a); for (var n = 0, o = t.schemas; n < o.length; n++) { var s = o[n], u = s.error; if (u) { i.reject({ data: null, error: { requestId: t.requestId, serviceError: u, clientError: null } }); var c = e.errorDetailsHelper.getTelemetryErrorDetailsFromServiceError(u); return c.asErrorCode = u.parameters && u.parameters.ASErrorCode, void a.reject(c) } } i.resolve({ data: t, schemaNames: r, error: null }), a.resolve() }, i.prototype.onError = function (t, r, i) { var a = t.error; r.reject({ data: null, error: { requestId: t.requestId, clientError: new e.PowerBIAPIErrorToClientError(t.error) } }), i.reject(e.errorDetailsHelper.getTelemetryErrorDetails(a, t.status)) }, __decorate([c(o)], i.prototype, "execute", null), i })() })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.queryGenerator = { execute: function (e) { return { command: { query: e.query, mappings: e.mappings } } }, produceIdentities: function (e, t) { return [e] } } })(t = e.fake || (e.fake = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (r) { var i; !(function (i) { function a(e, t, r, i) { if (t) return t.categorical ? n(e, t.categorical, r, i) : void 0 } function n(e, t, i, a) { var n, s = e.select(), u = r.createCategoricalDataViewBuilder(); r.CompiledDataViewMapping.visitCategoricalCategories(t.categories, { visitRole: function (e) { if (!_.isEmpty(e.items)) for (var t = 0, r = e.items; t < r.length; t++) { var c = r[t], l = s.withName(c.queryName), p = l.expr, d = i.generate(p, a.rowCount); u.withCategory({ source: o(l, _.indexOf(s, l)), values: d, identityFrom: { fields: [p] } }), n = !0 } } }); var c = []; return r.CompiledDataViewMapping.visitCategoricalValues(t.values, { visitRole: function (e) { if (!_.isEmpty(e.items)) for (var t = 0, r = e.items; t < r.length; t++) { var u = r[t], l = s.withName(u.queryName); c.push({ source: o(l, _.indexOf(s, l)), values: i.generate(l.expr, n ? a.rowCount : 1) }) } } }), _.isEmpty(c) || u.withValues({ columns: c }), u.build() } function o(e, t) { return { displayName: "", queryName: e.name, index: t, type: {} } } var s = t.SQExpr, u = t.SQExprUtils, c = (function () { function t(e, t) { this.promiseFactory = e.promiseFactory(), this.schemaProvider = t } return t.prototype.execute = function (t) { var r = this.promiseFactory.defer(); return this.schemaProvider.get().then((function (e) { var i = t.command; i.schema = e, r.resolve(i) }), (function () { r.reject() })), e.createRejectablePromise2(r) }, t.prototype.transform = function (e) { var t = e.schema, r = e.query, i = e.mappings, n = { rowCount: 10 }, o = a(r, _.head(i), new l(t), n); if (o) return { dataView: o } }, t })(); i.FakeDataReader = c; var l = (function () { function e(e) { this.schema = e } return e.prototype.generate = function (e, t) { if (s.isConstant(e)) { for (var r = [], i = 0; i < t; i++)r.push(e.value); return r } var a = e.getMetadata(this.schema); if (a) { if (a.aggregate) return _.range(10, 11 * t, 10); var n = a.type; if (n) { if (n.integer || n.numeric) return _.range(1, 1 + t); if (n.text) { var o = u.defaultName(e, "value ") + " "; return _.range(1, 1 + t).map((function (e) { return o + e })) } } } return _.range(1, 1 + t) }, e })() })(i = r.fake || (r.fake = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = "noQueryName", r = (function () { function e(e, t) { this.measures = t ? t : [], this.dataMap = e ? e : null } return e.prototype.withCategory = function (e, r) { var i, a; return e && e.source && e.identity && e.identity[r] && (i = e.identity[r], a = e.source.queryName || t), this.addItemToDataMap(a, i), this }, e.prototype.withSeries = function (e, r) { var i, a; return e && e.source && r && (i = r.identity, a = e.source.queryName || t), this.addItemToDataMap(a, i), this }, e.prototype.withMeasure = function (e) { return this.measures.push(e), this }, e.prototype.withMatrixNode = function (e, r) { var i, a; return e && e.identity && r && r[e.level] && r[e.level].sources && r[e.level].sources[0] && (i = e.identity, a = r[e.level].sources[0].queryName || t), this.addItemToDataMap(a, i), this }, e.prototype.withTable = function (e, r) { var i, a; return e && e.identity && null !== r && void 0 !== r && (i = e.identity[r], a = i ? JSON.stringify(i) : t), this.addItemToDataMap(a, i), this }, e.prototype.equals = function (e) { var t = e; return !!(this.compareMeasures(this.measures, t.measures) && this.compareMetadata(this.getSelector(), t.getSelector()) && this.compareMetadata(t.getSelector(), this.getSelector())) }, e.prototype.createSelectionId = function (e) { return this.key = JSON.stringify(this.dataMap) + JSON.stringify(this.measures), this }, e.prototype.getKey = function () { return this.key }, e.prototype.includes = function (e, t) { void 0 === t && (t = !1); var r = e; return !(this.dataMap || !this.compareMeasures(this.measures, r.measures)) || !!(this.dataMap && r.dataMap && this.compareMetadata(this.getSelector(), r.getSelector())) }, e.prototype.hasIdentity = function () { return !!this.dataMap }, e.prototype.compareMeasures = function (e, t) { if (e.length !== t.length) return !1; for (var r = 0, i = t; r < i.length; r++) { var a = i[r]; if (e.indexOf(a) === -1) return !1 } return !0 }, e.prototype.compareMetadata = function (e, t) { if (!e.data && t.data || e.data && !t.data) return !1; if (!e.data && !t.data) return !0; for (var r = function (e) { if (!t.data.some((function (t) { return JSON.stringify(t) === JSON.stringify(e) }))) return { value: !1 } }, i = 0, a = e.data; i < a.length; i++) { var n = a[i], o = r(n); if ("object" == typeof o) return o.value } return !0 }, e.prototype.addItemToDataMap = function (e, t) { if (t) { this.dataMap || (this.dataMap = {}); var r = this.dataMap, i = r[e]; return null == i ? void (r[e] = [t]) : void i.push(t) } }, e.prototype.getSelector = function () { var e = { data: void 0, metadata: _.head(this.measures) }; if (this.dataMap) { e.data = []; for (var t in this.dataMap) e.data.push(this.dataMap[t][0]) } return e }, e.prototype.getSelectorsByColumn = function () { return null }, e })(); e.CustomVisualSelectionId = r })(t = e.visuals || (e.visuals = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { switch (e) { case "Binary": return 11; case "Boolean": return 5; case "Currency": return 2; case "Number": return 3; case "Date": return 6; case "DateTime": return 7; case "Time": return 9; case "WholeNumber": return 4; case "Text": return 1 } } e.primitiveTypeFromDataType = t })(t = e.contracts || (e.contracts = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(t, i) { var a = r(i.reader.communication) ? e.createExecuteSemanticQueryProxyHttpCommunication(i.reader.communication.httpService, i.telemetryService, i.localeProvider, i.promiseFactory, i.reader.communication.uri, i.reader.communication.impersinationStateProvider, i.reader.featureSwitches) : i.reader.communication, n = r(i.schemaReader.communication) ? e.createConceptualSchemaProxyHttpCommunication(i.schemaReader.communication.httpService, i.promiseFactory, i.schemaReader.communication.uri, i.reader.featureSwitches) : i.schemaReader.communication, o = "dsr"; t[o] = { name: o, reader: function (t) { return new e.DsrDataReader(t, a, i.telemetryService, i.reader.featureSwitches(), i.reader.timeoutService, i.reader.delayedQueryResultHandler, i.reader.preferredMaxConnections) }, queryGenerator: function () { return e.createQueryGenerator() }, schemaReader: function () { return e.createConceptualSchemaReader(i.promiseFactory, i.telemetryService, i.localeProvider, n, i.schemaReader.localizationOptions, i.reader.featureSwitches) }, queryExtensionProvider: e.createQueryExtensionProvider() } } function r(e) { return _.isPlainObject(e) } e.registerDsrPlugin = t })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { for (var t = new Array(e.calcCount()), r = 0; e.nextCalc(); r++)t[r] = { Id: e.calcId(), Value: e.calcValue() }; return t } function r(e) { for (var t = e.limits(), r = t.count(), i = new Array(r), a = 0; a < r; a++)t.next(), i[a] = { Id: t.id() }; return i } e.toDsrV1Calc = t, e.toDsrV1Limit = r })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i() { return a } function a(e) { return function (e, t, r) { var i = { query: e, extensions: void 0, queryRewrites: t }, a = new c(t, r); return i.query = e.rewrite(a), i.extensions = a.extensionSchema, i.queryRewrites = a.queryRewrites, i } } var n = e.data.SQExprRewriter, o = jsCommon.StringExtensions; r.createQueryExtensionProvider = i, r.nativeMeasureFlexibleEntityName = "NativeMeasures_778a1d25-9ebf-4f33-a1c3-827ad532874e", r.extensionSchemaName = "NativeExpressionExtensions"; var s = "NativeMeasure", u = "NativeColumn", c = (function (e) { function i(t, r) { var i = e.call(this) || this; return i.queryRewrites = t, i.extensionSchema = r, i.existingEntityNames = {}, i.existingExtensionFieldNames = {}, i } return __extends(i, e), i.prototype.visitNativeMeasure = function (e) { this.ensureSchemaInitialized(), this.nativeMeasuresTargetEntity || (this.nativeMeasuresTargetEntity = { Name: o.findUniqueName(this.existingEntityNames, r.nativeMeasureFlexibleEntityName), NamingBehavior: 1, Measures: [] }, this.extensionSchema.Entities.push(this.nativeMeasuresTargetEntity)); var i = _.find(this.nativeMeasuresTargetEntity.Measures, (function (t) { return t.DataType === e.dataType && t.Expression === e.expression })); if (i) return t.SQExprBuilder.measureRef(t.SQExprBuilder.entity(this.extensionSchema.Name, this.nativeMeasuresTargetEntity.Name), i.Name); var a = o.findUniqueName(this.existingExtensionFieldNames, e.proposedName || s); this.existingExtensionFieldNames[a] = !0; var n = t.SQExprBuilder.measureRef(t.SQExprBuilder.entity(this.extensionSchema.Name, this.nativeMeasuresTargetEntity.Name), a); return this.nativeMeasuresTargetEntity.Measures.push({ Name: a, DataType: e.dataType, Expression: e.expression }), n }, i.prototype.visitNativeColumn = function (e) { this.ensureSchemaInitialized(); var r = e.source, i = r.getTargetEntity(), a = _.find(this.extensionSchema.Entities, (function (e) { return e.Name === i.entity })); a || (a = { Name: i.entity, Extends: i.entity, Columns: [] }, this.extensionSchema.Entities.push(a)), a.Columns || (a.Columns = []); var n = _.find(a.Columns, (function (t) { return t.DataType === e.dataType && t.Expression === e.expression })); if (n) return t.SQExprBuilder.columnRef(t.SQExprBuilder.entity(this.extensionSchema.Name, a.Name), n.Name); var s = o.findUniqueName(this.existingExtensionFieldNames, e.proposedName || u); this.existingExtensionFieldNames[s] = !0; var c = t.SQExprBuilder.columnRef(t.SQExprBuilder.entity(this.extensionSchema.Name, a.Name), s); return a.Columns.push({ Name: s, DataType: e.dataType, Expression: e.expression, NamingBehavior: 1 }), this.queryRewrites || (this.queryRewrites = []), this.queryRewrites.push({ selectExprReplaced: { originalExpr: e, replacedExpr: c } }), c }, i.prototype.ensureSchemaInitialized = function () { if (!this.schemaInitialized) { this.extensionSchema ? this.extensionSchema.Version = Math.max(this.extensionSchema.Version, 1) : this.extensionSchema = { Name: r.extensionSchemaName, Version: 1, Extends: r.DefaultSchemaName }, this.extensionSchema.Entities || (this.extensionSchema.Entities = []), this.existingExtensionFieldNames = {}; for (var e = 0, t = this.extensionSchema.Entities; e < t.length; e++) { var i = t[e]; if (this.existingEntityNames[i.Name] = !0, i.Measures) for (var a = 0, n = i.Measures; a < n.length; a++) { var o = n[a]; this.existingExtensionFieldNames[o.Name] = !0 } if (i.Columns) for (var s = 0, u = i.Columns; s < u.length; s++) { var c = u[s]; this.existingExtensionFieldNames[c.Name] = !0 } } this.schemaInitialized = !0 } }, i })(n) })(r = t.dsr || (t.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.elements = e, this.currentIndex = -1 } return e.prototype.reset = function (e) { this.currentIndex = -1, e && (this.elements = e) }, e.prototype.count = function () { return _.size(this.elements) }, e.prototype.current = function () { return this.elements[this.currentIndex] }, e.prototype.done = function () { return this.currentIndex === _.size(this.elements) - 1 }, e.prototype.next = function () { return !this.done() && (this.currentIndex++ , !0) }, e.prototype.index = function () { return this.currentIndex }, e })(); e.Iterator = t })(t = e.reader || (e.reader = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i; !(function (i) { function a(e) { return new n(e) } i.createDsrParser = a; var n = (function () { function e(e) { this.parser = new s(e.DataShapes) } return e.prototype.dataShapes = function () { return this.parser }, e.prototype.reset = function () { this.parser.reset() }, e.prototype.lockCache = function () { }, e })(), o = (function () { function t() { } return t.prototype.setCalculations = function (e) { this.calcIt ? this.calcIt.reset(e) : this.calcIt = new r.Iterator(e), this.calcExpr = void 0 }, t.prototype.nextCalc = function () { var t = this.calcIt.next(); return t && (this.calcExpr = e.PrimitiveValueEncoding.parseValueToSQExpr(this.calcIt.current().Value)), t }, t.prototype.calcId = function () { return this.calcIt.current().Id }, t.prototype.calcValue = function () { return this.calcValueAsExpr().value }, t.prototype.calcValueAsExpr = function () { return this.calcExpr || (this.calcExpr = e.PrimitiveValueEncoding.parseValueToSQExpr(this.calcIt.current().Value)), this.calcExpr }, t.prototype.calcCount = function () { return this.calcIt.count() }, t })(), s = (function (e) { function t(t) { var i = e.call(this) || this; return i.it = new r.Iterator(t), i } return __extends(t, e), t.prototype.reset = function () { this.it.reset() }, t.prototype.index = function () { return this.it.index() }, t.prototype.count = function () { return this.it.count() }, t.prototype.next = function () { this.primaryHierarchyParser = this.secondaryHierarchyParser = this.messageParser = void 0; var e = this.it.next(); if (e) { var t = this.it.current(); this.setCalculations(t.Calculations) } return e }, t.prototype.primaryHierarchy = function () { if (!this.primaryHierarchyParser) { var e = this.it.current().PrimaryHierarchy; this.primaryHierarchyParser = e && new l(e, 0) } return this.primaryHierarchyParser }, t.prototype.secondaryHierarchy = function () { if (!this.secondaryHierarchyParser) { var e = this.it.current().SecondaryHierarchy; this.secondaryHierarchyParser = e && new l(e, 1) } return this.secondaryHierarchyParser }, t.prototype.messages = function () { return !this.messageParser && _.size(this.it.current().DataShapeMessages) > 0 && (this.messageParser = new c(this.it.current().DataShapeMessages)), this.messageParser }, t.prototype.hasRestartTokens = function () { return _.size(this.restartTokens()) > 0 }, t.prototype.restartTokens = function () { return this.it.current().RestartTokens }, t.prototype.complete = function () { return this.it.current().IsComplete }, t.prototype.limitsExceeded = function () { return _.size(this.it.current().DataLimitsExceeded) > 0 }, t.prototype.limits = function () { return this.limitsParser || (this.limitsParser = new u(this.it.current().DataLimitsExceeded)), this.limitsParser }, t })(o), u = (function () { function e(e) { this.it = new r.Iterator(e) } return e.prototype.next = function () { return this.it.next() }, e.prototype.id = function () { return this.it.current().Id }, e.prototype.count = function () { return this.it.count() }, e })(), c = (function () { function e(e) { this.it = new r.Iterator(e) } return e.prototype.next = function () { return this.it.next() }, e.prototype.code = function () { return this.it.current().Code }, e.prototype.severity = function () { return this.it.current().Severity }, e.prototype.dsrMessage = function () { return new t.DsrMessage(this.it.current()) }, e })(), l = (function () { function e(e, t) { this.hierarchy = t, this.it = new r.Iterator(e) } return e.prototype.count = function () { return this.it.count() }, e.prototype.reset = function () { this.it.reset() }, e.prototype.next = function () { return this.instancesParser && (this.instancesParser = void 0), this.it.next() }, e.prototype.id = function () { return this.it.current().Id }, e.prototype.instances = function () { if (!this.instancesParser) { var e = this.it.current().Instances; this.instancesParser = e && new p(e, this.hierarchy) } return this.instancesParser }, e })(), p = (function (e) { function t(t, i) { var a = e.call(this) || this; return a.hierarchy = i, a.it = new r.Iterator(t), a } return __extends(t, e), t.prototype.next = function () { var e = this.it.next(); if (e) { var t = this.it.current(); this.setCalculations(t.Calculations), this.dataMemberIt = void 0, this.intersectionParserDirty = !0, 1 === this.hierarchy } return e }, t.prototype.count = function () { return this.it.count() }, t.prototype.currentIndex = function () { return this.it.index() }, t.prototype.intersections = function () { if (!this.intersectionParser) { this.intersectionParserDirty = !1; var e = this.it.current().Intersections; return this.intersectionParser = e && new d(e) } return this.intersectionParserDirty ? (this.intersectionParser.reset(this.it.current().Intersections), this.intersectionParser) : this.intersectionParser }, t.prototype.restartFlagKind = function () { return this.it.current().RestartFlag }, t.prototype.members = function () { if (!this.dataMemberIt) { var e = this.it.current().Members; this.dataMemberIt = e && new l(e, this.hierarchy) } return this.dataMemberIt }, t })(o), d = (function (e) { function t(t) { var i = e.call(this) || this; return i.it = new r.Iterator(t), i } return __extends(t, e), t.prototype.reset = function (e) { this.it.reset(e) }, t.prototype.next = function () { var e = this.it.next(); return e && this.setCalculations(this.it.current().Calculations), e }, t })(o) })(i = r.V1 || (r.V1 = {})) })(r = t.reader || (t.reader = {})) })(t = e.dsr || (e.dsr = {})) })(t = e.data || (e.data = {})) })(powerbi || (powerbi = {}));; "use strict"; var powerbi; !(function (e) { var o; !(function (o) { function r(r, i, l, a, d, m, s, p, u, c, k, v, y, E, f, b, g, x, C, U) { var W = o.CustomerAction(s, p, u, c, k, v, y, E, f, b, g, x, C, U), P = n(W.info, { sourceName: r, fileType: i, fileSize: l, uploadCompleted: a, uploadFormat: d, existingWorkbooks: m }); return { name: o.ProvidersExcelWorkbookUploadEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: t(), formatted: function () { return e.extendFormatted({ sourceName: P.sourceName, fileType: P.fileType, fileSize: P.fileSize, uploadCompleted: P.uploadCompleted, uploadFormat: P.uploadFormat, existingWorkbooks: P.existingWorkbooks }, null, W.formatted()) }, info: P, loggers: o.ProvidersExcelWorkbookUploadLoggers } } var t, i = jsCommon.Utility, n = jsCommon.UnionExtensions.mergeUnionType, l = e.telemetry.EventFactories; t = i ? i.generateGuid : Function.prototype, o.ProvidersExcelWorkbookUploadEventName = "PBI.Providers.ExcelWorkbookUpload", o.ProvidersExcelWorkbookUpload = r, l[o.ProvidersExcelWorkbookUploadEventName] = function (r) { return e.telemetryEventFactory(o.ProvidersExcelWorkbookUploadEventName, r, o.ProvidersExcelWorkbookUploadLoggers, o.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) } })(o = e.telemetry || (e.telemetry = {})) })(powerbi || (powerbi = {}));; "use strict"; var powerbi; !(function (l) { var t; !(function (l) { l.featureSwitchesHostFilters = { ngrxStore: 12223, annotationsUI: 8, reportAnnotationsUI: 10, userFavoriteResourcePackagesEnabled: 8191, queryCancellation: 25, personalVisualizationPaneEnabled: 8191 } })(t = l.common || (l.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (l) { var t; !(function (l) { var t = (function () { function l() { this.microsoftOrgAppEnabled = null, this.withinDXT = null, this.liveWorkbookTiles = null, this.csvContentProviderEnabled = null, this.vsoVnextAppEnabled = null, this.excelWorkbooksInContentPackEnabled = null, this.ffxlChartSelectionEnabled = null, this.ffxlLocalFilesEnabled = null, this.sharePointDocumentLibrariesEnabled = null, this.sparkAppEnabled = null, this.psaPracticeManagerAppEnabled = null, this.anonymousEmbeddingEnabled = null, this.psaResourceManagerAppEnabled = null, this.psaAccountManagerAppEnabled = null, this.azureUsageAndBillingAppEnabled = null, this.bingAdsAppEnabled = null, this.salesforcePersonasEnabled = null, this.fullFidelityExcelEnabled = !0, this.pseudoLocEnabled = null, this.showNonUserEntitiesEnabled = null, this.includeFlightingContentProviders = null, this.exportallowed = null, this.ignoreGettingStartedPopups = null, this.insightsDevModeEnabled = null, this.snapshotEmbedEnabled = null, this.embeddedEnabled = null, this.closeAccountEnabled = null, this.dataDotChartEnabled = null, this.preferHigherDataVolume = null, this.enterpriseGatewayEnabled = null, this.enterpriseGatewayETLEnabled = null, this.quotaSmallLimitEnabled = null, this.forceFreeUserEnabled = null, this.salesforceAndOneDriveCredentialsEnabled = null, this.scriptVisualEnabled = null, this.embedFullFidelityWorkbooks = null, this.readOnlyGroupEnabled = null, this.sandboxVisualsEnabled = !0, this.pauseQueriesEnabled = null, this.sunburstVisualEnabled = null, this.cloudRlsImpersonationEnabled = null, this.cloudRlsRoleMembershipEnabled = null, this.filledMapDataLabelsEnabled = null, this.enableTableToTableRelationship = null, this.isLabelInteractivityEnabled = null, this.hierarchyAuthoringEnabled = null, this.insightsSyncServiceEnabled = null, this.importPbiviz = null, this.analyzeInExcelEnabled = null, this.dataClassificationEnabled = null, this.scriptVisualAuthoringEnabled = null, this.hierarchyDragDrop = null, this.qnaSupportDQEnabled = null, this.qnaSupportOnPremEnabled = null, this.mapCurrentLocationEnabled = null, this.devToolsVisualApiVersioning = null, this.insightsStoreEnabled = null, this.saasMarketplace = null, this.permissionCenterEnabled = null, this.quickCalc = null, this.oneGBUploadFileSizeEnabled = null, this.templatePublishFlightingWorkAroundEnabled = null, this.editInDesktopEnabled = null, this.enableGroupAuthoring = null, this.exportVisualToExcelEnabled = null, this.showGeneratedColumnsInDetailView = null, this.alwaysPromptForContentProviderCreds = null, this.serviceAppsDisabled = null, this.overlappingPointsSampling = null, this.builtInContentProvidersDisabled = null, this.shapeMapVisualEnabled = null, this.dashboardEmbedEnabled = null, this.exportReportToPowerPointEnabled = null, this.adminAuditingEnabled = null, this.forecastEnabled = null, this.dynamicMessageEnabled = null, this.preloadLinkedDashboardEnabled = null, this.scriptVisualLaunchExternalIDEEnabled = null, this.esriEnabled = null, this.sharePointEmbedEnabled = null, this.clusteringEnabled = null, this.emailSubscriptionEnabled = !0, this.appsEnabled = null, this.downloadReportEnabled = null, this.socialSharingEnabled = !0, this.isSovereignCloud = null, this.scriptVisualAnonymousEmbeddingEnabled = null, this.analyzeInExcelSovereignFormatEnabled = null, this.appTemplatesEnabled = null, this.directQueryScheduledRefresh = null, this.previewDefaultOptIn = null, this.serviceAppsEnabled = null, this.templateAppUpgradeEnabled = null, this.useBackendFSEnabled = null, this.autoPausedSyncService = null, this.granularTenantControls = null, this.adminCapacityEnabled = null, this.numericSlicerEnabled = null, this.visualContainerTileConfig = !1, this.clientUsageMetricsEnabled = null, this.pivotTableVisualEnabled = null, this.multipleODataPredicates = null, this.datasetDownloadPbix = null, this.dashboardEmailSubscription = null, this.approvedResourcesDisabled = null, this.groupCapacity = null, this.customVisualsUseStaticSandbox = null, this.reportMeasures = null, this.binByCount = null, this.customVisuals = null, this.altTextForVisual = null, this.showHiddenUsageMetricsModels = null, this.scatterWithMatrixDV = null, this.binnedLineSampling = null, this.appStoreCdnOverride = null, this.useV8BingMaps = null, this.lineMarkersEnabled = null, this.capacityMetrics = null, this.onPremDirectQuerySingleSignOnForSql = null, this.onPremDirectQuerySingleSignOnForOracle = null, this.onPremDirectQuerySingleSignOnForSAP = null, this.onPremDirectQuerySingleSignOnForTeradata = null, this.whatIf = null, this.waterfallBreakdown = null, this.lineStylesEnabled = null, this.scatterChartShading = null, this.scatterChartRatioLine = null, this.cellLevelFormatting = null, this.drillthrough = null, this.canvasItemsPane = null, this.instantEmail = null, this.usageMetricsUpgrade = null, this.authoringCapabilitiesAdminControl = null, this.customVisualsPerformanceTelemetry = null, this.customCommands = null, this.scatterWithDataVolume = null, this.loadBaseTheme = null, this.baseTheme = null, this.embedCodesEnabled = null, this.reportSharingUI = null, this.appB2BSharingUI = null, this.scatterXYGrouping = null, this.slowDataSourceModeEnabled = null, this.zOrder = null, this.ngrxStore = null, this.navPaneNew = null, this.dsrV2 = null, this.qnaExplore = null, this.drillFilterOtherVisuals = null, this.mapPointSampling = null, this.themeRelative = null, this.useBatchGeocoding = null, this.adminNavPaneEnabled = null, this.stickyUserStateUI = null, this.stickyUserStateUIThrottling = null, this.defaultSortMethodology = null, this.showIncrementalRefreshPolicy = null, this.createAppWorkspaceSettingMigration = null, this.subscribeOthersUI = null, this.qnaPopout = null, this.transientPods = null, this.measureDrillthrough = null, this.dashboardThemesUI = null, this.filtersInDataView = null, this.cdsaExternalStorageReferenceUI = null, this.advancedSlicerSyncing = null, this.notifyLegacyExternalUsers = null, this.insightApps = null, this.paginatedReports = null, this.annotationsUI = null, this.urlBookmarksUI = null, this.donutImprovements = null, this.embedCodesNew = null, this.dataClassification = null, this.editWorkspaceShowsRegion = null, this.createCapacityWithRegion = null, this.comparisonODataPredicates = null, this.stickyUserStateCustomViz = null, this.multiGeoGatewaysCredentialsWarning = null, this.gatewayBasicLoadBalancing = null, this.showManageAggregations = null, this.distributionFactorsInsight = null, this.steppedLine = null, this.dataViewTargeted = null, this.dateODataType = null, this.nonAsciiODataNames = null, this.inODataPredicates = null, this.appThemingUI = null, this.bookmarkGrouping = null, this.outspaceBackground = null, this.newVisualContainerHeader = null, this.personalBookmarksUI = null, this.spoWithTutorialVisuals = null, this.securePublishToWeb = null, this.redlineAlignment = null, this.qnaTextboxNew = null, this.capacityWorkloads = null, this.rdlReportSharingUI = null, this.smartAlertInHome = null, this.lessIntrusiveNpsDialog = null; this.permissionCenterUxUpdate = null; this.explorePermissionOnDataset = null, this.cartesianConditionalFormatting = null, this.dotPlot = null, this.openExploreErrorDetails = null, this.onPremDirectQuerySingleSignOnForSapBw = null, this.cdsaUseMashupEditorClientLibrary = null, this.capacitySettingsTabs = null, this.adminWorkspaceEnabled = null, this.copyBetweenPbix = null, this.datasetPropertiesSection = null, this.certifyDatasetsSetting = null, this.allowExploreDatasetOfApp = null, this.exportExcelExcludeMeasures = null, this.exportDataMode = null, this.insightsNonAdditive = null, this.increasedExportPowerPointSectionLimit = null, this.capacityRestartButton = null, this.cdsaExperimentalConnectors = null, this.optimizePublishToWeb = null, this.rdlReportPrint = null, this.sharedDatasetDiscovery = null, this.reportAnnotationsUI = null, this.autoShareAnnotatedArtifact = null, this.onPremDirectQuerySingleSignOnForSapBwMessageServer = null, this.qnaLiveConnect = null, this.scheduledSubscriptionUI = null, this.asyncAppUpdate = null, this.userStateBookmarkImprovements = null, this.cdsaCDMFolderReferenceUI = null, this.elevatedGuests = null, this.cdsaFolderStorageAccountUI = null, this.rdlReportJsonRplRenderer = null, this.localizationModern = null, this.workloadMetrics = null, this.removeAuthoringToolSaveButton = null, this.dashboardB2BSharingWithRegularHost = null, this.PbiDedicatedPublicXmlaEndpoint = null, this.keyDrivers = null, this.cdsaDatasetCopyUI = null, this.qnaDidYouMean = null, this.rolloutCapacitiesList = null, this.visualTabOrders = null, this.customEngineWorkloadSettings = null, this.helpAndSupportSettings = null, this.allowInsightsQuestions = null, this.servicePrincipalTenantAdminSettings = null, this.cancelDataflowRefresh = null, this.exportReportToPdfEnabled = null, this.newLookUI = null, this.httpServiceModern = null, this.aiInsightsFunctionBrowser = null, this.allowSectionVerticalAlignment = null, this.qnaPopoutInReportAppBar = null, this.qnaPopoutInDashboard = null, this.cdsaExistingDatasetCopyUI = null, this.defaultTooltipFormatting = null, this.axisInteractivity = null, this.showDataflowsInGetData = null, this.cdsaFastCombineDefaultOffFrontend = null, this.crossReportDrill = null, this.workspacesV2GA = null, this.workspacesV2GAFeatures = null, this.cdsaStorageAccountDetachUI = null, this.exprBoundVisualTitle = null, this.dataSourceVariablesOverride = null, this.capacityBanner = null, this.workspaceCapacityManagement = null, this.drillthroughToPods = null, this.rdlReportInApps = null, this.filterPaneScaling = null, this.userFavoriteResourcePackagesEnabled = null, this.performancePane = null, this.keyDriversBinning = null, this.keyDriversNumericTarget = null, this.unreadAnnotationsBadge = null, this.paginatedReportsSubscriptions = null, this.cdsaStorageUpdateMissingParamsUI = null, this.keyDriverPaas = null, this.scheduledRefreshCCNotifications = null, this.qnaRedUnderline = null, this.emailFeedbackForNewLookUI = null, this.sharedDataflowDiscoveryUI = null, this.filterPaneCustomSort = null, this.lineChartLabelPosition = null, this.templateAppsUpdate = null, this.keepQueryProjOrderForShowAll = null, this.showDashboardQnaNewUIToggle = null, this.visualsOutsideNgZone = null, this.visualFiltersCustomSort = null, this.workspacesV2ViewerRole = null, this.useModernLicenseHelperService = null, this.useModernLicenseStrategyService = null, this.exprBoundColors = null, this.tablixPreserveScrollFix = null, this.gaugeConditionalFormatting = null, this.exprBoundColorValidation = null, this.mappingExecutionType = null, this.visualHeaderTooltip = null, this.templateAppValidateAppInstall = null, this.gatewayMultipleCredentials = null, this.gatewayMultipleCredentialsRDLReports = null, this.gatewayMultipleCredentialsDatapools = null, this.visualLevelSlicerFilters = null, this.paneColorRefresh = null, this.nonValidatedAppAdminControl = null, this.tablixTotalLabel = null, this.dataSourceVariablesOverrideShared = null, this.playAxisDataColors = null, this.visualContainerGrouping = null, this.disableExportDataOnVisualError = null, this.stagingRdlInApps = null, this.rdlReportInGlobalSearch = null, this.useNewCY19SU06BaseTheme = null, this.paginatedReportsSqlAzureSSO = null, this.appRepublishErrorHandlingUpdate = null, this.newLookCesFeedback = null, this.pbiMarketplace = null, this.tablixIcons = null, this.decompositionTree = null, this.tileEmbedHostEnvChange = null, this.keyDriversMeasureTarget = null, this.keyDriversCounting = null, this.dataBoundPropertiesUseThemeDefaults = null, this.contactsSettingsList = null, this.enableNewFilterOnAllReports = null, this.enableSearchFilters = null, this.enableApplyAllFilter = null, this.drillthroughText = null, this.fluentListUI = null, this.keyDriversDetails = null, this.propertyEvaluationWarnings = null, this.inlineExplore = null, this.qnaAutocomplete = null, this.qnaVisual = null, this.workspacesV2OptInUpgrade = null, this.workspacesV2OptInUpgradeButton = null, this.qnaTooling = null, this.aiCapacityMetrics = null, this.qnaVizgen = null, this.eimInformationProtectionUI = null, this.customFormatStrings = null, this.rdlReportAnnotationsUI = null, this.homeThumbnailUI = null, this.importJsonModel = null, this.allowCDNUrl = null, this.pipelines = null, this.themeTextStyles = null, this.embedDashboardCacheQESResults = null, this.useModernFooter = null, this.exprBoundBorderColor = null, this.exprBoundGaugeColors = null, this.exprBoundAltText = null, this.rdlSecureEmbed = null, this.disableServicePrincipalNotification = null, this.embedNgrxStore = null, this.personalVisualizationPaneEnabled = null, this.defaultLabel = null, this.newExportDataUI = null, this.newUsageMetrics = null, this.touchScreenOptimizedTooltips = null, this.usageMetricsRetroactiveDisable = null, this.trackUserInfo = null, this.improvedFilterExperience = null, this.reportLoadIndicator = null, this.enableSearchInFilter = null, this.cdsaWorkspaceDependencyGraph = null, this.cdsaWorkspaceGraphDatasources = null, this.cdsaSettingsTakeover = null, this.cdsaWorkspaceGraphDataflowEntities = null, this.enableQueryCaching = null, this.cdsaSendEmailOnRefreshFailureUI = null, this.networkStatusNotification = null, this.cdsaGraphDeveloperMode = null, this.skipTestConnection = null, this.separateDataflowForMl = null, this.cdsaGraphLongestPath = null, this.smartAlertTenantAdminSettings = null, this.cdsaEntitiesRelationships = null, this.removeDataflowPreviewTag = null, this.queryCancellation = null, this.cdsaGraphCurvedLine = null, this.capacityWorkloadMemoryControls = null, this.addPreviewTagToAttachExternalDataflow = null, this.emailSubscriptionTenantAdminSettings = null, this.newDSCompInDataset = null, this.notificationInfoModern = null, this.eimWorkspaceDiagram = null, this.eimWorkspaceDiagramDataflows = null, this.eimWorkspaceDiagramDatasources = null, this.keyDriversVisualColor = null, this.distributionFactorsVisual = null, this.telemetryV2 = null, this.adminBranding = null, this.adminDataProtection = null, this.skipTestConnectionOnPrem = null, this.northStarBreadcrumb = null, this.managedIdentityAuthorizationTenantAdminSettings = null, this.promotedContentUI = null, this.artifactDescriptionsUI = null, this.singleSignOnTestConnection = null; this.staticExportReportEnabled = null; this.allUpSaveReport = null, this.lassoSelectEnabled = null, this.spatialClusteringEnabled = null, this.negatedTuplesFiltering = null, this.highVolume = null, this.customVisualsStore = null, this.insightsExplore = null, this.ribbonChart = null, this.gatewayBindingEnhancement = null, this.capacitiesVCores = null, this.customVisualsGallery = null, this.capacitiesAzureTab = null, this.capacitiesMigrateSpecificWorkspaces = null, this.assignAdminsAzureCapacitiesEnabled = null, this.reportInstantEmail = null, this.dashboardInstantEmail = null, this.slicerSyncing = null, this.dsrV2_Staging = null, this.workspacesV2 = null, this.workspacesV2UsageMetrics = null, this.workspacesV2UnifiedGroups = null, this.customVisualsTenantSwitch = null, this.pinReadable = null, this.homeUI = null, this.artifactSearchUI = null, this.appAccessRequestUI = null, this.spoIntegration = null, this.bookmarkInitRefactor = null, this.disallowWorkbookRefresh = null, this.onDemandSmartAlerts = null, this.homeArtifactSearchUI = null, this.homeRecommendedAppsUI = null, this.exportUnderlyingSetting = null, this.searchWorkspaces = null, this.supportBulkOperationsInAdminPortal = null, this.exportToPowerPointModal = null, this.workspaceListView = null, this.exportWithExportBookmark = null, this.pinInsightsFromApp = null, this.useModernVisual = null, this.useModernExploreCanvas = null, this.modernDashboard = null, this.modernWebReportLoad = null, this.quickAccessSearch = null, this.showMinervaRibbon = null, this.showMinervaViewNavigator = null, this.showMinervaStatusBar = null, this.copyRdlReportToWorkspaceV2 = null, this.allowEmailSecurityGroupsOnOutage = null, this.homeAllowAllVisualTypes = null, this.autoInstallImprovement = null, this.useModernFilter = null, this.modernFolderService = null, this.histogram = null, this.cdsaModelSchemaUpdate = null, this.enableRdlReportCopyFromWorkspaceV1 = null, this.htmlLegend = null, this.allowAssigningTenantWorkspacesFromAzureCapacityAdmin = null, this.capacityMetricDrilldown = null, this.discoverDataSourceButton = null, this.skipVisualManualUpdate = null, this.disableGetDataAnalysisServices = null, this.singleFilterPane = null, this.copyReportsToWorkspacesV2 = null, this.allowFreeUsersToSubscribeInPremiumAppsUI = null, this.monthlySubscriptions = null, this.realTimeRefresh = null, this.externalConnectorSSO = null, this.tenantOutOfBoxVisualsEnabled = null, this.lazyLoadAngularJS = null } return l })(); l.ClientFeatureSwitches = t })(t = l.common || (l.common = {})) })(powerbi || (powerbi = {}));; "use strict"; var __awaiter = this && this.__awaiter || function (t, e, n, r) { return new (n || (n = Promise))(function (o, i) { function a(t) { try { c(r.next(t)) } catch (t) { i(t) } } function s(t) { try { c(r.throw(t)) } catch (t) { i(t) } } function c(t) { t.done ? o(t.value) : new n(function (e) { e(t.value) }).then(a, s) } c((r = r.apply(t, e || [])).next()) }) }, __generator = this && this.__generator || function (t, e) { function n(t) { return function (e) { return r([t, e]) } } function r(n) { if (o) throw new TypeError("Generator is already executing."); for (; c;)try { if (o = 1, i && (a = 2 & n[0] ? i.return : n[0] ? i.throw || ((a = i.return) && a.call(i), 0) : i.next) && !(a = a.call(i, n[1])).done) return a; switch (i = 0, a && (n = [2 & n[0], a.value]), n[0]) { case 0: case 1: a = n; break; case 4: return c.label++ , { value: n[1], done: !1 }; case 5: c.label++ , i = n[1], n = [0]; continue; case 7: n = c.ops.pop(), c.trys.pop(); continue; default: if (a = c.trys, !(a = a.length > 0 && a[a.length - 1]) && (6 === n[0] || 2 === n[0])) { c = 0; continue } if (3 === n[0] && (!a || n[1] > a[0] && n[1] < a[3])) { c.label = n[1]; break } if (6 === n[0] && c.label < a[1]) { c.label = a[1], a = n; break } if (a && c.label < a[2]) { c.label = a[2], c.ops.push(n); break } a[2] && c.ops.pop(), c.trys.pop(); continue }n = e.call(t, c) } catch (t) { n = [6, t], i = 0 } finally { o = a = 0 } if (5 & n[0]) throw n[1]; return { value: n[0] ? n[1] : void 0, done: !0 } } var o, i, a, s, c = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return s = { next: n(0), throw: n(1), return: n(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this }), s }, powerbi; !(function (t) { var e; !(function (e) { function n(t, e, n, o) { var i = new r(t, e, n, o, {}); return function (t) { return i.get(t) } } e.createLazyInjector = n; var r = (function () { function e(t, e, n, r, o) { this.loader = t, this.promiseFactory = e, this.$inj = n, this.factories = r, this.instances = o } return e.prototype.get = function (e) { return __awaiter(this, void 0, t.Promise, (function () { var t, n, r, o, i, a, s, c, u, l, f, h, p, d, v, y, m, b, w, g = this; return __generator(this, (function (L) { switch (L.label) { case 0: if (t = this.instances[e], void 0 !== t) return [2, t.promise]; if (t = this.instances[e] = this.promiseFactory.defer(), n = this.factories[e], r = n.ng, o = _.size(r), i = n.modular, a = _.size(i), s = new Array(o + a), c = 0, o) for (u = this.$inj, l = 0, f = r; l < f.length; l++)h = f[l], s[c++] = u.get(h); if (!a) return [3, 4]; p = _.map(i, (function (t) { return g.get(t) })), d = 0, v = p, L.label = 1; case 1: return d < v.length ? (y = v[d], m = s, b = c++ , [4, y]) : [3, 4]; case 2: m[b] = L.sent(), L.label = 3; case 3: return d++ , [3, 1]; case 4: return [4, this.loader.require(n.source)]; case 5: return w = L.sent(), t.resolve(n.fn.apply(n, [w].concat(s))), [2, t.promise] } })) })) }, e })() })(e = t.common || (t.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (t) { var e; !(function (e) { var n; !(function (e) { var n = (function () { function t() { var t = this; this.$get = ["$ocLazyLoad", "moduleLoader", "promiseFactory", function (e, n, o) { return new r(e, n, t.hostEnv) }] } return t.prototype.setHostEnv = function (t) { this.hostEnv = t }, t })(); e.PbiLazyLoadProvider = n; var r = (function () { function e(t, e, n) { this.$ocLazyLoad = t, this.moduleLoader = e, this.hostEnv = n } return e.prototype.load = function (e) { return __awaiter(this, void 0, t.Promise, (function () { var t, n, r; return __generator(this, (function (o) { switch (o.label) { case 0: return t = e.name, n = e.namespace, [4, this.moduleLoader.require(e.dependency)]; case 1: return r = o.sent(), this.isLoaded(t) ? [2, !1] : (_.isEmpty(n) || (r = this.getNamespaceObject(n)), r && r.registerBuildingBlocksForHost && r.registerBuildingBlocksForHost(this.hostEnv), [4, this.$ocLazyLoad.inject(t)]); case 2: return o.sent(), [2, !0] } })) })) }, e.prototype.isLoaded = function (t) { var e = this.$ocLazyLoad.getModules(); return _.includes(e, t) }, e.prototype.getNamespaceObject = function (t) { for (var e = t.split("."), n = window, r = 0, o = e; r < o.length; r++) { n = n[o[r]] } return n }, e })() })(n = e.services || (e.services = {})) })(e = t.common || (t.common = {})) })(powerbi || (powerbi = {}));; "use strict"; var powerbi; !(function (e) { var o; !(function (e) { var o; !(function (e) { function o(e) { var o = e.$new(!0); return o[a] = !0, o } function i(o, i, t) { if (window.DEBUG) for (i = i || [], t = t || []; o;) { if (o[a]) { _.filter(i, (function (o) { return !(_.startsWith(o, "$") || _.includes(e.AvailableAngularServices, o)) })), _.filter(t, (function (o) { return !_.includes(e.AvailableScopedServices, o) })); return } o = o.$parent } } e.AvailableScopedServices = ["itemPicker", "dataSources", "eventBridge", "explorationNavigation", "explorationCapabilities", "groupAuthoring", "groupingDesignStateService", "lazyScoped", "lazyScopedSync", "modelAuthoring", "modelChangeHandler", "schemaItemActivation", "selection", "shell", "visualAuthoring", "visualPlugin"], e.AvailableAngularServices = ["aggrOps", "commandStore", "conceptualSchemaProxy", "highContrastCssGenerationService", "displayNameService", "dragDataService", "dropdown", "errorService", "explorationSerializer", "featureSwitchService", "fileSaver", "highlight", "lazy", "localizationService", "modalDialogService", "promiseFactory", "screenReaderService", "svgProvider", "telemetryService", "tooltipService", "visualPlugin", "hostTooltip"]; var a = "HostModalDialogScopeIdentifier"; e.createHostModalDialogScope = o, e.validateHostModalDialogServices = i })(o = e.HostModalDialogServices || (e.HostModalDialogServices = {})) })(o = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var o; !(function (o) { function i(e, o, i, a, l, r, n, s) { return new t(e, o, i, a, l, r, n, s) } var a = jsCommon.ModalDialog; o.createModalDialogService = i; var t = (function () { function i(e, o, a, t, l, r, n, s) { this.compileService = e, this.pbiLazyLoad = o, this.promiseFactory = a, this.templateCacheService = t, this.timeoutService = l, this.rootScope = r, this.telemetryService = n, this.moduleLoader = s, this.modalDialog = i.getModalDialog(), this.componentDialogTaskStack = [] } return i.prototype.showWebModalDialog = function (e) { return this.showDialogWithPromise(this.rootScope.$new(!0), e) }, i.prototype.showHostModalDialog = function (e) { var i = o.HostModalDialogServices.createHostModalDialogScope(this.rootScope); if (!this.isModernDialog(e)) return e.bindings && (e.bindings = JSON.parse(JSON.stringify(e.bindings))), this.showDialogWithPromise(i, e, !0) }, i.prototype.isModernDialog = function (e) { return void 0 !== e.componentName }, i.prototype.close = function (e) { var o = this.componentDialogTaskStack.pop(); o && o.resolve(e) }, i.getModalDialog = function (e) { return i.modalDialog || (i.modalDialog = new a(null, e)), i.modalDialog }, i.errorServiceModalDialogControl = function (e) { return i.getModalDialog(e) }, i.prototype.showLegacyWebModalDialog = function (e) { var o = this, i = e.template ? e.template : this.templateCacheService.get(e.templateUrl), a = e.dialogActions ? e.dialogActions : [], t = this.promiseFactory.defer(), l = angular.extend(e.scope, { closeDialog: _.noop, onDialogDisplayed: t.promise }), r = this.compileService(i)(l); return this.timeoutService((function () { o.modalDialog.showCustomDialog(e.dialogName, r, a, (function (i) { return o.onDialogDisplayed(i, e, l, t) }), e.isDismissable, e.focusOnFirstButton, e.dialogCssClass, e.containerCssClass, (function () { return o.onDialogClosed(l, e.onCloseDialog) }), e.notificationType, e.notificationText, e.noActiveButtons, e.htmlMessageText, e.flipContentAndNotificationOrder, void 0, e.closeOnEsc) })), l }, i.prototype.onDialogDisplayed = function (e, a, t, l) { var r = this; t.closeDialog = function () { return r.modalDialog.hideDialog() }, l.resolve(null); var n = e.find("button[autofocus]"); _.some(n) && n.focus(); var s = e.closest(i.modalDialogSelector), d = function () { return s.draggable({ containment: "parent", handle: i.modalDialogDragHandleSelector }) }; if (s.draggable ? d() : this.moduleLoader.require(o.modules.JQueryUIModule).then((function () { return d() })), window.DEBUG) { 1 === s.find("dialog-frame").length, a.containerCssClass !== i.componentDialogHostCssClass } }, i.prototype.onDialogClosed = function (e, o) { e.$destroy(), o && o() }, i.prototype.showDialogWithPromise = function (o, a, t) { var l = this, r = this.promiseFactory.defer(); if (0 !== this.componentDialogTaskStack.length) return this.telemetryService.logEvent(e.telemetry.ShowModalDialogSkippedNestedDialogs, a.dialogName), r.reject("nested dialogs is not yet implemented."), e.createRejectablePromise(r); var n = function () { if (0 !== l.componentDialogTaskStack.length) return l.telemetryService.logEvent(e.telemetry.ShowModalDialogSkippedNestedDialogs, a.dialogName), void r.reject("nested dialogs is not yet implemented."); _.assign(o, a.bindings); var n = l.templateCacheService.get(a.definitionTemplateCachePath); t && (n = "<host-dialog-container>" + n + "</host-dialog-container>"); var s = { scope: o, dialogName: a.dialogTitle, template: n, onCloseDialog: function () { _.includes(l.componentDialogTaskStack, r) && l.close() }, dialogCssClass: a.dialogCssClass, containerCssClass: i.componentDialogHostCssClass, isDismissable: null == a.isDismissable || a.isDismissable }, d = l.showLegacyWebModalDialog(s); if (l.componentDialogTaskStack.push(r), r.promise.catch((function (o) { l.telemetryService.logEvent(e.telemetry.ShowModalDialogRejected, a.dialogName, JSON.stringify(o)), _.includes(l.componentDialogTaskStack, r) && l.close(void 0) })).finally((function () { d.closeDialog() })), !t) { var g = a; g.onDialogDisplayed && d.onDialogDisplayed.then((function () { return g.onDialogDisplayed.resolve(null) })) } }, s = []; if (a.lazyModuleDependencies) { for (var d = 0, g = a.lazyModuleDependencies; d < g.length; d++) { var c = g[d]; s.push(this.pbiLazyLoad.load(c)) } this.promiseFactory.all(s).then(n) } else n(); return e.createRejectablePromise(r) }, i.modalDialogSelector = ".infonav-modalDialog", i.modalDialogTitleSelector = ".infonav-dialogTitle", i.componentDialogHostCssClass = "componentDialog", i.dialogFrameDragHandleSelector = "dialog-frame .frameDragHandle", i.modalDialogDragHandleSelector = i.modalDialogTitleSelector + ", " + i.dialogFrameDragHandleSelector, i })(); o.ModalDialogService = t })(o = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var o; !(function (o) { function i(i, a, t) { var r = { dialogName: i, rejectReason: a, message: t }; return { name: o.ShowModalDialogRejectedEventName, category: e.TelemetryCategory.CriticalError, time: Date.now(), id: l(), formatted: function () { return e.extendFormatted({ dialogName: r.dialogName, rejectReason: r.rejectReason, message: r.message }, null) }, info: r, loggers: o.ShowModalDialogRejectedLoggers } } function a(i, a) { var t = { dialogName: i, message: a }; return { name: o.ShowModalDialogSkippedNestedDialogsEventName, category: e.TelemetryCategory.CriticalError, time: Date.now(), id: l(), formatted: function () { return e.extendFormatted({ dialogName: t.dialogName, message: t.message }, null) }, info: t, loggers: o.ShowModalDialogSkippedNestedDialogsLoggers } } function t(i, a, t, r, s, d, g, c, m, u, p, v, D, h, S, f, y, w, C, N) { var M = o.BaseEvent(g, c, m, u, p, v, D, h, S, f, y, w, C, N), b = n(M.info, { reportId: i, pageId: a, dbName: t, modelId: r, interval: s, delayCount: d }); return { name: o.TriggerRefreshEventName, time: Date.now(), id: l(), formatted: function () { return e.extendFormatted({ reportId: b.reportId, pageId: b.pageId, dbName: b.dbName, modelId: b.modelId, interval: b.interval, delayCount: b.delayCount }, null, M.formatted()) }, info: b, loggers: o.TriggerRefreshLoggers } } var l, r = jsCommon.Utility, n = jsCommon.UnionExtensions.mergeUnionType, s = e.telemetry.EventFactories; l = r ? r.generateGuid : Function.prototype, o.ShowModalDialogRejectedEventName = "PBI.ShowModalDialogRejected", o.ShowModalDialogRejected = i, s[o.ShowModalDialogRejectedEventName] = function (i) { return e.telemetryEventFactory(o.ShowModalDialogRejectedEventName, i, o.ShowModalDialogRejectedLoggers, void 0, e.TelemetryCategory.CriticalError, void 0, void 0, void 0, null) }, o.ShowModalDialogSkippedNestedDialogsEventName = "PBI.ShowModalDialogSkippedNestedDialogs", o.ShowModalDialogSkippedNestedDialogs = a, s[o.ShowModalDialogSkippedNestedDialogsEventName] = function (i) { return e.telemetryEventFactory(o.ShowModalDialogSkippedNestedDialogsEventName, i, o.ShowModalDialogSkippedNestedDialogsLoggers, void 0, e.TelemetryCategory.CriticalError, void 0, void 0, void 0, null) }, o.TriggerRefreshEventName = "PBI.TriggerRefresh", o.TriggerRefresh = t, s[o.TriggerRefreshEventName] = function (i) { return e.telemetryEventFactory(o.TriggerRefreshEventName, i, o.TriggerRefreshLoggers, o.BaseEventEventName, void 0, void 0, void 0, void 0, null) } })(o = e.telemetry || (e.telemetry = {})) })(powerbi || (powerbi = {}));; "use strict"; var powerbi; !(function (n) { var t; !(function (n) { function t(n) { return new e(n) } n.createChannelSubscriptionManager = t; var e = (function () { function n(n) { this.subscribeFunction = n, this.unsubscribeList = [] } return n.prototype.subscribe = function (n, t) { var e = this.subscribeFunction(n, t); return e && $.isFunction(e) && this.unsubscribeList.push(e), this }, n.prototype.subscribeAsync = function (n, t) { var e = function (n, e) { var r = t(n, e), i = e; i.promises && r && i.promises.push(r) }; return this.subscribe(n, e) }, n.prototype.unsubscribeAll = function () { var n = -1, t = this.unsubscribeList.length; if (t) { for (n = t; t;)this.unsubscribeList[--t](); this.unsubscribeList.splice(0, n) } return n }, n })() })(t = n.common || (n.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (n) { var t; !(function (t) { function e() { return new i } var r = (function () { function n(n) { this.scope = n, this.handlers = [] } return n.prototype.subscribe = function (n, t) { var e = this.scope; return e && this.handlers.push(e.$on(n.name, t)), this }, n.prototype.unsubscribeAll = function () { for (var n = 0, t = this.handlers.length; n < t; n++)this.handlers[n](); this.handlers = [] }, n })(); t.createEventBridge = e; var i = (function () { function e() { this.channelMap = {} } return e.prototype.getChannel = function (n) { return this.getOrCreateChannel(n, !0) }, e.prototype.getOrCreateChannel = function (n, t) { var e = this.channelMap[n]; if (!e) { if (!t) return; e = {}, this.channelMap[n] = e } return $(e) }, e.prototype.createChannelSubscriptionManager = function () { var n = this; return t.createChannelSubscriptionManager((function (t, e) { return n.subscribeToChannel(t, e) })) }, e.prototype.subscribeToChannel = function (n, t) { var e = this.getChannel(n.type), r = function () { $(e).off(n.name, null, t) }; return r(), $(e).on(n.name, {}, t), r }, e.prototype.publishToChannel = function (n, t) { var e = this.getOrCreateChannel(n.type, !1); e && e.trigger(n.name, t) }, e.prototype.publishToChannelAsync = function (t, e) { var r = [], i = e; return i.promises = r, this.publishToChannel(t, i), i.promises = void 0, n.Promise.allSettled(r) }, e.prototype.setBubblingScope = function (n) { return new r(n) }, e.prototype.subscribeToBubbling = function (n, t, e) { return n.$on(t.name, e) }, e.prototype.publishBubbling = function (n, t, e) { n.$emit(t.name, e) }, e })() })(t = n.common || (n.common = {})) })(powerbi || (powerbi = {}));; "use strict"; var powerbi; !(function (e) { var r; !(function (e) { var r; !(function (e) { function r(e) { return 103 === e || 102 === e } e.activityId = "ActivityId", e.requestId = "RequestId", e.http = "http", e.uploadFileSizeHeaderName = "X-PowerBI-UploadFileSize", e.previousTenantIdHeaderName = "X-PowerBI-User-PreviousTenantId", e.refreshAccessToken = "refreshAccessToken", e.localFileSelectedEventName = "localFileSelected", e.chooseLocalFileEventName = "chooseLocalFile", e.liveClientIdKey = "LiveClientId", e.liveLogoutUrl = "https://login.live.com/oauth20_logout.srf?client_id={0}&redirect_uri={1}/providers/excel/msaRedirect?logout=1", e.loadExcelWorkbookEventName = "loadExcelWorkbook", e.visualReady = "visualReady", e.onReportChangedEventName = "onReportChanged", e.currentActiveReportInfoChangedEventName = "currentActiveReportInfoChanged", e.onReportPersonalizedEventName = "onReportPersonalized", e.textInputOnBlurEventName = "textInputOnBlur", e.onExportReportPPTEventName = "onExportReportPowerPoint", e.tileVisualLoadedEventName = "tileVisualLoaded", e.dashboardTileRepeatFinishedEvent = "dashboardTileRepeatFinished", e.visualCancelLoadEventName = "visualCancelLoad", e.navigateToDatasetSettingsEventName = "goToDatasetSettings", e.dragStartEventName = "dragstart", e.dragEnterEventName = "dragenter", e.dragOverEventName = "dragover", e.dragLeaveEventName = "dragleave", e.dropEventName = "drop", e.dragEndEventName = "dragend", e.azureCapacityPivot = "azure", e.officeCapacityPivot = "office", e.VisualSelectionOrPositionChangedEventName = "VisualSelectionOrPositionChanged", e.editableLabelOnBlurEventName = "editableLabelOnBlur", e.defaultPortraitPrintWidth = 673, e.defaultPortraitPrintHeight = 860, e.defaultLandscapePrintWidth = 940, e.defaultLandscapePrintHeight = 578; var o; !(function (e) { e.openReportActionName = "/openReport", e.openWorkbookActionName = "/openWorkbook", e.openQnAActionName = "/openQnA", e.openInFocusActionName = "/openInFocus", e.openInsightsActionName = "/openInsights"; var r; !(function (e) { e.openUrlActionName = "/openUrl" })(r = e.custom || (e.custom = {})) })(o = e.tileActions || (e.tileActions = {})), e.OverlayCloseEventName = "overlay.close", e.tagName = "tagName", e.myWorkspaceFolderId = "me", e.RDataSourceName = "R", e.onPremiseVSName = "sobe_onpremisevirtualserver", e.previewHomeKey = "previewHome", e.previewSettingChangedEventName = "previewSettingChanged", e.HideIntroduceAppBarKey = "hideIntroduceAppBar"; var a; !(function (e) { e.stateChangeStart = "$stateChangeStart", e.stateChangeSuccess = "$stateChangeSuccess", e.locationChangeStart = "$locationChangeStart", e.getDataDirectQueryUrlParams = "server&database&user&dsid", e.spoImportUrlParams = "personalUrl&name&listId&documentId&resourceId", e.getDataMashupUrlParams = "paramsCode", e.getDataForceConnect = "getDataForceConnect", e.bookmarkQueryParamName = "bookmarkGuid", e.bookmarkUsageQueryParamName = "bookmarkUsage"; var r; !(function (e) { e.appDashboardSubscription = "landing.groups.group.apps.app.dashboards.dashboard.subscriptions.subscription", e.appDashboardSubscriptions = "landing.groups.group.apps.app.dashboards.dashboard.subscriptions", e.appReports = "landing.groups.group.apps.app.reports", e.appReport = "landing.groups.group.apps.app.reports.report", e.appReportPage = "landing.groups.group.apps.app.reports.report.page", e.appReportSubscription = "landing.groups.group.apps.app.reports.report.page.subscription", e.appRdlReports = "landing.groups.group.apps.app.rdlReports", e.appRdlReport = "landing.groups.group.apps.app.rdlReports.rdlReport", e.appRdlReportSubscription = "landing.groups.group.apps.app.rdlReports.rdlReport.subscription", e.appWorkbooks = "landing.groups.group.apps.app.workbooks", e.appWorkbook = "landing.groups.group.apps.app.workbooks.workbook", e.appInstanceReports = "landing.groups.group.apps.app.instances.instance.reports", e.appInstanceReport = "landing.groups.group.apps.app.instances.instance.reports.report", e.appInstanceReportPage = "landing.groups.group.apps.app.instances.instance.reports.report.page", e.dashboardReports = "landing.groups.group.dashboards.dashboard.reports", e.dashboardReport = "landing.groups.group.dashboards.dashboard.reports.report", e.dashboardReportPage = "landing.groups.group.dashboards.dashboard.reports.report.page", e.dashboardSubscription = "landing.groups.group.dashboards.dashboard.subscriptions.subscription", e.dashboardSubscriptions = "landing.groups.group.dashboards.dashboard.subscriptions", e.datasets = "landing.groups.group.datasets", e.dataset = "landing.groups.group.datasets.dataset", e.permissionCenter = "landing.groups.group.permissionCenter", e.dashboardPermission = "landing.groups.group.permissionCenter.dashboard", e.datasetPermission = "landing.groups.group.permissionCenter.dataset", e.reportPermission = "landing.groups.group.permissionCenter.report", e.workbookPermission = "landing.groups.group.permissionCenter.workbook", e.reports = "landing.groups.group.reports", e.report = "landing.groups.group.reports.report", e.reportPage = "landing.groups.group.reports.report.page", e.reportShare = "landing.groups.group.reports.report.page.share", e.reportSubscription = "landing.groups.group.reports.report.page.subscription", e.sharedDashboardReports = "landing.groups.group.sharedWithMe.dashboards.dashboard.reports", e.sharedDashboardReport = "landing.groups.group.sharedWithMe.dashboards.dashboard.reports.report", e.sharedDashboardReportPage = "landing.groups.group.sharedWithMe.dashboards.dashboard.reports.report.page", e.workbooks = "landing.groups.group.workbooks", e.workbook = "landing.groups.group.workbooks.workbook" })(r = e.states || (e.states = {})) })(a = e.navigation || (e.navigation = {})), e.contractRowProtocolThreshold = 50, e.datasetShowDatasourceUpdatedNotification = "datasetShowDatasourceUpdatedNotification", e.datasetDatasourceUpdated = "datasetDatasourceUpdated", e.scopeDestroyEventName = "$destroy", e.preparingPackageRefreshNotificationDuration = 3e4, e.packageRefreshNotificationDuration = 3e5, e.showSettingsViewerEventName = "showSettingsViewer", e.showManagePermissionEventName = "showManagePermission", e.defaultPopupWindowWidth = 980, e.defaultPopupWindowHeight = 640, e.datasetShowAuthDialog = "datasetShowAuthDialog", e.datasetShowParameterDialogAfterInvalidParameter = "datasetShowParameterDialogAfterInvalidParameter", e.ContentProviderInvalidModelParameterErrorCode = "ContentProvider_InvalidModelParameter", e.pinReportPageToDashboard = "pinReportPageToDashboard", e.allWeekDays = 127, e.maxRefreshTimeNumber = 8, e.maxRefreshTimeNumberForDatasetsInCapacity = 48, e.numToastLinksToShow = 2, e.domLayoutChangedEvent = "domLayoutChanged", e.enterPrintModeEvent = "enterPrintModeEvent", e.exitPrintModeEvent = "exitPrintModeEvent", e.database = "Database", e.server = "Server", e.errorCode = "ErrorCode", e.time = "Time", e.version = "Version", e.tileErrorEventName = "tileError", e.clearTileErrorEventName = "clearTileError"; var i; !(function (e) { e.packageOperationInProgress = "PackageOperationInProgress", e.dataRefreshTooSoon = "DataRefreshTooSoon", e.onPremiseServiceException = "OnPremiseServiceException" })(i = e.serverErrors || (e.serverErrors = {})), e.cloudRLSAccessDeniedErrorCode = "CloudRLSAccessDeniedErrorCode"; var t = location; e.hostOrigin = t.origin || location.protocol + "//" + location.hostname, e.contentProviderStoreTileListRefreshEventName = "contentProviderStoreTileListRefresh", e.contentProviderStoreConnectEventName = "contentProviderStoreConnect", e.contentProviderStoreConfigurationUIVisibilityChangedEventName = "contentProviderStoreConfigurationUIVisibilityChanged", e.contentProviderStoreMashupContentProviderLoadedMessage = "contentProviderStoreMashupContentProviderLoadedMessage", e.contentProviderStoreCancelModalDialogMessage = "contentProviderStoreCancelModalDialogMessage", e.contentProviderStoreCloseModalDialogMessage = "contentProviderStoreCloseModalDialogMessage", e.contentProviderStoreShowLoadNotificationMessage = "contentProviderStoreShowLoadNotificationMessage", e.contentProviderStoreHideLoadNotificationMessage = "contentProviderStoreHideLoadNotificationMessage", e.contentProviderStoreRenderAsModalDialogMode = "renderAsModalDialog", e.contentProviderStoreRenderAsFullScreenMode = "renderAsFullScreen", e.contentProviderStoreTileMaxSortPriority = 999, e.contentProviderStoreCustomConfigurationService = "customConfigurationService", e.contentProviderStoreAuthorizationCodePostbackEventName = "authorizationCodePostback", e.contentProviderStoreCustomConfigurationPostbackEventName = "customConfigurationPostback", e.excelContentProviderId = 6, e.pbiDesktopContentProviderId = 7, e.fileUploadLimitInByte = 262144e3, e.oneGBFileUploadLimitInByte = 1073741824, e.retailSamplesContentProviderId = 22, e.personalOneDriveContentProviderId = 1001, e.oneDriveProContentProviderId = 1002, e.groupOneDriveContentProviderId = 1004, e.folderPreferredSharePointProviderId = 1006, e.generatedSamplesContentProvidersMap = { 22: "Retail Sales Analysis" }, e.emailsListFindUsersLimit = 10, e.AdminPortalGroupGUID = "PowerBIAdminGroup", e.MaxSupportedZIndexValue = 2147483647; var n; !(function (e) { e.microsoftOrgAppEnabled = "microsoftOrgAppEnabled", e.withInDXTFeatureSwitchEnabled = "withinDXT", e.contentProviderSharePointDocumentLibrariesEnabled = "sharePointDocumentLibrariesEnabled", e.vsoVnextAppEnabled = "vsoVnextAppEnabled", e.sparkAppEnabled = "sparkAppEnabled", e.psaPracticeManagerAppEnabled = "psaPracticeManagerAppEnabled", e.anonymousEmbeddingEnabled = "anonymousEmbeddingEnabled", e.psaResourceManagerAppEnabled = "psaResourceManagerAppEnabled", e.psaAccountManagerAppEnabled = "psaAccountManagerAppEnabled", e.azureUsageAndBillingAppEnabled = "azureUsageAndBillingAppEnabled", e.bingAdsAppEnabled = "bingAdsAppEnabled", e.workspacesV2GAFeatures = "workspacesV2GAFeatures" })(n = e.featureSwitches || (e.featureSwitches = {})), e.clusterLocations = { Cluster_Location_EastUS2: ["wabi-us-east2", "wabi-paas-1-backup-eus2", "wabi-us-east2-a-backup", "wabi-us-east2-b-primary"], Cluster_Location_EastUS: ["wabi-us-east", "wabi-us-east-a-primary", "wabi-us-east-b-backup"], Cluster_Location_NorthCentralUS: ["wabi-us-north-central", "wabi-us-north-central-c-primary", "wabi-us-north-central-d-primary"], Cluster_Location_SouthCentralUS: ["wabi-south-central-us", "wabi-us-south-central-backup", "wabi-paas-1-scus", "wabi-us-south-central-c-backup", "wabi-us-south-central-d-backup"], Cluster_Location_WestUS: ["wabi-west-us", "wabi-tip-west-us", "df-msit-wus", "wabi-us-west-a-backup", "wabi-west-us-b-primary"], Cluster_Location_EastAsia: ["wabi-east-asia-a-primary", "wabi-east-asia", "wabi-east-asia-b-backup"], Cluster_Location_WestUS2: ["wabi-us-west2"], Cluster_Location_NorthEurope: ["wabi-north-europe", "wabi-europe-north2", "wabi-europe-north-b", "wabi-north-europe-b-backup", "wabi-north-europe-c-primary", "wabi-north-europe-d-backup", "wabi-north-europe-d-primary", "wabi-north-europe-e-primary"], Cluster_Location_WestEurope: ["wabi-west-europe", "wabi-europe-west2", "wabi-west-europe-b-primary", "wabi-west-europe-c-backup", "wabi-west-europe-d-primary", "wabi-west-europe-d-backup", "wabi-west-europe-e-backup"], Cluster_Location_SoutheastAsia: ["wabi-south-east-asia", "wabi-southeast-asia-a-backup", "wabi-south-east-asia-b-primary"], Cluster_Location_AustraliaEast: ["wabi-australia-east", "wabi-australia-east-a-primary"], Cluster_Location_AustraliaSouthEast: ["wabi-australia-southeast", "wabi-australia-southeast-a-backup"], Cluster_Location_BrazilSouth: ["wabi-brazil-south", "wabi-brazil-south-b-primary"], Cluster_Location_CentralUSEUAP: ["wabi-staging-us-east"], Cluster_Location_Staging: ["wabi-staging-a7", "wabi-staging"], Cluster_Location_Integration_Edog: ["biazure-int-edog"], Cluster_Location_Integration_Int3: ["bi-azure-int3"], Cluster_Location_CanadaCentral: ["wabi-canada-central"], Cluster_Location_JapanEast: ["wabi-japan-east"], Cluster_Location_UKSouth: ["wabi-uk-south", "wabi-uk-south-b-primary"], Cluster_Location_UKWest: ["wabi-uk-west-backup", "wabi-uk-west-b-backup"], Cluster_Location_GermanyCentral: ["wabi-germany-central"], Cluster_Location_GermanyNortheast: ["wabi-germany-northeast"], Cluster_Location_ChinaEast: ["wabi-mc-sha"], Cluster_Location_ChinaNorth: ["wabi-mc-bjb"], Cluster_Location_WestIndia: ["wabi-india-west"], Cluster_Location_WestCentralUS: ["df-msit-scus"], Cluster_Location_USGCCTexas: ["wabi-us-gov-iowa"], Cluster_Location_USGCCVirginia: ["wabi-us-gov-virginia"], Cluster_Location_USGCCHighTexas: ["wabi-us-gov-tb-texas"], Cluster_Location_USDoDCentral: ["wabi-us-dod-iowa"], Cluster_Location_CentralUS: ["wabi-us-central-a-primary", "wabi-us-central-b-backup"], Cluster_Location_CentralIndia: ["wabi-india-central-a-primary"], Cluster_Location_SouthIndia: ["wabi-india-south-backup"], Cluster_Location_KoreaCentral: ["wabi-korea-central-a-primary"], Cluster_Location_KoreaSouth: ["wabi-korea-south-a-backup"], Cluster_Location_FranceCentral: ["wabi-france-central-a-primary"], Cluster_Location_FranceSouth: ["wabi-france-south-a-backup"], Cluster_Location_ChinaEast2: ["wabi-mc-east2-a-primary"], Cluster_Location_ChinaNorth2: ["wabi-mc-north2-a-backup"], Cluster_Location_EastUS2EUAP: ["wabi-dxt-bcdr-us-east2"], Cluster_Location_SouthAfricaNorth: ["wabi-south-africa-north-a-primary"], Cluster_Location_SouthAfricaWest: ["wabi-south-africa-west-a-backup"], Cluster_Location_UAENorth: ["wabi-uae-north-a-primary"], Cluster_Location_UAECentral: ["wabi-uae-central-a-backup"] }, e.clusterBackendUri = [{ backendUri: void 0, hostNameMatch: ["invalidHostName"], index: 0 }, { backendUri: "https://wabi-us-east2-redirect.analysis.windows.net", hostNameMatch: ["wabi-us-east2"], index: 1 }, { backendUri: "https://wabi-us-east-redirect.analysis.windows.net", hostNameMatch: ["wabi-us-east", "wabi-staging-us-east"], index: 2 }, { backendUri: "https://wabi-us-north-central-redirect.analysis.windows.net", hostNameMatch: ["wabi-us-north-central"], index: 3 }, { backendUri: "https://wabi-south-central-us-redirect.analysis.windows.net", hostNameMatch: ["wabi-south-central-us", "wabi-us-south-central-backup"], index: 4 }, { backendUri: "https://df-msit-scus-redirect.analysis.windows.net", hostNameMatch: ["df-msit-scus"], index: 5 }, { backendUri: "https://wabi-west-us-redirect.analysis.windows.net", hostNameMatch: ["wabi-west-us", "wabi-tip-west-us"], index: 6 }, { backendUri: "https://df-msit-wus-redirect.analysis.windows.net", hostNameMatch: ["df-msit-wus"], index: 7 }, { backendUri: "https://wabi-north-europe-redirect.analysis.windows.net", hostNameMatch: ["wabi-north-europe", "wabi-europe-north2", "wabi-europe-north-b"], index: 8 }, { backendUri: "https://wabi-west-europe-redirect.analysis.windows.net", hostNameMatch: ["wabi-west-europe", "wabi-europe-west2"], index: 9 }, { backendUri: "https://wabi-south-east-asia-redirect.analysis.windows.net", hostNameMatch: ["wabi-south-east-asia", "wabi-east-asia"], index: 10 }, { backendUri: "https://wabi-staging-a7-redirect.analysis.windows.net", hostNameMatch: ["wabi-staging-a7"], index: 11 }, { backendUri: "https://biazure-int-edog-redirect.analysis-df.windows.net", hostNameMatch: ["biazure-int-edog", "bi-azure-int3"], index: 12 }], e.dsrDataReaderType = "dsr"; var s; !(function (e) { e.cacheService = "CacheService", e.visioVisualInstanceIdTrackingService = "VisioVisualInstanceIdTrackingService", e.StandaloneHostProgressNotificationService = "StandaloneHostProgressNotificationService" })(s = e.ServiceNames || (e.ServiceNames = {})); var c; !(function (e) { e.loadItem = "Load", e.saveItem = "Save" })(c = e.CacheServiceOperationNames || (e.CacheServiceOperationNames = {})); var l; !(function (e) { e.save = "SaveInstanceIdAssociation" })(l = e.VisioVisualInstanceIdTrackingServiceOperationNames || (e.VisioVisualInstanceIdTrackingServiceOperationNames = {})); var p; !(function (e) { e.swipeStartEvent = "swipestart", e.swipeMoveEvent = "swipemove", e.swipeEndEvent = "swipeend" })(p = e.ExploreGestures || (e.ExploreGestures = {})); var d; !(function (e) { e.card = "card", e.kpi = "kpi" })(d = e.VisualType || (e.VisualType = {})), e.tileAddedToMobileSimulatorEventName = "tileAddedToMobileSimulator", e.dashboardSelector = ".dashboard", e.tileContainerSelector = ".tileContainer", e.needStrategySwapEventName = "needStrategySwap", e.PhoneVersionMessage = { confirmButtonMessage: "ModalDialogButtonText_Continue", titleMessage: "Switch_To_Phone_Authoring", contentMessage: "Switch_To_Phone_Authoring_Content", hrefLink: "https://powerbi.microsoft.com/en-us/documentation/powerbi-service-create-dashboard-phone-view/", hrefLabel: "LearnMore" }, e.ResetPhoneViewMessages = { confirmButtonMessage: "Reset", titleMessage: "Dashboard_Authoring_Reset_Phone_View", contentMessage: "Dashboard_Authoring_Reset_Phone_View_Content" }, e.ResetTilesMessages = { confirmButtonMessage: "Reset", titleMessage: "Dashboard_Authoring_Reset_Tiles", contentMessage: "Dashboard_Authoring_Reset_Tiles_Content" }, e.UnpinAllTilesMessages = { confirmButtonMessage: "Dashboard_Authoring_Unpin_All_Tiles_Confirm", titleMessage: "Dashboard_Authoring_Unpin_All_Tiles", contentMessage: "Dashboard_Authoring_Unpin_All_Tiles_Content" }, e.isUsageMetricsContentProvider = r, e.FreeTrialPeriod = 60; var u; !(function (e) { e.invitationCodeQueryParam = "invitationCode", e.invitationCodeQueryParamV2 = "i", e.invitationClaimed = "invitationClaimed" })(u = e.invitation || (e.invitation = {})), e.EmptyGuid = "00000000-0000-0000-0000-000000000000" })(r = e.constants || (e.constants = {})) })(r = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var r; !(function (e) { var r; !(function (e) { e.freeUserServicePlans = ["PowerBIServicePlan0"], e.premiumUserServicePlans = ["PowerBIServicePlan1", "PowerBIServicePlan2"], e.office365ServicePlans = ["PowerBIServicePlan1"]; var r; !(function (e) { e[e.Undefined = 0] = "Undefined", e[e.AppTemplate = 1] = "AppTemplate", e[e.AppInstance = 2] = "AppInstance", e[e.AppCopy = 3] = "AppCopy" })(r = e.PackageType || (e.PackageType = {})); var o; !(function (e) { e[e.None = 0] = "None", e[e.BuiltIn = 1] = "BuiltIn", e[e.Organizational = 2] = "Organizational", e[e.Services = 3] = "Services", e[e.OrganizationalTemplate = 4] = "OrganizationalTemplate", e[e.OrganizationalApp = 5] = "OrganizationalApp", e[e.ServiceApp = 6] = "ServiceApp", e[e.OrganizationalTemplateApp = 7] = "OrganizationalTemplateApp", e[e.PowerBIServiceApp = 8] = "PowerBIServiceApp" })(o = e.ContentProviderCategory || (e.ContentProviderCategory = {})); var a; !(function (e) { e[e.Service = 1] = "Service", e[e.Organizational = 2] = "Organizational", e[e.File = 3] = "File", e[e.Sample = 4] = "Sample", e[e.Learn = 5] = "Learn", e[e.BigDataAndMore = 6] = "BigDataAndMore", e[e.Dataflows = 7] = "Dataflows" })(a = e.ContentProviderClientCategory || (e.ContentProviderClientCategory = {})); var i; !(function (e) { e[e.Unknown = 0] = "Unknown", e[e.Dashboard = 1] = "Dashboard", e[e.Report = 2] = "Report", e[e.Model = 3] = "Model", e[e.Workbook = 4] = "Workbook", e[e.App = 5] = "App" })(i = e.ArtifactType || (e.ArtifactType = {})); var t; !(function (e) { e[e.Import = 0] = "Import", e[e.DirectQuery = 1] = "DirectQuery", e[e.Mixed = 2] = "Mixed" })(t = e.DataCacheModeType || (e.DataCacheModeType = {})); var n; !(function (e) { e[e.Favorite = 1] = "Favorite", e[e.Report = 2] = "Report", e[e.Dashboard = 4] = "Dashboard", e[e.Workbook = 8] = "Workbook", e[e.OrgApp = 16] = "OrgApp", e[e.MRU = 128] = "MRU", e[e.Workspace = 256] = "Workspace", e[e.Dataset = 512] = "Dataset", e[e.AppPlaceHolder = 1024] = "AppPlaceHolder", e[e.RdlReport = 2048] = "RdlReport", e[e.CdsaModel = 4096] = "CdsaModel" })(n = e.ContentTileType || (e.ContentTileType = {})); var s; !(function (e) { e[e.Shared = 0] = "Shared", e[e.Dedicated = 1] = "Dedicated", e[e.ASAzure = 2] = "ASAzure", e[e.ASOnPrem = 3] = "ASOnPrem" })(s = e.DatasetHost || (e.DatasetHost = {})); var c; !(function (e) { e[e.Dashboard = 1] = "Dashboard", e[e.Report = 2] = "Report", e[e.App = 3] = "App", e[e.RdlReport = 4] = "RdlReport", e[e.ResourcePackage = 5] = "ResourcePackage" })(c = e.FavoriteType || (e.FavoriteType = {})) })(r = e.contracts || (e.contracts = {})) })(r = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var r; !(function (e) { var r; !(function (e) { var r; !(function (e) { var r; !(function (e) { e[e.user = 0] = "user", e[e.group = 1] = "group", e[e.app = 2] = "app" })(r = e.PrincipalType || (e.PrincipalType = {})); var o; !(function (e) { e[e.Resource = 0] = "Resource", e[e.Personal = 1] = "Personal" })(o = e.GatewayType || (e.GatewayType = {})); var a; !(function (e) { e[e.Live = 0] = "Live", e[e.NotInstalled = 1] = "NotInstalled", e[e.NotReachable = 2] = "NotReachable", e[e.Installed = 3] = "Installed" })(a = e.GatewayStatus || (e.GatewayStatus = {})); var i; !(function (e) { e[e.NotSpecified = 0] = "NotSpecified", e[e.Windows = 1] = "Windows", e[e.Anonymous = 2] = "Anonymous", e[e.Basic = 3] = "Basic", e[e.Key = 4] = "Key", e[e.OAuth2 = 5] = "OAuth2", e[e.EffectiveUserName = 6] = "EffectiveUserName", e[e.SingleSignOn = 7] = "SingleSignOn", e[e.WindowsWithoutImpersonation = 8] = "WindowsWithoutImpersonation" })(i = e.CredentialType || (e.CredentialType = {})); var t; !(function (e) { e[e.None = 0] = "None", e[e.Private = 1] = "Private", e[e.Organizational = 2] = "Organizational", e[e.Public = 3] = "Public" })(t = e.PrivacyLevel || (e.PrivacyLevel = {})); var n; !(function (e) { e[e.SqlServer = 0] = "SqlServer", e[e.AnalysisServices = 1] = "AnalysisServices", e[e.SAP = 2] = "SAP", e[e.File = 3] = "File", e[e.Folder = 4] = "Folder", e[e.Oracle = 5] = "Oracle", e[e.Teradata = 6] = "Teradata", e[e.SharePoint = 7] = "SharePoint", e[e.Web = 8] = "Web", e[e.OData = 9] = "OData", e[e.DB2 = 10] = "DB2", e[e.MySql = 11] = "MySql", e[e.PostgreSql = 12] = "PostgreSql", e[e.Sybase = 13] = "Sybase", e[e.Extension = 14] = "Extension", e[e.SAPBW = 15] = "SAPBW", e[e.AzureTable = 16] = "AzureTable", e[e.AzureBlob = 17] = "AzureBlob", e[e.Informix = 18] = "Informix", e[e.ODBC = 19] = "ODBC", e[e.GoogleAnalytics = 25] = "GoogleAnalytics", e[e.Exchange = 27] = "Exchange", e[e.Facebook = 28] = "Facebook", e[e.HDInsight = 29] = "HDInsight", e[e.AzureMarketplace = 30] = "AzureMarketplace", e[e.ActiveDirectory = 31] = "ActiveDirectory", e[e.OleDb = 35] = "OleDb", e[e.Salesforce = 39] = "Salesforce", e[e.SAPBWMessageServer = 41] = "SAPBWMessageServer", e[e.Essbase = 43] = "Essbase" })(n = e.DataSourceType || (e.DataSourceType = {})); var s; !(function (e) { e[e.EffectiveUserName = 0] = "EffectiveUserName", e[e.CustomData = 1] = "CustomData" })(s = e.ConnectionStringPropertyName || (e.ConnectionStringPropertyName = {})); var c; !(function (e) { e[e.FullStringReplacement = 0] = "FullStringReplacement", e[e.SubstringReplacement = 1] = "SubstringReplacement" })(c = e.DataSourceAnnotationUPNMappingAlgorithm || (e.DataSourceAnnotationUPNMappingAlgorithm = {})) })(r = e.gateway || (e.gateway = {})) })(r = e.contracts || (e.contracts = {})) })(r = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var r; !(function (e) { var r; !(function (e) { var r; !(function (e) { var r; !(function (e) { e[e.Template = 0] = "Template", e[e.Exploration = 1] = "Exploration", e[e.NonTemplateForExistingTile = 2] = "NonTemplateForExistingTile", e[e.None = 3] = "None" })(r = e.ReportInstantiationMode || (e.ReportInstantiationMode = {})) })(r = e.reportServer || (e.reportServer = {})) })(r = e.contracts || (e.contracts = {})) })(r = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var r; !(function (r) {
        var o; !(function (o) {
            var a = e.common.constants, i = o.ContentProviderCategory, t = o.ContentProviderClientCategory; o.contentProviderManifest = [{ id: 1003, providerName: "files-tutorial", displayText: "Learn about importing files", displayTextLocalizationKey: "GetData_FilesTutorial_Title", iconCSSClass: "content-provider-files-tutorial", category: i.None, clientCategory: t.File, configurationUIstyle: 4, providerConfig: '{"FWLink":"https://go.microsoft.com/fwlink/?LinkID=613513"}', sortPriority: r.constants.contentProviderStoreTileMaxSortPriority }, { id: 1e3, providerName: "local-file", displayText: "Local File", displayTextLocalizationKey: "GetData_LocalFile_Title", iconCSSClass: "content-provider-local-file", category: i.None, clientCategory: t.File, configurationUIstyle: 3, searchKeywords: "Excel, PBIX, Power BI Desktop", sortPriority: 0 }, { id: 1001, providerName: "onedrive-personal", displayText: "OneDrive - Personal", displayTextLocalizationKey: "GetData_OneDrivePersonal_Title", iconCSSClass: "content-provider-onedrive", category: i.None, clientCategory: t.File, configurationPageUrl: "/providers/cloudfile/onedrive", configurationUIstyle: 1, disableDetailPane: !0, searchKeywords: "Excel, PBIX, Power BI Desktop", sortPriority: 2, authentication: { oAuth: { endpointRetrievalAPI: "/powerbi/providers/excel/authorizationEndpoint" } } }, { id: 1002, providerName: "onedrive-for-business", displayText: "OneDrive - Business", displayTextLocalizationKey: "GetData_OneDriveBusiness_Title", iconCSSClass: "content-provider-onedrive", category: i.None, clientCategory: t.File, configurationPageUrl: "/providers/cloudfile/onedrivepro", configurationUIstyle: 1, disableDetailPane: !0, searchKeywords: "Excel, PBIX, Power BI Desktop", sortPriority: 1, disabledInArchivedContent: !0 }, { id: 1004, providerName: "onedrive-for-business", displayText: "OneDrive - ", iconCSSClass: "content-provider-onedrive", category: i.None, clientCategory: t.File, configurationPageUrl: "/providers/cloudfile/onedrivepro", configurationUIstyle: 1, disableDetailPane: !0, searchKeywords: "Excel, PBIX, Power BI Desktop", sortPriority: 1, disabledInArchivedContent: !0 }, { id: 1005, providerName: "sharepoint-teamsites", displayText: "Sharepoint - Team Sites", displayTextLocalizationKey: "GetData_SharePoint_Title", iconCSSClass: "glyphicon sharePointIcon pbi-glyph-sharepoint", category: i.None, clientCategory: t.File, configurationPageUrl: "/providers/cloudfile/sharepoint", configurationUIstyle: 1, disableDetailPane: !0, searchKeywords: "Excel, PBIX, Power BI Desktop", sortPriority: 3, featureSwitch: r.constants.featureSwitches.contentProviderSharePointDocumentLibrariesEnabled, customConfigurationHandler: "views/contentProviderStore/customConfigHandlers/sharePointConfigHandler.html" }, { id: 1006, providerName: "sharepoint-folder", displayText: "SharePoint -", iconCSSClass: "content-provider-onedrive", category: i.None, clientCategory: t.File, configurationPageUrl: "/providers/cloudfile/sharepoint", configurationUIstyle: 1, disableDetailPane: !0, searchKeywords: "Excel, PBIX, Power BI Desktop", sortPriority: 1, featureSwitch: r.constants.featureSwitches.workspacesV2GAFeatures, customConfigurationHandler: "views/contentProviderStore/customConfigHandlers/sharePointForFolderConfigHandler.html" }, { id: 25, providerKey: "9f29a2e5-02d7-4420-b133-d0a663befe00", providerName: "sql-server-analysis-services", displayText: "SQL Server Analysis Services", description: "GetData_SqlServerAnalysisServices", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528956", iconCSSClass: "content-provider-sql-server-analysis-services", category: i.None, clientCategory: t.BigDataAndMore, configurationPageUrl: "/providers/AnalysisServer/", configurationUIstyle: 1, sortPriority: 2, requiresPremiumLicense: !0 }, { id: 38, providerKey: "B8EEABC6-26A4-4CAE-8F8E-E918E1D5BBE7", providerName: "uservoice", displayText: "UserVoice", description: "GetData_UserVoice", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=615577", iconCSSClass: "content-provider-uservoice", smallIconCSSClass: "content-provider-uservoice-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/UserVoice/?contentProviderId=38", configurationUIstyle: 0 }, { id: 19, providerKey: "cc2d7c39-cb58-4ff0-ac02-2e0d3f80508c", providerName: "github", displayText: "GitHub", description: "GetData_GitHub", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528958", iconCSSClass: "content-provider-github", smallIconCSSClass: "content-provider-github-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/GitHub/?contentProviderId=19", configurationUIstyle: 0 }, { id: 13, providerKey: "6ab8831d-b1f6-4f48-9b70-32a66a25fc75", providerName: "appfigures", displayText: "appFigures", description: "GetData_Appfigures", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=546971", iconCSSClass: "content-provider-appfigures", smallIconCSSClass: "content-provider-appfigures-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/AppFigures/?contentProviderId=13", configurationUIstyle: 0 }, { id: 30, providerKey: "629a1404-f870-421e-a5d0-daf455b1a15e", providerName: "mailchimp", displayText: "MailChimp", description: "GetData_Mailchimp", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=613552", iconCSSClass: "content-provider-mailchimp", smallIconCSSClass: "content-provider-mailchimp-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/MailChimp/?contentProviderId=30", configurationUIstyle: 0 }, { id: 42, providerKey: "2128e7e4-9004-452c-86ab-4ce555effdf4", providerName: "sql-db-auditing", displayText: "SQL Database Auditing", description: "GetData_SqlDbAuditing", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=536680", iconCSSClass: "content-provider-sql-db-auditing", smallIconCSSClass: "content-provider-sql-db-auditing-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/SQLDBAuditing/?contentProviderId=42", configurationUIstyle: 0 }, { id: 64, providerKey: "0F2D45B2-24C2-4DEC-AC09-C84F63C0BF2C", providerName: "circuit-id", displayText: "Circuit ID", description: "GetData_CircuitId", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=619075&clcid=0x409", iconCSSClass: "content-provider-circuit-id", smallIconCSSClass: "content-provider-circuit-id-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/CircuitID/?contentProviderId=64", configurationUIstyle: 0 }, { id: 65, providerKey: "83F4FFC4-3327-49B3-86E1-DCF4E6E5B6EC", providerName: "adobe-analytics", displayText: "Adobe Analytics", description: "GetData_AdobeAnalytics", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=620320", iconCSSClass: "content-provider-adobe-analytics", smallIconCSSClass: "content-provider-adobe-analytics-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/AdobeAnalytics?contentProviderId=65", configurationUIstyle: 0 }, { id: 66, providerKey: "961D7A1F-AA3D-4E3B-B76E-7214BAAD6698", providerName: "azme", displayText: "Azure Mobile Engagement", description: "GetData_Azme", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=620321", iconCSSClass: "content-provider-azure-mobile-engagement", smallIconCSSClass: "content-provider-azure-mobile-engagement-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/AzureMobileEngagement?contentProviderId=66", configurationUIstyle: 0 }, { id: 67, providerKey: "5710D4C7-5B25-4954-9887-2CDE19B66CC2", providerName: "application-insights", displayText: "Application Insights", description: "GetData_ApplicationInsights", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=620957", iconCSSClass: "content-provider-application-insights", smallIconCSSClass: "content-provider-application-insights-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/ApplicationInsights?contentProviderId=67", configurationUIstyle: 0 }, { id: 68, providerKey: "13D04387-DA65-4F1B-B748-F3F8B29697A5", providerName: "webtrends", displayText: "Webtrends", description: "GetData_Webtrends", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=623288", iconCSSClass: "content-provider-webtrends", smallIconCSSClass: "content-provider-webtrends-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Webtrends?contentProviderId=68", configurationUIstyle: 0 }, { id: 69, providerKey: "DE1C62D0-9C66-47AE-9882-38692555D07D", providerName: "comScore", displayText: "comScore Digital Analytix", description: "GetData_comScore", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=623528", iconCSSClass: "content-provider-comscore", smallIconCSSClass: "content-provider-comscore-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/comScore?contentProviderId=69", configurationUIstyle: 0 }, { id: 72, providerKey: "6F35FD83-60DA-4F78-BE43-9B6BFD881D8A", providerName: "microsoft-dynamics-nav", displayText: "Microsoft Dynamics NAV", description: "GetData_MicrosoftDynamicsNAV", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=623542", iconCSSClass: "content-provider-microsoft-dynamics-nav", smallIconCSSClass: "content-provider-microsoft-dynamics-nav-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/MicrosoftDynamicsNAV?contentProviderId=72", configurationUIstyle: 0 }, { id: 73, providerKey: "DE895560-007C-42B4-A514-0C3BA9D2E3F8", providerName: "tygraph", displayText: "tyGraph", description: "GetData_tyGraph", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=623957", iconCSSClass: "content-provider-tygraph", smallIconCSSClass: "content-provider-tygraph-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/tyGraph?contentProviderId=73", configurationUIstyle: 0 }, { id: 74, providerKey: "411E127B-B83B-4FE2-A396-13EBA8976586", providerName: "stripe", displayText: "Stripe", description: "GetData_Stripe", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=624347", iconCSSClass: "content-provider-stripe", smallIconCSSClass: "content-provider-stripe-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Stripe?contentProviderId=74", configurationUIstyle: 0 }, {
                id: 75, providerKey: "67019B0F-A984-4B5F-9ECB-ABC610A009AD", providerName: "windows-dev-center", displayText: "Windows Dev Center", description: "GetData_WindowsDevCenter", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=624348", iconCSSClass: "content-provider-windows-dev-center",
                smallIconCSSClass: "content-provider-windows-dev-center-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/WindowsDevCenter?contentProviderId=75", configurationUIstyle: 0
            }, { id: 76, providerKey: "ABEC0684-C3D2-4672-9088-B04D89FA1473", providerName: "azure-audit-logs", displayText: "Azure Audit Logs", description: "GetData_AzureAuditLogs", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=624821", iconCSSClass: "content-provider-azure-audit-logs", smallIconCSSClass: "content-provider-azure-audit-logs-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/AzureAuditLogs?contentProviderId=76", configurationUIstyle: 0 }, { id: 77, providerKey: "0B05F956-9C59-4F55-B8A6-39ECAFDE977E", providerName: "planview-enterprise", displayText: "Planview Enterprise", description: "GetData_PlanviewEnterprise", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=626835", iconCSSClass: "content-provider-planview-enterprise", smallIconCSSClass: "content-provider-planview-enterprise-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/PlanviewEnterprise?contentProviderId=77", configurationUIstyle: 0 }, { id: 78, providerKey: "BABC7AE3-05B5-4135-ACF5-DA1196CDA231", providerName: "project-place", displayText: "Projectplace by Planview", description: "GetData_Projectplace", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=627199", iconCSSClass: "content-provider-project-place", smallIconCSSClass: "content-provider-project-place-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/ProjectPlace?contentProviderId=78", configurationUIstyle: 0 }, { id: 79, providerKey: "A75A48D9-7D24-4F88-AC5F-72D798238FDF", providerName: "azure-enterprise", displayText: "Microsoft Azure Enterprise", description: "GetData_AzureEnterprise", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=627198", iconCSSClass: "content-provider-azure-enterprise", smallIconCSSClass: "content-provider-azure-enterprise-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/PlanviewEnterprise?contentProviderId=79", configurationUIstyle: 0 }, { id: 80, providerKey: "20245C9D-3AE2-4C9D-91E5-BE86F47A74D4", providerName: "project-online", displayText: "Microsoft Project Online", description: "GetData_ProjectOnline", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=627561", iconCSSClass: "content-provider-microsoft-project-online", smallIconCSSClass: "content-provider-microsoft-project-online-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/ProjectOnline?contentProviderId=80", configurationUIstyle: 0 }, { id: 81, providerKey: "5C11AB20-2313-4D60-BB9F-377A7550E5BE", providerName: "spark-post", displayText: "SparkPost", description: "GetData_SparkPost", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=690955", iconCSSClass: "content-provider-sparkpost", smallIconCSSClass: "content-provider-sparkpost-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/SparkPost?contentProviderId=81", configurationUIstyle: 0 }, { id: 82, providerKey: "E334CC9E-62F7-41B0-8E7F-6E1306541C8E", providerName: "microsoft-dynamics-crm-psa-practice-manager", displayText: "Practice Manager", description: "GetData_MicrosoftDynamicsCRMPSAPracticeManager", learnMoreUrl: "https://go.microsoft.com/fwlink/p/?LinkId=528957", iconCSSClass: "content-provider-microsoft-dynamics-crm-psa-practice-manager", smallIconCSSClass: "content-provider-microsoft-dynamics-crm-psa-practice-manager-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/MicrosoftDynamicsCRMPSAPracticeManager?contentProviderId=82", configurationUIstyle: 0, featureSwitch: r.constants.featureSwitches.psaPracticeManagerAppEnabled, grouping: { groupingName: "Microsoft Dynamics CRM PSA", groupingDescription: "GetData_Grouping_MicrosoftDynamicsCRMPSA", groupingIndex: 0 } }, { id: 83, providerKey: "2A3FC1F2-856A-4249-AE39-76C86110EB5A", providerName: "vmob", displayText: "VMob", description: "GetData_VMob", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=691149", iconCSSClass: "content-provider-vmob", smallIconCSSClass: "content-provider-vmob-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/VMob?contentProviderId=83", configurationUIstyle: 0 }, { id: 84, providerKey: "835677B9-83ED-493F-AE58-DA107B750344", providerName: "microsoft-dynamics-crm-psa-resource-manager", displayText: "Resource Manager", description: "GetData_MicrosoftDynamicsCRMPSAResourceManager", learnMoreUrl: "https://go.microsoft.com/fwlink/p/?LinkId=528957", iconCSSClass: "content-provider-microsoft-dynamics-crm-psa-resource-manager", smallIconCSSClass: "content-provider-microsoft-dynamics-crm-psa-resource-manager-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/MicrosoftDynamicsCRMPSAResourceManager?contentProviderId=84", configurationUIstyle: 0, featureSwitch: r.constants.featureSwitches.psaResourceManagerAppEnabled, grouping: { groupingName: "Microsoft Dynamics CRM PSA", groupingDescription: "GetData_Grouping_MicrosoftDynamicsCRMPSA", groupingIndex: 1 } }, { id: 85, providerKey: "89230731-57F8-48C1-9F19-4307DE3B7DBD", providerName: "microsoft-dynamics-crm-psa-account-manager", displayText: "Account Manager", description: "GetData_MicrosoftDynamicsCRMPSAAccountManager", learnMoreUrl: "https://go.microsoft.com/fwlink/p/?LinkId=528957", iconCSSClass: "content-provider-microsoft-dynamics-crm-psa-account-manager", smallIconCSSClass: "content-provider-microsoft-dynamics-crm-psa-account-manager-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/MicrosoftDynamicsCRMPSAAccountManager?contentProviderId=85", configurationUIstyle: 0, featureSwitch: r.constants.featureSwitches.psaAccountManagerAppEnabled, grouping: { groupingName: "Microsoft Dynamics CRM PSA", groupingDescription: "GetData_Grouping_MicrosoftDynamicsCRMPSA", groupingIndex: 2 } }, { id: 86, providerKey: "1F748B23-5C4B-4FA0-91DB-AFF517EFC82A", providerName: "office365mon", displayText: "Office365Mon", description: "GetData_Office365Monitor", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=699298", iconCSSClass: "content-provider-office-365-monitor", smallIconCSSClass: "content-provider-office-365-monitor-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/office365monitor?contentProviderId=86", configurationUIstyle: 0 }, { id: 87, providerKey: "404D2D29-4214-4594-95DD-8784755963E2", providerName: "at-internet-bridge", displayText: "AT Internet", description: "GetData_ATInternetBridge", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=698734", iconCSSClass: "content-provider-at-internet-bridge", smallIconCSSClass: "content-provider-at-internet-bridge-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/atinternetBridge?contentProviderId=87", configurationUIstyle: 0 }, { id: 89, providerKey: "9A4B5279-ADF0-443F-BFC9-9546F386A3D9", providerName: "insightly", displayText: "Insightly", description: "GetData_Insightly", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=692076", iconCSSClass: "content-provider-insightly", smallIconCSSClass: "content-provider-insightly-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/insightly?contentProviderId=89", configurationUIstyle: 0 }, { id: 90, providerKey: "2D2BBFD3-2A4E-4297-8711-D0DFDDB76E2D", providerName: "smartsheet", displayText: "Smartsheet", description: "GetData_Smartsheet", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=708299", iconCSSClass: "content-provider-smartsheet", smallIconCSSClass: "content-provider-smartsheet-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/smartsheet?contentProviderId=90", configurationUIstyle: 0 }, { id: 91, providerKey: "F72AED49-8C6D-4A5C-9C32-33D5A6DBAB03", providerName: "azure-search", displayText: "Azure Search", description: "GetData_AzureSearch", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=717437", iconCSSClass: "content-provider-azure-search", smallIconCSSClass: "content-provider-azure-search-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/azuresearch?contentProviderId=91", configurationUIstyle: 0 }, { id: 92, providerKey: "EF8FC305-F705-49FA-8608-4C6E7BD6A726", providerName: "lithium", displayText: "Lithium", description: "GetData_Lithium", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=692075", iconCSSClass: "content-provider-lithium", smallIconCSSClass: "content-provider-lithium-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/lithium?contentProviderId=92", configurationUIstyle: 0 }, { id: 93, providerKey: "06DB1BB3-C712-45DA-AECF-6CCA7D6BB99F", providerName: "alpine-metrics", displayText: "AlpineMetrics Sales Predictions", description: "GetData_AlpineMetrics", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=717284", iconCSSClass: "content-provider-alpine-metrics", smallIconCSSClass: "content-provider-alpine-metrics-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/alpinemetrics?contentProviderId=93", configurationUIstyle: 0 }, { id: 14, providerKey: "4d72ac76-d7d9-4d53-89ed-a7d210dcb985", providerName: "twilio", displayText: "Twilio", description: "GetData_Twilio", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=544911", iconCSSClass: "content-provider-twilio", smallIconCSSClass: "content-provider-twilio-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Twilio/?contentProviderId=14", configurationUIstyle: 0 }, { id: 10, providerId: 10, providerKey: "badc1aad-ff6b-457f-87e5-9b93ee058ef0", providerName: "google-analytics", displayText: "Google Analytics", description: "GetData_GoogleAnalytics", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528796", iconCSSClass: "content-provider-google-analytics", smallIconCSSClass: "content-provider-google-analytics-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/google-analytics/?contentProviderId=10", configurationUIstyle: 0, iconUrl: "gallery/googleanalytics/googleanalytics.png", smallIconUrl: "gallery/googleanalytics/googleanalytics_small.png", appsNotSupported: !1 }, { id: 23, providerKey: "f17d3e2b-7248-49c6-af9e-ac9e594b8b06", providerName: "marketo", displayText: "Marketo", description: "GetData_Marketo", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528959", iconCSSClass: "content-provider-marketo", smallIconCSSClass: "content-provider-marketo-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Marketo/?contentProviderId=23", configurationUIstyle: 0 }, { id: 16, providerKey: "cafb2591-2578-4f88-a8c1-f1530b464696", providerName: "microsoft-dynamics-crm", displayText: "Microsoft Dynamics CRM Online", description: "GetData_MicrosoftDynamicsCrm", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528957", iconCSSClass: "content-provider-microsoft-dynamics-crm", smallIconCSSClass: "content-provider-microsoft-dynamics-crm-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/DynamicsCRM/?contentProviderId=16", configurationUIstyle: 0 }, { id: 17, providerKey: "007a08ed-748b-4db3-9d0b-047f4295afa6", providerName: "microsoft-dynamics-marketing", displayText: "Microsoft Dynamics Marketing", description: "GetData_MicrosoftDynamicsMarketing", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528797", iconCSSClass: "content-provider-microsoft-dynamics-marketing", smallIconCSSClass: "content-provider-microsoft-dynamics-marketing-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/DynamicsMarketing/?contentProviderId=17", configurationUIstyle: 0 }, { id: 22, providerKey: "bb35a484-389d-4cc6-ab18-57d6eef86a23", providerName: "retail-analysis-sample", displayText: "Retail Analysis Sample", displayTextLocalizationKey: "GetData_Retail_Analysis_Sample_Title", description: "GetData_Retail_Analysis_Sample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=522048", iconCSSClass: "content-provider-retail-analysis-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"RetailSalesSample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 9, providerKey: "909545e0-1c5e-44a9-b9db-bae412465c89", providerName: "salesforce", displayText: "Salesforce Reports", description: "GetData_Salesforce", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528963", iconCSSClass: "content-provider-salesforce", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/salesforce", configurationUIstyle: 1, authentication: { oAuth: { endpointRetrievalAPI: "/powerbi/providers/salesforce/authorizationEndpoint" } }, appsNotSupported: !0 }, { id: 26, providerKey: "70d60c83-cf35-4d3a-a80f-37b653b5ff50", providerName: "sendgrid", displayText: "SendGrid", description: "GetData_Sendgrid", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528960", iconCSSClass: "content-provider-sendgrid", smallIconCSSClass: "content-provider-sendgrid-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/SendGrid/?contentProviderId=26", configurationUIstyle: 0 }, { id: 24, providerKey: "ccc45ff5-ea82-4a82-904d-913d5aba659d", providerName: "zendesk", displayText: "Zendesk", description: "GetData_Zendesk", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=528961", iconCSSClass: "content-provider-zendesk", smallIconCSSClass: "content-provider-zendesk-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Zendesk/?contentProviderId=24", configurationUIstyle: 0, finePrint: "GetData_Zendesk_FinePrint" }, { id: 29, providerKey: "156B0EF1-E21C-4BEA-B187-6530269821F5", providerName: "zuora", displayText: "Zuora", description: "GetData_Zuora", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=615603", iconCSSClass: "content-provider-zuora", smallIconCSSClass: "content-provider-zuora-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Zuora/?contentProviderId=29", configurationUIstyle: 0 }, { id: 62, providerKey: "EAF6690A-F3CD-4C8A-9BD2-A4F884857DC7", providerName: "acumatica", displayText: "Acumatica", description: "GetData_Acumatica", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=616430", iconCSSClass: "content-provider-acumatica", smallIconCSSClass: "content-provider-acumatica-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Acumatica/?contentProviderId=62", configurationUIstyle: 0 }, { id: 63, providerKey: "3E132702-5A1F-40BC-9328-379C76255D08", providerName: "mandrill", displayText: "Mandrill", description: "GetData_Mandrill", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=616972", iconCSSClass: "content-provider-mandrill", smallIconCSSClass: "content-provider-mandrill-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Mandrill/?contentProviderId=63", configurationUIstyle: 0 }, { id: 0, providerName: "create-content-pack", displayText: "Create Content Pack", displayTextLocalizationKey: "Publish_CreateContentPack", iconCSSClass: "create-content-pack", category: i.Organizational, clientCategory: t.Organizational, configurationUIstyle: 5, providerConfig: '{"eventName": "openCreateContentPack"}', sortPriority: 0, disableDetailPane: !0 }, { id: 61, providerKey: "C9D39A14-FE1B-4952-B895-A3763B5C47B7", providerName: "visual-studio-online-vnext", displayText: "Visual Studio Online vNext", description: "GetData_VisualStudioOnlineVNext", iconCSSClass: "content-provider-visual-studio-online", smallIconCSSClass: "content-provider-visual-studio-online-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/VnextVisualStudioOnline/?contentProviderId=61", configurationUIstyle: 0, featureSwitch: r.constants.featureSwitches.vsoVnextAppEnabled }, { id: 88, providerKey: "2CA5C3B5-4730-4E75-AF2D-11FA548CADDA", providerName: "bing", displayText: "Bing", description: "GetData_BingSocial", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=715756", iconCSSClass: "content-provider-bing-social", smallIconCSSClass: "content-provider-bing-social-small", category: i.BuiltIn, clientCategory: t.Service, configurationUIstyle: 0, configurationPageUrl: "/providers/bingSocial/", appsNotSupported: !0 }, { id: 27, providerKey: "029a8b9d-b743-46d6-9f98-ee10b2873482", providerName: "stats-nfl-2014-season-recap", displayText: "STATS NFL 2014 Season Recap", displayTextLocalizationKey: "GetData_StatsNFL2014SeasonRecap_Title", description: "GetData_StatsNFL2014SeasonRecap", iconCSSClass: "content-provider-placeholder", category: i.BuiltIn, clientCategory: t.Service, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"NFL2014SeasonRecap\\"}","SID":"{GUID}"}}', configurationUIstyle: 2, featureSwitch: r.constants.featureSwitches.withInDXTFeatureSwitchEnabled }, { id: 50, providerKey: "99baada2-cf09-41f2-afd9-6835059b94d3", providerName: "azure-sql-database-with-live-connect", displayText: "Azure SQL Database", description: "GetData_AzureSqlDatabaseWithLiveConnect", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=544900", iconCSSClass: "content-provider-sql-db-auditing", smallIconCSSClass: "content-provider-sql-db-auditing-small", category: i.None, clientCategory: t.BigDataAndMore, configurationPageUrl: "/providers/sqlazure", configurationUIstyle: 0, autoRedirectUrlParams: a.navigation.getDataDirectQueryUrlParams, sortPriority: 0, requiresPremiumLicense: !0, usePBIDesktop: !0 }, { id: 51, providerKey: "9574d7ff-7b97-4917-9535-e67fd09393d2", providerName: "azure-sql-datawarehouse-live-connect", displayText: "Azure SQL Data Warehouse", description: "GetData_AzureSqlDatawarehouseLiveConnect", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=544902", iconCSSClass: "content-provider-azure-sql-datawarehouse-live-connect", smallIconCSSClass: "content-provider-azure-sql-dw-small", category: i.None, clientCategory: t.BigDataAndMore, configurationPageUrl: "/providers/pdw", configurationUIstyle: 0, autoRedirectUrlParams: a.navigation.getDataDirectQueryUrlParams, sortPriority: 1, requiresPremiumLicense: !0, usePBIDesktop: !0 }, { id: 70, providerKey: "47024A6F-E6D5-4B93-937A-B6BA1226A223", providerName: "spark-sql-live-connect", displayText: "Spark on Azure HDInsight", description: "GetData_AzureHDInsightSparkLiveConnect", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=616055", iconCSSClass: "content-provider-spark-sql-live-connect", smallIconCSSClass: "content-provider-spark-small", category: i.None, clientCategory: t.BigDataAndMore, configurationPageUrl: "/providers/spark", configurationUIstyle: 0, autoRedirectUrlParams: a.navigation.getDataDirectQueryUrlParams, sortPriority: 3, requiresPremiumLicense: !0, featureSwitch: r.constants.featureSwitches.sparkAppEnabled, usePBIDesktop: !0 }, { id: 18, providerKey: "be72f833-0a48-4311-935e-bb32bc05f0c6", providerName: "visual-studio-online", displayText: "Visual Studio Team Services", description: "GetData_VisualStudioOnline", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=533295", iconCSSClass: "content-provider-visual-studio-online", smallIconCSSClass: "content-provider-visual-studio-online-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/VisualStudioOnline/?contentProviderId=18", configurationUIstyle: 0 }, { id: 20, providerKey: "d33ebf56-4499-4d43-970d-5edc2368d289", providerName: "quickbooks-online", displayText: "QuickBooks Online", description: "GetData_QuickbooksOnline", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=613120", iconCSSClass: "content-provider-quickbooks-online", smallIconCSSClass: "content-provider-quickbooks-online-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/QuickBooks/?contentProviderId=20", configurationUIstyle: 0 }, { id: 43, providerKey: "8b5f82f6-9a6e-4135-92c6-f6072f111f4c", providerName: "human-resources-sample", displayText: "Human Resources Sample", displayTextLocalizationKey: "GetData_HumanResourcesSample_Title", description: "GetData_HumanResourcesSample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=528586", iconCSSClass: "content-provider-human-resources-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"HumanResourcesSample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 44, providerKey: "7158743e-08ad-4884-9a20-4c66ef741812", providerName: "customer-profitability-sample", displayText: "Customer Profitability Sample", displayTextLocalizationKey: "GetData_CustomerProfitabilitySample_Title", description: "GetData_CustomerProfitabilitySample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=528587", iconCSSClass: "content-provider-customer-profitability-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"CustomerProfitabilitySample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 45, providerKey: "bc6e5524-d894-46ef-8d0b-e99f42df8f31", providerName: "opportunity-analysis-sample", displayText: "Opportunity Analysis Sample", displayTextLocalizationKey: "GetData_OpportunityAnalysisSample_Title", description: "GetData_OpportunityAnalysisSample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=528588", iconCSSClass: "content-provider-opportunity-analysis-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"OpportunityTrackingSample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 46, providerKey: "8b4eff17-adfe-485c-b6b7-d7df36f04c24", providerName: "it-spend-analysis-sample", displayText: "IT Spend Analysis Sample", displayTextLocalizationKey: "GetData_ITSpendAnalysisSample_Title", description: "GetData_ITSpendAnalysisSample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=528589", iconCSSClass: "content-provider-it-spend-analysis-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"ITSpendAnalysisSample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 47, providerKey: "00100b6a-5aba-4de1-bf62-a3a91cdff527", providerName: "procurement-analysis-sample", displayText: "Procurement Analysis Sample", displayTextLocalizationKey: "GetData_ProcurementAnalysisSample_Title", description: "GetData_ProcurementAnalysisSample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=528590", iconCSSClass: "content-provider-procurement-analysis-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"ProcurementAnalysisSample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 48, providerKey: "e96a9f16-42da-4020-aae7-07315691b016", providerName: "sales-and-marketing-sample", displayText: "Sales and Marketing Sample", displayTextLocalizationKey: "GetData_SalesAndMarketingSample_Title", description: "GetData_SalesAndMarketingSample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=528591", iconCSSClass: "content-provider-sales-and-marketing-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"SalesMarketingSample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 49, providerKey: "0ee5f075-5b0a-42a9-9e64-e9c5cb5e23c4", providerName: "supplier-quality-analysis-sample", displayText: "Supplier Quality Analysis Sample", displayTextLocalizationKey: "GetData_SupplierQualityAnalysisSample_Title", description: "GetData_SupplierQualityAnalysisSample", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=528585", iconCSSClass: "content-provider-supplier-quality-analysis-sample", category: i.None, clientCategory: t.Sample, providerConfig: '{"dataAccessInfo":{"DSID":"{\\"providerName\\":\\"SupplierQualityAnalysisSample\\"}","SID":"{GUID}"}}', configurationUIstyle: 2 }, { id: 41, providerKey: "E21F4715-544F-4095-B66A-171ECCA58021", providerName: "sql-sentry", displayText: "SQL Sentry", description: "GetData_SQLSentry", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=613402", iconCSSClass: "content-provider-sql-sentry", smallIconCSSClass: "content-provider-sql-sentry-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/SQLSentry/?contentProviderId=41", configurationUIstyle: 0 }, { id: 52, providerKey: "F191E418-8585-45B3-BEA2-5D5CEBE9E981", providerName: "sweetiq", displayText: "SweetIQ", description: "GetData_SweetIQ", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=615189", iconCSSClass: "content-provider-sweetiq", smallIconCSSClass: "content-provider-sweetiq-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/SweetIQ/?contentProviderId=52", configurationUIstyle: 0 }, { id: 94, providerKey: "AACD417C-8756-4401-9E92-2AA4B9018AA4", providerName: "troux", displayText: "Troux by Planview", description: "GetData_Troux", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=722399", iconCSSClass: "content-provider-troux", smallIconCSSClass: "content-provider-troux-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Troux/?contentProviderId=94", configurationUIstyle: 0 }, { id: 95, providerKey: "9E2F6F56-664A-440D-8530-1D38AE5A40C1", providerName: "azure-usage-and-billing", displayText: "Azure Usage and Billing", description: "GetData_AzureUsageAndBilling", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=717692", iconCSSClass: "content-provider-azure-usage-and-billing", smallIconCSSClass: "content-provider-azure-usage-and-billing-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/AzureUsageAndBilling/?contentProviderId=95", featureSwitch: r.constants.featureSwitches.azureUsageAndBillingAppEnabled, configurationUIstyle: 0 }, { id: 96, providerKey: "2D2F6464-BB93-404F-BA93-59B40711665C", providerName: "xero", displayText: "Xero", description: "GetData_Xero", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkId=723281", iconCSSClass: "content-provider-xero", smallIconCSSClass: "content-provider-xero-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/Xero/?contentProviderId=96", configurationUIstyle: 0 }, { id: 97, providerKey: "42EAC8FA-93A4-4133-964F-2640A23E3DA9", providerName: "bing-ads", displayText: "Bing Ads", description: "GetData_BingAds", learnMoreUrl: "https://go.microsoft.com/fwlink/?LinkID=730660", iconCSSClass: "content-provider-bing-ads", smallIconCSSClass: "content-provider-bing-ads-small", category: i.BuiltIn, clientCategory: t.Service, configurationPageUrl: "/providers/mashUp/BingAds/?contentProviderId=97", featureSwitch: r.constants.featureSwitches.bingAdsAppEnabled, configurationUIstyle: 0 }]
        })(o = r.contracts || (r.contracts = {}))
    })(r = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));; "use strict"; var __awaiter = this && this.__awaiter || function (e, t, o, i) { return new (o || (o = Promise))(function (r, n) { function a(e) { try { c(i.next(e)) } catch (e) { n(e) } } function s(e) { try { c(i.throw(e)) } catch (e) { n(e) } } function c(e) { e.done ? r(e.value) : new o(function (t) { t(e.value) }).then(a, s) } c((i = i.apply(e, t || [])).next()) }) }, __generator = this && this.__generator || function (e, t) { function o(e) { return function (t) { return i([e, t]) } } function i(o) { if (r) throw new TypeError("Generator is already executing."); for (; c;)try { if (r = 1, n && (a = 2 & o[0] ? n.return : o[0] ? n.throw || ((a = n.return) && a.call(n), 0) : n.next) && !(a = a.call(n, o[1])).done) return a; switch (n = 0, a && (o = [2 & o[0], a.value]), o[0]) { case 0: case 1: a = o; break; case 4: return c.label++ , { value: o[1], done: !1 }; case 5: c.label++ , n = o[1], o = [0]; continue; case 7: o = c.ops.pop(), c.trys.pop(); continue; default: if (a = c.trys, !(a = a.length > 0 && a[a.length - 1]) && (6 === o[0] || 2 === o[0])) { c = 0; continue } if (3 === o[0] && (!a || o[1] > a[0] && o[1] < a[3])) { c.label = o[1]; break } if (6 === o[0] && c.label < a[1]) { c.label = a[1], a = o; break } if (a && c.label < a[2]) { c.label = a[2], c.ops.push(o); break } a[2] && c.ops.pop(), c.trys.pop(); continue }o = t.call(e, c) } catch (e) { o = [6, e], n = 0 } finally { r = a = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } } var r, n, a, s, c = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return s = { next: o(0), throw: o(1), return: o(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this }), s }, __assign = this && this.__assign || function () { return __assign = Object.assign || function (e) { for (var t, o = 1, i = arguments.length; o < i; o++) { t = arguments[o]; for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]) } return e }, __assign.apply(this, arguments) }, __extends = this && this.__extends || (function () { var e = function (t, o) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var o in t) t.hasOwnProperty(o) && (e[o] = t[o]) })(t, o) }; return function (t, o) { function i() { this.constructor = t } e(t, o), t.prototype = null === o ? Object.create(o) : (i.prototype = o.prototype, new i) } })(), powerbi; !(function (e) { var t; !(function (e) { function t() { return { waitSeconds: 9007199254740991, paths: { "angular-ui-datetimepicker": e.getFilePath("angular-ui-datetimepicker", 2, !0), "es6-promise": e.getFilePath("es6-promise", 2, !0), filesaver: e.getFilePath("filesaver", 2, !0), "jquery-qrcode": e.getFilePath("jquery-qrcode", 2, !0), "jquery-ui": e.getFilePath("jquery-ui", 2, !0), msrcrypto: e.getFilePath("msrcrypto", 2, !0), ngTagsInput: e.getFilePath("ngTagsInput", 2, !0), pubnub: e.getFilePath("pubnub", 2, !0), quill: e.getFilePath("quill", 2, !0), resizeSensor: e.getFilePath("resizeSensor", 2, !0), "powerbi-models": e.getFilePath("powerbi-models", 2, !0), topojson: e.getFilePath("topojson", 2, !0), cropperjs: e.getFilePath("cropper", 2, !0), accessibleTableVisual: e.getFilePath("accessibleTableVisual", 0, !0), adminPortal: e.getFilePath("adminPortal", 0, !0), appAuthoring: e.getFilePath("appAuthoring", 0, !0), basicShapeVisual: e.getFilePath("basicShapeVisual", 0, !0), cartesianVisuals: e.getFilePath("cartesianVisuals", 0, !0), capacityAdmin: e.getFilePath("capacityAdmin", 0, !0), cdsaModelAuthoring: e.getFilePath("cdsaModelAuthoring", 0, !0), cdsaModelActions: e.getFilePath("cdsaModelActions", 0, !0), cortana: e.getFilePath("cortana", 0, !0, "cortana"), customVisualsGallery: e.getFilePath("customVisualsGallery", 0, !0), dashboard: e.getFilePath("dashboard", 0, !0), dialogs: e.getFilePath("dialogs", 0, !0), donutChartVisuals: e.getFilePath("donutChartVisuals", 0, !0), embedCodes: e.getFilePath("embedCodes", 0, !0), desktopDialogs: e.getFilePath("desktopDialogs", 0, !0), exploreActions: e.getFilePath("exploreActions", 0, !0), exploreUIDialogs: e.getFilePath("exploreUIDialogs", 0, !0), exploreUIShell: e.getFilePath("exploreUIShell", 0, !0), funnelChartVisual: e.getFilePath("funnelChartVisual", 0, !0), getData: e.getFilePath("getData", 0, !0), qnacore: e.getFilePath("powerbi.qnacore", 0, !0), qnaweb: e.getFilePath("powerbi.qnaweb", 0, !0), infoNavBootstrap: e.getFilePath("infonavbootstrap", 0, !0), insights: e.getFilePath("insights", 0, !0), imageVisual: e.getFilePath("imageVisual", 0, !0), jsonFilter: e.getFilePath("jsonfilter", 0, !0), kpiVisual: e.getFilePath("kpiVisual", 0, !0), mapVisuals: e.getFilePath("mapVisuals", 0, !0), mobileAuthoring: e.getFilePath("mobileAuthoring", 0, !0), multiRowCardVisual: e.getFilePath("multiRowCardVisual", 0, !0), odataExplore: e.getFilePath("odataExplore", 0, !0), permissionsDataServices: e.getFilePath("permissionsDataServices", 0, !0), permissions: e.getFilePath("permissions", 0, !0), pivotTableVisuals: e.getFilePath("pivotTableVisuals", 0, !0), powerBICortanaDashboardHost: e.getFilePath("powerBICortanaDashboardHost", 0, !0), powerBISidePanes: e.getFilePath("powerBISidePanes", 0, !0), rowLevelSecurity: e.getFilePath("rowLevelSecurity", 0, !0), scriptVisual: e.getFilePath("scriptVisual", 0, !0), pythonVisual: e.getFilePath("pythonVisual", 0, !0), selectDatasetDialog: e.getFilePath("selectDatasetDialog", 0, !0), settings: e.getFilePath("settings", 0, !0), shapeMapVisual: e.getFilePath("shapeMapVisual", 0, !0), sharing: e.getFilePath("sharing", 0, !0), singleValueVisuals: e.getFilePath("singleValueVisuals", 0, !0), slicerVisual: e.getFilePath("slicerVisual", 0, !0), sunburstVisual: e.getFilePath("sunburstVisual", 0, !0), textboxVisual: e.getFilePath("textboxVisual", 0, !0), treemapVisual: e.getFilePath("treemapVisual", 0, !0), tutorialResources: e.getFilePath("tutorialResources", 0, !0), uiComponents: e.getFilePath("uiComponents", 0, !0) }, bundles: { accessibleTableVisual: ["AccessibleTableVisual/accessibleTable/accessibleTable"], basicShapeVisual: ["BasicShapeVisual/actionButton", "BasicShapeVisual/actionButtonUtils", "BasicShapeVisual/basicShape", "BasicShapeVisual/basicShapeUtils"], cartesianVisuals: ["CartesianVisuals/cartesianModule"], cdsaModelActions: ["CdsaModelActions/services/cdsaModelActionsService"], cortana: ["Cortana/app"], customVisualsGallery: ["CustomVisualsGallery/module", "CustomVisualsGallery/services/customVisualsGalleryService", "CustomVisualsGallery/services/customVisualsStoreService", "CustomVisualsGallery/services/customVisualsStoreMetadataService"], dialogs: ["PowerBIDialogs/components/createReportDialog/createReportDialogBuilder", "PowerBIDialogs/components/errorDialog/errorDialogBuilder", "PowerBIDialogs/components/exportReportDialog/exportReportDialogBuilder", "PowerBIDialogs/components/progressDialog/progressDialogBuilder", "PowerBIDialogs/components/refreshHistoryDialog/refreshHistoryDialogBuilder", "PowerBIDialogs/components/reportServiceErrorMessageDialog/reportServiceErrorMessageDialogBuilder", "PowerBIDialogs/components/requestAccessDialog/requestAccessDialogBuilder", "PowerBIDialogs/components/selectivePublishWarningDialog/selectivePublishWarningDialogBuilder"], desktopDialogs: ["DesktopDialogs/module"], embedCodes: ["EmbedCodes/services/embedCodesService", "EmbedCodes/services/embedService", "EmbedCodes/proxies/embedProxy"], exploreActions: ["ExploreActions/services/drillthrough"], exploreUIShell: ["ExploreUIShell/module", "ExploreUIShell/services/bookmarkService", "ExploreUIShell/services/explorationAuthoring", "ExploreUIShell/services/exportVisualDataService", "ExploreUIShell/services/visualHostTooltipActionsProvider", "ExploreUIShell/viewModels/fieldWellPropertyViewModelFactory", "ExploreUIShell/viewModels/fieldWellViewModelFactory"], exploreUIDialogs: ["ExploreUIDialogs/module", "ExploreUIDialogs/dialogs/conditionalFormattingDialog/conditionalFormattingDialogBuilder", "ExploreUIDialogs/dialogs/dataBarsDialog/dataBarsDialogBuilder", "ExploreUIDialogs/dialogs/tableViewDialog/tableViewDialogBuilder", "ExploreUIDialogs/services/canvasPopoutService"], infoNavBootstrap: ["InfoNavBootstrap/services/qnaExplore"], insights: ["Insights/services/insightContainerFactory", "Insights/services/insightsAnalysisSerializer", "Insights/services/insightsCacheService", "Insights/services/insightsErrorService", "Insights/services/insightsExportService", "Insights/services/insightsService", "Insights/services/insightsVisualService", "Insights/services/insightsAnalysisService", "Insights/proxies/insightsHttpRuntime"], jsonFilter: ["JSONFilter/services/jsonFilterParser"], mobileAuthoring: ["MobileAuthoring/components/createMobileLayoutDialog/createMobileLayoutDialogBuilder"], odataExplore: ["ODataFilterParser/services/odataFilterParserService"], permissionsDataServices: ["PermissionsDataServices/proxies/permissionHttp", "PermissionsDataServices/services/permissionData", "PermissionsDataServices/services/permissionNavigation"], permissions: ["PermissionsUI/components/permissionCannotShareDialog/permissionCannotShareDialogBuilder", "PermissionsUI/components/permissionDeleteModalDialog/permissionDeleteModalDialogBuilder", "PermissionsUI/components/permissionRequiredDialog/permissionRequiredDialogBuilder"], powerBICortanaDashboardHost: ["PowerBICortanaDashboardHost/app"], powerBISidePanes: ["PowerBISidePanes/services/instantEmailService"], qnacore: ["QnaCore/services/qnaExploration", "QnaCore/services/qnaLaunch", "QnaCore/services/qnaPopoutBuilder"], qnaweb: ["QnaWeb/proxies/interpretHttpProxy", "QnaWeb/services/podExplorationResolver"], scriptVisual: ["ScriptVisual/scriptVisual"], selectDatasetDialog: ["SelectDatasetDialog/components/selectDatasetDialog/selectDatasetDialogBuilder"], settings: ["Settings/services/previewFeatures"], shapeMapVisual: ["ShapeMapVisual/shapeMap/shapeMap", "ShapeMapVisual/shapeMap/shapeMapBehaviors"], sharing: ["Sharing/module", "Sharing/helpers/requestAccessHelperFactory", "Sharing/proxies/invitationHttp", "Sharing/proxies/accessRequestHttp", "Sharing/proxies/pushAccessHttp", "Sharing/services/accessRequest", "Sharing/services/invitation", "Sharing/services/requestAccess"], singleValueVisuals: ["SingleValueVisuals/animatedNumberModule", "SingleValueVisuals/cardModule", "SingleValueVisuals/gaugeModule"], sunburstVisual: ["SunburstVisual/sunburst/sunburst", "SunburstVisual/sunburst/sunburstBehaviors"], textboxVisual: ["TextboxVisual/textboxModule"], treemapVisual: ["TreemapVisual/treemap", "TreemapVisual/treemapAnimator", "TreemapVisual/treemapBehaviors", "TreemapVisual/util"], tutorialResources: ["tutorialResources/explorationResources"] }, cssPaths: { "jquery-ui": e.getFilePath("jquery-ui.min", 3, !1), ngTagsInput: e.getFilePath("ngTagsInput", 3, !0), "quill.core": e.getFilePath("quill.core", 3, !1), cropperjs: e.getFilePath("cropper", 3, !1), accessibleTableVisual: e.getFilePath("accessibleTableVisual", 1, !0), adminPortal: e.getFilePath("adminPortal", 1, !0), appAuthoring: e.getFilePath("appAuthoring", 1, !0), capacityAdmin: e.getFilePath("capacityAdmin", 1, !0), cdsaModelAuthoring: e.getFilePath("cdsaModelAuthoring", 1, !0), customVisualsGallery: e.getFilePath("customVisualsGallery", 1, !0), dialogs: e.getFilePath("dialogs", 1, !0), desktopDialogs: e.getFilePath("desktopDialogs", 1, !0), embedCodes: e.getFilePath("embedCodes", 1, !0), exploreUIDialogs: e.getFilePath("exploreUIDialogs", 1, !0), exploreUIShell: e.getFilePath("exploreUIShell", 1, !0), getData: e.getFilePath("getData", 1, !0), insights: e.getFilePath("insights", 1, !0), qnacore: e.getFilePath("powerbi.qnacore", 1, !0), qnaweb: e.getFilePath("powerbi.qnaweb", 1, !0), infoNavBootstrap: e.getFilePath("infonavbootstrap", 1, !0), mobileAuthoring: e.getFilePath("mobileAuthoring", 1, !0), permissions: e.getFilePath("permissions", 1, !0), pivotTableVisuals: e.getFilePath("pivotTableVisuals", 1, !0), powerBISidePanes: e.getFilePath("powerBISidePanes", 1, !0), rowLevelSecurity: e.getFilePath("rowLevelSecurity", 1, !0), selectDatasetDialog: e.getFilePath("selectDatasetDialog", 1, !0), settings: e.getFilePath("settings", 1, !0), sharing: e.getFilePath("sharing", 1, !0) } } } e.createRequireConfig = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function o(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.Verbose(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.DashboardBITokenRefreshPromptEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.DashboardBITokenRefreshPromptLoggers } } function i(o) { var i = { message: o }; return { name: t.DashboardFailedToRefreshTokenEventName, category: e.TelemetryCategory.CriticalError, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ message: i.message }, null) }, info: i, loggers: t.DashboardFailedToRefreshTokenLoggers } } function r(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { url: o }); return { name: t.DashboardOpenLinkEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ url: y.url }, null, v.formatted()) }, info: y, loggers: t.DashboardOpenLinkLoggers } } function n(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = t.Verbose(r, n, a, s, c, l, d, u, p, h, m, f, g, v), b = ke(y.info, { providerId: o, providerKey: i }); return { info: b, formatted: function () { return e.extendFormatted({ providerId: b.providerId, providerKey: b.providerKey }, null, y.formatted()) } } } function a(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = t.CustomerAction(r, n, a, s, c, l, d, u, p, h, m, f, g, v), b = ke(y.info, { providerId: o, providerKey: i }); return { info: b, formatted: function () { return e.extendFormatted({ providerId: b.providerId, providerKey: b.providerKey }, null, y.formatted()) } } } function s(o, i, r, n, s, c, l, d, u, p, h, m, f, g, v, y) { var b = a(o, i, r, n, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, {}); return { name: t.MashUpContentProviderConnectButtonClickedEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, b.formatted()) }, info: w, loggers: t.MashUpContentProviderConnectButtonClickedLoggers } } function c(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = n(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, {}); return { name: t.MashUpContentProviderOrgAppPassThroughEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, b.formatted()) }, info: w, loggers: t.MashUpContentProviderOrgAppPassThroughLoggers } } function l(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = n(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, {}); return { name: t.MashUpContentProviderPreparePackageSucceedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, b.formatted()) }, info: w, loggers: t.MashUpContentProviderPreparePackageSucceedLoggers } } function d(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = n(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, {}); return { name: t.MashUpContentProviderGetPackageModelsEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, b.formatted()) }, info: w, loggers: t.MashUpContentProviderGetPackageModelsLoggers } } function u(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = n(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, {}); return { name: t.MashUpContentProviderSaveModelParametersEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, b.formatted()) }, info: w, loggers: t.MashUpContentProviderSaveModelParametersLoggers } } function p(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y, b) { var w = n(i, r, a, s, c, l, d, u, p, h, m, f, g, v, y, b), S = ke(w.info, { providerCategory: o }); return { name: t.MashUpContentProviderGetAggregatedDatasourcesForImportEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ providerCategory: S.providerCategory }, null, w.formatted()) }, info: S, loggers: t.MashUpContentProviderGetAggregatedDatasourcesForImportLoggers } } function h(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = n(o, i, r, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, {}); return { name: t.MashUpContentProviderUpdateDatasourceEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, b.formatted()) }, info: w, loggers: t.MashUpContentProviderUpdateDatasourceLoggers } } function m(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = t.Verbose(n, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, { providerId: o, providerKey: i, isImport: r }); return { name: t.MashUpContentProviderValidateParametersEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ providerId: w.providerId, providerKey: w.providerKey, isImport: w.isImport }, null, b.formatted()) }, info: w, loggers: t.MashUpContentProviderValidateParametersLoggers } } function f(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.ContentProviderUrlParametersPassedEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.ContentProviderUrlParametersPassedLoggers } } function g(o, i) { var r = { errorDetails: o, message: i }; return { name: t.ContentProviderUrlParametersDecodingFailedEventName, category: e.TelemetryCategory.CriticalError, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ errorDetails: r.errorDetails, message: r.message }, null) }, info: r, loggers: t.ContentProviderUrlParametersDecodingFailedLoggers } } function v(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.Verbose(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { categories: o }); return { name: t.ContentProviderHttpGetContentProvidersEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ categories: y.categories }, null, v.formatted()) }, info: y, loggers: t.ContentProviderHttpGetContentProvidersLoggers } } function y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.Verbose(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { providerId: o }); return { info: y, formatted: function () { return e.extendFormatted({ providerId: y.providerId }, null, v.formatted()) } } } function b(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, b, w, S) { var D = y(a, s, c, l, d, u, p, h, m, f, g, v, b, w, S), C = ke(D.info, { refreshEnabled: o, isDaily: i, weekDays: r, refreshNotificationEnabled: n }); return { name: t.DashboardSettingsDatasetsSaveRefreshSettingsEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ refreshEnabled: C.refreshEnabled, isDaily: C.isDaily, weekDays: C.weekDays, refreshNotificationEnabled: C.refreshNotificationEnabled }, null, D.formatted()) }, info: C, loggers: t.DashboardSettingsDatasetsSaveRefreshSettingsLoggers } } function w(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g), b = ke(v.info, {}); return { name: t.DashboardParametersDialogSaveParametersEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, v.formatted()) }, info: b, loggers: t.DashboardParametersDialogSaveParametersLoggers } } function S(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g), b = ke(v.info, {}); return { name: t.DashboardRefreshNowFailedToRetrieveModelEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, v.formatted()) }, info: b, loggers: t.DashboardRefreshNowFailedToRetrieveModelLoggers } } function D(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g), b = ke(v.info, {}); return { name: t.DashboardAuthenticationDialogSaveCredentialsEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, v.formatted()) }, info: b, loggers: t.DashboardAuthenticationDialogSaveCredentialsLoggers } } function C(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g), b = ke(v.info, {}); return { name: t.DashboardRetrieveGatewayEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, v.formatted()) }, info: b, loggers: t.DashboardRetrieveGatewayLoggers } } function T(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g), b = ke(v.info, {}); return { name: t.DashboardPrepareRefreshNowEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, v.formatted()) }, info: b, loggers: t.DashboardPrepareRefreshNowLoggers } } function E(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g), b = ke(v.info, {}); return { name: t.DashboardGetAggregatedDatasourcesForOneModelEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, v.formatted()) }, info: b, loggers: t.DashboardGetAggregatedDatasourcesForOneModelLoggers } } function I(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g), b = ke(v.info, {}); return { name: t.DashboardDatasetRefreshEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, v.formatted()) }, info: b, loggers: t.DashboardDatasetRefreshLoggers } } function P(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.Verbose(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.DashboardInitializeSettingsDatasetModelEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.DashboardInitializeSettingsDatasetModelLoggers } } function k(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.Verbose(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { refreshType: o }); return { name: t.DashboardGetRefreshHistoryEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ refreshType: y.refreshType }, null, v.formatted()) }, info: y, loggers: t.DashboardGetRefreshHistoryLoggers } } function x(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.Verbose(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.DashboardGetGroupIconEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.DashboardGetGroupIconLoggers } } function R(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.Verbose(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.DashboardRefreshAndGetUserMetadataEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.DashboardRefreshAndGetUserMetadataLoggers } } function A(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = t.CustomerAction(n, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, { operation: o, result: i, errorReason: r }); return { name: t.LicenseEnforcementShowFeatureDisabledDialogEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ operation: w.operation, result: w.result, errorReason: w.errorReason }, null, b.formatted()) }, info: w, loggers: t.LicenseEnforcementShowFeatureDisabledDialogLoggers } } function _(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = t.CustomerAction(n, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, { operation: o, result: i, errorReason: r }); return { name: t.LicenseEnforcementShowStartFreeTrialDialogEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ operation: w.operation, result: w.result, errorReason: w.errorReason }, null, b.formatted()) }, info: w, loggers: t.LicenseEnforcementShowStartFreeTrialDialogLoggers } } function L(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = t.CustomerAction(n, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, { operation: o, result: i, errorReason: r }); return { name: t.LicenseEnforcementShowUpgradeToProDialogEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ operation: w.operation, result: w.result, errorReason: w.errorReason }, null, b.formatted()) }, info: w, loggers: t.LicenseEnforcementShowUpgradeToProDialogLoggers } } function M(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = t.CustomerAction(r, n, a, s, c, l, d, u, p, h, m, f, g, v), b = ke(y.info, { result: o, errorReason: i }); return { name: t.LicenseEnforcementAccept2017proTrialEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ result: b.result, errorReason: b.errorReason }, null, y.formatted()) }, info: b, loggers: t.LicenseEnforcementAccept2017proTrialLoggers } } function F(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { printType: o }); return { name: t.DashboardAndReportsPrintEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ printType: y.printType }, null, v.formatted()) }, info: y, loggers: t.DashboardAndReportsPrintLoggers } } function N(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b) { var w = t.CustomerAction(a, s, c, l, d, u, p, h, m, f, g, v, y, b), S = ke(w.info, { downloadReferrer: o, providerId: i, modelProperty: r, dbName: n }); return { name: t.DashboardAndReportsAnalyzeInExcelEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ downloadReferrer: S.downloadReferrer, providerId: S.providerId, modelProperty: S.modelProperty, dbName: S.dbName }, null, w.formatted()) }, info: S, loggers: t.DashboardAndReportsAnalyzeInExcelLoggers } } function z(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { currentVersion: o }); return { name: t.DashboardAndReportsFirstTimeUserAlreadyInstalledEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ currentVersion: y.currentVersion }, null, v.formatted()) }, info: y, loggers: t.DashboardAndReportsFirstTimeUserAlreadyInstalledLoggers } } function U(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { currentVersion: o }); return { name: t.DashboardAndReportsFirstTimeUserDownloadUpdateEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ currentVersion: y.currentVersion }, null, v.formatted()) }, info: y, loggers: t.DashboardAndReportsFirstTimeUserDownloadUpdateLoggers } } function $(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { currentVersion: o }); return { name: t.DashboardAndReportsDismissAnalyzeInExcelDialogEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ currentVersion: y.currentVersion }, null, v.formatted()) }, info: y, loggers: t.DashboardAndReportsDismissAnalyzeInExcelDialogLoggers } } function O(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.DashboardAndReportsFirstTimeUserDownloadOdcEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.DashboardAndReportsFirstTimeUserDownloadOdcLoggers } } function H(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { notSupportedType: o }); return { name: t.DashboardAndReportsAnalyzeInExcelUnSupportedDatasetEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ notSupportedType: y.notSupportedType }, null, v.formatted()) }, info: y, loggers: t.DashboardAndReportsAnalyzeInExcelUnSupportedDatasetLoggers } } function B(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { dbName: o }); return { name: t.DashboardAndReportsAnalyzeInExcelOnPremDatasetEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ dbName: y.dbName }, null, v.formatted()) }, info: y, loggers: t.DashboardAndReportsAnalyzeInExcelOnPremDatasetLoggers } } function V(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { isNewOdcFormat: o }); return { name: t.DashboardAndReportsAnalyzeInExcelDownloadOdcFileEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ isNewOdcFormat: y.isNewOdcFormat }, null, v.formatted()) }, info: y, loggers: t.DashboardAndReportsAnalyzeInExcelDownloadOdcFileLoggers } } function G(o, i, r, n, a, s, c, l, d, u, p, h) { var m = { errorCode: o, targetVisualType: i, primaryDataReduction: r, secondaryDataReduction: n, intersectionDataReduction: a, primaryCount: s, secondaryCount: c, hasCategoryHierarchy: l, hasDynamicSeries: d, visualTelemetry: u, isSegmented: p, message: h }; return { name: t.DsrDataLimitsWarningEventName, category: e.TelemetryCategory.CriticalError, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ errorCode: m.errorCode, targetVisualType: m.targetVisualType, primaryDataReduction: m.primaryDataReduction, secondaryDataReduction: m.secondaryDataReduction, intersectionDataReduction: m.intersectionDataReduction, primaryCount: m.primaryCount, secondaryCount: m.secondaryCount, hasCategoryHierarchy: m.hasCategoryHierarchy, hasDynamicSeries: m.hasDynamicSeries, visualTelemetry: m.visualTelemetry, isSegmented: m.isSegmented, message: m.message }, null) }, info: m, loggers: t.DsrDataLimitsWarningLoggers } } function j(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = t.Verbose(r, n, a, s, c, l, d, u, p, h, m, f, g, v), b = ke(y.info, { functionName: o, notificationData: i }); return { name: t.DeprecatedNotificationToastUsageEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ functionName: b.functionName, notificationData: b.notificationData }, null, y.formatted()) }, info: b, loggers: t.DeprecatedNotificationToastUsageLoggers } } function W(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.DomainHelperGetVerifiedDomainsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.DomainHelperGetVerifiedDomainsLoggers } } function q(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = t.CustomerAction(r, n, a, s, c, l, d, u, p, h, m, f, g, v), b = ke(y.info, { explorationVersion: o, supportedVersion: i }); return { name: t.NewerExplorationVersionEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ explorationVersion: b.explorationVersion, supportedVersion: b.supportedVersion }, null, y.formatted()) }, info: b, loggers: t.NewerExplorationVersionLoggers } } function K(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { state: o }); return { name: t.DeveloperVisualEnabledChangedEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ state: y.state }, null, v.formatted()) }, info: y, loggers: t.DeveloperVisualEnabledChangedLoggers } } function Q(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = t.VerboseTimedEvent(i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, { module: o }); return { name: t.ModuleLoadEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ module: w.module }, null, b.formatted()) }, info: w, loggers: t.ModuleLoadLoggers } } function J(o, i, r, n, a) { var s = t.ErrorWithStackTrace(n, a), c = ke(s.info, { module: o, start: i, end: r }); return { name: t.ModuleLoadErrorEventName, category: e.TelemetryCategory.CriticalError, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ module: c.module, start: c.start, end: c.end }, null, s.formatted()) }, info: c, loggers: t.ModuleLoadErrorLoggers } } function X(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { visualIds: o }); return { name: t.ScriptVisualFilterActionEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ visualIds: y.visualIds }, null, v.formatted()) }, info: y, loggers: t.ScriptVisualFilterActionLoggers } } function Y(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) {
            var y = { filterType: o, visualIds: i, parentId: r, isError: n, errorSource: a, errorCode: s, activityName: c, activityId: l, isCancelled: d, pingLatency: u, errorMessage: p, folderId: h, activeFolderCapacityId: m, fluentUI: f, baseVersion: g, isFireAndForget: v }; return {
                name: t.EXCrossFilterScriptVisualEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () {
                    return e.extendFormatted({ filterType: y.filterType, visualIds: y.visualIds, parentId: y.parentId }, {
                        isError: y.isError, errorSource: y.errorSource, errorCode: y.errorCode, activityName: y.activityName, activityId: y.activityId, isCancelled: y.isCancelled, pingLatency: y.pingLatency, errorMessage: y.errorMessage, folderId: y.folderId, activeFolderCapacityId: y.activeFolderCapacityId, fluentUI: y.fluentUI, baseVersion: y.baseVersion,
                        isFireAndForget: y.isFireAndForget
                    })
                }, info: y, loggers: t.EXCrossFilterScriptVisualLoggers
            }
        } function Z(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = { action: o, visualIds: i, parentId: r, isError: n, errorSource: a, errorCode: s, activityName: c, activityId: l, isCancelled: d, pingLatency: u, errorMessage: p, folderId: h, activeFolderCapacityId: m, fluentUI: f, baseVersion: g, isFireAndForget: v }; return { name: t.EXFilterScriptVisualEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ action: y.action, visualIds: y.visualIds, parentId: y.parentId }, { isError: y.isError, errorSource: y.errorSource, errorCode: y.errorCode, activityName: y.activityName, activityId: y.activityId, isCancelled: y.isCancelled, pingLatency: y.pingLatency, errorMessage: y.errorMessage, folderId: y.folderId, activeFolderCapacityId: y.activeFolderCapacityId, fluentUI: y.fluentUI, baseVersion: y.baseVersion, isFireAndForget: y.isFireAndForget }) }, info: y, loggers: t.EXFilterScriptVisualLoggers } } function ee(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b) { var w = t.CustomerAction(a, s, c, l, d, u, p, h, m, f, g, v, y, b), S = ke(w.info, { mailResponse: o, errorReason: i, reportObjectId: r, sectionsNumber: n }); return { name: t.ExportToPowerPointEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ mailResponse: S.mailResponse, errorReason: S.errorReason, reportObjectId: S.reportObjectId, sectionsNumber: S.sectionsNumber }, null, w.formatted()) }, info: S, loggers: t.ExportToPowerPointLoggers } } function te(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b) { var w = t.CustomerAction(a, s, c, l, d, u, p, h, m, f, g, v, y, b), S = ke(w.info, { mailResponse: o, errorReason: i, reportObjectId: r, sectionsNumber: n }); return { name: t.ExportToPdfEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ mailResponse: S.mailResponse, errorReason: S.errorReason, reportObjectId: S.reportObjectId, sectionsNumber: S.sectionsNumber }, null, w.formatted()) }, info: S, loggers: t.ExportToPdfLoggers } } function oe(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = t.CustomerAction(n, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, { excludeHiddenSlides: o, renderOption: i, payloadLength: r }); return { name: t.ExportReportOptionsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ excludeHiddenSlides: w.excludeHiddenSlides, payloadLength: w.payloadLength }, { renderOption: w.renderOption }, b.formatted()) }, info: w, loggers: t.ExportReportOptionsLoggers } } function ie(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.Verbose(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { IsResolvedDuringScriptLoad: o }); return { name: t.ClusterResolvedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ IsResolvedDuringScriptLoad: y.IsResolvedDuringScriptLoad }, null, v.formatted()) }, info: y, loggers: t.ClusterResolvedLoggers } } function re(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y) { var b = t.Verbose(n, a, s, c, l, d, u, p, h, m, f, g, v, y), w = ke(b.info, { entityId: o, entityType: i, auditKeyId: r }); return { name: t.DashboardAndReportsAuditEventEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ entityId: w.entityId, entityType: w.entityType, auditKeyId: w.auditKeyId }, null, b.formatted()) }, info: w, loggers: t.DashboardAndReportsAuditEventLoggers } } function ne(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { errorReason: o }); return { name: t.DownloadReportEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ errorReason: y.errorReason }, null, v.formatted()) }, info: y, loggers: t.DownloadReportLoggers } } function ae(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b, w, S, D, C) { var T = t.BaseEvent(d, u, p, h, m, f, g, v, y, b, w, S, D, C), E = ke(T.info, { originalRequestId: o, pendingRequestCount: i, url: r, throttlingDelay: n, status: a, requestId: s, responseRequestId: c, clientAndServerRequestIdMismatch: l }); return { name: t.HttpRetryRequestEventName, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ originalRequestId: E.originalRequestId, pendingRequestCount: E.pendingRequestCount, url: E.url, throttlingDelay: E.throttlingDelay, status: E.status, requestId: E.requestId, responseRequestId: E.responseRequestId }, { clientAndServerRequestIdMismatch: E.clientAndServerRequestIdMismatch }, T.formatted()) }, info: E, loggers: t.HttpRetryRequestLoggers } } function se(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b, w) { var S = t.BaseEvent(s, c, l, d, u, p, h, m, f, g, v, y, b, w), D = ke(S.info, { description: o, pendingRequestCount: i, url: r, method: n, requestId: a }); return { name: t.HttpServiceRequestEventName, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ description: D.description, pendingRequestCount: D.pendingRequestCount, url: D.url, method: D.method, requestId: D.requestId }, null, S.formatted()) }, info: D, loggers: t.HttpServiceRequestLoggers } } function ce(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsUpdateGatewayEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsUpdateGatewayLoggers } } function le(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsDeleteGatewayEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsDeleteGatewayLoggers } } function de(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = t.CustomerAction(r, n, a, s, c, l, d, u, p, h, m, f, g, v), b = ke(y.info, { dataSourceType: o, credentialType: i }); return { name: t.SettingsCreateDataSourceEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ dataSourceType: b.dataSourceType, credentialType: b.credentialType }, null, y.formatted()) }, info: b, loggers: t.SettingsCreateDataSourceLoggers } } function ue(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsDeleteDataSourceEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsDeleteDataSourceLoggers } } function pe(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsBindModelToGatewayEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsBindModelToGatewayLoggers } } function he(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { principalCount: o }); return { name: t.SettingsAddDataSourcePrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ principalCount: y.principalCount }, null, v.formatted()) }, info: y, loggers: t.SettingsAddDataSourcePrincipalsLoggers } } function me(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { principalCount: o }); return { name: t.SettingsRemoveDataSourcePrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ principalCount: y.principalCount }, null, v.formatted()) }, info: y, loggers: t.SettingsRemoveDataSourcePrincipalsLoggers } } function fe(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { principalCount: o }); return { name: t.SettingsAddGatewayPrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ principalCount: y.principalCount }, null, v.formatted()) }, info: y, loggers: t.SettingsAddGatewayPrincipalsLoggers } } function ge(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.CustomerAction(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { principalCount: o }); return { name: t.SettingsRemoveGatewayPrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ principalCount: y.principalCount }, null, v.formatted()) }, info: y, loggers: t.SettingsRemoveGatewayPrincipalsLoggers } } function ve(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsUpdateCredentialsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsUpdateCredentialsLoggers } } function ye(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsOpenGatewayDatasourceUPNMappingPaneEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsOpenGatewayDatasourceUPNMappingPaneLoggers } } function be(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsUpdateGatewayDatasourceUPNMappingEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsUpdateGatewayDatasourceUPNMappingLoggers } } function we(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.CustomerAction(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.SettingsTestGatewayDatasourceUPNMappingEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.SettingsTestGatewayDatasourceUPNMappingLoggers } } function Se(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b, w) { var S = t.TimedEvent(n, a, s, c, l, d, u, p, h, m, f, g, v, y, b, w), D = ke(S.info, { fileName: o, startEval: i, downloadDuration: r }); return { name: t.AppJavaScriptParseEventName, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ fileName: D.fileName, startEval: D.startEval, downloadDuration: D.downloadDuration }, null, S.formatted()) }, info: D, loggers: t.AppJavaScriptParseLoggers } } function De(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g) { var v = t.BaseEvent(i, r, n, a, s, c, l, d, u, p, h, m, f, g), y = ke(v.info, { jobId: o }); return { name: t.AppPreemptiveQueryDataEventName, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ jobId: y.jobId }, null, v.formatted()) }, info: y, loggers: t.AppPreemptiveQueryDataLoggers } } function Ce(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v) { var y = t.BaseEvent(r, n, a, s, c, l, d, u, p, h, m, f, g, v), b = ke(y.info, { factors: o, count: i }); return { name: t.GeocodingSummaryEventName, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ factors: b.factors, count: b.count }, null, y.formatted()) }, info: b, loggers: t.GeocodingSummaryLoggers, logRatio: .1 } } function Te(o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b, w) { var S = t.Verbose(s, c, l, d, u, p, h, m, f, g, v, y, b, w), D = ke(S.info, { dashboardUpdates: o, newMetadataChangeSourceId: i, newMetadataTransactionId: r, clientDashboardVersions: n, clientWorkspaceVersion: a }); return { name: t.SyncServiceUpdateEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted({ dashboardUpdates: D.dashboardUpdates, newMetadataChangeSourceId: D.newMetadataChangeSourceId, newMetadataTransactionId: D.newMetadataTransactionId, clientDashboardVersions: D.clientDashboardVersions, clientWorkspaceVersion: D.clientWorkspaceVersion }, null, S.formatted()) }, info: D, loggers: t.SyncServiceUpdateLoggers } } function Ee(o, i, r, n, a, s, c, l, d, u, p, h, m, f) { var g = t.Verbose(o, i, r, n, a, s, c, l, d, u, p, h, m, f), v = ke(g.info, {}); return { name: t.LicenseEnforcementAccessCustomizedPropertiesEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: Ie(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: v, loggers: t.LicenseEnforcementAccessCustomizedPropertiesLoggers } } var Ie, Pe = jsCommon.Utility, ke = jsCommon.UnionExtensions.mergeUnionType, xe = e.telemetry.EventFactories; Ie = Pe ? Pe.generateGuid : Function.prototype, t.DashboardBITokenRefreshPromptEventName = "PBI.Dashboard.BITokenRefreshPrompt", t.DashboardBITokenRefreshPrompt = o, xe[t.DashboardBITokenRefreshPromptEventName] = function (o) { return e.telemetryEventFactory(t.DashboardBITokenRefreshPromptEventName, o, t.DashboardBITokenRefreshPromptLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardFailedToRefreshTokenEventName = "PBI.Dashboard.FailedToRefreshToken", t.DashboardFailedToRefreshToken = i, xe[t.DashboardFailedToRefreshTokenEventName] = function (o) { return e.telemetryEventFactory(t.DashboardFailedToRefreshTokenEventName, o, t.DashboardFailedToRefreshTokenLoggers, void 0, e.TelemetryCategory.CriticalError, void 0, void 0, void 0, null) }, t.DashboardOpenLinkEventName = "PBI.Dashboard.OpenLink", t.DashboardOpenLink = r, xe[t.DashboardOpenLinkEventName] = function (o) { return e.telemetryEventFactory(t.DashboardOpenLinkEventName, o, t.DashboardOpenLinkLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.BaseMashupContentProviderChildEventEventName = "BaseMashupContentProviderChildEvent", t.BaseMashupContentProviderChildEvent = n, xe[t.BaseMashupContentProviderChildEventEventName] = function (o) { return e.telemetryEventFactory(void 0, o, void 0, t.VerboseEventName, void 0, void 0, void 0, void 0, null) }, t.BaseMashupContentProviderCustomerActionEventEventName = "BaseMashupContentProviderCustomerActionEvent", t.BaseMashupContentProviderCustomerActionEvent = a, xe[t.BaseMashupContentProviderCustomerActionEventEventName] = function (o) { return e.telemetryEventFactory(void 0, o, void 0, t.CustomerActionEventName, void 0, void 0, void 0, void 0, null) }, t.MashUpContentProviderConnectButtonClickedEventName = "PBI.MashUpContentProvider.ConnectButtonClicked", t.MashUpContentProviderConnectButtonClicked = s, xe[t.MashUpContentProviderConnectButtonClickedEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderConnectButtonClickedEventName, o, t.MashUpContentProviderConnectButtonClickedLoggers, t.BaseMashupContentProviderCustomerActionEventEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.MashUpContentProviderOrgAppPassThroughEventName = "PBI.MashUpContentProvider.OrgAppPassThrough", t.MashUpContentProviderOrgAppPassThrough = c, xe[t.MashUpContentProviderOrgAppPassThroughEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderOrgAppPassThroughEventName, o, t.MashUpContentProviderOrgAppPassThroughLoggers, t.BaseMashupContentProviderChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.MashUpContentProviderPreparePackageSucceedEventName = "PBI.MashUpContentProvider.PreparePackageSucceed", t.MashUpContentProviderPreparePackageSucceed = l, xe[t.MashUpContentProviderPreparePackageSucceedEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderPreparePackageSucceedEventName, o, t.MashUpContentProviderPreparePackageSucceedLoggers, t.BaseMashupContentProviderChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.MashUpContentProviderGetPackageModelsEventName = "PBI.MashUpContentProvider.GetPackageModels", t.MashUpContentProviderGetPackageModels = d, xe[t.MashUpContentProviderGetPackageModelsEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderGetPackageModelsEventName, o, t.MashUpContentProviderGetPackageModelsLoggers, t.BaseMashupContentProviderChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.MashUpContentProviderSaveModelParametersEventName = "PBI.MashUpContentProvider.SaveModelParameters", t.MashUpContentProviderSaveModelParameters = u, xe[t.MashUpContentProviderSaveModelParametersEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderSaveModelParametersEventName, o, t.MashUpContentProviderSaveModelParametersLoggers, t.BaseMashupContentProviderChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.MashUpContentProviderGetAggregatedDatasourcesForImportEventName = "PBI.MashUpContentProvider.GetAggregatedDatasourcesForImport", t.MashUpContentProviderGetAggregatedDatasourcesForImport = p, xe[t.MashUpContentProviderGetAggregatedDatasourcesForImportEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderGetAggregatedDatasourcesForImportEventName, o, t.MashUpContentProviderGetAggregatedDatasourcesForImportLoggers, t.BaseMashupContentProviderChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.MashUpContentProviderUpdateDatasourceEventName = "PBI.MashUpContentProvider.UpdateDatasource", t.MashUpContentProviderUpdateDatasource = h, xe[t.MashUpContentProviderUpdateDatasourceEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderUpdateDatasourceEventName, o, t.MashUpContentProviderUpdateDatasourceLoggers, t.BaseMashupContentProviderChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.MashUpContentProviderValidateParametersEventName = "PBI.MashUpContentProvider.ValidateParameters", t.MashUpContentProviderValidateParameters = m, xe[t.MashUpContentProviderValidateParametersEventName] = function (o) { return e.telemetryEventFactory(t.MashUpContentProviderValidateParametersEventName, o, t.MashUpContentProviderValidateParametersLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.ContentProviderUrlParametersPassedEventName = "PBI.ContentProvider.UrlParametersPassed", t.ContentProviderUrlParametersPassed = f, xe[t.ContentProviderUrlParametersPassedEventName] = function (o) { return e.telemetryEventFactory(t.ContentProviderUrlParametersPassedEventName, o, t.ContentProviderUrlParametersPassedLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ContentProviderUrlParametersDecodingFailedEventName = "PBI.ContentProvider.UrlParametersDecodingFailed", t.ContentProviderUrlParametersDecodingFailed = g, xe[t.ContentProviderUrlParametersDecodingFailedEventName] = function (o) { return e.telemetryEventFactory(t.ContentProviderUrlParametersDecodingFailedEventName, o, t.ContentProviderUrlParametersDecodingFailedLoggers, void 0, e.TelemetryCategory.CriticalError, void 0, void 0, void 0, null) }, t.ContentProviderHttpGetContentProvidersEventName = "PBI.ContentProvider.Http.GetContentProviders", t.ContentProviderHttpGetContentProviders = v, xe[t.ContentProviderHttpGetContentProvidersEventName] = function (o) { return e.telemetryEventFactory(t.ContentProviderHttpGetContentProvidersEventName, o, t.ContentProviderHttpGetContentProvidersLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.BaseDataSetChildEventEventName = "BaseDataSetChildEvent", t.BaseDataSetChildEvent = y, xe[t.BaseDataSetChildEventEventName] = function (o) { return e.telemetryEventFactory(void 0, o, void 0, t.VerboseEventName, void 0, void 0, void 0, void 0, null) }, t.DashboardSettingsDatasetsSaveRefreshSettingsEventName = "PBI.Dashboard.SettingsDatasetsSaveRefreshSettings", t.DashboardSettingsDatasetsSaveRefreshSettings = b, xe[t.DashboardSettingsDatasetsSaveRefreshSettingsEventName] = function (o) { return e.telemetryEventFactory(t.DashboardSettingsDatasetsSaveRefreshSettingsEventName, o, t.DashboardSettingsDatasetsSaveRefreshSettingsLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardParametersDialogSaveParametersEventName = "PBI.Dashboard.ParametersDialogSaveParameters", t.DashboardParametersDialogSaveParameters = w, xe[t.DashboardParametersDialogSaveParametersEventName] = function (o) { return e.telemetryEventFactory(t.DashboardParametersDialogSaveParametersEventName, o, t.DashboardParametersDialogSaveParametersLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardRefreshNowFailedToRetrieveModelEventName = "PBI.Dashboard.RefreshNowFailedToRetrieveModel", t.DashboardRefreshNowFailedToRetrieveModel = S, xe[t.DashboardRefreshNowFailedToRetrieveModelEventName] = function (o) { return e.telemetryEventFactory(t.DashboardRefreshNowFailedToRetrieveModelEventName, o, t.DashboardRefreshNowFailedToRetrieveModelLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardAuthenticationDialogSaveCredentialsEventName = "PBI.Dashboard.AuthenticationDialogSaveCredentials", t.DashboardAuthenticationDialogSaveCredentials = D, xe[t.DashboardAuthenticationDialogSaveCredentialsEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAuthenticationDialogSaveCredentialsEventName, o, t.DashboardAuthenticationDialogSaveCredentialsLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardRetrieveGatewayEventName = "PBI.Dashboard.RetrieveGateway", t.DashboardRetrieveGateway = C, xe[t.DashboardRetrieveGatewayEventName] = function (o) { return e.telemetryEventFactory(t.DashboardRetrieveGatewayEventName, o, t.DashboardRetrieveGatewayLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardPrepareRefreshNowEventName = "PBI.Dashboard.PrepareRefreshNow", t.DashboardPrepareRefreshNow = T, xe[t.DashboardPrepareRefreshNowEventName] = function (o) { return e.telemetryEventFactory(t.DashboardPrepareRefreshNowEventName, o, t.DashboardPrepareRefreshNowLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardGetAggregatedDatasourcesForOneModelEventName = "PBI.Dashboard.GetAggregatedDatasourcesForOneModel", t.DashboardGetAggregatedDatasourcesForOneModel = E, xe[t.DashboardGetAggregatedDatasourcesForOneModelEventName] = function (o) { return e.telemetryEventFactory(t.DashboardGetAggregatedDatasourcesForOneModelEventName, o, t.DashboardGetAggregatedDatasourcesForOneModelLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardDatasetRefreshEventName = "PBI.Dashboard.DatasetRefresh", t.DashboardDatasetRefresh = I, xe[t.DashboardDatasetRefreshEventName] = function (o) { return e.telemetryEventFactory(t.DashboardDatasetRefreshEventName, o, t.DashboardDatasetRefreshLoggers, t.BaseDataSetChildEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardInitializeSettingsDatasetModelEventName = "PBI.Dashboard.InitializeSettingsDatasetModel", t.DashboardInitializeSettingsDatasetModel = P, xe[t.DashboardInitializeSettingsDatasetModelEventName] = function (o) { return e.telemetryEventFactory(t.DashboardInitializeSettingsDatasetModelEventName, o, t.DashboardInitializeSettingsDatasetModelLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardGetRefreshHistoryEventName = "PBI.Dashboard.GetRefreshHistory", t.DashboardGetRefreshHistory = k, xe[t.DashboardGetRefreshHistoryEventName] = function (o) { return e.telemetryEventFactory(t.DashboardGetRefreshHistoryEventName, o, t.DashboardGetRefreshHistoryLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardGetGroupIconEventName = "PBI.Dashboard.GetGroupIcon", t.DashboardGetGroupIcon = x, xe[t.DashboardGetGroupIconEventName] = function (o) { return e.telemetryEventFactory(t.DashboardGetGroupIconEventName, o, t.DashboardGetGroupIconLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardRefreshAndGetUserMetadataEventName = "PBI.Dashboard.RefreshAndGetUserMetadata", t.DashboardRefreshAndGetUserMetadata = R, xe[t.DashboardRefreshAndGetUserMetadataEventName] = function (o) { return e.telemetryEventFactory(t.DashboardRefreshAndGetUserMetadataEventName, o, t.DashboardRefreshAndGetUserMetadataLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.LicenseEnforcementShowFeatureDisabledDialogEventName = "PBI.LicenseEnforcement.ShowFeatureDisabledDialog", t.LicenseEnforcementShowFeatureDisabledDialog = A, xe[t.LicenseEnforcementShowFeatureDisabledDialogEventName] = function (o) { return e.telemetryEventFactory(t.LicenseEnforcementShowFeatureDisabledDialogEventName, o, t.LicenseEnforcementShowFeatureDisabledDialogLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.LicenseEnforcementShowStartFreeTrialDialogEventName = "PBI.LicenseEnforcement.ShowStartFreeTrialDialog", t.LicenseEnforcementShowStartFreeTrialDialog = _, xe[t.LicenseEnforcementShowStartFreeTrialDialogEventName] = function (o) { return e.telemetryEventFactory(t.LicenseEnforcementShowStartFreeTrialDialogEventName, o, t.LicenseEnforcementShowStartFreeTrialDialogLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.LicenseEnforcementShowUpgradeToProDialogEventName = "PBI.LicenseEnforcement.ShowUpgradeToProDialog", t.LicenseEnforcementShowUpgradeToProDialog = L, xe[t.LicenseEnforcementShowUpgradeToProDialogEventName] = function (o) { return e.telemetryEventFactory(t.LicenseEnforcementShowUpgradeToProDialogEventName, o, t.LicenseEnforcementShowUpgradeToProDialogLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.LicenseEnforcementAccept2017proTrialEventName = "PBI.LicenseEnforcement.Accept2017proTrial", t.LicenseEnforcementAccept2017proTrial = M, xe[t.LicenseEnforcementAccept2017proTrialEventName] = function (o) { return e.telemetryEventFactory(t.LicenseEnforcementAccept2017proTrialEventName, o, t.LicenseEnforcementAccept2017proTrialLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsPrintEventName = "PBI.DashboardAndReports.Print", t.DashboardAndReportsPrint = F, xe[t.DashboardAndReportsPrintEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsPrintEventName, o, t.DashboardAndReportsPrintLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsAnalyzeInExcelEventName = "PBI.DashboardAndReports.AnalyzeInExcel", t.DashboardAndReportsAnalyzeInExcel = N, xe[t.DashboardAndReportsAnalyzeInExcelEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsAnalyzeInExcelEventName, o, t.DashboardAndReportsAnalyzeInExcelLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsFirstTimeUserAlreadyInstalledEventName = "PBI.DashboardAndReports.FirstTimeUserAlreadyInstalled", t.DashboardAndReportsFirstTimeUserAlreadyInstalled = z, xe[t.DashboardAndReportsFirstTimeUserAlreadyInstalledEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsFirstTimeUserAlreadyInstalledEventName, o, t.DashboardAndReportsFirstTimeUserAlreadyInstalledLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsFirstTimeUserDownloadUpdateEventName = "PBI.DashboardAndReports.FirstTimeUserDownloadUpdate", t.DashboardAndReportsFirstTimeUserDownloadUpdate = U, xe[t.DashboardAndReportsFirstTimeUserDownloadUpdateEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsFirstTimeUserDownloadUpdateEventName, o, t.DashboardAndReportsFirstTimeUserDownloadUpdateLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsDismissAnalyzeInExcelDialogEventName = "PBI.DashboardAndReports.DismissAnalyzeInExcelDialog", t.DashboardAndReportsDismissAnalyzeInExcelDialog = $, xe[t.DashboardAndReportsDismissAnalyzeInExcelDialogEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsDismissAnalyzeInExcelDialogEventName, o, t.DashboardAndReportsDismissAnalyzeInExcelDialogLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsFirstTimeUserDownloadOdcEventName = "PBI.DashboardAndReports.FirstTimeUserDownloadOdc", t.DashboardAndReportsFirstTimeUserDownloadOdc = O, xe[t.DashboardAndReportsFirstTimeUserDownloadOdcEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsFirstTimeUserDownloadOdcEventName, o, t.DashboardAndReportsFirstTimeUserDownloadOdcLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsAnalyzeInExcelUnSupportedDatasetEventName = "PBI.DashboardAndReports.AnalyzeInExcelUnSupportedDataset", t.DashboardAndReportsAnalyzeInExcelUnSupportedDataset = H, xe[t.DashboardAndReportsAnalyzeInExcelUnSupportedDatasetEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsAnalyzeInExcelUnSupportedDatasetEventName, o, t.DashboardAndReportsAnalyzeInExcelUnSupportedDatasetLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsAnalyzeInExcelOnPremDatasetEventName = "PBI.DashboardAndReports.AnalyzeInExcelOnPremDataset", t.DashboardAndReportsAnalyzeInExcelOnPremDataset = B, xe[t.DashboardAndReportsAnalyzeInExcelOnPremDatasetEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsAnalyzeInExcelOnPremDatasetEventName, o, t.DashboardAndReportsAnalyzeInExcelOnPremDatasetLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DashboardAndReportsAnalyzeInExcelDownloadOdcFileEventName = "PBI.DashboardAndReports.AnalyzeInExcelDownloadOdcFile", t.DashboardAndReportsAnalyzeInExcelDownloadOdcFile = V, xe[t.DashboardAndReportsAnalyzeInExcelDownloadOdcFileEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsAnalyzeInExcelDownloadOdcFileEventName, o, t.DashboardAndReportsAnalyzeInExcelDownloadOdcFileLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DsrDataLimitsWarningEventName = "PBI.DsrDataLimitsWarning", t.DsrDataLimitsWarning = G, xe[t.DsrDataLimitsWarningEventName] = function (o) { return e.telemetryEventFactory(t.DsrDataLimitsWarningEventName, o, t.DsrDataLimitsWarningLoggers, void 0, e.TelemetryCategory.CriticalError, void 0, void 0, void 0, null) }, t.DeprecatedNotificationToastUsageEventName = "PBI.DeprecatedNotificationToastUsage", t.DeprecatedNotificationToastUsage = j, xe[t.DeprecatedNotificationToastUsageEventName] = function (o) { return e.telemetryEventFactory(t.DeprecatedNotificationToastUsageEventName, o, t.DeprecatedNotificationToastUsageLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DomainHelperGetVerifiedDomainsEventName = "PBI.DomainHelper.GetVerifiedDomains", t.DomainHelperGetVerifiedDomains = W, xe[t.DomainHelperGetVerifiedDomainsEventName] = function (o) { return e.telemetryEventFactory(t.DomainHelperGetVerifiedDomainsEventName, o, t.DomainHelperGetVerifiedDomainsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.NewerExplorationVersionEventName = "PBI.NewerExplorationVersion", t.NewerExplorationVersion = q, xe[t.NewerExplorationVersionEventName] = function (o) { return e.telemetryEventFactory(t.NewerExplorationVersionEventName, o, t.NewerExplorationVersionLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.DeveloperVisualEnabledChangedEventName = "PBI.DeveloperVisualEnabledChanged", t.DeveloperVisualEnabledChanged = K, xe[t.DeveloperVisualEnabledChangedEventName] = function (o) { return e.telemetryEventFactory(t.DeveloperVisualEnabledChangedEventName, o, t.DeveloperVisualEnabledChangedLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ModuleLoadEventName = "PBI.ModuleLoad", t.ModuleLoad = Q, xe[t.ModuleLoadEventName] = function (o) { return e.telemetryEventFactory(t.ModuleLoadEventName, o, t.ModuleLoadLoggers, t.VerboseTimedEventEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.ModuleLoadErrorEventName = "PBI.ModuleLoadError", t.ModuleLoadError = J, xe[t.ModuleLoadErrorEventName] = function (o) { return e.telemetryEventFactory(t.ModuleLoadErrorEventName, o, t.ModuleLoadErrorLoggers, t.ErrorWithStackTraceEventName, e.TelemetryCategory.CriticalError, void 0, void 0, void 0, null) }, t.ScriptVisualFilterActionEventName = "ScriptVisualFilterAction", t.ScriptVisualFilterAction = X, xe[t.ScriptVisualFilterActionEventName] = function (o) {
            return e.telemetryEventFactory(t.ScriptVisualFilterActionEventName, o, t.ScriptVisualFilterActionLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null);
        }, t.EXCrossFilterScriptVisualEventName = "PBI.EX.CrossFilterScriptVisual", t.EXCrossFilterScriptVisual = Y, xe[t.EXCrossFilterScriptVisualEventName] = function (o) { return e.telemetryEventFactory(t.EXCrossFilterScriptVisualEventName, o, t.EXCrossFilterScriptVisualLoggers, void 0, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, ["isError", "errorSource", "errorCode", "activityName", "activityId", "isCancelled", "pingLatency", "errorMessage", "folderId", "activeFolderCapacityId", "fluentUI", "baseVersion", "isFireAndForget"]) }, t.EXFilterScriptVisualEventName = "PBI.EX.FilterScriptVisual", t.EXFilterScriptVisual = Z, xe[t.EXFilterScriptVisualEventName] = function (o) { return e.telemetryEventFactory(t.EXFilterScriptVisualEventName, o, t.EXFilterScriptVisualLoggers, void 0, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, ["isError", "errorSource", "errorCode", "activityName", "activityId", "isCancelled", "pingLatency", "errorMessage", "folderId", "activeFolderCapacityId", "fluentUI", "baseVersion", "isFireAndForget"]) }, t.ExportToPowerPointEventName = "PBI.ExportToPowerPoint", t.ExportToPowerPoint = ee, xe[t.ExportToPowerPointEventName] = function (o) { return e.telemetryEventFactory(t.ExportToPowerPointEventName, o, t.ExportToPowerPointLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ExportToPdfEventName = "PBI.ExportToPdf", t.ExportToPdf = te, xe[t.ExportToPdfEventName] = function (o) { return e.telemetryEventFactory(t.ExportToPdfEventName, o, t.ExportToPdfLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ExportReportOptionsEventName = "PBI.ExportReportOptions", t.ExportReportOptions = oe, xe[t.ExportReportOptionsEventName] = function (o) { return e.telemetryEventFactory(t.ExportReportOptionsEventName, o, t.ExportReportOptionsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, ["renderOption"]) }, t.ClusterResolvedEventName = "PBI.ClusterResolved", t.ClusterResolved = ie, xe[t.ClusterResolvedEventName] = function (o) { return e.telemetryEventFactory(t.ClusterResolvedEventName, o, t.ClusterResolvedLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DashboardAndReportsAuditEventEventName = "PBI.DashboardAndReports.AuditEvent", t.DashboardAndReportsAuditEvent = re, xe[t.DashboardAndReportsAuditEventEventName] = function (o) { return e.telemetryEventFactory(t.DashboardAndReportsAuditEventEventName, o, t.DashboardAndReportsAuditEventLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.DownloadReportEventName = "PBI.DownloadReport", t.DownloadReport = ne, xe[t.DownloadReportEventName] = function (o) { return e.telemetryEventFactory(t.DownloadReportEventName, o, t.DownloadReportLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.HttpRetryRequestEventName = "PBI.Http.RetryRequest", t.HttpRetryRequest = ae, xe[t.HttpRetryRequestEventName] = function (o) { return e.telemetryEventFactory(t.HttpRetryRequestEventName, o, t.HttpRetryRequestLoggers, t.BaseEventEventName, void 0, void 0, void 0, void 0, ["clientAndServerRequestIdMismatch"]) }, t.HttpServiceRequestEventName = "PBI.Http.ServiceRequest", t.HttpServiceRequest = se, xe[t.HttpServiceRequestEventName] = function (o) { return e.telemetryEventFactory(t.HttpServiceRequestEventName, o, t.HttpServiceRequestLoggers, t.BaseEventEventName, void 0, void 0, void 0, void 0, null) }, t.SettingsUpdateGatewayEventName = "PBI.Settings.UpdateGateway", t.SettingsUpdateGateway = ce, xe[t.SettingsUpdateGatewayEventName] = function (o) { return e.telemetryEventFactory(t.SettingsUpdateGatewayEventName, o, t.SettingsUpdateGatewayLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsDeleteGatewayEventName = "PBI.Settings.DeleteGateway", t.SettingsDeleteGateway = le, xe[t.SettingsDeleteGatewayEventName] = function (o) { return e.telemetryEventFactory(t.SettingsDeleteGatewayEventName, o, t.SettingsDeleteGatewayLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsCreateDataSourceEventName = "PBI.Settings.CreateDataSource", t.SettingsCreateDataSource = de, xe[t.SettingsCreateDataSourceEventName] = function (o) { return e.telemetryEventFactory(t.SettingsCreateDataSourceEventName, o, t.SettingsCreateDataSourceLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsDeleteDataSourceEventName = "PBI.Settings.DeleteDataSource", t.SettingsDeleteDataSource = ue, xe[t.SettingsDeleteDataSourceEventName] = function (o) { return e.telemetryEventFactory(t.SettingsDeleteDataSourceEventName, o, t.SettingsDeleteDataSourceLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsBindModelToGatewayEventName = "PBI.Settings.BindModelToGateway", t.SettingsBindModelToGateway = pe, xe[t.SettingsBindModelToGatewayEventName] = function (o) { return e.telemetryEventFactory(t.SettingsBindModelToGatewayEventName, o, t.SettingsBindModelToGatewayLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsAddDataSourcePrincipalsEventName = "PBI.Settings.AddDataSourcePrincipals", t.SettingsAddDataSourcePrincipals = he, xe[t.SettingsAddDataSourcePrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.SettingsAddDataSourcePrincipalsEventName, o, t.SettingsAddDataSourcePrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsRemoveDataSourcePrincipalsEventName = "PBI.Settings.RemoveDataSourcePrincipals"; t.SettingsRemoveDataSourcePrincipals = me; xe[t.SettingsRemoveDataSourcePrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.SettingsRemoveDataSourcePrincipalsEventName, o, t.SettingsRemoveDataSourcePrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsAddGatewayPrincipalsEventName = "PBI.Settings.AddGatewayPrincipals", t.SettingsAddGatewayPrincipals = fe, xe[t.SettingsAddGatewayPrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.SettingsAddGatewayPrincipalsEventName, o, t.SettingsAddGatewayPrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsRemoveGatewayPrincipalsEventName = "PBI.Settings.RemoveGatewayPrincipals", t.SettingsRemoveGatewayPrincipals = ge, xe[t.SettingsRemoveGatewayPrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.SettingsRemoveGatewayPrincipalsEventName, o, t.SettingsRemoveGatewayPrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsUpdateCredentialsEventName = "PBI.Settings.UpdateCredentials", t.SettingsUpdateCredentials = ve, xe[t.SettingsUpdateCredentialsEventName] = function (o) { return e.telemetryEventFactory(t.SettingsUpdateCredentialsEventName, o, t.SettingsUpdateCredentialsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsOpenGatewayDatasourceUPNMappingPaneEventName = "PBI.Settings.OpenGatewayDatasourceUPNMappingPane", t.SettingsOpenGatewayDatasourceUPNMappingPane = ye, xe[t.SettingsOpenGatewayDatasourceUPNMappingPaneEventName] = function (o) { return e.telemetryEventFactory(t.SettingsOpenGatewayDatasourceUPNMappingPaneEventName, o, t.SettingsOpenGatewayDatasourceUPNMappingPaneLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsUpdateGatewayDatasourceUPNMappingEventName = "PBI.Settings.UpdateGatewayDatasourceUPNMapping", t.SettingsUpdateGatewayDatasourceUPNMapping = be, xe[t.SettingsUpdateGatewayDatasourceUPNMappingEventName] = function (o) { return e.telemetryEventFactory(t.SettingsUpdateGatewayDatasourceUPNMappingEventName, o, t.SettingsUpdateGatewayDatasourceUPNMappingLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.SettingsTestGatewayDatasourceUPNMappingEventName = "PBI.Settings.TestGatewayDatasourceUPNMapping", t.SettingsTestGatewayDatasourceUPNMapping = we, xe[t.SettingsTestGatewayDatasourceUPNMappingEventName] = function (o) { return e.telemetryEventFactory(t.SettingsTestGatewayDatasourceUPNMappingEventName, o, t.SettingsTestGatewayDatasourceUPNMappingLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.AppJavaScriptParseEventName = "PBI.App.JavaScriptParse", t.AppJavaScriptParse = Se, xe[t.AppJavaScriptParseEventName] = function (o) { return e.telemetryEventFactory(t.AppJavaScriptParseEventName, o, t.AppJavaScriptParseLoggers, t.TimedEventEventName, void 0, void 0, void 0, void 0, null) }, t.AppPreemptiveQueryDataEventName = "PBI.App.PreemptiveQueryData", t.AppPreemptiveQueryData = De, xe[t.AppPreemptiveQueryDataEventName] = function (o) { return e.telemetryEventFactory(t.AppPreemptiveQueryDataEventName, o, t.AppPreemptiveQueryDataLoggers, t.BaseEventEventName, void 0, void 0, void 0, void 0, null) }, t.GeocodingSummaryEventName = "PBI.GeocodingSummary", t.GeocodingSummary = Ce, xe[t.GeocodingSummaryEventName] = function (o) { return e.telemetryEventFactory(t.GeocodingSummaryEventName, o, t.GeocodingSummaryLoggers, t.BaseEventEventName, void 0, void 0, void 0, void 0, null) }, t.SyncServiceUpdateEventName = "PBI.SyncServiceUpdate", t.SyncServiceUpdate = Te, xe[t.SyncServiceUpdateEventName] = function (o) { return e.telemetryEventFactory(t.SyncServiceUpdateEventName, o, t.SyncServiceUpdateLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.LicenseEnforcementAccessCustomizedPropertiesEventName = "PBI.LicenseEnforcement.AccessCustomizedProperties", t.LicenseEnforcementAccessCustomizedProperties = Ee, xe[t.LicenseEnforcementAccessCustomizedPropertiesEventName] = function (o) { return e.telemetryEventFactory(t.LicenseEnforcementAccessCustomizedPropertiesEventName, o, t.LicenseEnforcementAccessCustomizedPropertiesLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }
    })(t = e.telemetry || (e.telemetry = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { switch (e) { case 0: return "Master"; case 1: return "PhonePortrait" }return null } e.getTelemetryCanvasLayout = t; var o = (function () { function e(e) { this.options = e } return e.prototype.start = function (e) { this.reject(), this.event = e() }, e.prototype.resolve = function () { this.event && (this.options && this.options.onResolve && this.options.onResolve(this.event), this.event.resolve(), this.event = void 0) }, e.prototype.reject = function (e) { this.event && (this.options && this.options.onReject && this.options.onReject(this.event, e), this.event.reject(e), this.event = void 0) }, e })(); e.TelemetryEventManager = o })(t = e.TelemetryHelper || (e.TelemetryHelper = {})) })(t = e.helpers || (e.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t, o) { var i = _.trim(e), r = _.trim(t); return _.isEmpty(i) ? o || "" : _.isEmpty(r) ? i : i + " " + r } e.getFullName = t })(t = e.UserInfoHelper || (e.UserInfoHelper = {})) })(t = e.helpers || (e.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { } return t.popupOAuthWindow = function (e) { var o = window; return window.parent !== window && (o = window.parent), t.popUpWindow(e, o) }, t.authResponse = function (e, t) { var o = e, i = $("iframe[name=contentProviderDialogFrame]")[0]; i && (o = i.contentWindow), o.postMessage(JSON.stringify({ OAuthResponse: t }), "*") }, t.popUpWindow = function (t, o) { var i = Math.max(Math.min(o.screen.width, e.constants.defaultPopupWindowWidth), o.screen.width / 2), r = Math.max(Math.min(o.screen.height, e.constants.defaultPopupWindowHeight), o.screen.height / 2), n = (o.outerWidth - i) / 2; n += window.screenX; var a = (o.outerHeight - r) / 2; return a += o.screenY, o.name = "mainWindow", o = o.open(t, "_blank", "top=" + a + ", left=" + n + ", screenX=" + n + ", screenY=" + a + ", width=" + i + ", height=" + r + ", resizable=yes"), jsCommon.BrowserUtility.isInternetExplorerBrowser() && null != o && (o.location.href = t), o }, t })(); t.OAuthPopupWindowHelper = o })(t = e.helpers || (e.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t() { var e = jsCommon.Utility.is64BitOperatingSystem(), t = i.clusterUri + "/powerbi/resource/powerbicompanionapp/"; return t += e ? "x64" : "x86" } function o(e, t) { return jsCommon.Utility.is64BitOperatingSystem() ? e : t } var i = window; e.getDownloadLink = t, e.getDownloadCenterLink = o })(t = e.powerBICompanionHelper || (e.powerBICompanionHelper = {})) })(t = e.helpers || (e.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { function i(t, o, i) { var r = this; return { loadNgModule: ["pbiLazyLoad", function (n) { return __awaiter(r, void 0, e.Promise, (function () { var e, r, a; return __generator(this, (function (s) { switch (s.label) { case 0: e = !0, r = 0, s.label = 1; case 1: return r < t.length ? n.isLoaded(t[r]) ? [3, 4] : (a = e, a ? [4, n.load({ name: t[r], namespace: o[r], dependency: { javascript: i[r], css: [i[r]] } })] : [3, 3]) : [3, 5]; case 2: a = s.sent(), s.label = 3; case 3: e = a, s.label = 4; case 4: return r++ , [3, 1]; case 5: return [2, e] } })) })) }] } } function r(e) { return { loadModule: ["moduleLoader", function (t) { return t.require(e) }] } } o.LoadAdminPortal = i(["powerbi.adminPortal"], ["powerbi.adminPortal"], ["adminPortal"]), o.LoadAppAuthoring = i(["powerbi.app.authoring"], ["powerbi.app.authoring"], ["appAuthoring"]), o.LoadCapacityAdmin = i(["powerbi.capacityAdmin"], ["powerbi.capacityAdmin"], ["capacityAdmin"]), o.LoadDatapoolAuthoring = i(["powerbi.cdsaModelActions", "powerbi.cdsaModelAuthoring"], ["powerbi.cdsaModelActions", "powerbi.cdsaModelAuthoring"], ["cdsaModelActions", "cdsaModelAuthoring"]), o.LoadEmbedCodesAdmin = i(["powerbi.embedCodes"], ["powerbi.embedCodes"], ["embedCodes"]), o.LoadGetData = i(["powerbi.getData"], ["powerbi.getData"], ["getData"]), o.LoadInsights = i(["powerbi.insights"], ["powerbi.insights"], ["insights"]), o.LoadQna = i(["powerbi.qnacore", "powerbi.qnaweb"], ["powerbi.explore.infonav", "powerbi.explore.infonav"], ["qnacore", "qnaweb"]), o.LoadMobileAuthoringModule = i(["powerbi.mobileAuthoring"], ["powerbi.mobileAuthoring"], ["mobileAuthoring"]), o.LoadPermissions = i(["powerbi.permissions"], ["powerbi.permissions"], ["permissions"]), o.LoadSettings = i(["powerbi.settings"], ["powerbi.settings"], ["settings"]), o.LoadJQueryUI = r(t.modules.JQueryUIModule) })(o = t.helpers || (t.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { for (var t = 0, i = e.height; t < i; t++)for (var r = 0, n = e.width; r < n; r++) { var a = 4 * (t * e.height + r), s = 180 + Math.atan2(t - e.height / 2, r - e.width / 2) * (180 / Math.PI), c = Math.sqrt(Math.pow(t - e.height / 2, 2) + Math.pow(r - e.width / 2, 2)) / 70; c = Math.min(1, c); var l = o(s, c); e.data[a + 0] = l[0], e.data[a + 1] = l[1], e.data[a + 2] = l[2], e.data[a + 3] = 255 } return e } function o(e, t) { var o, i = 1 * t, r = e / 60, n = i * (1 - Math.abs(r % 2 - 1)), a = 1 - i; return "undefined" == typeof e ? o = [0, 0, 0] : r < 1 ? o = [i, n, 0] : r < 2 ? o = [n, i, 0] : r < 3 ? o = [0, i, n] : r < 4 ? o = [0, n, i] : r < 5 ? o = [n, 0, i] : r <= 6 && (o = [i, 0, n]), [255 * (o[0] + a), 255 * (o[1] + a), 255 * (o[2] + a)] } function i(e, t, o) { var i, r, n, a = Math.floor(6 * e), s = 6 * e - a, c = o * (1 - t), l = o * (1 - s * t), d = o * (1 - (1 - s) * t); switch (a % 6) { case 0: i = o, r = d, n = c; break; case 1: i = l, r = o, n = c; break; case 2: i = c, r = o, n = d; break; case 3: i = c, r = l, n = o; break; case 4: i = d, r = c, n = o; break; case 5: i = o, r = c, n = l }return [Math.round(255 * i), Math.round(255 * r), Math.round(255 * n)] } function r(e, t, o) { return "#" + n(e) + n(t) + n(o) } function n(e) { var t = e.toString(16); return 1 === t.length ? "0" + t : t } function a(e, t) { var o = y(e); return null === o ? "" : t || 0 === t ? "rgba(" + o.r + "," + o.g + "," + o.b + "," + t + ")" : "rgb(" + o.r + "," + o.g + "," + o.b + ")" } function s(e) { return /^hsl\(\d{1,3}(,\s?\d{1,3}%){2}\)|^hsla\((\d{1,3}%?,\s?){3}(1|1.0|0|0?\.\d+)\)$/gi.test(e) } function c(e) { return /^rgb\(\d{1,3}(,\s?\d{1,3}){2}\)|^rgba\((\d{1,3},\s?){3}(1|1.0|0|0?\.\d+)\)$/gi.test(e) } function l(e, t) { if (d(e)) return a(e, t); if (s(e)) { var o = w(e), i = o.a || 0 === o.a ? o.a : t; return "hsla(" + o.h + "," + o.s + "%," + o.l + "%," + i + ")" } if (c(e)) { var r = b(e), i = r.a || 0 === r.a ? r.a : t; return "rgba(" + r.r + "," + r.g + "," + r.b + "," + i + ")" } return "" } function d(e) { return null != e && e.match(D) && e.match(D).length > 0 } function u(e) { return d(e) ? e.substr(1).toUpperCase() : e } function p(e) { return h(e) ? T : m(e) ? C : E } function h(e) { return "#FFFFFF" === e || "#FFF" === e } function m(e) { return "#000000" === e || "#000" === e } function f(e) { return d(e) ? e : (e = "#" + e, d(e) ? e : null) } function g(e) { return 1 - e / 100 } function v(e) { var t = y(e); return (.299 * t.r + .587 * t.g + .114 * t.b) / 255 } function y(e) { var t = /^#?([a-f\d])([a-f\d])([a-f\d])$/i; e = e.replace(t, (function (e, t, o, i) { return t + t + o + o + i + i })); var o = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e); return o ? { r: parseInt(o[1], 16), g: parseInt(o[2], 16), b: parseInt(o[3], 16) } : null } function b(e) { var t = /^rgba?\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})(,\s?(1|1.0|0)|,\s?(0?\.\d+))?\)$/i.exec(e); if (!t) return null; var o; t[5] && (o = parseFloat(t[5])), t[6] && (o = parseFloat(t[6])); var i = parseInt(t[1], 10); i = i > 255 ? 255 : i; var r = parseInt(t[2], 10); r = r > 255 ? 255 : r; var n = parseInt(t[3], 10); return n = n > 255 ? 255 : n, { r: i, g: r, b: n, a: o } } function w(e) { var t = /^hsla?\((\d{1,3}),\s?(\d{1,3})%,\s?(\d{1,3})%(,\s?(1|1.0|0)|,\s?(0?\.\d+))?\)$/i.exec(e); if (!t) return null; var o; t[5] && (o = parseFloat(t[5])), t[6] && (o = parseFloat(t[6])); var i = parseInt(t[1], 10); i %= 360; var r = parseInt(t[2], 10); r = r > 100 ? 100 : r; var n = parseInt(t[3], 10); return n = n > 100 ? 100 : n, { h: i, s: r, l: n, a: o } } function S(e, t, o) { e /= 255, t /= 255, o /= 255; var i, r, n = Math.max(e, t, o), a = Math.min(e, t, o), s = n, c = n - a; if (r = 0 === n ? 0 : c / n, n === a) i = 0; else { switch (n) { case e: i = (t - o) / c + (t < o ? 6 : 0); break; case t: i = (o - e) / c + 2; break; case o: i = (e - t) / c + 4 }i /= 6 } return [i, r, s] } var D = "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$", C = [.6, .4, .2, .1, 0], T = [-.1, -.2, -.3, -.5, -.6], E = [.6, .4, .2, -.25, -.5]; e.getColorWheelImage = t, e.hsvToRgb = i, e.rgbToHex = r, e.hexToRGBString = a, e.isHslOrHslaString = s, e.isRgbOrRgbaString = c, e.applyTransparency = l, e.isHexColor = d, e.getHexWithoutPound = u, e.getShadePctSequence = p, e.isWhiteHexColor = h, e.isBlackHexColor = m, e.ensureValidHex = f, e.convertTransparencyToOpacity = g, e.computeColorBrightness = v, e.convertHexToRGBComponents = y, e.parseRgbaComponents = b, e.parseHslaComponents = w, e.rgbToHsv = S })(t = e.ColorUtility || (e.ColorUtility = {})) })(t = e.utils || (e.utils = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; jsCommon.DateExtensions; !(function (e) { function t(e, t) { var o = moment().diff(e), i = moment.duration(o), r = Math.floor, n = r(i.asYears()); if (n > 1) return t.format("RelativeDate_YearsAgo", [n]); if (1 === n) return t.get("RelativeDate_YearAgo"); var a = r(i.asMonths()); if (a > 1) return t.format("RelativeDate_MonthsAgo", [a]); if (1 === a) return t.get("RelativeDate_MonthAgo"); var s = r(i.asDays()); if (s > 1) return t.format("RelativeDate_DaysAgo", [s]); if (1 === s) return t.get("RelativeDate_DayAgo"); var c = r(i.asHours()); if (c > 1) return t.format("RelativeDate_HoursAgo", [c]); if (1 === c) return t.get("RelativeDate_HourAgo"); var l = r(i.asMinutes()); if (l > 1) return t.format("RelativeDate_MinutesAgo", [l]); if (1 === l) return t.get("RelativeDate_MinuteAgo"); var d = r(i.asSeconds()); return d >= 30 ? t.format("RelativeDate_SecondsAgo", [d]) : t.get("RelativeDate_Now") } e.getPrettyRelativeDate = t })(t = e.DateFormatter || (e.DateFormatter = {})) })(t = e.utils || (e.utils = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t, o = "dropdownItemsLegacy.html"; !(function (e) { function t(e, t, i, r, n, a, s) { var c = { overlayName: t, menuItems: i, onItemSelected: n, overlayClass: r, onClose: s }; e.showMenu(c, o, a) } e.showLegacyDropdownItems = t })(t = e.DropdownUtils || (e.DropdownUtils = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t, o, i) { this.callback = i, this.plainTextBytes = this.toUTF8Array(e), this.publicKey = t, this.entropy = o, this.segments = Math.ceil(this.plainTextBytes.length / 85), this.currentSegment = 0, this.encryptedBytes = new Uint8Array(128 * this.segments) } return e.create = function (t, o, i, r, n) { return n.require({ javascript: "msrcrypto" }).then((function () { return new e(t, o, i, r) })) }, e.prototype.RSAEncrypt = function () { var e = this, t = this.toSupportedRSAPublicKey(this.publicKey), o = this.toSupportedArray(t); msrCrypto.subtle.forceSync = !0, msrCrypto.initPrng && msrCrypto.initPrng(this.entropy), msrCrypto.subtle.importKey("jwk", o, { name: "RSA-OAEP", hash: { name: "sha-1" } }).oncomplete = function (t) { return e.rsaPublicKeyImportComplete(t) } }, e.generateEntropy = function () { for (var e = [], t = 0; t < 48; t++)e.push(Math.floor(256 * Math.random())); return e }, e.prototype.rsaPublicKeyImportComplete = function (e) { this.publicKeyHandle = e.target.result, this.rsaEncryption() }, e.prototype.rsaEncryption = function () { var e = this; msrCrypto.subtle.encrypt({ name: "RSA-OAEP", hash: { name: "sha-1" } }, this.publicKeyHandle, this.plainTextBytes.subarray(85 * this.currentSegment, 85 * (this.currentSegment + 1))).oncomplete = function (t) { return e.rsaEncryptionSegmentComplete(t) } }, e.prototype.rsaEncryptionSegmentComplete = function (e) { this.encryptedBytes.set(new Uint8Array(e.target.result), 128 * this.currentSegment), this.currentSegment++ , this.currentSegment < this.segments ? this.rsaEncryption() : this.callback(this.arrayToBase64String(this.encryptedBytes)) }, e.prototype.toSupportedRSAPublicKey = function (e) { return '{                 "kty" : "RSA",                 "extractable" : true,                 "n" : "' + e + '",                 "e" : "AQAB"             }' }, e.prototype.arrayToBase64String = function (e) { for (var t = "", o = e.length, i = 0; i < o; i++)t += String.fromCharCode(e[i]); return window.btoa(t) }, e.prototype.toSupportedArray = function (e) { var t = "undefined" != typeof Uint8Array, o = Object.prototype.toString.call(e); switch (o = o.substring(8, o.length - 1)) { case "Array": return t ? new Uint8Array(e) : e; case "ArrayBuffer": return new Uint8Array(e); case "Uint8Array": return e; case "Uint16Array": case "Uint32Array": return new Uint8Array(e); case "String": for (var i = e.length, r = t ? new Uint8Array(i) : new Array(i), n = 0; n < i; n++)r[n] = e.charCodeAt(n); return r; default: throw new Error("toSupportedArray : unsupported data type " + o) } }, e.prototype.toUTF8Array = function (e) { for (var t = [], o = 0; o < e.length; o++) { var i = e.charCodeAt(o); i < 128 ? t.push(i) : i < 2048 ? t.push(192 | i >> 6, 128 | 63 & i) : i < 55296 || i >= 57344 ? t.push(224 | i >> 12, 128 | i >> 6 & 63, 128 | 63 & i) : (o++ , i = 65536 + ((1023 & i) << 10 | 1023 & e.charCodeAt(o)), t.push(240 | i >> 18, 128 | i >> 12 & 63, 128 | i >> 6 & 63, 128 | 63 & i)) } var r = new Uint8Array(t.length); return r.set(t, 0), r }, e })(); e.EncryptionContext = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t, o = /[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/; !(function (e) { function t(e, t) { var o = n(); return "" + (e || "") + o + (t || "") } function i(t, o, i) { for (var r, n = 0, a = 1e3; (void 0 === r || t[r]) && !(++n > a);)r = e.generateId(o, i); return r } function r(e) { if (_.isEmpty(e)) return !1; if (36 !== e.length) return !1; var t = e.match(o); return !_.isEmpty(t) && 1 === t.length } function n() { var e = (new Date).getTime(); return "undefined" != typeof performance && "function" == typeof performance.now && (e += performance.now()), "xxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g, (function (t) { var o = e + 16 * Math.random() & 15 | 0; return e >>= 4, o.toString(16) })) } e.generateId = t, e.generateUniqueId = i, e.isGuid = r })(t = e.IdUtility || (e.IdUtility = {})) })(t = e.utils || (e.utils = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { _.mixin({ noopTrue: function () { return !0 } }), _.mixin({ noopFalse: function () { return !1 } }) })(t = e.LodashExtensions || (e.LodashExtensions = {})) })(t = e.utils || (e.utils = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.items = [], this.listeners = [] } return e.prototype.addItem = function (e) { if (null != e && !_.includes(this.items, e)) { this.items.push(e); for (var t = this.listeners, o = 0, i = t; o < i.length; o++) { var r = i[o]; r.onAdded && r.onAdded(e) } } }, e.prototype.deleteItems = function (e) { if (!e) return []; if (_.isEmpty(this.items)) return []; var t = _.remove(this.items, e); if (!_.isEmpty(t)) { var o = this.listeners; if (!_.isEmpty(o)) for (var i = 0, r = t; i < r.length; i++)for (var n = r[i], a = 0, s = o; a < s.length; a++) { var c = s[a]; c.onDeleted && c.onDeleted(n) } } return t }, e.prototype.setItems = function (e) { this.items = e; for (var t = this.listeners, o = 0, i = t; o < i.length; o++) { var r = i[o]; r.onReset && r.onReset() } }, e.prototype.subscribe = function (e) { this.listeners.push(e) }, e.prototype.unsubscribe = function (e) { _.remove(this.listeners, e) }, e })(); e.NotifyCollection = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { return { dsrV2: e.dsrV2 || e.dsrV2_Staging, enableCellLevelFormatting: e.cellLevelFormatting, queryCancellation: e.queryCancellation, telemetryV2: e.telemetryV2 } } e.getDsrReaderSwitches = t })(t = e.utils || (e.utils = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { var t = e.offset(); return { left: t.left, top: t.top, width: e.outerWidth(!0), height: e.outerHeight(!0) } } e.getAnchorDimensions = t })(t = e.OverlayUtils || (e.OverlayUtils = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.maxKeysCount = e, this.keys = [], this.valuesMap = {} } return e.prototype.add = function (e, t) { var o = this.keys, i = this.valuesMap, r = this.hasKey(e); i[e] = t, r || (o.push(e), o.length > this.maxKeysCount && (delete i[o[0]], o.shift())) }, e.prototype.get = function (e) { return this.valuesMap[e] }, e.prototype.hasKey = function (e) { return void 0 !== this.valuesMap[e] }, e })(); e.RollingHashSet = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { if (e) { var t, o = e.value(); if (e.firstChange ? (e.firstChange = !1, t = !0) : e.equal(o, e.oldValue) || (t = !1), void 0 !== t) { var i = e.oldValue; e.oldValue = e.copy(o), e.onChange(o, i, t) } } } function o(e, t) { if (!e || !t) return e === t; var o = e.length; if (o !== t.length) return !1; for (var i = o; i-- > 0;)if (e[i] !== t[i]) return !1; return !0 } var i = (function () { function e() { this.watches = {} } return e.prototype.has = function (e) { return null != this.watches[e] }, e.prototype.add = function (e, t, i, r) { var n, a; r && 2 === r.mode ? (n = function (e, t) { return _.isEqual(e, t) }, a = function (e) { return _.cloneDeep(e) }) : r && 1 === r.mode ? (n = function (e, t) { return o(e, t) }, a = function (e) { return _.clone(e) }) : (n = function (e, t) { return e === t }, a = function (e) { return e }), this.watches[e] = { id: e, value: t, onChange: i, firstChange: !0, equal: n, copy: a } }, e.prototype.remove = function (e) { delete this.watches[e] }, e.prototype.doCheck = function () { _.forEach(this.watches, t) }, e })(); e.Watcher = i })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.Light = 0] = "Light", e[e.Dark = 1] = "Dark" })(t = e.TooltipTheme || (e.TooltipTheme = {})) })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { e.ExploreExplorationCreation = "Explore_ExplorationCreation", e.ExportExcelEmptyColumnName = "ExportExcel_EmptyColumnName", e.ModelFailednoErrorInfo = "modelFailednoErrorInfo", e.ModelSizeExceedsSharedCapacityLimit = "ModelSizeExceedsSharedCapacityLimit", e.ModelWithIncrementalRefreshIsNotDownloadable = "ModelWithIncrementalRefreshIsNotDownloadable", e.UnsupportedModelWithRefreshPolicyInSharedCapacity = "UnsupportedModelWithRefreshPolicyInSharedCapacity", e.DatasetsWithCompositeModelsNotSupported = "DatasetsWithCompositeModelsNotSupported", e.PowerBIEntityNotFound = "PowerBIEntityNotFound", e.PowerBINotAuthorizedException = "PowerBINotAuthorizedException", e.RS_ErrorOpeningConnection = "rsErrorOpeningConnection", e.ServicePlanDoesNotSupportGroups = "ServicePlanDoesNotSupportGroups", e.TokenExpired = "TokenExpired", e.UserNotLicensed = "UserNotLicensed", e.NetworkConnectionIssue = "NetworkConnectionIssue", e.NavigateAway = "NavigateAway" })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.scope = e, this.services = t, this.scope.localizedExpandedTitle = this.services.localizationService.get(this.scope.expandedTitleLocalizationId), this.scope.localizedCollapsedTitle = this.services.localizationService.get(this.scope.collapsedTitleLocalizationId) } return e.createOptions = function () { return { additionalServices: ["localizationService"] } }, e })(); e.CollapsibleSectionController = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e })(); e.ConfirmationModalDialogController = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var o; !(function (o) {
            var i, r = 9998, n = 2, a = { year: "2-digit", month: "numeric", day: "numeric", hour: "numeric", minute: "numeric" }, s = { year: "2-digit", month: "numeric", day: "numeric" }; !(function (o) {
                function i(e) { for (var t = e.refreshConnections, o = void 0 !== t ? t.length : 0, i = 0; i < o; i++)if (t[i].onpremGatewayRequired) return !0; return !1 } function c(e) { return i(e) || l(e) } function l(e) { return void 0 === e.onPremModelConnectionString && e.dataCacheMode !== V.DirectQuery } function d(e) { var t = j.getDateFromWcfJsonString(e, !0); return e && !t && (t = new Date(0)), t } function u(e, o) { void 0 === o && (o = !0); var i = d(e); return !o || !i || i.getFullYear() > r || i.getFullYear() < n ? t.localize.get("ManageDatasets_NextRefresh_NA") : i.toLocaleString() } function p(e, t) { void 0 === t && (t = ""); var i = o.convertRefreshTimeToJsDateTime(e); return !i || i.getFullYear() > r || i.getFullYear() < n ? t : i.toLocaleDateString(void 0, s) } function h(e, t) { void 0 === t && (t = ""); var i = o.convertRefreshTimeToJsDateTime(e); return !i || i.getFullYear() > r || i.getFullYear() < n ? t : i.toLocaleString(void 0, a) } function m(e, o) { for (var i = new Array, r = 0, n = o; r < n.length; r++) { var a = n[r], s = g(e, a); s.datasourceId = a.dataSourceId, s.dataSourceObjectId = a.dataSourceObjectId, s.gatewayId = a.gatewayId, s.gatewayObjectId = a.gatewayObjectId, s.testConnectionState = a.credentialDetails ? t.models.TestConnectionState.NotStart : t.models.TestConnectionState.NotSpecified, s.alreadyExecutedTestConnection = !1, i.push(s) } return i } function f(e) { return _.map(e, (function (e) { return B[e] })) } function g(e, t) { var i = t.credentialDetails, r = { modelId: e, datasourceId: t.dataSourceId, dataSourceObjectId: t.dataSourceObjectId, gatewayId: t.gatewayId, gatewayObjectId: t.gatewayObjectId, name: t.dataSourceName, oAuth2URL: t.oAuth2Endpoint, oAuth2Nonce: t.oAuth2Nonce, datasourceType: t.dataSourceType, credentialTypes: t.supportedAuthenticationTypes, credentialTypesNames: f(t.supportedAuthenticationTypes), connectionStringGeneralProperties: v(t.connectionDetails), onpremGatewayRequired: t.onPremGatewayRequired, singleSignOnType: t.singleSignOnType, skipTestConnection: !!i && i.skipTestConnection, selectedCredentialType: i ? i.credentialType : void 0, selectedPrivacyLevel: i ? i.privacyLevel : void 0 }; return r.fullName = o.getDatasourceFullName(r), r.displayName = o.getDatasourceDisplayName(r), r } function v(e) { var t = new Array; if (e) { var o = JSON.parse(e); for (var i in o) { var r = { name: i, value: o[i] }; t.push(r) } } return t } function y(e) { return null != e.server ? [{ name: "Server", value: e.server }, { name: "Database", value: e.database }] : null != e.path ? [{ name: "path", value: e.path }] : [{ name: "extensionDataSourceKind", value: e.extensionDataSourceKind }, { name: "extensionDataSourcePath", value: e.extensionDataSourcePath }] } function b(e, i) {
                    var r = JSON.parse(i.connectionDetails), n = []; _.includes(i.supportedAuthenticationTypes, B.Basic) && n.push(B.Basic), _.includes(i.supportedAuthenticationTypes, B.OAuth2) && n.push(t.contracts.gateway.CredentialType.OAuth2), i.supportedAuthenticationTypes = n; var a = {
                        modelId: e, datasourceId: i.dataSourceId, dataSourceObjectId: i.dataSourceObjectId, name: t.contracts.gateway.DataSourceType[i.dataSourceType], oAuth2URL: i.oAuth2Endpoint, oAuth2Nonce: i.oAuth2Nonce, datasourceType: i.dataSourceType, credentialTypes: i.supportedAuthenticationTypes, credentialTypesNames: f(i.supportedAuthenticationTypes), connectionStringGeneralProperties: y(r), onpremGatewayRequired: !1, gatewayId: i.gatewayId, gatewayObjectId: i.gatewayObjectId, isCloudDirectQuery: !0, testConnectionErrorMessage: i.credentialDetails ? null : t.localize.get("SettingsDataset_Error_CredentialsNotFound"), testConnectionState: i.credentialDetails ? t.models.TestConnectionState.Passed : t.models.TestConnectionState.Failed, alreadyExecutedTestConnection: !0, singleSignOnType: i.singleSignOnType
                    }; return a.fullName = o.getDatasourceFullName(a), a.displayName = o.getDatasourceDisplayName(a), a
                } function w(e) { return { importAndRefreshBehavior: e.importAndRefreshBehavior, refreshEnabled: e.refreshEnabled, refreshFrequency: $(e), refreshDays: k(e.weekDays), refreshTimeWindowIndex: A(e.executionTime), refreshTimesHourly: o.getTimeProWindowIndexFromExecutionTime(e.executionTimeHourly), refreshTimeZoneId: e.localTimeZoneId, sendFailureEmail: !0, isRefreshable: e.isRefreshable, refreshNotificationEnabled: e.refreshNotificationEnabled, refreshEmails: { emailsList: void 0, emailValidationError: "", emailValidationWarning: "" } } } function S(e) { var i = e.refreshSchedule, r = w(i); return 10080 === r.refreshFrequency && i.refreshFrequency && i.refreshFrequency === 1440..toString() && 9 === e.contentProviderId && (r.refreshFrequency = 1440, r.refreshEnabled = !0, e.nextRefreshTime && ((!r.refreshTimesHourly || r.refreshTimesHourly.length < 1) && (r.refreshTimesHourly = M(e.nextRefreshTime)), r.refreshTimeWindowIndex && 0 !== r.refreshTimeWindowIndex || (r.refreshTimeWindowIndex = F(e.nextRefreshTime)))), new t.models.SettingsDatasetModel(e, e.id, e.displayName, e.description, 4 === e.lastRefreshStatus || 2 === e.lastRefreshStatus, _.isEmpty(e.refreshHistories) ? "" : e.refreshHistories[0].friendlyErrorMessage, o.convertRefreshTimeToJsDateTime(e.nextRefreshTime).toString(), r, e.parameters) } function D(e, o) { var i = 1440 === e.refreshFrequency, r = 10080 === e.refreshFrequency, n = null; i ? n = t.constants.allWeekDays : r && (n = x(e.refreshDays)); var a = null; return i || r || (a = e.refreshFrequency.toString()), { importAndRefreshBehavior: e.importAndRefreshBehavior, refreshEnabled: e.refreshEnabled, isDaily: 1440 === e.refreshFrequency, refreshFrequency: a, weekDays: n, executionTime: o ? L(6 * e.refreshTimeWindowIndex) : null, executionTimeHourly: o ? null : R(e.refreshTimesHourly), localTimeZoneId: e.refreshTimeZoneId, refreshNotificationEnabled: e.refreshNotificationEnabled, refreshContacts: e.refreshEmails.emailsList ? e.refreshEmails.emailsList.inputUserList : [] } } function C(e) { for (var t = new Array, i = 0, r = e; i < r.length; i++) { var n = r[i], a = o.convertModelToDataset(n); t.push(a) } return t } function T(e) { switch (e.datasourceType) { case G.AnalysisServices: case G.Oracle: case G.SqlServer: case G.MySql: case G.PostgreSql: case G.Sybase: case G.Teradata: case G.DB2: var t = void 0, o = void 0, i = e.connectionStringGeneralProperties; if (!i) return G[e.datasourceType]; for (var r = i.length, n = 0; n < r; n++) { var a = i[n]; "database" === a.name ? t = a.value : "server" === a.name && (o = a.value) } return t || o ? (t ? t : "") + (t && o ? "-" : "") + (o ? o : "") : G[e.datasourceType]; case G.Folder: case G.File: var s = _.find(e.connectionStringGeneralProperties, { name: "path" }); return jsCommon.Utility.extractFileNameFromPath(s.value); case G.Extension: return _.find(e.connectionStringGeneralProperties, { name: "extensionDataSourceKind" }).value; case G.ActiveDirectory: case G.AzureTable: case G.AzureBlob: case G.Web: case G.OData: case G.SharePoint: case G.GoogleAnalytics: case G.Exchange: case G.Facebook: case G.HDInsight: case G.AzureMarketplace: case G.Salesforce: case G.SAPBW: case G.SAP: case G.OleDb: case G.ODBC: return G[e.datasourceType]; default: return e.name } } function E(e) { switch (+e.datasourceType) { case G.Folder: case G.File: return _.find(e.connectionStringGeneralProperties, { name: "path" }).value; default: return T(e) } } function I(e) { if (!_.isEmpty(e)) for (var t = 0, o = e; t < o.length; t++) { var i = o[t]; i.displayName = T(i), i.fullName = E(i) } } function P(e) { if (e) { if (null != e.clientCategory) return e.clientCategory; switch (e.category) { case O.BuiltIn: case O.Services: case O.ServiceApp: return H.Service; case O.Organizational: case O.OrganizationalApp: case O.OrganizationalTemplate: case O.OrganizationalTemplateApp: return H.Organizational } } } function k(e) { for (var t = new Array, o = 0; o < 7; o++)t[o] = 1 === (1 & e), e >>= 1; return t } function x(e) { for (var t = 0, o = 6; o >= 0; o--)t <<= 1, t = e[o] === !0 ? 1 | t : t; return t } function R(e) { for (var t = [], o = e.length, i = 0; i < o; i++) { var r = e[i], n = (r.refreshHourIndex + 1) % 12 + 12 * r.refreshAmPmIndex, a = 30 * r.refreshMinuteIndex; t.push(n.toString() + ":" + (0 === a ? "00" : a.toString()) + ":00") } return JSON.stringify(t) } function A(o) { var i; if (o) { var r = o.split(":"), n = parseInt(r[0], 10); n >= 0 && n < 24 ? i = Math.floor(n / 6) : (e.common.errorService.error(t.localize.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeInvalidHour"), "SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimeInvalidHour"), i = 0) } else i = 0; return i } function L(e) { var t = new Date; t.setHours(e), t.setMinutes(0), t.setSeconds(0); var o = t.toTimeString(), i = o.indexOf(" "); return o.substr(0, i) } function M(e) { var t = o.convertRefreshTimeToJsDateTime(e), i = t.getMinutes(), r = t.getHours(); return i > 30 ? (r++ , i = 0, r > 24 && (r -= 24)) : i = 30, [{ refreshHourIndex: (r + 11) % 12, refreshMinuteIndex: Math.floor(i / 30), refreshAmPmIndex: Math.floor(r / 12), isIncomplete: !1, isDuplicate: !1 }] } function F(e) { var t = o.convertRefreshTimeToJsDateTime(e), i = t.getHours(); return t.getMinutes() > 30 && (i++ , i > 24 && (i -= 24)), i } function N(o) { var i = []; if (o) { try { var r = JSON.parse(o) } catch (o) { return void e.common.errorService.error(t.localize.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidJsonFormat"), "SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidJsonFormat") } for (var n = r.length, a = 0; a < n; a++) { var s = r[a], c = s.split(":"), l = parseInt(c[0], 10), d = parseInt(c[1], 10); if (l < 0 || l >= 24) e.common.errorService.error(t.localize.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidHour"), "SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidHour"); else if (d < 0 || d >= 60) e.common.errorService.error(t.localize.get("SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidMinute"), "SettingsDataset_Error_InvalidDataFromServer_RefreshSettings_ExecutionTimesHourlyInvalidMinute"); else { var u = { refreshHourIndex: (l + 11) % 12, refreshMinuteIndex: Math.floor(d / 30), refreshAmPmIndex: Math.floor(l / 12), isIncomplete: !1, isDuplicate: !1 }; i.push(u) } } } return i } function z(e, t) { return _.isEmpty(e.displayName) ? e.qnaSupported : e.qnaSupported && (e.dataCacheMode === V.Import || 2 === e.pushDataVersion || t.qnaSupportDQEnabled && e.powerBIQnaEnabled) && (!e.onPremModelConnectionString || t.qnaSupportOnPremEnabled && e.powerBIQnaEnabled) } function U(e, t) { for (var o = [], i = 0, r = e.monikers; i < r.length; i++) { var n = r[i], a = _.map(n.monikerDataSources, (function (e) { return e.dataSourceObjectId })); _.every(a, (function (e) { return e })) && o.push.apply(o, a) } return _.filter(e.datasources, (function (e) { return (e.gatewayObjectId === t || e.onPremGatewayRequired === !1) && _.includes(o, e.dataSourceObjectId) })) } function $(e) { switch (parseInt(e.refreshFrequency, 10)) { case 15: return 15; case 30: return 30; case 60: return 60; case 120: return 120; case 180: return 180 }return e.isDaily ? 1440 : 10080 } var O = t.contracts.ContentProviderCategory, H = t.contracts.ContentProviderClientCategory, B = t.contracts.gateway.CredentialType, V = t.contracts.DataCacheModeType, G = t.contracts.gateway.DataSourceType, j = jsCommon.Utility; o.onpremGatewayRequired = i, o.onpremGatewayAllowed = c, o.canScheduleRefresh = l, o.convertRefreshTimeToJsDateTime = d, o.convertRefreshTimeToLocaleString = u, o.getLocaleDateStringFromRefreshTime = p, o.getLocaleStringFromRefreshTime = h, o.convertDMTSDiscoverDatasourcesResponseToDatasources = m, o.convertCredentialTypeToString = f, o.convertDMTSDatasourceToDatasetDatasource = g, o.convertConnectionDetailsToConnectionStringGeneralProperties = v, o.getConnectionStringGeneralProperties = y, o.convertCloudDirectQueryDatasourceToDatasetDatasource = b, o.getRefreshSettings = w, o.convertModelToDataset = S, o.convertSettingModelToRefreshScheduleContract = D, o.convertModelsToDatasets = C, o.getDatasourceDisplayName = T, o.getDatasourceFullName = E, o.getDatasourceNames = I, o.getContentProviderClientCategory = P, o.convertModelWeekdaysToDatasetWeekdays = k, o.convertDatasetWeekdaysToModelWeekdays = x, o.getExecutionTimesHourlyFromTimeWindowIndex = R, o.getTimeProWindowIndexFromExecutionTime = N, o.getIsQnaSupported = z, o.getEffectiveDatasourcesFromDiscoverDatasourceResponse = U
            })(i = o.ModelConverterHelper || (o.ModelConverterHelper = {}))
        })(o = t.helpers || (t.helpers = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i = e.common.constants.myWorkspaceFolderId, r = jsCommon.StringExtensions, n = window, a = (function () { function e(e) { this.redirectPath = e } return e.prototype.getAppRedirectUrl = function (e, t, o, i) { var r = { action: "OpenApp", groupObjectId: e, context: i, appId: t, ctid: o }; return this.getRedirectUrl(r) }, e.prototype.getDashboardRedirectUrl = function (e, t, o, i, r) { var n = { action: "OpenDashboard", context: r, groupObjectId: e, appId: t, dashboardObjectId: o, ctid: i }; return this.getRedirectUrl(n) }, e.prototype.getReportRedirectUrl = function (e, t, o, i, r, n, a) { var s = { action: 1 === a ? "OpenRdlReport" : "OpenReport", context: n, groupObjectId: e, appId: t, reportObjectId: o, ctid: r }; return _.isEmpty(i) || (s.reportPage = i), this.getRedirectUrl(s) }, e.prototype.getWorkbookRedirectUrl = function (e, t, o, i, r) { var n = { action: "OpenWorkbook", context: r, groupObjectId: e, appId: t, workbookUniqueId: o, ctid: i }; return this.getRedirectUrl(n) }, e.prototype.getTileRedirectUrl = function (e, t, o, i, r) { var n = { action: "OpenTile", context: r, groupObjectId: e, appId: t, dashboardObjectId: o, tileObjectId: i }; return this.getRedirectUrl(n) }, e.prototype.getServiceAppInstallRedirectUrl = function (e, t, o) { var i = { action: "InstallApp", appId: e, packageKey: t.replace("=", ""), ownerId: o }; return this.getRedirectUrl(i, n.feUrl) }, e.prototype.getRedirectUrl = function (e, o) { e = this.removeEmptyParams(e); var i = o || t.httpService.frontendUri; return r.format("{0}/{1}?{2}", i, this.redirectPath, $.param(e)) }, e.prototype.removeEmptyParams = function (e) { var t = []; return (_.isEmpty(e.groupObjectId) || e.groupObjectId === i) && t.push("groupObjectId"), _.isEmpty(e.appId) && t.push("appId"), _.isEmpty(e.context) && t.push("context"), _.isEmpty(e.ctid) && t.push("ctid"), t.length > 0 && (e = _.omit(e, t)), e }, e.WebRedirectUrlHelper = new e("Redirect"), e.MobileRedirectUrlHelper = new e("MobileRedirect.html"), e })(); o.RedirectUrlHelper = a })(o = t.helpers || (t.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t(t, o) { var i = this; this.services = o, this.scope = t, this.scope.gridLayoutService = this.services.gridLayout, this.scope.$watch("gridLayoutService.strategy", (function () { i.scope.gridLayoutContainer.onGridLayoutChanged(e.models.gridLayoutConstants.changeType.refresh) })) } return t.createOptions = function () { return { additionalServices: ["gridLayout"] } }, t })(); t.GridLayoutController = o })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.scope = e, this.scope.close = function () { return t.onClose() }, this.scope.confirm = function () { return t.onConfirm() }, this.scope.cancel = function () { return t.onCancel() } } return e.prototype.onClose = function () { this.scope.onCloseAction && this.scope.onCloseAction() }, e.prototype.onConfirm = function () { this.scope.onConfirmAction && this.scope.onConfirmAction(), this.scope.viewModel.autoCloseDialogOnConfirmButtonSelected && this.onClose() }, e.prototype.onCancel = function () { this.scope.onCancelAction && this.scope.onCancelAction() }, e })(); e.ModalDialogController = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t(e, o) { var i = this; this.scope = e, this.services = o, this.scope.onInternalBlur = function () { return i.onInternalBlur() }, this.scope.onInternalFocus = function () { return i.onInternalFocus() }, this.scope.onInternalKeyDown = function (e) { return i.onInternalKeyDown(e) }, this.scope.onInternalChange = function () { return i.onInternalChange() }, this.scope.maxInputLength = this.scope.maxInputLength || t.defaultMaxLength, this.scope.placeholder = this.scope.placeholder || t.defaultPlaceholder, this.scope.inputValue = this.scope.inputValue || "", this.scope.forceComplete = null == this.scope.forceComplete || this.scope.forceComplete, this.scope.clearAfterComplete = null == this.scope.clearAfterComplete || this.scope.clearAfterComplete, this.scope.emitOnBlur = null == this.scope.emitOnBlur || this.scope.emitOnBlur } return t.prototype.isInputValid = function () { var e = this.scope.inputValue; return this.scope.validate ? this.scope.validate(e) : this.internalValidate(e) }, t.prototype.onInternalFocus = function () { var e = this; this.services.timeout((function () { e.scope.isFocused = !0 })) }, t.prototype.onInternalBlur = function () { var t = this; this.scope.textInputStyle = "", this.cancelInput ? (this.scope.inputValue = "", this.cancelInput = !1) : this.onInternalInputComplete(), this.scope.emitOnBlur && this.scope.$emit(e.constants.textInputOnBlurEventName), this.services.timeout((function () { t.scope.isFocused = !1 })) }, t.prototype.onInternalKeyDown = function (e) { var t = this; switch (e.keyCode) { case 13: this.services.timeout((function () { t.scope.isFocused = !1 })); break; case 27: this.services.timeout((function () { t.cancelInput = !0, t.scope.isFocused = !1, t.scope.cancel && t.scope.cancel() })) } }, t.prototype.onInternalChange = function () { this.scope.textInputStyle = this.isInputValid() ? t.cssActiveClass : t.cssErrorClass }, t.prototype.onInternalInputComplete = function () { this.isInputValid() || this.scope.forceComplete ? (this.scope.onComplete && this.scope.onComplete(this.scope.inputValue.trim()), this.scope.textInputStyle = "", this.scope.clearAfterComplete && (this.scope.inputValue = "")) : this.scope.isFocused = !0 }, t.prototype.internalValidate = function (e) { return !jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e) }, t.cssActiveClass = "active", t.cssErrorClass = "error", t.defaultMaxLength = 100, t.defaultPlaceholder = "", t })(); t.TextInputController = o })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t, o = 27; !(function (e) { function t(e, t, o) { return new r(e, t, o) } e.Anchor = "toolbar-anchor", e.AnchorSelector = "[" + e.Anchor + "]", e.Container = "toolbar-container", e.ContainerSelector = "[" + e.Container + "]", e.ActiveClass = "overlayActive", e.ActiveSelector = "." + e.ActiveClass, e.ToolbarClass = "toolbarOverlay", e.ToolbarSelector = "." + e.ToolbarClass; var i = { layout: "overlayedToolbar", theme: "darkTheme" }; e.create = t; var r = (function () { function t(t, o, i) { this.anchor = t.closest(e.AnchorSelector), this.container = t.closest(e.ContainerSelector), this.updateOptions(i), this.visible = !1, o && this.setToolbar(o) } return t.prototype.setToolbar = function (t) { var o = this.toolbar; if (o !== t && (o && o.remove(), t)) { this.toolbar = t, t.addClass(e.ToolbarClass); var i = this.options, r = i.layout, n = i.theme; this.updateTheme(void 0, n), this.updateLayout(void 0, r), this.setVisibility(this.visible), this.container.append(t) } }, t.prototype.destroy = function () { var e = this.toolbar; e && e.remove(), this.toolbar = void 0, this.visible = !1 }, t.prototype.updateOptions = function (e) { var t = this.options; e = this.options = _.defaults({}, e, this.options, i), this.updateTheme(t && t.theme, e.theme), this.updateLayout(t && t.layout, e.layout) }, t.prototype.updateTheme = function (e, t) { this.toolbar && e !== t && (null != e && this.toolbar.removeClass(e), this.toolbar.addClass(t)) }, t.prototype.updateLayout = function (e, t) { this.toolbar && e !== t && (null != e && (this.toolbar.removeClass(e), "overlayedToolbar" === e && this.clearToolbarPosition()), this.toolbar.addClass(t)) }, t.prototype.show = function () { this.toolbar && (this.repositionToolbar(), this.toolbar.addClass(e.ActiveClass), this.visible = !0) }, t.prototype.hide = function () { this.toolbar && (this.toolbar.removeClass(e.ActiveClass), this.visible = !1) }, t.prototype.setVisibility = function (e) { e ? this.show() : this.hide() }, t.prototype.isVisible = function () { return this.visible }, t.prototype.clearToolbarPosition = function () { this.toolbar && this.toolbar.removeClass("top right bottom left") }, t.prototype.repositionToolbar = function () { if ("overlayedToolbar" === this.options.layout) { var e = this.toolbar; if (e) { var t = e.outerWidth(!0), i = e.outerHeight(!0), r = this.anchor.get(0).getBoundingClientRect(), n = r.left, a = this.container.get(0).getBoundingClientRect(), s = a.top, c = r.top - i - o, l = r.top + r.height + o, d = n, u = !0; d + t > a.left + a.width && (d = n + r.width - t, u = !1), d < 0 && (d = 0); var p = c, h = !0; p < s && (p = l, h = !1), e.css({ top: p, left: d }); var m = (u ? "left" : "right") + " " + (h ? "top" : "bottom"); e.removeClass("top right bottom left"), e.addClass(m) } } }, t })() })(t = e.ToolbarOverlay || (e.ToolbarOverlay = {})) })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o, i = jsCommon.BrowserUtils, r = e.visuals.utility.StyleUtils; !(function (e) { e[e.Parent = 1] = "Parent", e[e.None = 2] = "None", e[e.Custom = 3] = "Custom" })(o = t.TransformRestriction || (t.TransformRestriction = {})); var n; !(function (e) { e[e.Up = 1] = "Up", e[e.Down = 2] = "Down", e[e.Left = 4] = "Left", e[e.Right = 8] = "Right", e[e.UpLeft = 16] = "UpLeft", e[e.UpRight = 32] = "UpRight", e[e.DownLeft = 64] = "DownLeft", e[e.DownRight = 128] = "DownRight", e[e.All = 255] = "All" })(n = t.TransformHandleDirections || (t.TransformHandleDirections = {})); var a; !(function (e) { e[e.Up = 0] = "Up", e[e.Down = 1] = "Down", e[e.Left = 2] = "Left", e[e.Right = 3] = "Right" })(a = t.TransformNudgeDirection || (t.TransformNudgeDirection = {})); var s = 15, c = 15, l = 1e4, d = 1e4; t.SmallNudgeDistance = 1, t.BigNudgeDistance = 10; var u = "transformElement", p = "dragging", h = "resizing", m = "resizeHandle", f = "resizeHandleGroup-", g = "customHandle", v = "data-direction", y = 5, b = { preventDefault: "auto", minWidth: s, minHeight: c, maxWidth: l, maxHeight: d, autoScrollParent: null, inertia: !1, disableDrawing: !1 }, w = (function () { function e(t, o) { this.resizeHandleDirections = n.All, this.dimensions = {}, this.prevDimensions = {}, this.restricted = {}, this.preserveAspectRatio = !1, this.transformDelta = {}, window.interact && (interact.pointerMoveTolerance(y), this.element = t, this.rawElement = this.element.get(0), this.updateOptions(o), this.snapToGridIfNeeded(), this.resizeHandleDirections = this.options && this.options.resizeHandleDirections ? this.options.resizeHandleDirections : this.resizeHandleDirections, this.element && this.element.length > 0 && (this.element.addClass(u), this.attachDragHandler(), this.attachResizeHandles(), this.updateHandlers(), this.attachKeyHandlers()), e.pointerTrap || (e.pointerTrap = $('<div id="transformPointerTrap" style="position: absolute; width: 1px; height: 1px; top: 0; left: 0"></div>').appendTo("body").get(0))) } return e.prototype.attachKeyHandlers = function () { var e = this; this.element.keydown((function (o) { var n, s = o.shiftKey, c = o.shiftKey && o.ctrlKey; if ("true" !== $(e.element).attr("drag-resize-disabled") && (!i.isCtrlOrMeta(o) || c)) { var l = e.getDimensionsFromElement(e.element), d = s ? t.BigNudgeDistance : t.SmallNudgeDistance; if (c) { var u = function (e) { return e / 2 === Math.round(e / 2) }; switch (o.keyCode) { case 40: l.height -= 1, n = a.Down, u(l.height) && (l.y += 1); break; case 38: l.height += 1, n = a.Up, u(l.height) || (l.y -= 1); break; case 37: l.width -= 1, n = a.Left, u(l.width) && (l.x += 1); break; case 39: l.width += 1, n = a.Right, u(l.width) || (l.x -= 1); break; default: return } } else switch (o.which) { case 40: n = a.Down, l.y += d; break; case 38: n = a.Up, l.y -= d; break; case 37: n = a.Left, l.x -= d; break; case 39: n = a.Right, l.x += d; break; default: return }var p = e.getRestrictionParent(); if (p && 0 !== p.length) { var h = r.getPadding(p), m = e.getDimensionsFromElement(p); l = e.restrictTo(l, m, h) } o.stopPropagation && o.stopPropagation(), o.preventDefault && o.preventDefault(), e.notifyNudge(l, { bigNudge: s, direction: n }) } })) }, e.prototype.restrictTo = function (e, t, o) { var i = -o.left || 0, r = -o.top || 0; return { x: Math.max(i, Math.min(e.x, t.width - e.width)), y: Math.max(r, Math.min(e.y, t.height - e.height)), width: Math.min(e.width, t.width + o.left + o.right), height: Math.min(e.height, t.height + o.top + o.bottom) } }, e.prototype.destroy = function () { this.dragInteractable && this.dragInteractable.unset(), this.resizeInteractable && this.resizeInteractable.unset(), this.autoScrollParent && this.autoScrollParent.off("scroll", this.autoScrollParentScrollHandlerFn) }, e.prototype.getResizeHandleDirectionArray = function () { var e = [], t = this.options.resizeHandleDirections; return t & n.Up && e.push("up"), t & n.Down && e.push("down"), t & n.Left && e.push("left"), t & n.Right && e.push("right"), t & n.UpLeft && e.push("up-left"), t & n.UpRight && e.push("up-right"), t & n.DownLeft && e.push("down-left"), t & n.DownRight && e.push("down-right"), e }, e.prototype.getRestrictionString = function () { var e; switch (this.options.restriction) { case o.Parent: e = "parent"; break; case o.Custom: e = this.options.getCustomRestrictionSelector(); break; case o.None: default: e = "" }return e }, e.prototype.getRestrictionParent = function () { var e = this.getRestrictionString(); switch (e) { case "": return; case "parent": return this.element.parent(); default: return this.element.parent().closest(e) } }, e.prototype.getAutoScrollOptions = function () { var e = this.options.autoScrollParent; return null == e ? void 0 : { enabled: !0, container: e[0] } }, e.prototype.updateOptions = function (e) { var t = this.options || {}; this.options = __assign({}, b, t, e), this.options.restrictDraw && this.options.restriction !== o.None ? this.restrictionElement = this.getRestrictionParent() : this.restrictionElement = void 0, this.updateHandlers() }, e.prototype.updateHandlers = function () { if (this.dragInteractable || this.resizeInteractable) { var e = this.getAutoScrollOptions(); if (this.dragInteractable) { var t = 0 === this.getRestrictionString().length ? void 0 : { restriction: this.getRestrictionString(), endOnly: !1, elementRect: { top: 0, left: 0, bottom: 1, right: 1 } }; this.dragInteractable.draggable({ restrict: t, autoScroll: e }) } if (this.resizeInteractable) { var t = { restriction: "" === this.getRestrictionString() ? void 0 : this.getRestrictionParent().get(0), elementRect: { top: 0, left: 0, bottom: 1, right: 1 } }; this.resizeInteractable.draggable({ restrict: t, autoScroll: e }) } } }, e.prototype.attachDragHandler = function () { var e = this, t = this.element.get(0), o = this.options.autoScrollParent, i = this.options.preventDefault; if (this.dragInteractable = interact(t).preventDefault(i).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({ inertia: !1, onstart: function (t) { return e.onDragStart(t) }, onmove: function (t) { return e.onDragMove(t) }, onend: function (t) { return e.onDragEnd() } }), this.element.on("pointerdown.transform", (function () { e.dragInteractable && e.options.getDragRestriction && (e.dragInteractable.options.drag.restrict.elementRect = e.options.getDragRestriction()) })), o) { var r = jsCommon.DeferUtility.deferUntilNextFrame, n = 0, a = 0; this.autoScrollParent = o, this.autoScrollParentScrollHandlerFn = r((function () { var t = o.scrollTop(), i = o.scrollLeft(), r = i - a, s = t - n; if (0 !== r || 0 !== s) { var c = { dx: r, dy: s }; e.element.hasClass(p) ? e.onDragMove(c) : e.element.hasClass(h) && e.onResizeMove(c) } n = t, a = i })), o.on("scroll.transformElement", this.autoScrollParentScrollHandlerFn) } }, e.prototype.onDragStart = function (t) { this.options && this.options.supportsPointerCapture && e.pointerTrap.setPointerCapture && t.interaction.pointerIds.length > 0 && null != t.interaction.pointerIds[0] && e.pointerTrap.setPointerCapture(t.interaction.pointerIds[0]), this.dimensions = this.getDimensionsFromElement(this.element), this.prevDimensions = __assign({}, this.dimensions), this.element.addClass(p), this.notifyDragStart(this.dimensions) }, e.prototype.onDragMove = function (e) { this.dimensions.x += e.dx, this.dimensions.y += e.dy, this.draw(this.dimensions), this.notifyDragMove(this.dimensions) }, e.prototype.onDragEnd = function () { this.element.removeClass(p), this.snapToGridIfNeeded(), this.notifyDragEnd(this.dimensions) }, e.prototype.attachResizeHandles = function () { for (var e, t = this, o = this.getResizeHandleDirectionArray(), i = 0, r = o.length; i < r; i++) { var n = $("<div/>").addClass(m).attr(v, o[i]).appendTo(this.element); this.options.useCustomResizeHandles && n.addClass(g), this.options.transformId && n.addClass(f + this.options.transformId) } var a = ".resizeHandle" + (this.options.transformId ? "." + f + this.options.transformId : ""); this.resizeInteractable = interact(a, { context: this.rawElement }).styleCursor(!1).ignoreFrom("[draggable=true], [drag-resize-disabled=true]").draggable({ onstart: function (e) { return t.onResizeStart(e) }, onmove: function (o) { e = o, t.onResizeMove(o) }, onend: function () { e = null, t.onResizeEnd() } }), this.element.bind("keydown", "keyup", (function (o) { var i = "keydown" === o.type; t.element.hasClass(h) && 16 === o.keyCode && e && i !== e.shiftKey && (e.shiftKey = i, t.onResizeMove(e)) })) }, e.prototype.onResizeStart = function (e) { this.isResizing = !0, void 0 !== this.element && (this.preserveAspectRatio = "true" === this.element.attr("preserve-aspect-ratio")); var t = e.target; this.element.addClass(h), this.dimensions = this.getDimensionsFromElement(this.element), this.prevDimensions = __assign({}, this.dimensions), this.resizeStartRect = { left: this.dimensions.x, top: this.dimensions.y, right: this.dimensions.x + this.dimensions.width, bottom: this.dimensions.y + this.dimensions.height, width: this.dimensions.width, height: this.dimensions.height }; var o = t.getAttribute("data-direction"); this.resizeDirection = { up: /up/.test(o), down: /down/.test(o), left: /left/.test(o), right: /right/.test(o) }, this.setTransformDelta(e), this.aspectRatio = this.calculateAspectRatio(this.dimensions, this.options.aspectRatioOffset), _.extend(this.restricted, this.dimensions), this.notifyResizeStart(this.dimensions) }, e.prototype.setTransformDelta = function (e) { this.transformDelta.width = e.clientX - (this.resizeDirection.left ? this.resizeStartRect.left : this.resizeStartRect.right), this.transformDelta.height = e.clientY - (this.resizeDirection.up ? this.resizeStartRect.top : this.resizeStartRect.bottom) }, e.prototype.calculateAspectRatio = function (e, t) { var o = e.height, i = e.width; return t && (o += t.height, i += t.width), o / i }, e.prototype.onResizeMove = function (t) { var o = this.options.aspectRatioOffset || { width: 0, height: 0 }, i = t.clientY - this.transformDelta.height, n = t.clientX - this.transformDelta.width, a = 0; for (var s in this.resizeDirection) a += this.resizeDirection[s]; if (this.resizeDirection.left && (this.dimensions.x = n, this.dimensions.width = this.resizeStartRect.right - n), this.resizeDirection.up && (this.dimensions.y = t.clientY, this.dimensions.height = this.resizeStartRect.bottom - i), this.resizeDirection.right && (this.dimensions.width = n - this.resizeStartRect.left), this.resizeDirection.down && (this.dimensions.height = i - this.resizeStartRect.top), (this.preserveAspectRatio || t.shiftKey) && 2 === a) { var c = void 0; if (this.resizeDirection.up) c = this.resizeStartRect.height + (this.resizeStartRect.top + this.rawElement.offsetTop); else { var l = this.getRestrictionParent(); c = l ? l.get(0).clientHeight - this.dimensions.y - this.rawElement.offsetTop : void 0 } e.fixDimensionsBasedOnAspectRatio(this.options, this.aspectRatio, c, o, this.dimensions), this.restricted.width = this.dimensions.width, this.restricted.height = this.dimensions.height } else this.restricted.width = Math.min(Math.max(this.dimensions.width, this.options.minWidth), this.options.maxWidth), this.restricted.height = Math.min(Math.max(this.dimensions.height, this.options.minHeight), this.options.maxHeight); this.resizeDirection.left && (this.restricted.x = this.resizeStartRect.right - this.restricted.width), this.resizeDirection.up && (this.restricted.y = this.resizeStartRect.bottom - this.restricted.height), this.restricted.angle = r.getRotateAngleFromElement(this.element), this.draw(this.restricted), this.notifyResizeMove(this.restricted) }, e.fixDimensionsBasedOnAspectRatio = function (e, t, o, i, r) { void 0 === o && (o = Number.MAX_VALUE); var n = Math.min(r.width, e.maxWidth) + i.width; o = Math.min(e.maxHeight, o) + i.height; var a = n * t; a > o && (a = o, n = a / t), a < e.minHeight + i.height && (a = e.minWidth + i.height, n = a / t), n < e.minWidth + i.width && (n = e.minWidth + i.width, a = n * t), r.height = a - i.height, r.width = n - i.width }, e.prototype.onResizeEnd = function () { this.isResizing = !1, this.element.removeClass(h), _.extend(this.dimensions, this.restricted), this.snapToGridIfNeeded(), this.notifyResizeEnd(this.dimensions) }, e.prototype.getDimensionsFromElement = function (e) { var t = this.getPositionFromElement(e), o = this.getSizeFromElement(e), i = r.getRotateAngleFromElement(e); return { x: t.x, y: t.y, width: o.width, height: o.height, angle: i } }, e.prototype.getSizeFromElement = function (e) { return { width: e.width(), height: e.height() } }, e.prototype.getPositionFromElement = function (e) { return r.getTranslateTransformFromElement(e) }, e.prototype.draw = function (e) { if (!this.options.disableDrawing) { var t = this.prevDimensions; e = e || this.dimensions; var o; this.options.getIntermediateDimensions && (o = this.options.getIntermediateDimensions(e)), e = _.extend({}, o || e); var i = this.element.get(0).style, r = e.angle; if (!_.isEmpty(this.restrictionElement)) { var n = this.getDimensionsFromElement(this.restrictionElement); e.x = Math.max(n.x, e.x), e.y = Math.max(n.y, e.y); var a = Math.max(0, e.x + e.width - (n.x + n.width)), s = Math.max(0, e.y + e.height - (n.y + n.height)); this.isResizing ? (e.height = e.height - s, e.width = e.width - a) : (e.x = e.x - a, e.y = e.y - s) } e.x === t.x && e.y === t.y && e.angle === t.angle || (i.webkitTransform = i.transform = "translate(" + e.x + "px, " + e.y + "px)" + (r ? " rotate(" + r + "deg)" : ""), t.x = e.x, t.y = e.y, t.angle = t.angle), t.width !== e.width && (i.width = e.width + "px", t.width = e.width), t.height !== e.height && (i.height = e.height + "px", t.height = e.height) } }, e.prototype.snapToGridIfNeeded = function () { this.options.snapToGrid === !0 && this.options.gridSize && (this.dimensions || (this.dimensions = this.getDimensionsFromElement(this.element)), this.snapToGrid(this.dimensions)) }, e.prototype.snapToGrid = function (e) { var t = this.options.gridSize; e.x = Math.round(e.x / t.width) * t.width, e.y = Math.round(e.y / t.height) * t.height, e.width = Math.round(e.width / t.width) * t.width, e.height = Math.round(e.height / t.height) * t.height, this.draw(e) }, e.prototype.notifyResizeStart = function (e) { this.options && this.options.onResizeStart && this.options.onResizeStart(e) }, e.prototype.notifyResizeMove = function (e) { this.options && this.options.onResizeMove && this.options.onResizeMove(e) }, e.prototype.notifyResizeEnd = function (e) { this.options && this.options.onResizeEnd && this.options.onResizeEnd(e) }, e.prototype.notifyDragStart = function (e) { this.options && this.options.onDragStart && this.options.onDragStart(e) }, e.prototype.notifyDragMove = function (e) { this.options && this.options.onDragMove && this.options.onDragMove(e) }, e.prototype.notifyDragEnd = function (e) { this.options && this.options.onDragEnd && this.options.onDragEnd(e) }, e.prototype.notifyNudge = function (e, t) { this.options && this.options.onNudge && this.options.onNudge(e, t) }, e })(); t.TransformElement = w })(o = t.controllers || (t.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.link = function (e, t, o) { var i = e.$eval(o.applyStyle); i && (t.on("$destroy", (function () { return i.removeElement(t) })), i.addElement(t), i.apply(t)) } } return e })(); e.ApplyStyle = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.$timeout = e, this.restrict = "A", this.link = function (e, o) { t.$timeout((function () { (o.is("input[type=text], textarea") ? o : o.find("input[type=text], textarea").first()).select() })) } } return e })(); e.AutoSelect = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.replace = !1, this.link = function (e, t, o) { var i = e.$watch(o.bindTextAndTooltip, (function (e) { t.text(e || "").attr("title", e || "") })); e.$on("$destroy", (function () { i() })) } } return e })(); e.BindTextAndTooltip = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.require = "ngModel", this.link = function (e, t, o, i) { t.on("keydown", (function (t) { 27 === t.keyCode && (t.preventDefault(), e.$apply((function () { i.$setViewValue(""), i.$render() }))) })) } } return e })(); e.ClearOnEscape = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i = (function () { function o(o) { var i = this; this.restrict = "A", this.link = function (o, r, n) { r.on(jsCommon.DOMConstants.mouseClickEventName, (function (o) { if (r.prop(t.constants.tagName).toLowerCase() === jsCommon.DOMConstants.Anchor) { var n = r.attr(jsCommon.DOMConstants.hrefAttribute); jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(n) || i.telemetryService.logEvent(e.telemetry.DashboardOpenLink, n) } })) }, this.telemetryService = o } return o })(); o.ClickTelemetry = i })(o = t.directives || (t.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (t) { var o = (function () { function t() { this.restrict = "E", this.transclude = !0, this.replace = !0, this.templateUrl = "views/collapsibleSectionView.html", this.scope = { expandedTitleLocalizationId: "@expandedTitleLocalizationId", collapsedTitleLocalizationId: "@collapsedTitleLocalizationId" }, this.link = function (e, t, o) { e.$watch((function () { return t.is(":visible") }), (function (t, o) { t === !1 && (e.isCollapsibleSectionExpanded = !1) }), !0) }, this.controller = e.createController(e.controllers.CollapsibleSectionController) } return t })(); t.CollapsibleSection = o })(t = e.directives || (e.directives = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.scope = { color: "<" }, this.restrict = "E", this.replace = !0, this.templateUrl = "views/colorTile.html" } return e })(); e.ColorTile = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { this.restrict = "E", this.replace = !0, this.templateUrl = "views/confirmationModalDialog.html", this.controller = e.createController(e.controllers.ConfirmationModalDialogController) } return t })(); t.ConfirmationModalDialog = o })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "A", this.link = function (e, o, i) { o.on("click", (function () { var o = t.$parse(i.singleClick), r = e.$eval(i.singleClickDisabled), n = i.singleClickTimeout ? e.$eval(i.singleClickTimeout) : 300; r || (void 0 !== t.clickTimeout ? (clearTimeout(t.clickTimeout), t.clickTimeout = void 0) : t.clickTimeout = jsCommon.Zone.setTimeout((function () { o(e), t.clickTimeout = void 0 }), n)) })) }, this.$parse = e } return e })(); e.CustomClick = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.templateUrl = "views/dialogConfirmContent.html", this.replace = !0, this.scope = { viewModel: "=" } } return e })(); e.DialogConfirmContent = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t, o, i, r) { if (t[o] === i) return void r(); var n = t.$observe(o, (function (e) { e === i && (r(), n()) })); e.$on("$destroy", (function () { return n() })) } e.initWhenReady = t })(t = e.DirectiveUtils || (e.DirectiveUtils = {})) })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = jsCommon.CssConstants, o = jsCommon.DragDropUtils, i = jsCommon.DragDropDataKeys, r = "draggable-root-dragging", n = 50, a = 4, s = (function () { function e(e, s) { var c = this; this.restrict = "A", this.link = function (e, s, l) { if (!_.isEmpty(l.drag)) { var d, u = { start: function (o, i) { c.dragDataService.setDragElement(s), l.dragContext ? c.dragDataService.setDragContext(e.$eval(l.dragContext)) : c.dragDataService.setDragContext(null), i.helper.css(t.widthProperty, s.width()), s.addClass(r) }, drag: function (e, t) { d && (c.$interval.cancel(d), d = void 0); var o = s.data[i.DragScrollHandler]; o && (d = c.$interval(o, n, 0, !1)) }, stop: function (e, t) { d && (c.$interval.cancel(d), d = void 0), s.removeClass(r) }, helper: function () { return o.prepareDragHelper(s) }, scroll: !1, appendTo: o.getElementToAppendDragHelper(s), distance: a }, p = e.$eval(l.dragConfig); p && _.isNumber(p.distance) && (u.distance = p.distance), s.draggable(u), l.dragDisabled && e.$watch((function () { return !!e.$eval(l.dragDisabled) }), (function (e) { s.draggable({ disabled: e }) })), e.$on("$destroy", (function () { return s.draggable({ disabled: !0 }).draggable("destroy") })) } }, this.$interval = e, this.dragDataService = s } return e })(); e.Drag = s })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t, a, c) { if (e && e.length > 0 && t && t.length > 0) { var l = t.offset(), d = e.width(), u = e.height(), p = t.width(), h = t.height(); r(t) && (c - u / 2 < l.top ? i(t, s * -1) : c + u / 2 > l.top + h && i(t, s)), n(t) && (a - d / 2 < l.left ? o(t, s * -1) : a + d / 2 > l.left + p && o(t, s)) } } function o(e, t) { e.stop(!0, !0).animate({ scrollLeft: e.scrollLeft() + t }, 100) } function i(e, t) { e.stop(!0, !0).animate({ scrollTop: e.scrollTop() + t }, 100) } function r(e) { return e[0].scrollHeight > e.height() } function n(e) { return e[0].scrollWidth > e.width() } var a = jsCommon.DragDropDataKeys, s = 10, c = (function () { function e(e) { var o = this; this.restrict = "A", this.link = function (e, i, r) { i.droppable({ over: function (e, r) { r.draggable.data[a.DragScrollHandler] = function () { t(o.dragDataService.getDragElement(), i, r.helper.offset().left, r.helper.offset().top) } }, out: function (e, t) { return t.draggable.removeData(a.DragScrollHandler) }, drop: function (e, t) { return t.draggable.removeData(a.DragScrollHandler) } }) }, this.dragDataService = e } return e })(); e.DragScroll = c })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = jsCommon.DragDropUtils, o = jsCommon.DragDropDataKeys, i = t.DragoverClass, r = jsCommon.HighlightClasses, n = (function () { function e(e, t, o) { var i = this; this.ngParseService = e, this.ngTimeOutService = t, this.timeoutService = o, this.restrict = "A", this.link = function (e, t, o) { var r = e.$eval(o.drop); if (!_.isEmpty(r)) { var n = o.dropAction ? i.ngParseService(o.dropAction) : void 0, a = o.dropHandler ? i.ngParseService(o.dropHandler) : void 0, s = function () { return o.dropContainerId ? $("#" + o.dropContainerId) : t }, c = !1; i.timeoutService.setTimeout().promise.then((function () { c || i.initializeDropElement(e, s, n, a, r) })), e.$on("$destroy", (function () { c = !0, s().droppable({ disabled: !0 }).droppable("destroy") })) } }, this.postponeCleanup = !1, this.highlightedItems = [] } return e.prototype.initializeDropElement = function (e, r, n, a, s) { var c = this, l = r(), d = function (t) { return c.mouseMove(t, l, e, n) }, u = s.accept.split(/\s/); l.droppable({ accept: function (e) { return t.isValidDropLocation(e, u) }, hoverClass: i, greedy: s.greedy !== !1, tolerance: "pointer", activate: function (e, t) { t.draggable.data[o.DropEventHandled] = !1, t.draggable.data[o.DropTarget] = void 0 }, drop: function (o, i) { if (c.deferredPromise && (c.ngTimeOutService.cancel(c.deferredPromise), c.deferredPromise = void 0), c.clearHighlighting(), a) { var r = t.getDropPosition(o, l); n ? n(e, { dropPosition: r }).then((function (t) { 0 !== t && a(e, { event: o, ui: i, dropAction: t }) })).finally((function () { i.helper.off("mousemove", d) })) : a(e, { event: o, ui: i, dropAction: void 0 }) } }, over: function (e, t) { c.clearHighlighting(), n && (c.postponeCleanup = !0, d(e), c.ngTimeOutService((function () { return c.postponeCleanup = !1 }), 0, !1), t.helper.on("mousemove", d)) }, out: function (e, t) { n && (c.deferredPromise && (c.ngTimeOutService.cancel(c.deferredPromise), c.postponeCleanup = !1, c.deferredPromise = void 0), t.helper.off("mousemove", d), c.postponeCleanup || c.clearHighlighting()) } }) }, e.prototype.mouseMove = function (e, o, i, n) { var a = this, s = t.getDropPosition(e, o), c = o.prev(), l = o.next(); n && (this.deferredPromise && this.ngTimeOutService.cancel(this.deferredPromise), this.deferredPromise = n(i, { dropPosition: s }), this.deferredPromise.then((function (e) { if (a.deferredPromise) { var t = a.highlightedItems; switch (e) { case 0: o.hasClass(r.None.class) || (a.clearHighlighting(), o.addClass(r.None.class), t.push(o)); break; case 2: o.hasClass(r.Prepend.class) || (a.clearHighlighting(), o.addClass(r.Prepend.class), c.addClass(r.Append.class), t.push(o), t.push(c)); break; case 3: o.hasClass(r.Append.class) || (a.clearHighlighting(), o.addClass(r.Append.class), l.addClass(r.Prepend.class), t.push(o), t.push(l)); break; case 1: o.hasClass(r.Replace.class) || (a.clearHighlighting(), o.addClass(r.Replace.class), t.push(o)); break; default: a.clearHighlighting() } } })).finally((function () { a.deferredPromise = void 0 }))) }, e.prototype.clearHighlighting = function () { for (var e = 0, t = this.highlightedItems; e < t.length; e++) { t[e].removeClass(r.Append.class).removeClass(r.None.class).removeClass(r.Prepend.class).removeClass(r.Replace.class) } _.remove(this.highlightedItems) }, e })(); e.Drop = n })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var DropDownMenuItemType; !(function (e) { e[e.Item = 0] = "Item", e[e.Title = 1] = "Title", e[e.Separator = 2] = "Separator", e[e.Flyout = 3] = "Flyout", e[e.CustomComponent = 4] = "CustomComponent" })(DropDownMenuItemType || (DropDownMenuItemType = {})); var Horizontal = "horizontal", powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { this.restrict = "A", this.replace = !1, this.scope = { dropdownItems: "=", dropdownClass: "@", dropdownDarkTheme: "=", dropdownFollowMousePosition: "=?", dropdownOnItemSelected: "&", dropdownPrepareItemsBeforeShow: "&?", dropdownOrientation: "=?", dropdownOnLeftClick: "=?", dropdownOnRightClick: "=?", dropdownBlockClick: "=?", dropdownSeparatorClass: "@" }, this.link = function (e, t, o) { e.dropdownClass = o.dropdownMenuClass, e.dropdownSeparatorClass = o.dropdownSeparatorClass, angular.isUndefined(o.dropdownBlockClick) && (e.dropdownBlockClick = !1) }, this.controller = e.createController(r) } return t })(); t.DropdownMenu = o; var i = "dropDownMenu", r = (function () { function e(e, t) { var o = this; this.scope = e, this.element = t.$element, this.services = t, e.$on("$destroy", (function () { return o.dispose() })), this.scope.select = function (e) { return o.select(e) }, this.scope.dispose = function () { return o.hideAndDestroyMenu(o.services.dropdownMenuService) }, e.$on("dropdownExpand", (function (e, t) { e.defaultPrevented || (e.preventDefault(), o.toggleMenu(null, t)) })), e.$watchGroup(["dropdownOnLeftClick", "dropdownOnRightClick"], (function () { o.attachEvents() })), this.attachEvents() } return e.createOptions = function () { return { additionalServices: ["$element", "dropdownMenuService"] } }, e.prototype.attachEvents = function () { var e = this; if (this.element) this.element.off("." + i); else { this.services.$element.off("." + i) } var t = []; (void 0 === this.scope.dropdownOnLeftClick || this.scope.dropdownOnLeftClick) && t.push(jsCommon.DOMConstants.mouseClickEventName), this.scope.dropdownOnRightClick && t.push(jsCommon.DOMConstants.contextmenuEventName); for (var o = 0, r = t; o < r.length; o++) { var n = r[o], a = n + "." + i; this.scope.dropdownFollowMousePosition ? (this.element = null, this.services.$element.on(a, (function (t) { t.preventDefault(), t.stopPropagation(); var o = { x: t.clientX, y: t.clientY }; e.toggleMenu(null, o) }))) : this.element.on(a, (function (t) { return e.toggleMenu(t) })) } }, e.prototype.dispose = function () { this.menuElement && this.menuElement.remove() }, e.prototype.destroyMenuElement = function () { this.innerScope && this.innerScope.$destroy(), this.menuElement = void 0 }, e.prototype.hideAndDestroyMenu = function (e) { this.services.dropdownMenuService.hideMenu() }, e.prototype.toggleMenu = function (e, t) { var o = this; e && (e.preventDefault(), e.stopPropagation()), this.menuElement && this.services.dropdownMenuService.isOpen || this.tryCompileMenuElement(), this.services.timeout((function () { o.menuElement && (o.element || t) && o.services.dropdownMenuService.toggleActive(o.menuElement, o.element, t, e, o.scope.dropdownOrientation === Horizontal) })) }, e.prototype.showMenu = function (e, t) { var o = this; e && (e.preventDefault(), e.stopPropagation()); var i = !0; this.menuElement || (i = this.tryCompileMenuElement()), this.services.timeout((function () { i && (o.element || t) && o.services.dropdownMenuService.showMenu(o.menuElement, o.element, t, e, o.scope.dropdownOrientation === Horizontal) })) }, e.prototype.hideMenu = function (e, t) { var o = this; e && (e.preventDefault(), e.stopPropagation()), (this.element || t) && this.services.timeout((function () { o.services.dropdownMenuService.hideMenu() })) }, e.prototype.select = function (e) { this.services.dropdownMenuService.hideMenu(), this.scope.dropdownOnItemSelected({ selected: e }) }, e.prototype.tryCompileMenuElement = function () { var t = this; if (this.touchendWasHandled = !1, angular.isDefined(this.scope.dropdownPrepareItemsBeforeShow)) { var o = this.scope.dropdownPrepareItemsBeforeShow(); angular.isDefined(o) && (this.scope.dropdownItems = o) } if (!this.scope.dropdownItems || 0 === this.scope.dropdownItems.length) return !1; var i = angular.element(e.template).data("$dropdownMenuController", this); return this.innerScope = this.scope.$new(), this.scope.$apply((function () { return t.menuElement = t.scope.menuElement = t.services.compile(i)(t.innerScope) })), this.menuElement.on("remove", (function () { return t.destroyMenuElement() })), this.menuElement.on("touchend", (function (e) { if (!t.touchendWasHandled) { var o = _.find(t.scope.dropdownItems, (function (t) { return t.text === e.target.textContent })); o && (e.preventDefault(), t.touchendWasHandled = !0, t.select(o)) } })), !0 }, e.template = "\n    <ul class='angular-dropdown {{dropdownClass}}' ng-class='{dark: dropdownDarkTheme === true, themeableElement: true}' role='menu' focus-trap focus-on-escape=\"dispose()\">\n        <li ng-repeat='item in dropdownItems' class='dropdown-item' ng-click='select(item); $event.stopPropagation();' role='menuitem'>\n            <a ng-if='::item.type === 0 && item.href' class='dropdown-action {{::item.containerClass}}' ng-href='{{::item.href}}' target='{{::item.hrefTarget ? item.hrefTarget : \"_blank\" }}'>\n                <i class='dropdown-icon {{::item.iconClass }}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}' >\n                    <i ng-if='::item.hasGlyph' class='glyphicon {{::item.itemClass}} glyph'></i>\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </a>\n            <button ng-if='::item.type === 0 && !item.href' class='dropdown-action {{::item.containerClass}}'>\n                <i class='dropdown-icon {{::item.iconClass }}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}' >\n                    <i ng-if='::item.hasGlyph' class='glyphicon {{::item.itemClass}} glyph'></i>\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </button>\n            <span ng-if='::item.type === 1' class='{{::item.containerClass}}'>\n                <i class='dropdown-icon {{::item.iconClass}}' ng-if='::!!item.iconClass'></i>\n                <div class='dropdown-content {{item.itemClass}}' >\n                    <div class='dropdown-label {{::item.labelClass}}'>{{::item.text}}</div>\n                    <div class='dropdown-description {{::item.descriptionClass}}' ng-attr-title='{{::item.descriptionTitle}}' ng-if='::item.description'>{{::item.description}}</div>\n                </div>\n            </span>\n            <span ng-if='::item.type === 2' class='dropdown-separator {{dropdownSeparatorClass}}'></span>\n        </li>\n    </ul>\n    <div ng-show='::dropdownBlockClick' class='dropdown-block-click'></div>\n", e })() })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.replace = !0, this.templateUrl = "views/dropdownMenuItems.html", this.scope = { dropdownItems: "=", dropdownClass: "@", dropdownDarkTheme: "=", dropdownOnItemSelected: "&", dropdownOrientation: "=?", dropdownSeparatorClass: "@" } } return e })(); e.DropdownMenuItems = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t(t, o) { var i = this; this.$parse = o, this.restrict = "E", this.replace = !0, this.transclude = !0, this.template = '<div class="dropdownOverlay" ng-transclude></div>', this.link = function (t, o, r) { var n = r.dropdownOverlayClass; n && (o.removeClass("dropdownOverlay"), o.addClass(n)), i.overlayService.register(o); var a = r.onClose; if (a) { var s = i.$parse(a); o.on(e.constants.OverlayCloseEventName, (function () { o.off(e.constants.OverlayCloseEventName), t.$applyAsync((function () { s(t) })) })) } t.$on("$destroy", (function () { return i.overlayService.unregister(o) })) }, this.overlayService = t } return t })(); t.DropdownOverlay = o })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.clickAction = "click", this.restrict = "A", this.link = function (e, o, i) { var r = i.preferLeft, n = i.horizontal, a = i.needBlur, s = i.disableAnimation, c = i.dropdownOverlayInvoke; o.on(t.clickAction, (function (i) { var l = t.overlayService.getOverlayElement(c); e.$applyAsync((function () { t.overlayService.toggleDropdown(i, { anchorElement: o, element: l, preferLeft: "true" === r, horizontal: "true" === n, blurNeeded: "true" === a, disableAnimation: s }) })) })) }, this.overlayService = e } return e })(); e.DropdownOverlayInvoke = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.scope = { remove: "&" }, this.templateUrl = "views/editableListItem.html", this.transclude = !0 } return e })(); e.EditableListItem = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.require = "ngModel", this.restrict = "E", this.templateUrl = "views/gradientBar.html", this.link = function (t, o, i, r) { r.$formatters.push((function (t) { return e.gradientStylesTemplate.replace(/{{gradientColors}}/gi, t) })), r.$render = function () { o.find(".gradient-bar").css("background", r.$viewValue) } } } return e.gradientStylesTemplate = "linear-gradient(to right, {{gradientColors}})", e })(); e.GradientBar = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { this.controller = e.createController(e.controllers.GridLayoutController), this.compile = function () { return { pre: function (t, o, i) { var r = angular.element('<div class="gridPlaceHolder"><div class="placeholderInner"></div></div>'), n = new e.models.GridLayoutContainer(t.gridLayoutService, o, t), a = n.gridPlaceHolder, s = new e.helpers.GridLayoutItemRenderer(a, r.get(0)); a.render = function () { s.render() }, o.addClass("gridLayoutContainer"), o.prepend(r), t.gridLayoutContainer = n, n.notifyGridItemsChangedHandler = t.gridLayoutChangeHandler } } } } return t })(); t.GridLayout = o })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i = jsCommon.BrowserUtils, r = e.common.constants, n = t.controllers.TransformRestriction, a = "gridLayoutItem", s = !0, c = (function () { function e() { var e = this; this.restrict = "A", this.link = function (o, n, c) { var l = n.closest(r.dashboardSelector), d = o.$eval(c.gridLayoutContainer), u = o.$eval(c.viewModel), p = d.gridLayoutService, h = new t.models.GridLayoutItem(u, p, d), m = new t.helpers.GridLayoutItemRenderer(h, n.get(0)); e.isInAuthoringMode = o.$eval(c.inEditMobileLayoutMode), e.strategy = p.strategy, n.addClass(a), h.render = function () { m.render() }, d.addGridLayoutItem(h), p.strategy.willOverrideDisplayPosition || d.gravityEnabled || (h.calculateLayout(), h.applyLayout(t.models.gridLayoutConstants.changeType.refresh)); var f; window.setTimeout((function () { f = new t.controllers.TransformElement(n, { onDragStart: function (e) { h.onDragStart() }, onDragMove: function (t) { e.trackParentSize(n, !s), h.onDragMove(t) }, onDragEnd: function (t) { e.setParentHeight(d), h.onDragEnd() }, onResizeStart: function (e) { h.onResizeStart(); var t = o.gridLayoutCallbacks && o.gridLayoutCallbacks.onResize; t && t() }, onResizeMove: function (t) { e.trackParentSize(n, s), h.onResizeMove(t) }, onResizeEnd: function (t) { e.setParentHeight(d), h.onResizeEnd() }, restriction: e.getRestrictionType(), resizeHandleDirections: t.controllers.TransformHandleDirections.DownRight, minWidth: d.gridLayoutService.strategy.gridMinWidthOnResize, minHeight: d.gridLayoutService.strategy.gridMinHeightOnResize, maxWidth: d.gridLayoutService.strategy.gridMaxWidthOnResize, maxHeight: d.gridLayoutService.strategy.gridMaxHeightOnResize, inertia: !1, autoScrollParent: l, disableDrawing: !0, useCustomResizeHandles: !0, supportsPointerCapture: !0 }), e.setParentHeight(d) })), n.keydown((function (t) { var r = t.shiftKey && t.ctrlKey; "true" === n.attr("drag-resize-disabled") || i.isCtrlOrMeta(t) && !r || (r ? e.keyboardResize(h, d, n, o, t.keyCode) : e.keyboardMove(h, d, n, t.keyCode)) })), o.$on("$destroy", (function () { h.remove(), f && (f.destroy(), f = null), e.setParentHeight(d, h) })) } } return e.prototype.trackParentSize = function (e, t) { if (!this.preventHeightTracking()) { var o = e.parent(), i = e.position().top + e.outerHeight() + this.strategy.gridItemSpacing; t && i >= o.height() && o.height(i + this.strategy.gridHeight) } }, e.prototype.setParentHeight = function (e, t) { if (!this.preventHeightTracking()) { for (var o = e.element, i = e.gridLayoutItems, r = 0, n = 0, a = i; n < a.length; n++) { var s = a[n], c = s.top + s.height; c > r && (r = c) } t && (r -= t.height), r = this.calculateGridHeight(r), o.height(r) } }, e.prototype.calculateGridHeight = function (e) { var t = this.strategy.gridHeight; return Math.ceil(e / t) * t + this.strategy.gridItemSpacing / 2 }, e.prototype.getRestrictionType = function () { return this.preventHeightTracking() ? n.None : n.Parent }, e.prototype.preventHeightTracking = function () { return !this.isInAuthoringMode }, e.prototype.keyboardMove = function (e, t, o, i) { var r = e.getLayoutPosition(); switch (i) { case 40: r.y += 1; break; case 38: r.y -= 1; break; case 37: r.x -= 1; break; case 39: r.x += 1; break; default: return }r.y < 0 || r.x < 0 || (e.onDragStart(), this.trackParentSize(o, !s), this.setParentHeight(t), e.onDragEnd(), this.keepTileInView(o)) }, e.prototype.keyboardResize = function (e, o, i, r, n) { var a = { width: e.width, height: e.height }; switch (n) { case 40: a.height += t.GridLayoutConstants.defaultGridHeight; break; case 38: a.height -= t.GridLayoutConstants.defaultGridHeight; break; case 37: a.width -= t.GridLayoutConstants.defaultGridWidth; break; case 39: a.width += t.GridLayoutConstants.defaultGridWidth; break; default: return }if (!(a.width < t.GridLayoutConstants.defaultGridWidth || a.height < t.GridLayoutConstants.defaultGridHeight)) { e.onResizeStart(); var c = r.gridLayoutCallbacks && r.gridLayoutCallbacks.onResize; c && c(), this.trackParentSize(i, s), e.onResizeMove(a), this.setParentHeight(o), e.onResizeEnd(), this.keepTileInView(i) } }, e.prototype.keepTileInView = function (e) { e.get(0).scrollIntoView({ behavior: "smooth", block: "end", inline: "end" }) }, e })(); o.GridLayoutItem = c })(o = t.directives || (t.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.highlightService = e, this.restrict = "A", this.scope = { highlightString: "=", searchString: "=" }, this.link = function (e, o, i) { e.$watchGroup(["highlightString", "searchString", "highlightTag"], (function (e) { var r = e[0], n = e[1], a = i.highlightTag; r && n ? o.html(t.highlightService.highlight(r, n, a)) : o.text(r) })) } } return e })(); e.HighlightString = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { this.restrict = "E", this.transclude = !0, this.replace = !0, this.templateUrl = "views/inlineMessageView.html", this.scope = { useErrorIcon: "=?", useErrorBackground: "=?", traceDetails: "=?", displayIcon: "=?" }, this.link = function (t, o, i) { t.displayIcon || (void 0 === t.useErrorIcon && void 0 !== i.useErrorIcon ? t.displayIcon = e.models.InlineMessageIcon.Error : t.displayIcon = e.models.InlineMessageIcon.Info), void 0 === t.useErrorBackground && void 0 !== i.useErrorBackground && (t.useErrorBackground = !0) } } return t })(); t.InlineMessage = o })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.transclude = !0, this.replace = !0, this.templateUrl = "views/inlineNameValuePairsView.html", this.scope = { mode: "=", showTitle: "=", detailExpand: "=", nameValuePairs: "=" } } return e })(); e.InlineNameValuePairs = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = 250, o = "100%", i = (function () { function e() { var e = this; this.restrict = "A", this.link = function (t, i, r) { var n, a = r.inViewportOffset || o, s = r.inViewportContext, c = i.closest(s); if (s && 0 === c.length) return void t.$evalAsync(r.inViewport); var l = function (e) { e.target === i.get(0) && n.context.refresh() }, d = { element: i.get(0), handler: function () { t.$evalAsync(r.inViewport), n.destroy(), i.off("transitionend", l) }, offset: a }; c.length > 0 && (d.context = c.get(0)), n = new Waypoint(d), i.on("transitionend", l), e.attachResizeHandler() } } return e.getRefreshAllHandler = function () { return _.debounce(Waypoint.refreshAll, t) }, e.prototype.attachResizeHandler = function () { e.staticResizeHandlerAttached || ($(window).resize(e.getRefreshAllHandler()), e.staticResizeHandlerAttached = !0) }, e })(); e.InViewport = i })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.replace = !0, this.templateUrl = "views/loadNotificationView.html", this.scope = { message: "=", hide: "=" }, this.link = function (e, t) { e.$watch("hide", (function () { e.hide ? t.hide() : t.show() })) } } return e })(); e.LoadNotification = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "A", this.link = function (e, o, i) { var r = i.localize; t.replaceText(o, i, e, r) }, this.localizationService = e } return e.prototype.replaceText = function (e, t, o, i) { if ("" !== i) { var r = this.localizationService.getOptional(i); if (void 0 === r) { var n = o.$eval(i); if ("" === n) return; r = this.localizationService.get(n) } if ("localizeFragments" in t) for (r = r || ""; r.length > 0;) { var a = r.search(new RegExp("\\{[0-9]+\\}", "gm")), s = r.indexOf("}", a); if (a === -1) e.append(r), r = ""; else if (0 === a) { var c = parseInt(r.substring(a + 1, s), 10); r = r.substring(s + 1); var l = e.children("[fragment-index=" + c + "]"); e.append(l) } else e.append(r.substring(0, a)), r = r.substring(a) } else e.text(r || "") } }, e })(); e.Localize = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "A", this.link = function (e, o, i) { function r(t, o) { e.$watch(i.localizeAttr, (function (e) { for (var t in e) { var r = o.get(e[t]); i.$set(t, r || "") } })) } r(o, t.localizationService) }, this.localizationService = e } return e })(); e.LocalizeAttr = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "A", this.link = function (e, o, i) { function r(e, t, o) { if ("" !== t) { var r = o.get(t); e.attr("title", r || ""), void 0 !== i.useTooltipAsAriaLabel && e.attr("aria-label", r || "") } } var n = i.localizeTooltip || i.localize || ""; void 0 !== i.dynamicTooltipUpdate && e.$watch((function () { return i.localizeTooltip }), (function (e, i) { e !== i && r(o, e, t.localizationService) })), r(o, n, t.localizationService) }, this.localizationService = e } return e })(); e.LocalizeTooltip = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { this.restrict = "E", this.templateUrl = "views/modalDialog.html", this.transclude = !0, this.replace = !0, this.scope = { viewModel: "=", onCloseAction: "&", onConfirmAction: "&", onCancelAction: "&" }, this.link = function (e, t, o) { var i = o.confirmButtonText; i || (i = "OK"), e.confirmButtonText = i, t.appendTo($("body")) }, this.controller = e.createController(e.controllers.ModalDialogController) } return t })(); t.ModalDialog = o })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.templateUrl = "views/modalOverlay.html", this.transclude = !0, this.replace = !0 } return e })(); e.ModalOverlay = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.replace = !1, this.link = function (e, t, o) { e.$watch(o.ngBindAttr, (function (e) { for (var t in e) o.$set(t, e[t]) })) } } return e })(); e.NgBindAttr = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "A", this.replace = !1, this.link = function (e, o, i) { o.on(jsCommon.DOMConstants.selectEventName, (function (o) { var r = t.$parse(i.ngOnSelect); r && e.$applyAsync((function () { r(e, { $event: o }) })) })) }, this.$parse = e } return e })(); e.NgOnSelect = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "A", this.link = function (e, o, i) { var r = i.ngRepeatFinishEvent; e.$last === !0 && t.$timeout((function () { e.$emit(r) })) }, this.$timeout = e } return e })(); e.NgRepeatFinishEvent = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})), powerbi.define("PowerBICommon/directives/ngRightClick", (function (e) { var t; return t = (function () { function e(e) { var t = this; this.$parse = e, this.restrict = "A", this.replace = !1, this.link = function (e, o, i) { o.on(jsCommon.DOMConstants.contextmenuEventName, (function (o) { var r = t.$parse(i.ngRightClick); r && e.$apply((function () { if (0 === o.pageX && 0 === o.pageY && o.currentTarget) { var t = o.currentTarget, i = t.getBoundingClientRect(); o.pageX = i.left + i.width / 2, o.pageY = i.top + i.height / 2 } o.preventDefault(), o.stopPropagation && o.stopPropagation(), r(e, { $event: o }) })) })), jsCommon.BrowserUtils.isIOSWebView() && t.setLongTapHandler(o) } } return e.prototype.setLongTapHandler = function (e) { var t, o, i, r, n, a = 350, s = 10, c = !1, l = !1, d = e.get(0); d.addEventListener("touchstart", (function (e) { clearTimeout(t), 1 === e.touches.length && (c = !1, r = e.target, i = d.getBoundingClientRect(), l = !1, n = e.touches[0], o = { x: n.clientX, y: n.clientY }, t = setTimeout((function () { c || (l = !0) }), a)) }), { passive: !0 }), d.addEventListener("touchmove", (function (e) { 1 === e.touches.length ? o = { x: e.touches[0].clientX, y: e.touches[0].clientY } : clearTimeout(t) }), { passive: !0 }), d.addEventListener("touchend", (function (e) { if (c = !0, l) { var a = Math.abs(o.x - n.clientX) + Math.abs(o.y - n.clientY), u = d.getBoundingClientRect(), p = Math.abs(i.left - u.left) + Math.abs(i.top - u.top); if (a < s && p < s) { var h = document.createEvent("MouseEvents"); h.initMouseEvent("contextmenu", !0, e.cancelable, e.view, 0, n.screenX, n.screenY, n.clientX, n.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, 0, null), r.dispatchEvent(h) } } clearTimeout(t) })), ["touchcancel", "touchleave"].forEach((function (e) { d.addEventListener(e, (function (e) { c = !0, clearTimeout(t) })) })) }, e })(), t.ng = ["$parse"], t })); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "E", this.templateUrl = "views/notificationBar.html", this.scope = !0, this.link = function (e, o, i) { e.service = t.service, e.dismiss = function (e) { e.onDismiss && e.onDismiss(), t.service.hide(e.id) } }, this.service = e } return e })(); e.NotificationBar = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var o; !(function (t) {
            var o = (function () {
                function t(t) {
                    var o = this; this.localizationService = t, this.upDirection = "up", this.downDirection = "down", this.restrict = "E", this.require = "ngModel", this.scope = { placeholderText: "<", inputName: "<", validators: "<", options: "<", labelId: "<?", isDisabled: "<" }, this.templateUrl = "views/numUpDown.html", this.link = function (t, i, r, n) {
                        var a = i.find(".inputUpDown"); a.keydown((function (e) { if (38 === e.keyCode || 40 === e.keyCode) { var i = 38 === e.keyCode ? o.upDirection : o.downDirection; o.incrementDecrement(i, t, n), e.preventDefault(), e.stopPropagation() } })), a.keypress((function (e) { return e.charCode >= 48 && e.charCode <= 57 })), n.$render = function () { null != n.$viewValue ? t.modelValue = Number(n.$viewValue) : t.modelValue = null }; var s = t.options && t.options.unitSymbol; s && (t.unitSymbol = o.localizationService.get(s)),
                            t.integerPattern = /^\d+\.?\d*$/, t.inputInvalid = function () { return a.hasClass("ng-invalid") || t.modelValue && !e.Double.isInteger(t.modelValue) }, t.valueChanged = function () { var e = t.modelValue; null === e && t.placeholderText ? n.$setViewValue(e) : isNaN(e) || n.$setViewValue(e.toString()) }, t.onUpDownValueChanged = function (e) { return o.incrementDecrement(e, t, n) }, t.onFocusChanged = function (e) { return t.focused = e }
                    }
                } return t.prototype.isValueOutOfRange = function (e, t) { var o = e.options ? e.options.minValue : e.validators.min; return t > (e.options ? e.options.maxValue : e.validators.max) || t < o }, t.prototype.incrementDecrement = function (t, o, i) { var r = o.modelValue; if (null === r && o.placeholderText) i.$setViewValue(r); else if (!isNaN(r)) { if (t === this.upDirection ? e.Double.isInteger(r) ? r++ : r = Math.ceil(r) : t === this.downDirection && (e.Double.isInteger(r) ? r-- : r = Math.floor(r)), this.isValueOutOfRange(o, r)) return; o.modelValue = r, i.$setViewValue(r.toString()) } }, t
            })(); t.NumUpDown = o
        })(o = t.directives || (t.directives = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t() { return o++ } var o = 0; e.NextResizeSensorId = t; var i = (function () { function e(e, t) { var o = this; this.restrict = "A", this.link = function (e, t, i) { e.$evalAsync((function () { o.initialize(e, t, i) })) }, this.$parse = e, this.moduleLoader = t } return e.isResizeSensorScrollEvent = function (e) { return e && $(e.target).parent().hasClass("ResizeSensor") }, e.prototype.initialize = function (e, o, i) { var r = this.$parse(i.onResize); if (r) { var n, a, s = function (t) { var o = t.width, i = t.height; o === n && i === a || (n = o, a = i, e.onResizeViewport = t, r(e, t)) }; this.moduleLoader.require({ javascript: "resizeSensor" }).then((function (i) { var r = t(); i.create(o[0], r, s), e.$on("$destroy", (function () { i.destroy(r) })) })) } }, e })(); e.OnResize = i })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = jsCommon.Trace, i = (function () { function t(e, t, o) { var i = this; this.$compile = e, this.pbiLazyLoadService = t, this.moduleLoader = o, this.restrict = "A", this.compile = function (e, t) { var o = e[0].innerHTML; return e.html(""), { post: function (e, t, r) { return i.postLink(e, t, r, o) } } } } return t.prototype.postLink = function (i, r, n, a) { return __awaiter(this, void 0, e.Promise, (function () { var e, s, c, l; return __generator(this, (function (d) { switch (d.label) { case 0: e = i.$eval(n.pbiLazyLoadContents), s = this.$compile(t.SpinnerHtml)(i), r.append(s), d.label = 1; case 1: return d.trys.push([1, 6, , 7]), this.isModuleDependency(e) ? [4, this.moduleLoader.require(e)] : [3, 3]; case 2: return d.sent(), [3, 5]; case 3: return [4, this.pbiLazyLoadService.load(e)]; case 4: d.sent(), d.label = 5; case 5: return s.remove(), r.append(a), this.$compile(r.contents())(i), [3, 7]; case 6: return c = d.sent(), l = c && c.message || c, o.error(l), [3, 7]; case 7: return [2] } })) })) }, t.prototype.isModuleDependency = function (e) { return null != e.javascript }, t.SpinnerHtml = "<spinner [size]=\"'large'\" [position]=\"'centered'\"></spinner>", t })(); t.PbiLazyLoadContents = i })(o = t.directives || (t.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { e.PbiTableUpdateFilterEventName = "PbiTableUpdateFilter", e.pbiTableStyles = ["pbiTable"] })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = '<thead>\n            <tr>\n                <th ng-if="allSelectedClicked">\n                    <pbi-checkbox ng-model="allSelected.value" label="SelectAll" ng-change="allSelectedClicked()"></pbi-checkbox>\n                </th>\n                <th ng-repeat="header in headers track by $index"\n                    ng-class="{sortable: header.sortBy,\n                               orderByThis: header.sortBy && predicate == header.sortBy,\n                               desc: header.sortBy && predicate == header.sortBy && reverse}"\n                    ng-click="orderBy(header)">\n                    <span ng-bind="::header.displayName"></span>\n                    <i class="sort glyphicon glyph-mini" \n                       ng-class="{\'pbi-glyph-chevronupmedium\': !reverse, \'pbi-glyph-chevrondownmedium\': reverse}"><i/>\n                </th>\n            </tr>\n        </thead>', i = (function () { function t(t, o, i, r) { var n = this; this.$rootScope = t, this.$compile = o, this.$filterService = i, this.localizationService = r, this.restrict = "A", this.scope = { pbiTableConfig: "=", allSelected: "=?", allSelectedClicked: "&?" }, this.compile = function (t, o) { var i = t.find("td[header]"), r = t.find("td[localized-header]"); if (i.length > 0 || r.length > 0) { var a = t.find("td:not([checkbox])"); n.headers = [], a.each((function (t, o) { var i = $(o), r = new e.models.PbiTableHeader; r.header = i.attr("header"), r.localizedHeader = i.attr("localized-header"), r.sortBy = i.attr("sort-by"), n.headers.push(r) })) } return { post: function (t, o, i) { if (o.addClass(e.pbiTableStyles.join(" ")), !(t.pbiTableConfig && t.pbiTableConfig.hideHeader || _.isEmpty(n.headers))) { n.evaluateHeaders(t), t.headers = n.headers; var r = n.compilePbiTableHeader(t); o.prepend(r) } t.pbiTableConfig && (t.pbiTableConfig.filteredData = t.pbiTableConfig.data, t.orderBy = function (e) { return n.orderBy(t, e) }), n.$rootScope.$on(e.PbiTableUpdateFilterEventName, (function () { return n.filter(t) })) } } }, this.$rootScope = t, this.$compile = o, this.$filterService = i, this.localizationService = r } return t.prototype.compilePbiTableHeader = function (e) { return this.$compile(o)(e) }, t.prototype.evaluateHeaders = function (e) { for (var t = 0, o = this.headers; t < o.length; t++) { var i = o[t]; i.header ? i.displayName = e.$eval(i.header) : i.localizedHeader && (i.displayName = this.localizationService.get(i.localizedHeader)) } }, t.prototype.orderBy = function (e, t) { if (t.sortBy && e.pbiTableConfig) { var o = e.pbiTableConfig.filteredData; e.predicate = t.sortBy, e.reverse = !e.reverse, e.pbiTableConfig.filteredData = this.$filterService("orderBy")(o, t.sortBy, e.reverse) } }, t.prototype.filter = function (e) { e.pbiTableConfig && (e.pbiTableConfig.filteredData = this.$filterService("filter")(e.pbiTableConfig.data, e.pbiTableConfig.shouldDisplayData)) }, t })(); t.PbiTable = i })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e })(); e.PbiTableHeader = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.$parse = e, this.restrict = "A", this.link = function (e, o, i) { var r, n, a, s, c, l, d = e.$eval("(" + i.pinchable + ")"), u = d.minScale ? parseInt(d.minScale, 10) : 1, p = d.maxScale ? parseInt(d.maxScale, 10) : 3, h = d.startHandler ? t.$parse(d.startHandler) : void 0, m = d.endHandler ? t.$parse(d.endHandler) : void 0, f = d.childDisplaySelector, g = o.find(f), v = g.parent(), y = d.zoomDisabled ? t.$parse(d.zoomDisabled) : function (e) { return !1 }, b = e, w = 1, S = 1, D = 0, C = 0, T = 0, E = 0, I = 0, P = 0; i.$observe("enablePinch", (function (e) { _("false" !== e) })); var k = function (o) { h && h(e, { scale: w }); var i = o; return i.interaction && i.interaction.pointerIds && t.isSingleTouchEvent(i) ? (i.interaction.pointerIds.splice(0, 1), void interact.stop(i.touches[0])) : (n = o.pageX, a = o.pageY, S = w, c = v.scrollLeft() - I, l = v.scrollTop() - P, v.scrollLeft(0), void v.scrollTop(0)) }, x = function (t) { w *= 1 + t.ds, w = Math.max(u, Math.min(w, y(e) ? 1 : p)), T = (D + c) * w / S, T += (w / S - 1) * t.pageX, T += (n - t.pageX) * w, T = Math.max(T, 0); var i = g.width() * w - o.width(); T = Math.min(T, i), E = (C + l) * w / S, E += (w / S - 1) * t.pageY, E += (a - t.pageY) * w, E = Math.max(E, 0); var s = g.height() * w - o.height(); E = Math.min(E, s), r.scale = w, r.isPinched = 1 !== w, g.css("transform", "translate(" + -T + "px," + -E + "px) scale(" + w + ")") }, R = function (t) { m && m(e, { scale: w }), I += T - D, P += E - C, D = T, C = E, g.css("transform", "scale(" + w + ")"), v.addClass("pinched"), v.scrollLeft(I), v.scrollTop(P), Math.abs(w - 1) < .01 && v.removeClass("pinched") }, A = function (e) { }, _ = function (e) { w = 1, r = { isPinched: !1, scale: w }, b.pinchableData = r, R(null), s = e ? interact(o.get(0)).gesturable({ onstart: k, onmove: x, onend: R }).preventDefault("never").styleCursor(!1) : interact(o.get(0)).gesturable({ onstart: A, onmove: A, onend: A }).preventDefault("never").styleCursor(!1) }; e.$on("$destroy", (function () { s.unset() })) } } return e.prototype.isSingleTouchEvent = function (e) { var t = e; return t.interaction.downEvent && t.interaction.downEvent.touches && t.interaction.downEvent.touches.length < 2 }, e })(); e.Pinchable = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.replace = !0, this.transclude = !0, this.templateUrl = "views/popupContainer.html", this.scope = { parent: "=?", containerSelector: "<?", close: "&" }, this.link = function (t, o, i) { if (void 0 !== i.bindParentWidth) { var r = t.parent || o.parent(); o.css({ width: r.css("width") }) } e.registerOutsideClickHandler(t), t.$evalAsync((function () { var e, i = t.parent || o.parent(), r = o.outerHeight(); if (t.containerSelector) { var n = o.parents(t.containerSelector); e = n.offset().top + n.outerHeight() } else e = $(window).height(); var a = r + o.offset().top > e, s = i.get(0), c = s.getBoundingClientRect(), l = c.top, d = c.left, u = i.parents('[style*="transform:"]:first'); if (u.length > 0) { var p = u.get(0), h = p.getBoundingClientRect(); l -= h.top, d -= h.left } var m = l - r; a ? o.css({ top: m, left: d }) : o.css({ top: l + c.height, left: d }) })) } } return e.registerOutsideClickHandler = function (t) { $(window).one(jsCommon.DOMConstants.mouseClickEventName, (function (o) { var i = "popup-container-toggle", r = "." + i; if (o) { $(o.target).closest(r).length > 0 ? e.registerOutsideClickHandler(t) : (t.close(), t.$applyAsync()) } })) }, e })(); e.PopupContainer = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.link = function (e, t, o) { var i, r, n, a, s = angular.element('<div class="pane-splitter"></div>'); t.append(s); var c = parseInt(o.resizableCollapsedWidth, 10), l = parseInt(o.resizableDefaultWidth, 10), d = parseInt(o.resizableMinWidth, 10), u = parseInt(o.resizableMaxWidth, 10), p = o.resizableContainerid, h = o.resizableSibling, m = o.resizableSide, f = parseInt(s.css("width"), 10), g = function (o) { if ("true" !== o) t.css("width", c + "px"), s.hide(); else { var r = $(document).find("#" + p), a = void 0 === e.currentWidth ? l : e.currentWidth; if (i = r.width(), i > 0 && h) { var d = $(r).find("." + h); if (1 === d.length) { n = d.width(); if (i - n < a) { var u = i - a - f; u > 0 && d.css("width", u + "px") } } } e.currentWidth = a, t.css("width", a + "px"), s.show() } }, v = function (e) { a && (e.preventDefault(), a = !1, $(document).off("mousemove", y), $(document).off("mousedown", v)) }, y = function (o) { if (a) { var s = i; n && (s = s - n - f), u && (s = Math.min(u, s)); var c = ("left" !== m ? 1 : -1) * o.clientX, l = r - c; l > s && (l = s), l < d && (l = d), e.currentWidth = l, t.css("width", l + "px") } }, b = function (e) { e.preventDefault(); var o = $(document).find("#" + p); if (i = o.width(), r = t.offset().left + ("left" !== m ? t.width() : 0), h) { var s = $(o).find("." + h); 1 === s.length && (n = s.width()) } else n = void 0; a = !0, $(document).on("mouseup", v), $(document).on("mousemove", y) }; g(o.resizableExpanded), o.$observe("resizableExpanded", g), s.on("mousedown", b), e.$on("$destroy", (function () { s.off("mousedown", b) })) } } return e })(); e.Resizable = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { this.restrict = "E", this.replace = !0, this.templateUrl = "views/searchBox.html", this.scope = { filter: "=", onChange: "&?", onBlur: "&?", shouldFocus: "<?", showClearButton: "<?", arialabel: "@?", arialabelledby: "@?", ariadescribedby: "@?", ariarequired: "<?", arialive: "@?" }, this.link = function (t, o, i) { t.$watch("filter", (function () { t.onChange && t.onChange() })), t.placeholderText = e.localize.get(i.placeholder || "SearchBox_Text"), t.arialabel || (t.arialabel = e.localize.get("SearchBox_Text")), t.clearFilterInput = function () { return t.filter = "" }; var r = o.find("input"); t.ariadescribedby && r.attr("aria-describedby", t.ariadescribedby), t.arialabel && r.attr("aria-label", t.arialabel), t.arialabelledby && r.attr("aria-labelledby", t.arialabelledby), t.ariarequired && r.attr("aria-required", t.ariarequired), t.arialive && r.attr("aria-live", t.arialive) } } return t })(); t.SearchBox = o })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "E", this.require = "?ngModel", this.scope = !1, this.link = function (e, t, o, i) { i && t.bind("keyup", (function (e) { 38 !== e.keyCode && 40 !== e.keyCode || t.triggerHandler("change") })) } } return e })(); e.Select = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(t) { var o = this; this.$timeout = t, this.restrict = "E", this.require = "ngModel", this.scope = { options: "<", selectClass: "@", labelId: "<?", isDisabled: "<?", newPaneColors: "<" }, this.templateUrl = "views/selectMenu.html", this.link = function (t, i, r, n) { e.ensureWidgetRegistered(); var a = [], s = i.find("select"), c = !1, l = !1, d = t.newPaneColors ? "newPaneColors" : "", u = s.customSelectMenu({ change: function (e, o) { t.selectValue = o.item.value, n.$setViewValue(o.item.value), p() }, position: { my: "left top", at: "left bottom", collision: "flip" }, open: function () { c = !0 }, close: function () { l ? (l = !1, s.customSelectMenu("open")) : c = !1 }, labelById: t.labelId }).customSelectMenu("menuWidget").addClass("selectmenu themeableElement " + d); i.context.addEventListener("keydown", (function (e) { 13 !== e.keyCode || c || (l = !0, s.customSelectMenu("open")) }), !0), i.context.addEventListener("keydown", (function (e) { (c || 38 === e.keyCode || 40 === e.keyCode || 37 === e.keyCode || 39 === e.keyCode) && e.stopPropagation() }), !1), t.selectClass && u.addClass(t.selectClass), n.$render = function () { t.selectValue = n.$viewValue, p() }, t.$watch("options", (function (e, t) { p() }), !0), t.$watch("isDisabled", (function (e, t) { e && s && s.customSelectMenu ? s.customSelectMenu("disable") : s.customSelectMenu("enable"), p() }), !0); var p = function () { a.push(o.$timeout((function () { s && s.customSelectMenu && s.val(t.selectValue).customSelectMenu("refresh") }), 0)) }; t.$on("$destroy", (function () { angular.forEach(a, (function (e) { o.$timeout.cancel(e) })) })) } } return e.ensureWidgetRegistered = function () { var e = $; if (!(e && e.custom && e.custom.customSelectMenu)) { var t = { _renderItem: function (e, t) { return $("<li>", { text: t.label, title: t.label }).appendTo(e) } }; $.widget("custom.customSelectMenu", $.ui.selectmenu, t) } }, e })(); e.SelectMenu = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "A", this.scope = !1, this.link = function (e, o, i) { var r = function () { var e = t.$window.getSelection(); e.removeAllRanges(); var i = document.createRange(); i.selectNodeContents(o[0]), e.addRange(i) }; o.on(jsCommon.DOMConstants.mouseClickEventName, r), o.on(jsCommon.DOMConstants.focusEventName, r), e.$on("$destroy", (function () { o.off(jsCommon.DOMConstants.mouseClickEventName, r), o.off(jsCommon.DOMConstants.focusEventName, r) })) }, this.$window = e } return e })(); e.SelectTextOnClick = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { this.restrict = "E", this.templateUrl = "views/textInput.html", this.replace = !1, this.scope = { clearAfterComplete: "=?", emitOnBlur: "=?", isFocused: "=?", cancel: "&?", forceComplete: "=?", inputValue: "=?", maxInputLength: "=?", onComplete: "=?", placeholder: "=?", validate: "=?" }, this.controller = e.createController(e.controllers.TextInputController), this.link = function (e, t, o) { var i = t.find("input"); e.$watch((function () { return e.isFocused }), (function (e, t) { e !== !0 || i.is(":focus") ? e === !1 && i.is(":focus") && setTimeout((function () { i.blur() }), 0) : setTimeout((function () { i.focus() }), 0) })) } } return t })(); t.TextInput = o })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o, i = jsCommon.DOMConstants, r = "tooltip-config"; !(function (e) { e[e.Sibling = 0] = "Sibling", e[e.Ancestor = 1] = "Ancestor", e[e.Descendant = 2] = "Descendant" })(o = t.TooltipAnchorElementType || (t.TooltipAnchorElementType = {})); var n = (function () { function t() { this.restrict = "A", this.controller = e.createController(a) } return t })(); t.Tooltip = n; var a = (function () { function t(e, t) { this.services = t, this.scope = e, this.element = this.services.$element, this.showTooltip = $.proxy(this.showTooltipInternal, this), this.hideTooltip = $.proxy(this.hideTooltipInternal, this), this.services.$element.on(i.mouseMoveEventName, this.showTooltip), this.services.$element.on(i.mouseLeaveEventName, this.hideTooltip), this.services.$element.on(i.focusInEventName, this.showTooltip), this.services.$element.on(i.focusOutEventName, this.hideTooltip) } return t.createOptions = function () { return { additionalServices: ["$element", "tooltipService", "localizationService", "$attrs"] } }, t.prototype.showTooltipInternal = function (t) { var o, i = this.element.attr(r); if (_.isEmpty(i)) { var n = this.element.attr("aria-label"); o = { tooltipArrowVerticalPosition: e.ArrowVerticalPosition.bottom, tooltipTitle: n, tooltipShowOnFocus: !0 } } else o = this.scope.$eval(i); this.isVisible = !0, this.services.tooltipService.showTooltip(o, t, this.element) }, t.prototype.hideTooltipInternal = function (e) { this.isVisible = !1, this.services.tooltipService.hideTooltip(e) }, t.prototype.onDestroy = function () { this.isVisible && this.services.tooltipService.hideTooltip(), this.services.$element.off(i.mouseMoveEventName, this.showTooltip), this.services.$element.off(i.mouseLeaveEventName, this.hideTooltip), this.services.$element.off(i.focusInEventName, this.showTooltip), this.services.$element.off(i.focusOutEventName, this.hideTooltip) }, t })() })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.link = function (e, t, o) { var i, r, n = !1, a = angular.element('<div class="pane-vertical-splitter"></div>'); t.append(a); var s = parseInt(o.vResizableCollapsedHeight, 10), c = parseInt(o.vResizableDefaultHeight, 10), l = !(null == o.vResizableDefaultHeight.match(/\d+%/g)), d = parseInt(o.vResizableMinHeight || 0, 10), u = parseInt(o.vResizableMaxHeight, 10), p = o.vResizableContainerId, h = parseInt(o.vResizableOtherSiblingsHeight || 0, 10), m = o.vResizableOnResizeCallback ? e[o.vResizableOnResizeCallback] : void 0, f = "false" !== o.vResizableFromTop && o.vResizableFromTop !== !1; f ? a.css("top", 0) : a.css("bottom", 0); var g = function () { return $(document).find("#" + p).height() }, v = function (o) { i = g(); var a = e.currentHeight; n && void 0 !== a ? o && (a = Math.floor(i * r)) : a = l ? Math.floor(i / 100 * c) : c; var s = u ? Math.min(i - h, u) : i - h; a = Math.max(d, Math.min(s, a)), e.currentHeight = a, t.css("height", a + "px") }, y = function (e) { "true" !== e ? (t.css("height", s + "px"), a.hide()) : (v(!1), a.show()) }, b = function () { v(!0) }, w = function (e) { i = g() }, S = function (o) { var r = i - h; u && (r = Math.min(u, r)); var a = t.height() + (f ? -o.dy : o.dy); a > r && (a = r), a < d && (a = d), n = !0, e.$applyAsync((function (e) { e.currentHeight = a, t.css("height", a + "px") })) }, D = function (t) { r = e.currentHeight / g(), m && m(e.currentHeight) }; v(o.vResizableExpanded), o.$observe("vResizableExpanded", y), o.$observe("vResizableContainerResize", b); var C = interact(a[0]).styleCursor(!1).draggable({ inertia: !1, onstart: function (e) { return w(e) }, onmove: function (e) { return S(e) }, onend: function (e) { return D(e) } }); e.$on("$destroy", (function () { C.unset() })) } } return e })(); e.VResizable = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.changingCSSClass = "changing", this.prevWidth = 0, this.prevHeight = 0, this.prevLeft = 0, this.prevTop = 0, this.previsChanging = !1, this.prevIsVisible = !0, this.appliedClass = "", this.titleClass = "", this.gridLayoutItem = e, this.element = t } return e.prototype.render = function () { var e = this.gridLayoutItem, t = this.element, o = this.element.style; e.left === this.prevLeft && e.top === this.prevTop || (o.webkitTransform = o.transform = "translate(" + e.left + "px, " + e.top + "px)", this.prevTop = e.top, this.prevLeft = e.left); var i = !1; e.width !== this.prevWidth && (o.width = e.width + "px", this.prevWidth = e.width, i = !0), e.height !== this.prevHeight && (o.height = e.height + "px", this.prevHeight = e.height, i = !0), i && (this.calculateMenuSize(e.width, e.height), this.calculateTitleSize(e.width)), e.isChanging !== this.previsChanging && (e.isChanging ? t.classList.add(this.changingCSSClass) : t.classList.remove(this.changingCSSClass), this.previsChanging = e.isChanging), e.isVisible !== this.prevIsVisible && (e.isVisible ? o.display = "block" : o.display = "none", this.prevIsVisible = e.isVisible), e.isChanging || this.addDataAttributes(t, e) }, e.prototype.addDataAttributes = function (e, t) { try { var o = t.gridItem; if (o) { var i = t.getLayoutPosition(); e.setAttribute("data-id", o.id.toString()), e.setAttribute("data-row", i.y.toString()), e.setAttribute("data-col", i.x.toString()), e.setAttribute("data-sizex", i.width.toString()), e.setAttribute("data-sizey", i.height.toString()) } } catch (e) { } }, e.prototype.updateTileClasses = function (e, t) { return t === e ? t : (_.isEmpty(t) || this.element.classList.remove(t), _.isEmpty(e) || this.element.classList.add(e), e) }, e.prototype.calculateMenuSize = function (t, o) { var i = this.appliedClass; o <= e.smallestTileHeight ? i = e.smallestTileHeightStr : t <= e.smallerTileWidth || o <= e.smallestTileHeight ? i = e.smallerTileWidthStr : t >= e.largerTileWidth ? i = e.largerTileWidthStr : t > e.smallerTileWidth && t < e.largerTileWidth && (i = ""), this.appliedClass = this.updateTileClasses(i, this.appliedClass) }, e.prototype.calculateTitleSize = function (t) { var o = t <= e.smallTitleWidth ? e.smallTitleWidthStr : e.largeTitleWidthStr; this.titleClass = this.updateTileClasses(o, this.titleClass) }, e.smallerTileWidthStr = "smallerTileWidth", e.largerTileWidthStr = "largerTileWidth", e.smallestTileHeightStr = "smallestTileHeight", e.smallestTileHeight = 180, e.smallerTileWidth = 260, e.largerTileWidth = 780, e.smallTitleWidthStr = "smallTitleWidth", e.largeTitleWidthStr = "largeTitleWidth", e.smallTitleWidth = 160, e })(); e.GridLayoutItemRenderer = t })(t = e.helpers || (e.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.dummyChromeId = "dummy-chrome", e.pbiLoadingSplashId = "pbi-loading", e.animinationDoneClassName = "done", e.animationDelay = 1e3; var t = (function () { function t() { } return t.removeDummyChrome = function (t) { var o = $("#" + e.dummyChromeId), i = $("#" + e.pbiLoadingSplashId); o.length > 0 && i.addClass(e.animinationDoneClassName).one("transitionend", (function () { t((function () { return o.remove() }), e.animationDelay) })) }, t })(); e.InitialLoadingScreenHelper = t })(t = e.helpers || (e.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i; !(function (o) { function i(o, i, r) { var n = JSON.stringify(r); if (null != o.parent && (o.parent.postMessage(n, e.common.constants.hostOrigin), i)) { var a = { message: t.constants.contentProviderStoreCloseModalDialogMessage }; o.parent.postMessage(JSON.stringify(a), e.common.constants.hostOrigin) } } o.continueWithImportFlow = i })(i = o.ImportHelper || (o.ImportHelper = {})) })(o = t.helpers || (t.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t() { return "https://go.microsoft.com/fwlink/?LinkID=521962" } e.getDownloadLink = t })(t = e.powerBIExcelHelper || (e.powerBIExcelHelper = {})) })(t = e.helpers || (e.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { function o(e) { if (e && e["pbi.error"]) { var t = e["pbi.error"]; if (t) return a(t.code, t.parameters, t.details) } } function i(e) { if (e && e.errorCode) return a(e.errorCode, e.parameters, e.errorDetails) } function r(t, o) { var i = new e.ServiceErrorToClientError(t); if (i.requestId = o, t) return i.getDetails(e.common.localize) } function n(t) { if (t) return t.getDetails(e.common.localize) } function a(t, o, i) { try { return e.ServiceErrorHelper.getErrorDetails(e.common.localize, t, o, i) } catch (e) { return } } t.generateErrorMessage = o, t.generateErrorMessageFromServiceError = i, t.GetErrorDetailsFromServiceError = r, t.GetErrorDetailsFromClientError = n })(o = t.PowerBIServiceExceptionErrorHelper || (t.PowerBIServiceExceptionErrorHelper = {})) })(t = e.helpers || (e.helpers = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { e.contentProviderHelpLink = { 13: "https://go.microsoft.com/fwlink/?LinkId=546971", 19: "https://go.microsoft.com/fwlink/?LinkID=528958", 10: "https://go.microsoft.com/fwlink/?LinkID=528796", 30: "https://go.microsoft.com/fwlink/?LinkId=613552", 23: "https://go.microsoft.com/fwlink/?LinkID=528959", 16: "https://go.microsoft.com/fwlink/?LinkID=528957", 17: "https://go.microsoft.com/fwlink/?LinkID=528797", 20: "https://go.microsoft.com/fwlink/?LinkId=613120", 9: "https://go.microsoft.com/fwlink/?LinkID=528963", 26: "https://go.microsoft.com/fwlink/?LinkID=528960", 42: "https://go.microsoft.com/fwlink/?LinkId=536680", 41: "https://go.microsoft.com/fwlink/?LinkId=613402", 52: "https://go.microsoft.com/fwlink/?LinkId=615189", 14: "https://go.microsoft.com/fwlink/?LinkId=544911", 38: "https://go.microsoft.com/fwlink/?LinkID=615577", 18: "https://go.microsoft.com/fwlink/?LinkId=533295", 24: "https://go.microsoft.com/fwlink/?LinkID=528961" }, e.contentProviderFallbackLink = "https://go.microsoft.com/fwlink/?LinkId=532757", e.excelWorkbookUploadFailedHelpLink = "https://go.microsoft.com/fwlink/?LinkId=525916", e.excelWorkbookUploadFailedDefaultHelpLink = "https://go.microsoft.com/fwlink/?LinkId=823121", e.excelWorkbookUploadFailedDataGatewayExceptionHelpLink = "https://go.microsoft.com/fwlink/?LinkId=786855", e.excelWorkbookUploadFailedExceedsMaxSizeExceptionHelpLink = "https://go.microsoft.com/fwlink/?LinkId=823122", e.learnMoreAboutEnterpriseGatewaysHelpLink = "https://go.microsoft.com/fwlink/?LinkId=627094", e.EsriLearnMoreUrl = "https://go.microsoft.com/fwlink/?LinkID=825665" })(t = e.models || (e.models = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { e.angularInjectorController = "$$$angularInjectorController" })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.css = {}, this.elems = [] } return e.prototype.addAttributes = function (e) { for (var t in e) this.css[t] = e[t] }, e.prototype.element = function (e) { this.elems = [e] }, e.prototype.addElement = function (e) { this.elems.push(e) }, e.prototype.removeElement = function (e) { _.pull(this.elems, e) }, e.prototype.position = function (e) { var t = this.css; t.WebkitTransform = t.transform = "translate(" + e.x + "px, " + e.y + "px)" }, e.prototype.viewport = function (e) { var t = this.css; t.height = e.height, t.width = e.width }, e.prototype.zIndex = function (e) { this.css.zIndex = e }, e.prototype.rotate = function (e) { if (e) { var t = this.css; t.WebkitTransform = t.transform += " rotate(" + e + "deg)" } }, e.prototype.apply = function (e) { if (e) e.css(this.css); else for (var t = 0, o = this.elems; t < o.length; t++) { var i = o[t]; i.css(this.css) } }, e })(); e.ApplyStyle = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.showAuthDialog = !1, this.showModalDialog = !1, this.showSpinner = !1, this.selectedAuthenticationIndex = 0, this.showError = !1, this.showDetailsMessage = !1, this.updatePackage = !1, this.allowSingleSignOn = !1, this.showSingleSignOn = !1, this.isSingleSignOnEnabled = !1, this.skipTestConnectionOption = !1 } return e })(); e.AuthDialogModel = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.expandedWidth = 0 } return e })(); e.CollapsiblePaneModel = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.Text = 0] = "Text", e[e.Image = 1] = "Image", e[e.Link = 2] = "Link", e[e.Action = 3] = "Action", e[e.Status = 4] = "Status" })(t = e.ContextMenuItemMetadataType || (e.ContextMenuItemMetadataType = {})); var o; !(function (e) { e[e.Error = 0] = "Error", e[e.Success = 1] = "Success", e[e.Unknown = 2] = "Unknown" })(o = e.ContextMenuItemMetadataStatus || (e.ContextMenuItemMetadataStatus = {})) })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.id = 0, this.default = !1, this.showTag = !0 } return e })(); e.DataClassification = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = 320, i = 512, r = (function () { function t(t, r) { void 0 === t && (t = o), void 0 === r && (r = i), this.displayWidth = t, this.displayHeight = r, this.resizeBuffer = 10, this.isLayoutLocked = !1, this.willOverrideDisplayPosition = !1, this.gridWidth = e.GridLayoutConstants.dynamicGridWidth + 2 * e.GridLayoutConstants.dynamicGridItemSpacing, this.gridHeight = e.GridLayoutConstants.dynamicGridHeight + 2 * e.GridLayoutConstants.dynamicGridItemSpacing, this.gridItemSpacing = 2 * e.GridLayoutConstants.dynamicGridItemSpacing, this.gridMinWidthOnResize = this.gridWidth - this.resizeBuffer, this.gridMinHeightOnResize = this.gridHeight - this.resizeBuffer, this.gridMaxWidthOnResize = this.gridWidth * e.GridLayoutConstants.dynamicMaxGridWidthUnits, this.gridMaxHeightOnResize = this.gridHeight * e.GridLayoutConstants.dynamicMaxGridHeigthUnits } return t.prototype.calculateDisplayPositions = function (e) { for (var t = 0, i = e; t < i.length; t++) { i[t].clearOverrides() } this.scale = this.displayWidth / o; var r = { transform: "scale(" + this.scale + ")", width: this.displayWidth / this.scale + "px", height: this.displayHeight / this.scale + "px", left: 0 }; if (!_.isEmpty(e)) { var n = _.head(e).gridLayoutContainer.element.parent(); n.removeAttr("style"), n.css(r) } }, t.prototype.calculateDisplaySize = function (e) { }, t.prototype.isDynamic = function () { return !0 }, t })(); t.DynamicLayoutStrategy = r })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.layoutPosition = { height: 0, width: 0 } } return e.prototype.calculateLayout = function (e) { }, e.prototype.applyLayout = function (e) { }, e.prototype.applyLayoutSize = function (e, t) { }, e.prototype.applyChanges = function () { }, e.prototype.buildLayoutDescriptor = function () { return null }, e.prototype.tryPopulateLayoutPositionValues = function () { return !1 }, e })(); e.PlaceHolderGridItem = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (e) {
            var t, o = jsCommon.DeferUtility; !(function (e) { e.gridDefaultCols = 5, e.notifyGridItemsChangedDelay = 1e3, e.maxCoordinateRow = 100, e.easeInColDelay = 80, e.easeInRowDeplay = 300, e.gridMaxColSpan = 7, e.gridMaxRowSpan = 7, e.maintainAspectRatio = !1; var t; !(function (e) { e[e.drag = 0] = "drag", e[e.resizing = 1] = "resizing", e[e.resized = 2] = "resized", e[e.refresh = 3] = "refresh" })(t = e.changeType || (e.changeType = {})) })(t = e.gridLayoutConstants || (e.gridLayoutConstants = {})); var i = (function () {
                function i(i, r, n) { var a = this; this.defferedOnGridLayoutChanged = o.deferUntilNextFrame((function (e) { return a.onGridLayoutChanged(e) })), this.delayedNotifyGridItemsChanged = _.debounce((function () { return a.notifyGridItemsChanged() }), t.notifyGridItemsChangedDelay), this.layoutChangedPromise = null, this.isLayoutUpdateLocked = !1, this.gridLayoutItems = []; var s = new e.PlaceHolderGridItem; this.gridPlaceHolder = new e.GridLayoutItem(s, i, null), this.gridPlaceHolder.isVisible = !1, this.gridLayoutService = i, this.gridLayoutScope = n, this._gravityEnabled = this.isGravityEnabled(), this.element = r } return i.prototype.isGravityEnabled = function () { return this.gridLayoutScope && this.gridLayoutScope.viewModel && this.gridLayoutScope.viewModel.gravityEnabled || 0 !== this.gridLayoutService.displayLayout }, Object.defineProperty(i.prototype, "gravityEnabled", { get: function () { return this._gravityEnabled }, enumerable: !0, configurable: !0 }), i.prototype.addGridLayoutItem = function (e) { var o = this; e.layoutChangeHandler = this.defferedOnGridLayoutChanged, e.removeHandler = function (e) { return o.onGridLayoutItemRemove(e) }, this.gridLayoutItems.push(e), this.defferedOnGridLayoutChanged(t.changeType.refresh) }, i.prototype.onGridLayoutItemRemove = function (e) { var o = this.gridLayoutItems.indexOf(e); o >= 0 && this.gridLayoutItems.splice(o, 1), this.defferedOnGridLayoutChanged(t.changeType.refresh) },
                    i.prototype.onGridLayoutChanged = function (e) { this._gravityEnabled = this.isGravityEnabled(); var o = this.calculateLayout(e); this.applyLayout(e), e !== t.changeType.drag && e !== t.changeType.resizing && e !== t.changeType.resized || this.setLayoutUpdateLock(!0), o || (this.finalizeGridLayout(), this.delayedNotifyGridItemsChanged()) }, i.prototype.finalizeGridLayout = function () { for (var e = 0, t = this.gridLayoutItems; e < t.length; e++) { var o = t[e]; o.rowBeforeMove = o.getLayoutPosition().y } }, i.prototype.notifyGridItemsChanged = function () { var e = this, t = this.getChangedGridItemsDescriptors(); t.length > 0 && !this.layoutChangedPromise && (this.layoutChangedPromise = this.notifyGridItemsChangedHandler(t), this.layoutChangedPromise ? (this.changedLayoutDescriptors = t, this.setLayoutUpdateLock(!0), this.layoutChangedPromise.then((function () { return e.layoutChangeDone(!0) }), (function () { return e.layoutChangeDone(!1) }))) : this.layoutChangeDone(!1)) }, i.prototype.layoutChangeDone = function (e) { this.layoutChangedPromise = null, this.setLayoutUpdateLock(!1), e && (this.resetChangedGridItemsDescriptors(this.changedLayoutDescriptors), this.notifyGridItemsChanged()) }, i.prototype.calculateLayout = function (e) { if (0 !== this.gridLayoutItems.length) { var o = this.gridLayoutItems, i = _.filter(o, (function (e) { return e.isChanging })).length > 0, r = t.gridDefaultCols, n = []; this.containerHeight = this.containerWidth = 0; var a = this.popNewGridLayoutItems(o); if (o.sort((function (e, t) { return e.getLayoutPosition().x - t.getLayoutPosition().x })), o.length > 0) { var s = o[o.length - 1].getLayoutPosition(); r = Math.max(Math.ceil(s.x + s.width - 1), t.gridDefaultCols) } for (var c = 0; c <= r; ++c)n.push(1); o.sort((function (e, t) { var o = i && !e.isChanging ? e.rowBeforeMove : e.getLayoutPosition().y, r = i && !t.isChanging ? t.rowBeforeMove : t.getLayoutPosition().y, n = o - r; if (0 === n) { if (e.isChanging) return -1; if (t.isChanging) return 1 } return n })); for (var l = 0, d = o; l < d.length; l++) { var u = d[l]; u.isChanging ? (this.clipGridItemShape(this.gridPlaceHolder, u), this.calculatePosition(this.gridPlaceHolder, n, !0, e, i), this.gridPlaceHolder.calculateLayout()) : (this.clipGridItemShape(u, u), this.calculatePosition(u, n, !1, e, i)) } for (var p = 0, h = a; p < h.length; p++) { var u = h[p]; this.clipGridItemShape(u, u), this.calculateDefaultPosition(u, n), this.gridLayoutItems.push(u) } this.gridLayoutService.strategy.calculateDisplayPositions(o); for (var m = 0, f = o; m < f.length; m++) { var u = f[m]; u.calculateLayout(), this.updateContainerSize(u) } return this.gridPlaceHolder.isVisible = i, i } }, i.prototype.applyLayout = function (e) { for (var t = 0, o = this.gridLayoutItems; t < o.length; t++) { o[t].applyLayout(e) } this.gridPlaceHolder.applyLayout(e) }, i.prototype.updateContainerSize = function (e) { var t = e.top + e.height, o = e.left + e.width; t > this.containerHeight && (this.containerHeight = t), o > this.containerWidth && (this.containerWidth = o) }, i.prototype.calculatePosition = function (e, o, i, r, n) { for (var a = e.getLayoutPosition(), s = t.maxCoordinateRow, c = 1, l = a.x, d = a.x + a.width; l < d; ++l) { var u = o[l]; u > c && (c = u) } var p = a.y; if (n && !i && (p = e.rowBeforeMove), this._gravityEnabled ? (a.y = c, c += a.height) : (a.y = p < c || p > s ? c : Math.round(p), c = a.y + a.height), i && r === t.changeType.resizing || r === t.changeType.resized) { var h = Math.round(p) + a.height; h > c && (c = h) } for (var l = a.x, d = a.x + a.width; l < d; ++l)o[l] = c }, i.prototype.calculateDefaultPosition = function (e, o) { for (var i = e.getLayoutPosition(), r = 1, n = Number.MAX_VALUE, a = 1, s = Math.max(t.gridDefaultCols, i.width) - i.width + 1; a <= s; ++a) { for (var c = 0, l = a, d = a + i.width; l < d; ++l)o[l] > c && (c = o[l]); c < n && (n = c, r = a) } i.x = r, i.y = n, n += i.height; for (var a = i.x, s = i.x + i.width; a < s; ++a)o[a] = n }, i.prototype.clipGridItemShape = function (e, o) { var i = o.getLayoutPosition(), r = e.getLayoutPosition(), n = t.gridMaxColSpan, a = t.gridMaxRowSpan; r.y = i.y, r.x = Math.round(i.x), r.width = Math.ceil(i.width), r.height = Math.ceil(i.height), (!r.x || r.x < 1) && (r.x = 1), (!r.width || r.width < 1) && (r.width = 1), (!r.height || r.height < 1) && (r.height = 1), r.width > n && (r.width = n), r.height > a && (r.height = a) }, i.prototype.popNewGridLayoutItems = function (e) { for (var t = [], o = e.length, i = o - 1; i >= 0; --i) { var r = e[i]; if (!r.isChanging) { var n = r.getLayoutPosition(); n.y || n.x || (e.splice(i, 1), t.unshift(r)) } } return t }, i.prototype.getChangedGridItemsDescriptors = function () { for (var e = [], t = this.gridLayoutItems, o = 0, i = t; o < i.length; o++) { var r = i[o], n = r.getLayoutDescriptor(); n && e.push(n) } return e }, i.prototype.resetChangedGridItemsDescriptors = function (e) { for (var t = this.gridLayoutItems, o = {}, i = 0, r = t; i < r.length; i++) { var n = r[i]; o[n.gridItem.id] = n } for (var a = 0, s = e; a < s.length; a++) { var c = s[a], n = o[c.id]; n && n.resetLayoutDescriptor() } }, i.prototype.setLayoutUpdateLock = function (e) { if (this.isLayoutUpdateLocked !== e) { this.isLayoutUpdateLocked = e; for (var t = 0, o = this.gridLayoutItems; t < o.length; t++) { o[t].isLayoutUpdateLocked = e } } }, i
            })(); e.GridLayoutContainer = i
        })(t = e.models || (e.models = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function t(e, t, o) { this.activeLayout = t.displayLayout, this.isChanging = !1, this.isVisible = !0, this.isLayoutUpdateLocked = !1, this.gridLayoutService = t, this.gridLayoutContainer = o, this.gridItem = e, e.gridLayoutContext = this, this.gridItem.tryPopulateLayoutPositionValues(), this.resetLayoutDescriptor() } return Object.defineProperty(t.prototype, "displayCol", { get: function () { return this.overrideCol ? this.overrideCol : this.getLayoutPosition().x }, set: function (e) { this.overrideCol = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "displayRow", { get: function () { return this.overrideRow ? this.overrideRow : this.getLayoutPosition().y }, set: function (e) { this.overrideRow = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "displaySize", { get: function () { return this.overrideSize ? this.overrideSize : { colSpan: this.getLayoutPosition().width, rowSpan: this.getLayoutPosition().height } }, set: function (e) { this.overrideSize = e }, enumerable: !0, configurable: !0 }), t.prototype.remove = function () { this.removeHandler(this), this.gridItem.gridLayoutContext = null }, t.prototype.calculateLayout = function () { this.gridLayoutService.strategy.calculateDisplaySize(this), this.left = (this.displayCol - 1) * this.gridLayoutService.strategy.gridWidth, this.top = (this.displayRow - 1) * this.gridLayoutService.strategy.gridHeight, this.width = this.displaySize.colSpan * this.gridLayoutService.strategy.gridWidth, this.height = this.displaySize.rowSpan * this.gridLayoutService.strategy.gridHeight; var e = this.gridLayoutService.strategy.gridItemSpacing, t = { width: this.width - e, height: this.height - e }; this.gridItem.calculateLayout(t) }, t.prototype.applyLayout = function (e) { this.gridItem.applyLayoutSize(this.displaySize, e), this.render() }, t.prototype.clearOverrides = function () { this.overrideCol = void 0, this.overrideRow = void 0, this.overrideSize = void 0 }, t.prototype.onDragStart = function () { this.isChanging = !0 }, t.prototype.onDragMove = function (t) { var o = this.getLayoutPosition(); o.x = 1 + t.x / this.gridLayoutService.strategy.gridWidth, o.y = 1 + t.y / this.gridLayoutService.strategy.gridHeight, this.layoutChangeHandler(e.gridLayoutConstants.changeType.drag) }, t.prototype.onDragEnd = function () { this.isChanging = !1, this.layoutChangeHandler(e.gridLayoutConstants.changeType.drag) }, t.prototype.onResizeStart = function () { this.isChanging = !0 }, t.prototype.onResizeMove = function (t) { var o = this.getLayoutPosition(); o.width = t.width / this.gridLayoutService.strategy.gridWidth, o.height = t.height / this.gridLayoutService.strategy.gridHeight, this.layoutChangeHandler(e.gridLayoutConstants.changeType.resizing) }, t.prototype.onResizeEnd = function () { this.isChanging = !1, this.layoutChangeHandler(e.gridLayoutConstants.changeType.resized) }, t.prototype.getLayoutDescriptor = function () { var e = this.gridItem; try { if (!this.isChanging && e.id > 0 && this.isLayoutPositionChanged()) return e.buildLayoutDescriptor() } catch (e) { } return null }, t.prototype.isLayoutPositionChanged = function () { var e = this.getLayoutPosition(); return e.y !== this.prevY || e.x !== this.prevX || e.width !== this.prevWidth || e.height !== this.prevHeight }, t.prototype.resetLayoutDescriptor = function () { var e = this.gridItem; e && (this.resetPrevValues(), e.applyChanges()) }, t.prototype.resetPrevValues = function () { var e = this.getLayoutPosition(); this.prevX = e.x, this.prevY = e.y, this.prevWidth = e.width, this.prevHeight = e.height, this.rowBeforeMove = this.prevY }, t.prototype.getLayoutPosition = function () { return this.gridItem.layoutPosition }, t.prototype.getActiveLayout = function () { return this.activeLayout }, t.prototype.setActiveLayout = function (e) { this.activeLayout = e, this.gridItem.tryPopulateLayoutPositionValues() && this.onLayoutInvalidated() }, t.prototype.onLayoutInvalidated = function () { this.isLayoutUpdateLocked || (this.resetPrevValues(), this.layoutChangeHandler(e.gridLayoutConstants.changeType.refresh)) }, t.prototype.getGridHeight = function () { return this.gridLayoutContainer.element.height() }, t.prototype.getGridWidth = function () { return this.gridLayoutContainer.element.width() }, t.prototype.forceApplyCurrentChanges = function () { this.layoutChangeHandler(e.gridLayoutConstants.changeType.refresh) }, t })(); e.GridLayoutItem = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function o() { this.resizeBuffer = 10, this.isLayoutLocked = !1, this.willOverrideDisplayPosition = !1, this.gridWidth = e.GridLayoutConstants.defaultGridWidth, this.gridHeight = e.GridLayoutConstants.defaultGridHeight, this.gridItemSpacing = e.GridLayoutConstants.defaultGridItemSpacing, this.gridMinWidthOnResize = this.gridWidth - this.resizeBuffer, this.gridMinHeightOnResize = this.gridHeight - this.resizeBuffer, this.gridMaxWidthOnResize = this.gridWidth * t.gridLayoutConstants.gridMaxColSpan, this.gridMaxHeightOnResize = this.gridHeight * t.gridLayoutConstants.gridMaxColSpan } return o.prototype.calculateDisplayPositions = function (e) { for (var t = 0, o = e; t < o.length; t++) { o[t].clearOverrides() } }, o.prototype.calculateDisplaySize = function (e) { }, o.prototype.isDynamic = function () { return !1 }, o })(); t.DefaultGridLayoutStrategy = o })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.Info = 0] = "Info", e[e.Error = 1] = "Error", e[e.Warning = 2] = "Warning" })(t = e.InlineMessageIcon || (e.InlineMessageIcon = {})) })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function e() { } return e.Confirm = "confirm", e.Prompt = "prompt", e.Custom = "custom", e })(); t.DialogType = o; var i = (function () { function e() { } return e.Normal = "normal", e.Elevated = "elevated", e })(); t.ButtonImportance = i; var r = (function () { function e(e, t) { void 0 === e && (e = ""), void 0 === t && (t = ""), this.title = e, this.message = t, this.dialogType = o.Confirm } return e })(); t.ConfirmDialogContentModel = r; var n = (function () { function t(t, o, r, n, a, s) { void 0 === n && (n = !1), void 0 === a && (a = !1), void 0 === s && (s = !1), this.isConfirmButtonDisabled = t, this.confirmButtonText = o, this.autoCloseDialogOnConfirmButtonSelected = r, this.cancelButtonText = e.localize.get("ModalDialog_Cancel"), this.contentFilledDialog = n, this.hideActionsButtons = a, this.hideCancelButton = s, this.confirmButtonImportance = i.Normal, this.cancelButtonImportance = i.Normal } return t })(); t.ModalDialogModel = n })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.isSelected = !1, this.isEnabled = !0, this.isUsedByContentPack = !1, this.countOfLinkedAncestorsSelected = 0, this.resourceType = e } return e })(); e.Resource = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = e.contracts.ContentTileType, i = e.helpers.ModelConverterHelper, r = (function (e) { function t(o) { var i = e.call(this) || this; return i.contract = o, i.isRefreshInProgress = !1, i.uniqueId = t.getUniqueId(o.id, o.packageId), i.categories = 0, i } return __extends(t, e), t.prototype.getPermissions = function () { var e; return this.getPermissionsCallback && null != (e = this.getPermissionsCallback()) ? e : this.contract && this.contract.permissions }, Object.defineProperty(t.prototype, "hasError", { get: function () { return this.contract && (2 === this.packagePublishStatus || 4 === this.packagePublishStatus || 2 === this.contract.lastRefreshStatus || 4 === this.contract.lastRefreshStatus) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "lastRefreshTimeInLocaleString", { get: function () { var e = this.getLastRefreshTime(); if (e) return e.toLocaleString() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "lastRefreshEpochTime", { get: function () { var e = this.getLastRefreshTime(); if (e) return e.getTime() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "contentTileType", { get: function () { return o.Dataset }, enumerable: !0, configurable: !0 }), t.prototype.isRefreshDisabledDueToInactivity = function () { var e = this.contract && this.contract.refreshSchedule; return e && 1 === e.refreshDisabledReason }, t.getUniqueId = function (e, t) { return o.Dataset + "_" + e + "_" + t }, t.prototype.getLastRefreshTime = function () { var e = this.contract, t = e.onPremModelConnectionString ? e.lastTimeAModelChangeWasDetectedInTheCluster : e.lastRefreshTime; return i.convertRefreshTimeToJsDateTime(t) }, t })(t.Resource); t.Model = r })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = e.contracts.ContentTileType, i = (function (e) { function t(t) { var i = e.call(this) || this; return i.contract = t, i.uniqueId = o.CdsaModel + "_" + t.id, i.currentRefreshStatus = i.contract.lastRefreshStatus, i.objectId = i.contract.objectId, i } return __extends(t, e), t.prototype.getPermissions = function () { return this.contract && this.contract.permissions }, Object.defineProperty(t.prototype, "contentTileType", { get: function () { return o.CdsaModel }, enumerable: !0, configurable: !0 }), t })(t.Resource); t.CdsaModel = i })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function (e) { function t(o, i, r) { var n = e.call(this, i) || this; return n.uniqueId = t.getUniqueId(i, o, r), n } return __extends(t, e), t.getUniqueId = function (e, t, o) { return e + "_" + t + "_" + o }, t })(e.Resource); e.ReportResource = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = e.common.contracts, i = jsCommon.EnumExtensions, r = (function (e) { function t(t) { var i = e.call(this, "undefined" == typeof t ? 0 : t.id, 0, "undefined" == typeof t ? 0 : t.packageId) || this; return i.contract = t, i.isRefreshInProgress = !1, i.reportType = i.contract && 1 === i.contract.reportType ? 1 : 0, i.contentTileType = 1 === i.reportType ? o.ContentTileType.RdlReport : o.ContentTileType.Report, i } return __extends(t, e), t.prototype.getPermissions = function () { var e; return this.getPermissionsCallback && null != (e = this.getPermissionsCallback()) ? e : this.contract && this.contract.permissions }, Object.defineProperty(t.prototype, "canWrite", { get: function () { return i.hasFlag(this.getPermissions(), n.Write) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "canCopy", { get: function () { return i.hasFlag(this.getPermissions(), n.CopyOnWrite) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "canExplore", { get: function () { return i.hasFlag(this.getPermissions(), n.Explore) }, enumerable: !0, configurable: !0 }), t })(t.ReportResource); t.Report = r; var n; !(function (e) { e[e.None = 0] = "None", e[e.Read = 1] = "Read", e[e.Write = 2] = "Write", e[e.ReShare = 4] = "ReShare", e[e.Explore = 8] = "Explore", e[e.CopyOnWrite = 17] = "CopyOnWrite", e[e.ReadWrite = 3] = "ReadWrite", e[e.ReadReshare = 5] = "ReadReshare", e[e.Personalized = 11] = "Personalized", e[e.All = 7] = "All" })(n = t.ReportPermissions || (t.ReportPermissions = {})) })(o = t.models || (t.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (t) {
            var o = jsCommon.Lazy, i = e.contracts.DataCacheModeType, r = e.contracts.gateway.DataSourceType, n = jsCommon.DateExtensions; t.DefaultCertificationLearnMoreUrl = "https://go.microsoft.com/fwlink/?linkid=2086025"; var a = (function () { function o(e, t, o, i, r) { this.stage = e, this.description = t, this.certifyingUser = o, this.certificationTime = i, this.certificationUrl = r, this.maxDescriptionLength = 500, this.initialStage = e, this.initialDescription = t } return o.prototype.IsDirty = function () { return this.initialStage !== this.stage || this.initialDescription !== this.description }, o.prototype.DisplayDecertifyWarning = function () { return 2 === this.initialStage && 2 !== this.stage }, o.prototype.DiscardChanges = function () { this.stage = this.initialStage, this.description = this.initialDescription }, Object.defineProperty(o.prototype, "certifiedLabel", { get: function () { var t = { weekday: "long", year: "numeric", month: "long", day: "numeric" }, o = e.localize.get("Certified"); if (2 === this.initialStage) { var i = n.parseUtcDate(this.certificationTime); i && (o = o + " " + e.localize.format("Settings_Endorsement_Certification_Status", [this.certifyingUser, i.toLocaleDateString(e.localize.currentLanguageLocale, t)])) } return o }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "certificationLearnMoreUrl", { get: function () { return _.isEmpty(this.certificationUrl) ? t.DefaultCertificationLearnMoreUrl : this.certificationUrl }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "datasetDescriptionPlaceholder", { get: function () { return e.localize.get("SettingsDataset_Properties_Endorsement_Description_Placeholder") }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "descriptionSizeMessage", { get: function () { var t = this.maxDescriptionLength; return this.description && (t = Math.max(this.maxDescriptionLength - this.description.length, 0)), e.localize.format("Settings_Endorsement_DescriptionCharactersLeft", [t]) }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "defaultLabel", { get: function () { return e.localize.get("Default") }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "promotedLabel", { get: function () { return e.localize.get("Promoted") }, enumerable: !0, configurable: !0 }), o })(); t.DatasetPropertiesDetails = a; var s; !(function (e) { e[e.NotSpecified = 0] = "NotSpecified", e[e.NotStart = 1] = "NotStart", e[e.Progressing = 2] = "Progressing", e[e.Failed = 3] = "Failed", e[e.Passed = 4] = "Passed" })(s = t.TestConnectionState || (t.TestConnectionState = {})); var c = (function () { function e(e) { this.refreshSettings = e, this.refreshSectionExpand = !1 } return Object.defineProperty(e.prototype, "showWeekDays", { get: function () { return 10080 === this.refreshSettings.refreshFrequency }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "showRefreshTimeInfo", { get: function () { var e = this.refreshSettings.refreshFrequency; return 1440 === e || 10080 === e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "refreshFrequencyString", { get: function () { return this.refreshSettings.refreshFrequency.toString() }, set: function (e) { this.refreshSettings.refreshFrequency = parseInt(e, 10) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "weekdayKeys", { get: function () { return d.weekdayKeys.getValue() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "refreshTimeWindows", { get: function () { return d.refreshTimeWindows.getValue() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "refreshTimeHourWindows", { get: function () { return d.refreshTimeHourWindows.getValue() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "refreshTimeMinuteWindows", { get: function () { return d.refreshTimeMinuteWindows.getValue() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "refreshTimeAmPmWindows", { get: function () { return d.refreshTimeAmPmWindows.getValue() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "refreshTimeZones", { get: function () { return d.refreshTimeZones.getValue() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "refreshTimeZonesViewModel", { get: function () { return d.refreshTimeZonesViewModel.getValue() }, enumerable: !0, configurable: !0 }), e })(); t.RefreshSettingsModel = c; var l = (function () { function o(e, t, o, i, r, n, a, s, l) { this.contract = e, this.modelId = t, this.name = o, this.description = i, this.lastRefreshFailed = r, this.lastRefreshFailedMessage = n, this.nextRefresh = a, this.refreshSettingsModel = new c(s), this.parameters = l, this.takenOver = !1, this.isDirty = !1, this.areDatasourcesDirty = !1, this.isQnaDirty = !1, this.arePropertiesDirty = !1 } return Object.defineProperty(o.prototype, "takeoverStatusText", { get: function () { return this.lastTakeoverUPN ? this.getTakeoverStatusTextForUser(this.lastTakeoverUPN) : this.lastTakeoverEmailAddress ? this.getTakeoverStatusTextForUser(this.lastTakeoverEmailAddress) : this.lastTakeoverText ? e.localize.format("SettingsDataset_TakeOverStatusText_Before", [this.lastTakeoverText]) : e.localize.get("SettingsDataset_TakeOverStatusTextNullUser_Before") }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "takeoverButtonText", { get: function () { return this.takenOver ? e.localize.get("SettingsDataset_TakeOverButton_CancelTakeOver") : e.localize.get("SettingsDataset_TakeOverButton_TakeOver") }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "hasDatasourceWithWrongCredentials", { get: function () { return this.datasources && _.some(this.datasources, (function (e) { return !e.isCloudDirectQuery && e.testConnectionState !== t.TestConnectionState.Passed })) }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "showSkipTestConnectionWarning", { get: function () { return _.some(this.datasources, (function (e) { return e.skipTestConnection === !0 })) }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "hasDirectQueryDatasourceWithMissingCredentials", { get: function () { return this.datasources && _.some(this.datasources, (function (e) { return e.isCloudDirectQuery && e.testConnectionState === t.TestConnectionState.Failed })) }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "hasRDataSource", { get: function () { return this.datasources && _.some(this.datasources, (function (t) { return t.datasourceType === r.Extension && (t.name === e.constants.RDataSourceName || t.fullName === e.constants.RDataSourceName) })) }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "isPlainDirectQueryOrOnPremModel", { get: function () { return o.isPlainDirectQueryOrOnPremModel(this.contract) }, enumerable: !0, configurable: !0 }), o.isPlainDirectQueryOrOnPremModel = function (e) { return e.dataCacheMode === i.DirectQuery || !_.isEmpty(e.onPremModelConnectionString) }, o.prototype.getTakeoverStatusTextForUser = function (t) { return this.takenOver ? e.localize.format("SettingsDataset_TakeOverStatusText_After", ['<a href=mailto:"' + t + '">' + t + "</a>"]) : e.localize.format("SettingsDataset_TakeOverStatusText_Before", ['<a href=mailto:"' + t + '">' + t + "</a>"]) }, o })(); t.SettingsDatasetModel = l; var d; !(function (t) {
            t.weekdayKeys = new o(function () { return ["SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Sunday", "SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Monday", "SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Tuesday", "SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Wednesday", "SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Thursday", "SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Friday", "SettingsDataset_ScheduleRefresh_RefreshFrequency_Days_Saturday"] }), t.refreshTimeWindows = new o(function () { return [e.localize.get("SettingsDataset_ScheduleRefresh_TimeWindow_1"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeWindow_2"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeWindow_3"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeWindow_4")] }), t.refreshTimeHourWindows = new o(function () { return [e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_1"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_2"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_3"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_4"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_5"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_6"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_7"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_8"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_9"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_10"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_11"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeHourWindows_12")] }), t.refreshTimeMinuteWindows = new o(function () { return [e.localize.get("SettingsDataset_ScheduleRefresh_TimeMinuteWindos_00"), e.localize.get("SettingsDataset_ScheduleRefresh_TimeMinuteWindos_30")] }), t.refreshTimeAmPmWindows = new o(function () { return [e.localize.get("SettingsDataset_ScheduleRefresh_AmPmWindows_Am"), e.localize.get("SettingsDataset_ScheduleRefresh_AmPmWindows_Pm")] }), t.refreshTimeZones = new o(function () {
                return {
                    "Dateline Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Dateline_Standard_Time"), "UTC-11": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_11"), "Hawaiian Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Hawaiian_Standard_Time"), "Alaskan Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Alaskan_Standard_Time"), "Pacific Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time"), "Pacific Standard Time (Mexico)": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_Standard_Time_Mexico"), "Mountain Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time"), "Mountain Standard Time (Mexico)": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Mountain_Standard_Time_Mexico"), "US Mountain Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_US_Mountain_Standard_Time"), "Canada Central Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Canada_Central_Standard_Time"), "Central America Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_America_Standard_Time"), "Central Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time"), "Central Standard Time (Mexico)": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Standard_Time_Mexico"), "Eastern Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Eastern_Standard_Time"), "SA Pacific Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Pacific_Standard_Time"), "US Eastern Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_US_Eastern_Standard_Time"), "Venezuela Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Venezuela_Standard_Time"), "Atlantic Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Atlantic_Standard_Time"), "Central Brazilian Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Brazilian_Standard_Time"), "Pacific SA Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Pacific_SA_Standard_Time"), "SA Western Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Western_Standard_Time"), "Paraguay Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Paraguay_Standard_Time"), "Newfoundland Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Newfoundland_Standard_Time"), "E. South America Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_E_South_America_Standard_Time"), "Greenland Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Greenland_Standard_Time"), "Montevideo Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Montevideo_Standard_Time"), "SA Eastern Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_SA_Eastern_Standard_Time"), "Argentina Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Argentina_Standard_Time"), "Mid-Atlantic Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Mid_Atlantic_Standard_Time"), "UTC-2": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Minus_2"), "Azores Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Azores_Standard_Time"), "Cabo Verde Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Cabo_Verde_Standard_Time"), "GMT Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_GMT_Standard_Time"), "Greenwich Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Greenwich_Standard_Time"), "Morocco Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Morocco_Standard_Time"), UTC: e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_UTC"), "Central Europe Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Europe_Standard_Time"), "Central European Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_European_Standard_Time"), "Romance Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Romance_Standard_Time"), "W. Central Africa Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_W_Central_Africa_Standard_Time"), "W. Europe Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_W_Europe_Standard_Time"), "Namibia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Namibia_Standard_Time"), "E. Europe Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_E_Europe_Standard_Time"), "Egypt Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Egypt_Standard_Time"), "FLE Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_FLE_Standard_Time"), "GTB Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_GTB_Standard_Time"), "Israel Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Israel_Standard_Time"), "Jordan Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Jordan_Standard_Time"), "Middle East Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Middle_East_Standard_Time"), "South Africa Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_South_Africa_Standard_Time"), "Syria Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Syria_Standard_Time"), "Turkey Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Turkey_Standard_Time"), "Arab Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Arab_Standard_Time"), "Arabic Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Arabic_Standard_Time"), "E. Africa Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_E_Africa_Standard_Time"), "Kaliningrad Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Kaliningrad_Standard_Time"), "Iran Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Iran_Standard_Time"), "Russian Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Russian_Standard_Time"), "Arabian Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Arabian_Standard_Time"), "Azerbaijan Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Azerbaijan_Standard_Time"), "Caucasus Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Caucasus_Standard_Time"), "Georgian Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Georgian_Standard_Time"), "Mauritius Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Mauritius_Standard_Time"), "Afghanistan Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Afghanistan_Standard_Time"), "West Asia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_West_Asia_Standard_Time"), "Pakistan Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Pakistan_Standard_Time"), "India Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_India_Standard_Time"), "Sri Lanka Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Sri_Lanka_Standard_Time"), "Nepal Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Nepal_Standard_Time"), "Ekaterinburg Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Ekaterinburg_Standard_Time"),
                    "Central Asia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Asia_Standard_Time"), "Bangladesh Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Bangladesh_Standard_Time"), "Myanmar Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Myanmar_Standard_Time"), "N. Central Asia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_N_Central_Asia_Standard_Time"), "SE Asia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_SE_Asia_Standard_Time"), "North Asia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_North_Asia_Standard_Time"), "China Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_China_Standard_Time"), "Singapore Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Singapore_Standard_Tim"), "Taipei Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Taipei_Standard_Time"), "W. Australia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_W_Australia_Standard_Time"), "Ulaanbaatar Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Ulaanbaatar_Standard_Time"), "North Asia East Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_North_Asia_East_Standard_Time"), "Korea Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Korea_Standard_Time"), "Tokyo Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Tokyo_Standard_Time"), "AUS Central Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_AUS_Central_Standard_Time"), "Cen. Australia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Cen_Australia_Standard_Time"), "Yakutsk Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Yakutsk_Standard_Time"), "AUS Eastern Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_AUS_Eastern_Standard_Time"), "E. Australia Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_E_Australia_Standard_Time"), "Tasmania Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Tasmania_Standard_Time"), "West Pacific Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_West_Pacific_Standard_Time"), "Vladivostok Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Vladivostok_Standard_Time"), "Central Pacific Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Central_Pacific_Standard_Time"), "Magadan Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Magadan_Standard_Time"), "Fiji Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Fiji_Standard_Time"), "New Zealand Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_New_Zealand_Standard_Time"), "UTC+12": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_UTC_Plus_12"), "Tonga Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Tonga_Standard_Time"), "Samoa Standard Time": e.localize.get("SettingsDataset_ScheduleRefresh_Timezone_Samoa_Standard_Time")
                }
            }), t.refreshTimeZonesViewModel = new o(function () { var e = []; return _.forOwn(t.refreshTimeZones.getValue(), (function (t, o) { e.push({ key: o, value: t }) })), e })
            })(d = t.RefreshStaticConstants || (t.RefreshStaticConstants = {}))
        })(t = e.models || (e.models = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t() { return [{ name: "العَرَبِية", code: "ar", lcid: "1025" }, { name: "Basque", code: "eu", lcid: "1069" }, { name: "Български", code: "bg", lcid: "1026" }, { name: "català", code: "ca", lcid: "1027" }, { name: "中文(简体)", code: "zh-Hans", lcid: "2052" }, { name: "中文(繁體)", code: "zh-Hant", lcid: "1028" }, { name: "hrvatski", code: "hr", lcid: "1050" }, { name: "čeština", code: "cs", lcid: "1029" }, { name: "dansk", code: "da", lcid: "1030" }, { name: "Nederlands", code: "nl", lcid: "1043" }, { name: "English", code: "en-US", lcid: "1033" }, { name: "eesti", code: "et", lcid: "1061" }, { name: "suomi", code: "fi", lcid: "1035" }, { name: "français", code: "fr", lcid: "1036" }, { name: "galego", code: "gl", lcid: "1110" }, { name: "Deutsch", code: "de", lcid: "1031" }, { name: "Ελληνικά", code: "el", lcid: "1032" }, { name: "עברית", code: "he", lcid: "1037" }, { name: "हिंदी", code: "hi", lcid: "1081" }, { name: "magyar", code: "hu", lcid: "1038" }, { name: "Bahasa Indonesia", code: "id", lcid: "1057" }, { name: "italiano", code: "it", lcid: "1040" }, { name: "日本語", code: "ja", lcid: "1041" }, { name: "Қазақ", code: "kk", lcid: "1087" }, { name: "한국어", code: "ko", lcid: "1042" }, { name: "latviešu", code: "lv", lcid: "1062" }, { name: "lietuvių", code: "lt", lcid: "1063" }, { name: "Bahasa Melayu", code: "ms", lcid: "1086" }, { name: "norsk (bokmål)", code: "no", lcid: "1044" }, { name: "Polski", code: "pl", lcid: "1045" }, { name: "Português (Brasil)", code: "pt-BR", lcid: "1046" }, { name: "Português (Portugal)", code: "pt-PT", lcid: "2070" }, { name: "română", code: "ro", lcid: "1048" }, { name: "Русский", code: "ru", lcid: "1049" }, { name: "српски", code: "sr-Cyrl", lcid: "3098" }, { name: "srpski", code: "sr-Latn", lcid: "2074" }, { name: "slovenčina", code: "sk", lcid: "1051" }, { name: "slovenski", code: "sl", lcid: "1060" }, { name: "español", code: "es", lcid: "1034" }, { name: "svenska", code: "sv", lcid: "1053" }, { name: "ไทย", code: "th", lcid: "1054" }, { name: "Türkçe", code: "tr", lcid: "1055" }, { name: "українська", code: "uk", lcid: "1058" }, { name: "Tiếng Việt", code: "vi", lcid: "1066" }] } e.createSupportedLanguagesModel = t })(t = e.SettingsViewModelFactory || (e.SettingsViewModelFactory = {})) })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { e.PowerBIErrorHeader = "x-powerbi-error-info", e.PowerBIErrorDetailsHeader = "x-powerbi-error-details", e.PowerBIInvalidJSONError = "Invalid JSON"; var t; !(function (e) { function t(e, t, o, i) { var r = { method: e, url: t }; return void 0 !== i && (r.data = i), angular.extend(r, o) } e.create = t })(t = e.HttpRequestConfig || (e.HttpRequestConfig = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createAuditingHttpService = t; var o = (function () { function e(e) { this.httpService = e } return e.prototype.auditEvent = function (e, t, o, i) { var r = this.httpService.powerbiRequestOptions(i, "AuditEvent"), n = { entityId: e, entityType: t, auditKeyId: o }; return this.httpService.post("metadata/auditing", JSON.stringify(n), r) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createDatasetsService = t; var o = (function () { function t(e) { this.httpService = e } return t.prototype.discoverDatasourceForImport = function (t, o, i) { var r = e.httpService.powerbiRequestOptions(i, "DiscoverDatasourceForImport"); return r.retryCount = 0, e.httpService.post("metadata/datamovement/datasources/discoverForImport/" + t, o, r) }, t.prototype.takeoverDatasource = function (t, o) { var i = e.httpService.powerbiRequestOptions(o, "DiscoverDatasource"); return e.httpService.post("metadata/datamovement/models/" + t + "/takeover", null, i) }, t.prototype.updateModelParameters = function (t, o, i) { var r = e.httpService.powerbiRequestOptions(i, "UpdateModelParameters"); return e.httpService.post("powerbi/metadata/models/" + t + "/parameters", o, r) }, t.prototype.updateModelOnPremisesGatewayOverride = function (t, o) { var i = e.httpService.powerbiRequestOptions(); return e.httpService.post("powerbi/metadata/models/" + t + "/onpremisesgatewayoverride", o, i) }, t.prototype.displayOopsErrorAndEndTelemetry = function (t, o, i, r, n) { n.reject(), o.error(e.localize.get(i), i, { requestId: r.requestId, statusCode: r.status.toString() }) }, t.prototype.testPackageCredentials = function (t, o) { var i = e.httpService.powerbiRequestOptions(o, "TestPackageConnection"); return e.httpService.get("powerbi/content/packagecredentials/" + t + "/", i) }, t.prototype.updatePackageCredentials = function (t, o, i) { var r = e.httpService.powerbiRequestOptions(i, "UpdatePackageCredential"); return r.retryCount = 0, e.httpService.put("powerbi/content/packagecredentials/" + t + "/?code=" + o, "", r) }, t.prototype.updatePackageRefreshEnabled = function (t, o, i) { var r = e.httpService.powerbiRequestOptions(i, "UpdatePackageRefreshEnabled"); return r.retryCount = 0, e.httpService.put("powerbi/metadata/packages/" + t + "/refreshEnabled", o, r) }, t.prototype.getQueryParameters = function (e, t) { var o = this.httpService.powerbiRequestOptions(t, "GetQueryParameters"); return this.httpService.get("V1.0/myorg/datasets/" + e + "/parameters", o) }, t.prototype.updateQueryParameters = function (e, t, o) { var i = this.httpService.powerbiRequestOptions(o, "UpdateQueryParameters"); return this.httpService.post("V1.0/myorg/datasets/" + e + "/Default.UpdateParameters", t, i) }, t.prototype.getDatasetProperties = function (e, t) { var o = this.httpService.powerbiRequestOptions(t, "GetDatasetProperties"); return this.httpService.get("metadata/gallery/models/" + e, o) }, t.prototype.updateDatasetProperties = function (e, t, o) { var i = this.httpService.powerbiRequestOptions(o, "UpdateDatasetProperties"); return this.httpService.put("metadata/gallery/models/" + e, t, i) }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { function t(e) { return new r(e) } var o = jsCommon.Utility, i = window; e.createDashboardInvitationHttpService = t; var r = (function () { function e(e) { this.httpService = e } return e.prototype.claimInvite = function (t, i, r, n) { var a = { invitationId: i, tenantIdentifier: t }, s = this.httpService.powerbiRequestOptions(n, "ClaimInvite"); s.headers["X-PowerBI-RedirectedFromSignup"] = "true"; var c = o.urlCombine(e.baseDashboardInvitationsUrl, "/invitations/accept"); return this.httpService.post(c, a, s) }, e.prototype.sendInvitation = function (t, i, r, n, a, s, c, l) { var d = 1; a && (d |= 4), s && (d |= 8); var u = { emailAddresses: i, objectIds: r, message: n, permission: d, notifyViaEmail: c }, p = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + t + "/invitations"), h = this.httpService.powerbiRequestOptions(l, "SendInvitation"); return h.headers["X-PowerBI-WFE-Origin"] = this.httpService.frontendUri, this.httpService.post(p, u, h) }, e.prototype.getInvitedUsers = function (t, i) { var r = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + t + "/invitations"), n = this.httpService.powerbiRequestOptions(i, "GetInvitedUsers"); return this.httpService.get(r, n) }, e.prototype.getDashboardAccess = function (t, i) { var r = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + t + "/access"), n = this.httpService.powerbiRequestOptions(i, "GetDashboardAccess"); return this.httpService.get(r, n) }, e.prototype.cancelInvitation = function (t, i, r) { var n = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + i + "/invitations/" + t), a = this.httpService.powerbiRequestOptions(r, "CancelInvitation"); return this.httpService.delete(n, a) }, e.prototype.deleteUser = function (t, i, r) { var n = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + i + "/users/" + t), a = this.httpService.powerbiRequestOptions(r, "DeleteUser"); return this.httpService.delete(n, a) }, e.prototype.deleteDashboardAccess = function (t, i) { var r = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + t.dashboardId + "/access/" + t.kind + "/" + t.id), n = this.httpService.powerbiRequestOptions(i, "DeleteDashboardAccess"); return this.httpService.delete(r, n) }, e.prototype.editDashboardAccess = function (t, i) { var r = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + t.dashboardId + "/access"), n = this.httpService.powerbiRequestOptions(i, "EditDashboardAccess"); return this.httpService.put(r, t, n) }, e.prototype.requestDashboardAccess = function (t, i, r) { var n = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + t + "/requestaccess"), a = this.httpService.powerbiRequestOptions(r, "RequestDashboardAccess", { dismissGroupObjectId: !0 }); return this.httpService.put(n, { message: i }, a) }, e.prototype.deleteDashboardAccessRequest = function (t, i, r, n) { var a = o.urlCombine(e.baseDashboardInvitationsUrl, "/" + t + "/requestaccess/" + i + "/" + r), s = this.httpService.powerbiRequestOptions(n, "DeleteDashboardAccessRequest"); return this.httpService.delete(a, s) }, e.prototype.getDashboardInviteLink = function (t, o) { var r = { code: t, tenantId: i.tenantId, extShare: o }, n = btoa(JSON.stringify(r)); return i.baseUrl + "/" + e.claimInvitePage + "?i=" + n }, e.prototype.getSharedDashboardLink = function (t, o, r) { if (r) { var n = { dashboardId: t, tenantId: i.tenantId, extShare: !0 }, a = btoa(JSON.stringify(n)); return i.baseUrl + "/" + e.claimInvitePage + "?i=" + a } return i.baseUrl + "/groups/" + o + "/dashboards/" + t + "?ctid=" + i.tenantId }, e.baseUrl = "powerbi/invitation", e.baseDashboardInvitationsUrl = o.urlCombine(e.baseUrl, "/dashboards"), e.claimInvitePage = "claiminvite.html", e })() })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t) { return new r(e, t) } var i = t.contracts.FavoriteType; t.createFavoritesHttpService = o; var r = (function () { function t(e, t) { this.httpService = e, this.promiseFactory = t } return t.prototype.getFavorites = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var e, o, i; return __generator(this, (function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), e = this.httpService.powerbiRequestOptions(t, "GetFavorites"), [4, this.httpService.get("metadata/favorites", e)]; case 1: return o = r.sent(), [2, o.data]; case 2: return i = r.sent(), [2, this.handleError(i)]; case 3: return [2] } })) })) }, t.prototype.getFavoriteResourcePackages = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var e, o, i; return __generator(this, (function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), e = this.httpService.powerbiRequestOptions(t, "GetFavorites"), [4, this.httpService.get("metadata/favorites/resourcepackages", e)]; case 1: return o = r.sent(), [2, o.data]; case 2: return i = r.sent(), [2, this.handleError(i)]; case 3: return [2] } })) })) }, t.prototype.getOutOfBoxVisuals = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var e, o, i; return __generator(this, (function (r) { switch (r.label) { case 0: return r.trys.push([0, 2, , 3]), e = this.httpService.powerbiRequestOptions(t, "GetOutOfBox"), [4, this.httpService.get("metadata/customVisualsStore/organization/visuals/OutOfBox", e)]; case 1: return o = r.sent(), [2, o.data]; case 2: return i = r.sent(), [2, this.handleError(i)]; case 3: return [2] } })) })) }, t.prototype.deleteFavorite = function (t, o) { return __awaiter(this, void 0, e.Promise, (function () { var e, i, r; return __generator(this, (function (n) { switch (n.label) { case 0: return n.trys.push([0, 2, , 3]), e = this.httpService.powerbiRequestOptions(o, "DeleteFavorite"), i = "metadata/favorites/" + t.id + "?type=" + t.favoriteType, [4, this.httpService.delete(i, e)]; case 1: return n.sent(), [3, 3]; case 2: return r = n.sent(), [2, this.handleError(r)]; case 3: return [2] } })) })) }, t.prototype.addFavorite = function (t, o, i, r) { return __awaiter(this, void 0, e.Promise, (function () { var e, n, a, s; return __generator(this, (function (c) { switch (c.label) { case 0: return c.trys.push([0, 2, , 3]), e = this.httpService.powerbiRequestOptions(i, "AddFavorites", r), n = { favoriteType: t, favoriteId: o }, [4, this.httpService.post("metadata/favorites", JSON.stringify(n), e)]; case 1: return a = c.sent(), [2, a.data]; case 2: return s = c.sent(), [2, this.handleError(s)]; case 3: return [2] } })) })) }, t.prototype.addFavoriteResourcePackage = function (t, o, r, n) { return __awaiter(this, void 0, e.Promise, (function () { return __generator(this, (function (e) { return [2, this.addFavorite(i.ResourcePackage, t, r, n)] })) })) }, t.prototype.handleError = function (t) { var o = this.promiseFactory.defer(), i = e.errorDetailsHelper.getErrorCode(t); return o.reject({ status: t.status, requestId: t.requestId, activityId: t.activityId, errorCode: i, error: t.error }), o.promise }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = jsCommon.JsonExtensions, o = 3, i = 12e4, r = 6e4, n = (function () { function n(e, t, o, i) { var r = this; this.asyncFeatureSwitchService = e, this.$timeout = t, this.promiseFactory = o, this.httpService = i, this.httpServiceModern = !1, this.isEnabled = !0, this.requestDeferred = this.promiseFactory.defer(), this.requestDeferred.resolve(null), this.longPollInitialized = !1, this.lastLongPollCancelled = !1, this.lastLongPollTimedOut = !1, this.retryCount = 0, e.getFeatureSwitches().then((function (e) { r.httpServiceModern = e.httpServiceModern })) } return n.prototype.startMonitoring = function (e) { var t = this; void 0 === e && (e = 0), this.longPollInitialized || (this.longPollInitialized = !0, this.isEnabled = !0, this.requestDelayTimer && this.$timeout.cancel(this.requestDelayTimer), this.requestDelayTimer = this.$timeout((function () { t.sendLongPollRequest() }), e)) }, n.prototype.setLongPollInitialized = function (e) { this.longPollInitialized = e }, n.prototype.cancelCurrentRequest = function () { this.lastLongPollCancelled = !0, this.requestDeferred.resolve(null), this.longPollInitialized = !1, this.requestDelayTimer && this.$timeout.cancel(this.requestDelayTimer), this.requestDelayTimer = null }, n.prototype.pause = function () { this.paused = !0, this.cancelCurrentRequest() }, n.prototype.resume = function () { this.paused = !1, this.startMonitoring() }, Object.defineProperty(n.prototype, "requestHeader", { get: function () { return null }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "longPollDurationInMs", { get: function () { return r }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "requestOptions", { get: function () { var o = this, i = this.requestDeferred; this.lastLongPollTimedOut = !1, this.lastLongPollCancelled = !1, this.$timeout((function () { o.lastLongPollTimedOut = !0, i.resolve(null) }), this.longPollDurationInMs); var r = this.httpService.powerbiRequestOptions(null, null, this.requestHeader, !0); return r.retryCount = 0, r.timeout = i.promise, r.silentlyFailOnExpiry = !0, this.httpServiceModern || (r.transformResponse = function (o, i, r) { if (!o) return o; var n = t.tryParseJSON(o); if (!n) { i()[e.PowerBIErrorDetailsHeader] = e.PowerBIInvalidJSONError } return n }), r }, enumerable: !0, configurable: !0 }), n.prototype.sendLongPollRequest = function () { var e = this; if (!this.paused && this.isEnabled) { this.requestDeferred = this.promiseFactory.defer(); var t = this.getRequest(); if (!t) return void this.reset(); this.httpService.post(this.getEndpointUrl(), { request: t }, this.requestOptions).then((function (t) { e.retryCount = 0, e.requestDeferred.resolve(null), e.processResponse(t.data), e.sendLongPollRequest() }), (function (t) { e.requestDeferred.resolve(null), e.lastLongPollTimedOut ? (e.retryCount = 0, e.sendLongPollRequest()) : e.lastLongPollCancelled ? e.retryCount = 0 : e.retryCount < o ? (e.retryCount++ , e.sendLongPollRequest()) : (e.processError(), e.suspend()) })) } }, n.prototype.suspend = function () { var e = this, t = this.promiseFactory.defer(); t.promise.then((function () { e.cancelCurrentRequest(), e.startMonitoring() })); var o = function (i) { i && (e.httpService.unregisterResponseCallback(o), t.resolve(null)) }; this.httpService.registerResponseCallback(o), this.$timeout((function () { t.resolve(null) }), i) }, n.prototype.reset = function () { this.longPollInitialized = !1, this.lastLongPollTimedOut = !1, this.lastLongPollCancelled = !1 }, n })(); e.LongPollServiceBase = n })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = (function () { function e(e, t) { this.urlPathPrefix = e, this.httpService = t } return e.prototype.getMashUpProviderPackageModels = function (e, t) { var o = this.httpService.powerbiRequestOptions(t, "GetMashUpProviderPackageModels"); return this.httpService.get(this.urlPathPrefix + e.toString() + "/models", o) }, e.prototype.updateMashUpProviderPackageModelParameters = function (e, t, o) { var i = this.httpService.powerbiRequestOptions(o, "UpdateMashUpProviderPackageModelParameters"); return this.httpService.post(this.urlPathPrefix + e.toString() + "/parameters", t, i) }, e })(); t.MashUpProviderProxyImpl = o; var i = (function () { function t() { } return t.prototype.getMashUpProviderPackageModels = function (t, o) { return e.common.mashupProviderService.getMashUpProviderPackageModels(t, o) }, t.prototype.updateMashUpProviderPackageModelParameters = function (t, o, i) { return e.common.mashupProviderService.updateMashUpProviderPackageModelParameters(t, o, i) }, t })(); t.MashUpProviderProxyUsingService = i })(o = t.proxies || (t.proxies = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function o(t, o) { var i = e.httpService.powerbiRequestOptions(o, "GetMashUpProviderPackageModels"); return e.httpService.get("powerbi/providers/mashup/provider/" + t.toString() + "/models", i) } function i(t, o, i) { var r = e.httpService.powerbiRequestOptions(i, "UpdateMashUpProviderPackageModelParameters"); return e.httpService.post("powerbi/providers/mashup/provider/" + t.toString() + "/parameters", o, r) } t.getMashUpProviderPackageModels = o, t.updateMashUpProviderPackageModelParameters = i })(t = e.mashupProviderService || (e.mashupProviderService = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function o(t, o, i, r) { void 0 === r && (r = !1); var n = e.httpService.powerbiRequestOptions(), a = $.param({ prefix: t, type: o, limit: i, includeB2BUsers: r }); return e.httpService.get("/metadata/people?" + a, n) } function i() { var t = e.httpService.powerbiRequestOptions(); return e.httpService.get("/metadata/people/pbiAdmins", t) } function r(t, o) { var i = e.httpService.powerbiRequestOptions(), r = $.param({ prefix: t, limit: o }); return e.httpService.get("/capacities/tenantUnifiedGroups?" + r, i) } function n(t, o) { var i = e.httpService.powerbiRequestOptions(), r = $.param({ prefix: t, limit: o }); return e.httpService.get("/capacities/tenantUnifiedGroupWorkspaces?" + r, i) } function a(t, o) { var i = e.httpService.powerbiRequestOptions(), r = $.param({ prefix: t, limit: o }); return e.httpService.get("/capacities/userOwnerUnifiedGroupWorkspaces?" + r, i) } t.findUsers = o, t.getPowerBIAdmins = i, t.findTenantUnifiedGroups = r, t.findTenantUnifiedGroupWorkspaces = n, t.findUserOwnerUnifiedGroupWorkspaces = a })(t = e.userDirectoryService || (e.userDirectoryService = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function o(e, t) { if (!_.isEmpty(e) && !_.isEmpty(t)) { var o = _.filter(t, (function (t) { return _.find(e, (function (e) { return e.id === t.Key })) })); if (!_.isEmpty(o)) return _.join(_.map(o, (function (e) { if (!e || !e.Value || _.isEmpty(e.Value.transactions)) return "Invalid server response"; var t = e.Value, o = _.last(t.transactions); return "dashboardId:" + t.dashboardId + ",changeSourceId:" + o.changeSourceId + ",transactionId:" + o.transactionId })), ";") } } function i(e, t, o, i, r) { return new a(e, t, o, i, r) } var r, n = jsCommon.Utility; !(function (e) { e[e.Default = 0] = "Default", e[e.Metadata = 1] = "Metadata" })(r = t.DashboardRequestType || (t.DashboardRequestType = {})), t.syncServiceMonitorDelay = 3e3; var a = (function (e) { function o(t, o, i, r, a, c) { var l = e.call(this, t, o, i, a) || this; return l.refreshImpl = new s.DashboardRefreshServiceImpl(r), l.clientId = c ? c : n.generateGuid(), l } return __extends(o, e), o.prototype.addNotificationsRefreshListener = function (e) { this.refreshImpl.addNotificationsRefreshListener(e) }, o.prototype.addDashboardRefreshListener = function (e) { this.refreshImpl.addDashboardRefreshListener(e) }, o.prototype.startMonitoring = function () { e.prototype.startMonitoring.call(this, t.syncServiceMonitorDelay) }, o.prototype.addPackageRefreshListener = function (e) { this.refreshImpl.addPackageRefreshListener(e) }, o.prototype.addWorkspaceListener = function (e) { this.refreshImpl.addWorkspaceListener(e) }, o.prototype.addResourcePackageListener = function (e) { this.refreshImpl.addResourcePackageListener(e) }, o.prototype.addReportRefreshListener = function (e) { this.refreshImpl.addReportRefreshListener(e) }, o.prototype.addWorkbookRefreshListener = function (e) { this.refreshImpl.addWorkbookRefreshListener(e) }, o.prototype.addModelRefreshListener = function (e) { this.refreshImpl.addModelRefreshListener(e) }, o.prototype.addContentPackRefreshListener = function (e) { this.refreshImpl.addContentPackRefreshListener(e) }, o.prototype.addDelayedQueryDataListener = function (e) { this.refreshImpl.addDelayedQueryDataListener(e) }, o.prototype.addInsightsListener = function (e) { this.refreshImpl.addInsightsListener(e) }, o.prototype.addCdsaModelRefreshListener = function (e) { this.refreshImpl.addCdsaModelRefreshListener(e) }, o.prototype.addContentProviderListener = function (e) { this.refreshImpl.addContentProviderListener(e) }, o.prototype.monitorUserChanges = function (e, t, o) { if (_.isEmpty(e) || (this.refreshImpl.userVersion = e), _.isEmpty(t) || (this.refreshImpl.tenantVersion = t), o) { var i = o.map((function (e) { return { objectId: e.objectId, version: void 0 === e.version ? null : e.version } })); this.refreshImpl.groups = i } this.cancelCurrentRequest(), this.startMonitoring() }, o.prototype.monitorWorkspace = function (e, t) { this.refreshImpl.stopMonitoringAllDashboards(), _.isEmpty(t) || (this.refreshImpl.userDashboardListVersion = t); var o = e.map((function (e) { return { id: e.id, version: void 0 === e.version ? null : e.version } })); this.refreshImpl.replaceDashboardsToMonitor(o), this.cancelCurrentRequest(), this.startMonitoring() }, o.prototype.monitorDashboards = function (e, t) { if (e) { _.isEmpty(t) || (this.refreshImpl.userDashboardListVersion = t); var o = e.map((function (e) { return { id: e.id, version: void 0 === e.version ? null : e.version } })); this.refreshImpl.replaceDashboardsToMonitor(o) && this.cancelCurrentRequest(), this.startMonitoring() } }, o.prototype.stopMonitoringDashboard = function (e) { this.refreshImpl.stopMonitoringDashboard(e), this.cancelCurrentRequest(), this.startMonitoring() }, o.prototype.addDashboardMetadataEditRequestId = function (e) { this.refreshImpl.addDashboardMetadataEditRequestId(e) }, o.prototype.addDashboardTransactionFilter = function (e, t) { this.refreshImpl.addDashboardTransactionFilter(e, t) }, o.prototype.addMetadataEditRequestId = function (e) { this.refreshImpl.addMetadataEditRequestId(e) }, Object.defineProperty(o.prototype, "requestHeader", { get: function () { return this.optionalRequestHeaders }, enumerable: !0, configurable: !0 }), o.prototype.getRequest = function () { return { clientRefreshId: this.clientId, dashboards: this.refreshImpl.dashboards, userDashboardListVersion: this.refreshImpl.userDashboardListVersion, userVersion: this.refreshImpl.userVersion, tenantVersion: this.refreshImpl.tenantVersion, groupsVersion: this.refreshImpl.groups } }, o.prototype.getEndpointUrl = function () { return "powerbi/refresh/subscribe" }, o.prototype.processResponse = function (e) { this.refreshImpl.applyRefreshUpdate(e) }, o.prototype.processError = function () { }, o.prototype.disableMonitorDashboards = function () { this.isEnabled = !1, this.setLongPollInitialized(!1) }, o.prototype.testDisableMonitorDashboards = function () { this.pause() }, o.prototype.testGetImpl = function () { return this.refreshImpl }, o })(t.LongPollServiceBase); t.SyncService = a; var s; !(function (i) {
            var r = (function () {
                function i(e) { this.telemetryService = e, this.dashboards = [], this.dashboardRefreshListeners = [], this.packageRefreshListeners = [], this.workspaceListener = [], this.resourcePackageListeners = [], this.reportRefreshListeners = [], this.workbookRefreshListeners = [], this.modelRefreshListeners = [], this.contentPackRefreshListeners = [], this.queryDataRefreshListeners = [], this.insightsListeners = [], this.notificationListeners = [], this.cdsaModelListeners = [], this.contentProviderListeners = [], this.userDashboardListVersion = null, this.userVersion = null, this.tenantVersion = null, this.groups = [], this.dashboardMetadataRequestIds = new t.RollingHashSet(i.maxMetadataEditRequestIdsCount), this.dashboardMetadataRequestIdFilters = new t.RollingHashSet(i.maxFilteredRequestIdsCount), this.metadataRequestIds = new t.RollingHashSet(i.maxMetadataEditRequestIdsCount) } return i.prototype.replaceDashboardsToMonitor = function (t) { e.contract.checkValue(t, "replaceDashboardsToMonitor: dashboards"), this.dashboards = this.dashboards || []; var o = !_.isEqual(_.map(t, (function (e) { return e.id })), _.map(this.dashboards, (function (e) { return e.id }))); return this.dashboards = t, o }, i.prototype.stopMonitoringAllDashboards = function () { this.dashboards = [] }, i.prototype.stopMonitoringDashboard = function (e) { this.dashboards = _.filter(this.dashboards, (function (t, o, i) { return t.id !== e })) }, i.prototype.addDashboardRefreshListener = function (t) { e.contract.checkValue(t, "addDashboardRefreshListener: refreshListener"), this.dashboardRefreshListeners.push(t) }, i.prototype.addNotificationsRefreshListener = function (t) { e.contract.checkValue(t, "addNotificationsRefreshListener: notificationListener"), this.notificationListeners.push(t) }, i.prototype.addPackageRefreshListener = function (t) { e.contract.checkValue(t, "addPackageRefreshListener: refreshListener"), this.packageRefreshListeners.push(t) }, i.prototype.addWorkspaceListener = function (t) { e.contract.checkValue(t, "addWorkspaceListener: workspaceListener"), this.workspaceListener.push(t) }, i.prototype.addResourcePackageListener = function (t) { e.contract.checkValue(t, "addResourcePackageListener: refreshListener"), this.resourcePackageListeners.push(t) }, i.prototype.addReportRefreshListener = function (t) { e.contract.checkValue(t, "addReportRefreshListener: refreshListener"), this.reportRefreshListeners.push(t) }, i.prototype.addWorkbookRefreshListener = function (t) { e.contract.checkValue(t, "addWorkbookRefreshListener: refreshListener"), this.workbookRefreshListeners.push(t) }, i.prototype.addModelRefreshListener = function (t) { e.contract.checkValue(t, "addModelRefreshListener: refreshListener"), this.modelRefreshListeners.push(t) }, i.prototype.addContentPackRefreshListener = function (t) { e.contract.checkValue(t, "addContentPackRefreshListener: refreshListener"), this.contentPackRefreshListeners.push(t) }, i.prototype.addDelayedQueryDataListener = function (t) { e.contract.checkValue(t, "addDelayedQueryDataListener: queryDataListener"), this.queryDataRefreshListeners.push(t) }, i.prototype.addInsightsListener = function (t) { e.contract.checkValue(t, "addInsightsListener: insightsListener"), this.insightsListeners.push(t) }, i.prototype.addCdsaModelRefreshListener = function (t) { e.contract.checkValue(t, "addCdsaModelRefreshListener: cdsaModelListener"), this.cdsaModelListeners.push(t) }, i.prototype.addContentProviderListener = function (t) { e.contract.checkValue(t, "addContentProviderListener: contentProviderListener"), this.contentProviderListeners.push(t) }, i.prototype.applyRefreshUpdate = function (t) { t && (this.telemetryService.logEvent(e.telemetry.SyncServiceUpdate, o(this.dashboards, t.dashboardTransactions), _.isEmpty(t.metadataUpdates) ? void 0 : _.last(t.metadataUpdates).changeSourceId, t.lastTransactionId, JSON.stringify(this.dashboards), this.userDashboardListVersion), this.processDashboardTransactions(t), this.processMetadataUpdates(t)) }, i.prototype.processDashboardTransactions = function (e) { var t = this; e.dashboardTransactions && (e.lastTransactionId && (this.userDashboardListVersion = e.lastTransactionId), e.dashboardTransactions.forEach((function (e) { var o = e.Value.transactions, i = e.Key; t.updateDashboardVersion(i, o); for (var r = t.dashboardRefreshListeners, n = 0, a = r; n < a.length; n++) { var s = a[n]; s.onClearBatchedDashboardRequests && s.onClearBatchedDashboardRequests() } t.applyDashboardTransactions(o, i) }))) }, i.prototype.processMetadataUpdates = function (e) { var t = this; if (!_.isEmpty(e.metadataUpdates)) { e.lastTransactionId ? this.userDashboardListVersion = e.lastTransactionId : e.userVersion ? this.userVersion = e.userVersion : e.tenantVersion ? this.tenantVersion = e.tenantVersion : e.groupsVersion && e.groupsVersion.forEach((function (e) { var o = _.find(t.groups, (function (t) { return t.objectId === e.Key })); o && (o.version = e.Value) })); for (var o = [], i = this.metadataRequestIds, r = 0, n = e.metadataUpdates; r < n.length; r++) { var a = n[r], s = a.changeSourceId; if (!s || !i.hasKey(s)) switch (a.entityType) { case 0: this.applyPackageTransactions(a); break; case 256: this.applyWorkspaceTransactions(a); break; case 1: break; case 2: this.applyReportTransactions(a); break; case 16: this.applyWorkbookTransactions(a); break; case 4: o.push(a); break; case 8: this.processDelayedQueryData(a); break; case 64: this.applyResourcePackageTransactions(a); break; case 128: this.processInsights(a); break; case 512: case 1024: case 2048: "Notification" === a.additionalInfo && this.processNotificationUpdates(a); break; case 4096: this.applyCdsaModelTransactions(a); break; case 32: this.applyContentProviderTransactions(a) } } this.applyModelTransactions(o) } }, i.prototype.processNotificationUpdates = function (e) { for (var t = 0, o = this.notificationListeners; t < o.length; t++) { var i = o[t]; switch (e.changeType) { case 0: i.onNotificationAdded(); break; case 1: 0 === e.entityId ? i.onNotificationDismissAll() : i.onNotificationDismiss(e.entityId); break; case 2: i.onNotificationSeen(e.entityId) } } }, i.prototype.processInsights = function (e) { for (var t = 0, o = this.insightsListeners; t < o.length; t++) { o[t].onInsightsAvailable(e.additionalInfo) } }, i.prototype.applyResourcePackageTransactions = function (e) { if (e && void 0 !== e.changeType && null !== e.changeType) switch (e.changeType) { case 0: for (var t = 0, o = this.resourcePackageListeners; t < o.length; t++) { o[t].onResourcePackageAdded(e.entityId) } } }, i.prototype.processDelayedQueryData = function (e) { for (var t = e.additionalInfo, o = this.queryDataRefreshListeners, i = 0, r = o.length; i < r; ++i)o[i].onDelayedQueryDataAvailable(t) }, i.prototype.applyPackageTransactions = function (e) {
                    if (e && null != e.entityId) switch (e.changeType) { case 0: for (var t = 0, o = this.packageRefreshListeners; t < o.length; t++) { var i = o[t]; i.onPackagePublishRefreshCompleted(e.entityId) } break; case 1: for (var r = 0, n = this.packageRefreshListeners; r < n.length; r++) { var i = n[r]; i.onPackageDeleted(e.entityId) } break; case 2: case 3: for (var a = 0, s = this.packageRefreshListeners; a < s.length; a++) { var i = s[a]; i.onPackagePublishEdit(e.entityId, e.changeSourceId) } }
                }, i.prototype.applyWorkspaceTransactions = function (e) { if (e && null !== e.entityId && 3 === e.changeType) for (var t = 0, o = this.workspaceListener; t < o.length; t++) { var i = o[t]; i.onWorkspaceEdit(e.entityId, e.changeSourceId) } }, i.prototype.applyReportTransactions = function (e) { if (e && null != e.entityId) switch (e.changeType) { case 0: for (var t = 0, o = this.reportRefreshListeners; t < o.length; t++) { var i = o[t]; i.onReportAdded(e.entityId) } break; case 1: for (var r = 0, n = this.reportRefreshListeners; r < n.length; r++) { var i = n[r]; i.onReportDeleted(e.entityId) } break; case 2: for (var a = 0, s = this.reportRefreshListeners; a < s.length; a++) { var i = s[a]; i.onReportUpdated(e.entityId) } break; case 3: for (var c = 0, l = this.reportRefreshListeners; c < l.length; c++) { var i = l[c]; i.onReportSlideThumbnailEdit(e.entityId) } } }, i.prototype.applyWorkbookTransactions = function (e) { if (e && null != e.entityId) switch (e.changeType) { case 0: for (var t = this.parsePackageId(e), o = 0, i = this.workbookRefreshListeners; o < i.length; o++) { var r = i[o]; r.onWorkbookAdded(e.entityId, t) } break; case 1: for (var t = this.parsePackageId(e), n = 0, a = this.workbookRefreshListeners; n < a.length; n++) { var r = a[n]; r.onWorkbookDeleted(e.entityId, t) } break; case 2: case 3: for (var s = 0, c = this.workbookRefreshListeners; s < c.length; s++) { var r = c[s]; r.onWorkbookUpdated(e.entityId) } } }, i.prototype.applyModelTransactions = function (e) { for (var t = [], o = 0, i = e; o < i.length; o++) { var r = i[o]; if (r && null != r.entityId) { var n = this.parsePackageId(r); switch (r.changeType) { case 0: for (var a = 0, s = this.modelRefreshListeners; a < s.length; a++) { var c = s[a]; c.onModelAdded(r.entityId, n) } break; case 1: for (var l = 0, d = this.modelRefreshListeners; l < d.length; l++) { var c = d[l]; c.onModelDeleted(r.entityId, n) } break; case 3: case 2: t.push({ modelId: r.entityId, packageId: n }) } } } if (t.length) for (var u = 0, p = this.modelRefreshListeners; u < p.length; u++) { var c = p[u]; c.onModelsUpdated(t) } }, i.prototype.parsePackageId = function (e) { return e.additionalInfo ? parseInt(e.additionalInfo, 10) : null }, i.prototype.applyCdsaModelTransactions = function (e) { if (e && null != e.entityId) switch (e.changeType) { case 0: for (var t = 0, o = this.cdsaModelListeners; t < o.length; t++) { var i = o[t]; i.onCdsaModelAdded(e.entityId) } break; case 1: for (var r = 0, n = this.cdsaModelListeners; r < n.length; r++) { var i = n[r]; i.onCdsaModelDeleted(e.entityId) } break; case 2: for (var a = 0, s = this.cdsaModelListeners; a < s.length; a++) { var i = s[a]; i.onCdsaModelUpdated(e.entityId) } } }, i.prototype.applyContentProviderTransactions = function (e) { if (e && null != e.entityId) switch (e.changeType) { case 3: for (var t = 0, o = this.contentProviderListeners; t < o.length; t++) { var i = o[t]; i.onContentProviderDeepEdit(e.entityId) } break; case 2: for (var r = 0, n = this.contentProviderListeners; r < n.length; r++) { var i = n[r]; i.onContentProviderShallowEdit(e.entityId, e.changeSourceId) } } }, i.prototype.addMetadataEditRequestId = function (e) { this.metadataRequestIds.add(e, !0), this.dashboardMetadataRequestIds.add(e, !0) }, i.prototype.addDashboardMetadataEditRequestId = function (e) { this.dashboardMetadataRequestIds.add(e, !0) }, i.prototype.addDashboardTransactionFilter = function (e, t) { this.dashboardMetadataRequestIdFilters.add(e, t) }, i.prototype.updateDashboardVersion = function (e, t) { for (var o = t.length - 1; o >= 0; --o) { var i = t[o]; if (!this.isAddOrDeleteDashboardTransaction(i)) { var r = this.getDashboardById(e); if (r) { r.version = i.transactionId; break } } } }, i.prototype.applyDashboardTransactions = function (e, t) { for (var o = [], i = this.dashboardMetadataRequestIds, r = this.dashboardMetadataRequestIdFilters, n = this.dashboardRefreshListeners, a = 0, s = e.length; a < s; ++a) { var c = e[a], l = c.changeSourceId; if (l && r.hasKey(l)) { var d = r.get(l); if (d && d(c)) continue } if (!l || !i.hasKey(l)) switch (c.changeType) { case 1: if (null != c.tileId) for (var u = 0, p = n.length; u < p; ++u)n[u].onTileDeleted(t, c.tileId); else { this.stopMonitoringDashboard(t); for (var u = 0, p = n.length; u < p; ++u)n[u].onDashboardDeleted(t) } break; case 0: if (null != c.tileId) o.push(c.tileId); else { if (this.userDashboardListVersion = c.transactionId, this.getDashboardById(t)) break; for (var u = 0, p = n.length; u < p; ++u)n[u].onDashboardAdded(t) } break; case 3: if (null != c.tileId) o.push(c.tileId); else for (var u = 0, p = n.length; u < p; ++u)n[u].onDashboardDeepEdit(t); break; case 2: if (null != c.tileId) o.push(c.tileId); else for (var u = 0, p = n.length; u < p; ++u)n[u].onDashboardShallowEdit(t); break; case 5: if (null != c.tileId) o.push(c.tileId); else for (var u = 0, p = n.length; u < p; ++u)n[u].onDashboardTileDataChange(t) } } if (o.length) { o = _.uniq(o); for (var h = 0, m = n.length; h < m; ++h)n[h].onTilesAddedOrUpdated(t, o) } }, i.prototype.isAddOrDeleteDashboardTransaction = function (e) { return (0 === e.changeType || 1 === e.changeType) && null == e.tileId }, i.prototype.getDashboardById = function (e) { for (var t = this.dashboards, o = 0, i = t.length; o < i; o++)if (t[o].id === e) return t[o]; return null }, i.maxMetadataEditRequestIdsCount = 15, i.maxFilteredRequestIdsCount = 15, i
            })(); i.DashboardRefreshServiceImpl = r
        })(s = t.dashboardRefreshServiceImpl || (t.dashboardRefreshServiceImpl = {})), t.createSyncService = i
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.loadPowerViewReportEventName = "loadPowerViewReport", e.viewInsightInFocusEventName = "viewInsightInFocus", e.visualContainerResizeStart = { type: 2, name: "visualContainerResizeStart" }, e.visualContainerResizeEnd = { type: 2, name: "visualContainerResizeEnd" }, e.canvasItemContainerShowHover = { type: 2, name: "canvasItemContainerShowHover" }, e.canvasItemContainerHideHover = { type: 2, name: "canvasItemContainerHideHover" }, e.liveReportTileReady = { type: 2, name: "liveReportTileReady" }, e.printSectionReady = { type: 2, name: "printSectionReady" }, e.printStarting = { type: 3, name: "printStarting" }, e.printFinished = { type: 3, name: "printFinished" }, e.refreshReportData = "refreshReportData" })(t = e.events || (e.events = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o = jsCommon.FreezeUtility, i = { UnknownError: { messageId: "ErrorMessage_FailedToStorePackage", helperTextId: "ExcelErrorDialogHelperText", helpLink: e.models.excelWorkbookUploadFailedDefaultHelpLink }, ExcelWorkbookHasNoDataException: { messageId: "ErrorMessage_FailedToStorePackageExcel", titleId: "ErrorTitle_FailedToStorePackageExcel", helperTextId: "ExcelErrorDialogHelperText", helpLink: e.models.excelWorkbookUploadFailedHelpLink }, StreamIsNotAZipFileException: { messageId: "ErrorMessage_FailedToOpenExcelFile", helperTextId: "ExcelErrorDialogHelperText", helpLink: e.models.excelWorkbookUploadFailedDefaultHelpLink }, ExcelProviderNoConnectorAssociatedWithModelException: { messageId: "ErrorMessage_NoConnectorAssociatedWithModel", helperTextId: "ExcelErrorDialogHelperText", helpLink: e.models.excelWorkbookUploadFailedDataGatewayExceptionHelpLink }, RequestedViewWorkbookExceedsMaximiumSizeException: { messageId: "UploadExcel_UploadLimit_ViewExcelMode", titleId: "UploadExcel_UploadLimit_ViewExcelMode_Title", helperTextId: "ExcelErrorDialogHelperText", helpLink: e.models.excelWorkbookUploadFailedExceedsMaxSizeExceptionHelpLink, messageIdOverride: { featureSwitch: "oneGBUploadFileSizeEnabled", messageId: "UploadExcel_UploadLimit_ViewExcelMode_OneGB" } } }, r = { IncrementalRefreshOnlySupportedInPremium: { messageId: "ErrorMessage_IncrementalRefreshOnlySupportedInPremium", titleId: "PremiumRequired_TitleText", helpLink: "//go.microsoft.com/fwlink/?linkid=869752" }, DatasetsWithAggregationsNotSupported: { messageId: "PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithAggregations", titleId: "PreviewFeaturesUnsupported_TitleText", helpLink: "//go.microsoft.com/fwlink/?linkid=871428" }, DatasetsWithCompositeModelsNotSupported: { messageId: "PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels", titleId: "PreviewFeaturesUnsupported_TitleText", helpLink: "//go.microsoft.com/fwlink/?linkid=871428" }, DatasetsWithManyToManyRelationshipsNotSupported: { messageId: "PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels", titleId: "PreviewFeaturesUnsupported_TitleText", helpLink: "//go.microsoft.com/fwlink/?linkid=871428" }, DatasetsWithMixedSourcePartitionsNotSupported: { messageId: "PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels", titleId: "PreviewFeaturesUnsupported_TitleText", helpLink: "//go.microsoft.com/fwlink/?linkid=871428" }, DatasetsWithDualModePartitionsNotSupported: { messageId: "PreviewFeaturesUnsupported_ErrorMessage_DatasetsWithCompositeModels", titleId: "PreviewFeaturesUnsupported_TitleText", helpLink: "//go.microsoft.com/fwlink/?linkid=871428" } }; t.KnownContentProviderErrors = {}, Object.defineProperty(t.KnownContentProviderErrors, t.constants.excelContentProviderId.toString(10), { configurable: !0, enumerable: !0, writable: !1, value: i }), Object.defineProperty(t.KnownContentProviderErrors, t.constants.pbiDesktopContentProviderId.toString(10), { configurable: !0, enumerable: !0, writable: !1, value: r }), o.deepFreeze(t.KnownContentProviderErrors), t.contentProviderDefaultErrorType = "FailedToStorePackage" })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new r(e) } function o(e) { return new n(e) } var i = jsCommon.QueryStringUtil; e.createActiveFolderIdService = t; var r = (function () { function t(e) { if (this.initialFolderIdReadyDeferred = e.defer(), this.initialFolderIdReadyPromise = this.initialFolderIdReadyDeferred.promise, this.initialFolderPermissionReadyDeferred = e.defer(), this.initialFolderPermissionReadyPromise = this.initialFolderPermissionReadyDeferred.promise, this.isInIframe()) { var t = window.top.powerbi.common.activeFolderIdService; this.activeFolderObjectId = t.activeFolderObjectId, this.folderObjectIdToNumericIdMapping = t.folderObjectIdToNumericIdMapping } else this.folderObjectIdToNumericIdMapping = {} } return Object.defineProperty(t.prototype, "activeFolderObjectId", { get: function () { return this._activeFolderObjectId }, set: function (e) { this._activeFolderObjectId = e, this.initialFolderIdReadyDeferred.resolve(null) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "folderSharePoint", { get: function () { return this._folderSharePoint }, set: function (e) { this._folderSharePoint = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "folderPermission", { get: function () { return this._folderPermission }, set: function (e) { this._folderPermission = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isReadOnly", { get: function () { return this._isReadOnly }, set: function (e) { this._isReadOnly = e, this.initialFolderPermissionReadyDeferred.resolve(null) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "headerActiveFolderObjectId", { get: function () { return this.isInFolder ? this.activeFolderObjectId : "" }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isActiveFolderWSv2", { get: function () { return !!this.activeFolderNumericId }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "activeFolderNumericId", { get: function () { return this.activeFolderObjectId && this.folderObjectIdToNumericIdMapping[this.activeFolderObjectId] }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isInFolder", { get: function () { return this.activeFolderObjectId && this.activeFolderObjectId !== e.constants.myWorkspaceFolderId }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "myWorkspaceFolderId", { get: function () { return e.constants.myWorkspaceFolderId }, enumerable: !0, configurable: !0 }), t.prototype.isWorkspaceAFolder = function (e) { return !(!e || !this.folderObjectIdToNumericIdMapping[e]) }, t.prototype.appendFolderToQueryStringIfExists = function (e) { var t = e, o = this.folderObjectIdToNumericIdMapping[this._activeFolderObjectId]; if (o) { var r = {}; r.folderId = o.toString(), t = i.addOrUpdateQueryStringToUrl(e, r) } return t }, t.prototype.isInIframe = function () { return jsCommon.iFrameUtility.isHostedInIFrame() && !jsCommon.iFrameUtility.isHostedInCrossDomainIFrame() }, t })(); e.ActiveFolderIdService = r, e.createHostActiveFolderIdService = o; var n = (function (e) { function t(t) { var o = e.call(this, t) || this; return o.activeFolderObjectId = void 0, o.isReadOnly = !1, o } return __extends(t, e), t })(e.ActiveFolderIdService); e.HostActiveFolderIdService = n })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o) { return new r(e, o) } var i = e.errorDetailsHelper; t.createAuditingService = o; var r = (function () { function t(e, t) { this.telemetryService = e, this.auditingHttp = t } return t.prototype.auditEvent = function (t, o, r) { var n = this.telemetryService.startEvent(e.telemetry.DashboardAndReportsAuditEvent, t, o, r); this.auditingHttp.auditEvent(t, o, r, n.event).then((function (e) { n.resolve() }), (function (e) { n.reject(i.getTelemetryErrorDetails(e ? e.error : null, e ? e.status : null)) })) }, t })(); t.AuditingService = r })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o, i, r, n, a, c, l, d, u, p, h, m, f) { return new s(e, t, o, i, r, n, a, c, l, d, u, p, h, m, f) } var i, r = e.errorDetailsHelper, n = t.models.SettingsViewModelFactory; !(function (e) { e[e.OnPremDataset = 0] = "OnPremDataset", e[e.Unspecified = 1] = "Unspecified" })(i = t.NotSupportedType || (t.NotSupportedType = {})), t.createAnalyzeInExcelService = o; var a; !(function (e) { e[e.ForTest = -4] = "ForTest", e[e.InstallExcelUpdatesRC0 = 1] = "InstallExcelUpdatesRC0", e[e.InstallExcelUpdatesRC1 = 2] = "InstallExcelUpdatesRC1", e[e.InstallExcelUpdatesSql2016RTM = 3] = "InstallExcelUpdatesSql2016RTM" })(a = t.UpdateCategory || (t.UpdateCategory = {})); var s = (function () { function o(e, t, o, i, r, n, a, s, c, l, d, u, p, h, m) { this.appSettings = e, this.impersonationService = t, this.localizationService = o, this.localStorage = i, this.telemetryService = r, this.modalDialogService = n, this.window = a, this.rootScope = s, this.lazy = c, this.promiseFactory = l, this.featureSwitchService = d, this.fileSaver = u, this.lastFocusedElementService = p, this.httpService = h, this.licenseEnforcementService = m } return o.prototype.getDownloadLink = function () { return jsCommon.Utility.is64BitOperatingSystem() ? o.x64InstallUpdateLink : o.x86InstallUpdateLink }, o.prototype.getOperatingSystemArch = function () { return jsCommon.Utility.is64BitOperatingSystem() ? "x64" : "x86" }, o.prototype.parseOnPremDatasetConnectionString = function (e) { var t, o, i, r = e.split(";"); for (var n in r) if (r[n].search(/Data Source/i) !== -1 || r[n].search(/DataSource/i) !== -1) { var a = r[n].split("="); a.length > 1 && (t = a[1]) } else if (r[n].search(/Initial Catalog/i) !== -1 || r[n].search(/InitialCatalog/i) !== -1) { var a = r[n].split("="); a.length > 1 && (o = a[1]) } else if (r[n].search(/Cube/i) !== -1) { var a = r[n].split("="); a.length > 1 && (i = a[1]) } return { onPremDataSource: t, onPremInitialCatalog: o, onPremCommandText: i } }, o.prototype.startFirstTimeUserSecondDialog = function (i) { var r = this, n = t.ModalDialogService.errorServiceModalDialogControl(), a = '<div class="aboutPbiDownloadDialog"><div class="title"><div class="glyphicon pbi-glyph-excel glyph-large"></div><div>' + this.localizationService.get("AnalyzeInExcelFirstTimeUserDowloadOdcDialog_Title") + '</div></div><div class="message"></br>' + this.localizationService.get("AnalyzeInExcelFirstTimeUserDowloadOdcDialog_Message") + '<a href="https://go.microsoft.com/fwlink/?LinkID=786428" target="_blank" style="color:#0645AD; text-decoration:none">' + this.localizationService.get("AnalyzeInExcelFirstTimeUser_LearnMoreAnalyze") + "</a></br></div></div>", s = [new InJs.ModalDialogAction(this.localizationService.get("AnalyzeInExcelFirstTimeUser_AnalyzeInExcel"), function (t, o) { r.telemetryService.logEvent(e.telemetry.DashboardAndReportsFirstTimeUserDownloadOdc), n.hideDialog(), r.downloadOdcFile(i, !0) }), new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Cancel"), function (e, t) { n.hideDialog() })]; n.showCustomDialog(null, $(a), s, null, !0, null, o.dialogClass, null, (function () { return r.lastFocusedElementService.returnFocus() })) }, o.prototype.startFirstTimeUserDialog = function (i) { var r = this, n = t.ModalDialogService.errorServiceModalDialogControl(), a = '<div class="aboutPbiDownloadDialog"><div class="title"><div class="glyphicon pbi-glyph-excel glyph-large"></div><div>' + this.localizationService.get("AnalyzeInExcelFirstTimeUserUpdatesDialog_Title") + '</div></div><div class="message"></br>' + this.localizationService.get("AnalyzeInExcelFirstTimeUserUpdatesDialog_Message") + '<a href="https://go.microsoft.com/fwlink/?LinkID=786428" target="_blank" style="color:#0645AD; text-decoration:none">' + this.localizationService.get("AnalyzeInExcelFirstTimeUser_LearnMoreUpdate") + "</a></br></div></div>", s = [new InJs.ModalDialogAction(this.localizationService.get("AnalyzeInExcelFirstTimeUser_Download"), function (t, a) { r.telemetryService.logEvent(e.telemetry.DashboardAndReportsFirstTimeUserDownloadUpdate, o.currentVersion), n.hideDialog(), r.window.open(r.getDownloadLink()), r.startFirstTimeUserSecondDialog(i) }), new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Cancel"), function (e, t) { n.hideDialog() }), new InJs.ModalDialogAction(this.localizationService.get("AnalyzeInExcelFirstTimeUser_AlreadyInstalled"), function (t, a) { r.telemetryService.logEvent(e.telemetry.DashboardAndReportsFirstTimeUserAlreadyInstalled, o.currentVersion), n.hideDialog(), r.downloadOdcFile(i, !0) }, null, "linkLikeButton")]; n.showCustomDialog(null, $(a), s, null, !0, null, o.dialogClass, null, (function () { return r.lastFocusedElementService.returnFocus() })) }, o.prototype.showOnPremWarningDialog = function (e, t) { var i, r = this, n = '<div class="message"></br>' + this.localizationService.get("AnalyzeInExcelASonPremWarning_Message") + '<a href="https://go.microsoft.com/fwlink/?LinkID=786428" target="_blank" style="color:#0645AD; text-decoration:none">' + this.localizationService.get("LearnMore") + '</a></br><br><input type="checkbox" name="dontShow"> ' + this.localizationService.get("AnalyzeInExcelASonPremWarning_DontShowAgain") + "<br></div>", a = { dialogName: this.localizationService.get("AnalyzeInExcelASonPremWarning_Title"), isDismissable: !0, scope: this.rootScope.$new(), focusOnFirstButton: !0, template: n }, s = [], c = this.localStorage.getData(o.ASonPremWarningDismissPermanentlyKey); if (t) { if (null !== c) return void this.startFirstTimeUserDialog(e); s = [new InJs.ModalDialogAction(this.localizationService.get("AnalyzeInExcelASonPremWarning_OpenInExcel"), function (t, o) { $("input[name='dontShow']").is(":checked") === !0 && r.setDismissWarningDialogKey(), r.startFirstTimeUserDialog(e), i.closeDialog() }), new InJs.ModalDialogAction(this.localizationService.get("PBI_Button_Label_Cancel"), function (e, t) { i.closeDialog() })] } else { if (null !== c) return void this.downloadOdcFile(e, !1); s = [new InJs.ModalDialogAction(this.localizationService.get("AnalyzeInExcelASonPremWarning_OpenInExcel"), function (t, o) { $("input[name='dontShow']").is(":checked") === !0 && r.setDismissWarningDialogKey(), r.downloadOdcFile(e, !1), i.closeDialog() }), new InJs.ModalDialogAction(this.localizationService.get("PBI_Button_Label_Cancel"), function (e, t) { i.closeDialog() })] } a.dialogActions = s, i = this.modalDialogService.showLegacyWebModalDialog(a) }, o.prototype.setDismissWarningDialogKey = function () { this.localStorage.setData(o.ASonPremWarningDismissPermanentlyKey, {}) }, o.prototype.startAnalyzeInExcel = function (e) { this.licenseEnforcementService.supportsAnalyzeInExcel(e.contract, !0) && (this.shouldShowFirstTimeUserDialog(o.currentVersion) ? e.vsName === o.onPremVsName ? this.showOnPremWarningDialog(e, !0) : this.startFirstTimeUserDialog(e) : e.vsName === o.onPremVsName ? this.showOnPremWarningDialog(e, !1) : this.downloadOdcFile(e, !1)) }, o.prototype.dismissFirstTimeUserDialog = function (t, i) { this.telemetryService.logEvent(e.telemetry.DashboardAndReportsDismissAnalyzeInExcelDialog, o.currentVersion); var r = o.firstTimeDialogDismissPermanentlyKey + "_" + i, n = this.localStorage.getData(r); t ? null == n && this.localStorage.setData(r, {}) : null != n && this.localStorage.remove(r) }, o.prototype.shouldShowFirstTimeUserDialog = function (e) { var t = o.firstTimeDialogDismissPermanentlyKey + "_" + e; return null == this.localStorage.getData(t) }, o.prototype.downloadOdcFile = function (t, r) { var n = this; if (t.vsName === o.onPremVsName) if (this.featureSwitchService.featureSwitches.onPremAnalyzeInExcelEnabled) { var a = this.httpService.powerbiRequestOptions(null, "GetModel"); this.httpService.get("powerbi/metadata/models/" + t.id.toString() + "/?modelOptions=Default&packageId=" + t.packageId.toString(), a).then((function (o) { var i = n.parseOnPremDatasetConnectionString(o.data.onPremModelConnectionString); n.buildAndDownloadOdcFileAsync(!0, i.onPremDataSource, i.onPremInitialCatalog, i.onPremCommandText, t), n.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcelOnPremDataset, t.dbName.toString()) })) } else this.showNotSupportedDialog(i.OnPremDataset); else this.buildAndDownloadOdcFileAsync(!1, null, null, null, t); r && this.dismissFirstTimeUserDialog(r, o.currentVersion) }, o.prototype.isAnalyzeInExcelSupported = function (e, o) { return this.isAnalyzeInExcelEnabled(e) && ((o & t.models.ReportPermissions.All) === t.models.ReportPermissions.All || (o & t.models.ReportPermissions.CopyOnWrite) === t.models.ReportPermissions.CopyOnWrite || (o & t.models.ReportPermissions.Personalized) === t.models.ReportPermissions.Personalized || (o & t.models.ReportPermissions.Read) === t.models.ReportPermissions.Read) }, o.prototype.isAnalyzeInExcelEnabled = function (e) { return e.featureSwitches.analyzeInExcelEnabled && !this.impersonationService.impersonating && e.featureSwitches.exportDataEnabled }, o.prototype.buildAndDownloadOdcFileAsync = function (t, o, i, n, a) { var s = this, c = this.telemetryService.startEvent(e.telemetry.DashboardAndReportsAnalyzeInExcelDownloadOdcFile, this.featureSwitchService.featureSwitches.analyzeInExcelSovereignFormatEnabled); this.setOdcFileParameters(t, o, i, n, a).then((function (e) { var o = e.dataSource + " " + e.catalogName + " " + e.commandText, i = s.getPrefix(e.catalogName, o) + "Provider=" + e.provider + ";" + s.setIntegratedSecurityIfNeeded(t, e.integratedSecurity) + s.setIdentityProviderIfNeeded(t, e.identityProvider) + "Data Source=" + e.dataSource + ";Initial Catalog=" + e.catalogName + ";" + s.setLocationIfNeeded(t, e.location) + s.getPostfix(e.commandText, e.localeIdentifier); s.fileSaver.saveAs(i, e.filename, { type: e.filetype }), c.resolve() }), (function (e) { c.reject(r.getTelemetryErrorDetails(e.error)) })) }, o.prototype.setOdcFileParameters = function (e, t, i, r, n) { var a = this, s = this.promiseFactory.defer(), c = this.localizationService.currentLanguageLocale, l = this.generateLocaleString(c), d = { filename: n.displayName + ".odc", filetype: "text/html", commandText: void 0, provider: "MSOLAP", integratedSecurity: void 0, identityProvider: void 0, dataSource: void 0, catalogName: void 0, location: void 0, localeIdentifier: l }; return e ? (d.commandText = r, d.dataSource = t, d.catalogName = i, s.resolve(d)) : (d.commandText = "Model", d.integratedSecurity = "ClaimsToken", d.catalogName = n.dbName, d.location = this.appSettings.clusterUri + "/xmla?vs=" + n.vsName + "&db=" + n.dbName, this.featureSwitchService.featureSwitches.analyzeInExcelSovereignFormatEnabled ? this.lazy("cloudDiscovery").then((function (e) { e.getCloudDiscoveryData(!0).then((function (e) { if (d.identityProvider = a.getIdentityProviderFromColudDiscovery(e.data), d.dataSource = a.getDataSourceFromColudDiscovery(e.data), d.identityProvider && d.dataSource) s.resolve(d); else { var t = "Error in constructing odc file parameters: identityProvider=" + d.identityProvider + ", dataSource=" + d.dataSource; d.error = { code: o.inconsistentServerErrorCode, message: t }, s.reject(d) } }), (function (e) { d.error = e.error, s.reject(d) })) })) : (d.identityProvider = "AADPPE", d.dataSource = this.getNonSovereignDataSource(), s.resolve(d))), s.promise }, o.prototype.getIdentityProviderFromColudDiscovery = function (e) { if (!e || !e.service || !e.client) return null; var t = e.service.aad ? e.service.aad.endpoint : null, o = e.service.powerbiBackend ? e.service.powerbiBackend.resourceId : null, i = e.client.powerbiMsolap ? e.client.powerbiMsolap.appId : null; return t && o && i ? t + ", " + o + ", " + i : null }, o.prototype.getDataSourceFromColudDiscovery = function (e) { if (!e || !e.service) return null; var t; return e.service.powerbiBackend && e.service.powerbiBackend.endpoint && e.service.powerbiBackend.endpoint.match(/https/i) && (t = e.service.powerbiBackend.endpoint, t = t.replace(/https/i, "pbiazure")), t }, o.prototype.setIntegratedSecurityIfNeeded = function (e, t) { return e ? "" : "Integrated Security=" + t + ";" }, o.prototype.setIdentityProviderIfNeeded = function (e, t) { return e ? "" : !this.featureSwitchService.featureSwitches.analyzeInExcelSovereignFormatEnabled && this.isGeneralProdCluster() ? "" : "Identity Provider=" + t + ";" }, o.prototype.setLocationIfNeeded = function (e, t) { return e || this.featureSwitchService.featureSwitches.analyzeInExcelSovereignFormatEnabled ? "" : "Location=" + t + ";" }, o.prototype.getPrefix = function (e, t) { return '<html xmlns:o="urn:schemas-microsoft-com:office:office"xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type content="text/x-ms-odc; charset=utf-8"><meta name=ProgId content=ODC.Cube><meta name=SourceType content=OLEDB><meta name=Catalog content=' + e + "><meta name=Table content=Model><title>" + t + '</title><xml id=docprops><o:DocumentProperties  xmlns:o="urn:schemas-microsoft-com:office:office"  xmlns="http://www.w3.org/TR/REC-html40">  <o:Name>' + t + '</o:Name> </o:DocumentProperties></xml><xml id=msodc><odc:OfficeDataConnection  xmlns:odc="urn:schemas-microsoft-com:office:odc"  xmlns="http://www.w3.org/TR/REC-html40">  <odc:Connection odc:Type="OLEDB">   <odc:ConnectionString>' }, o.prototype.getPostfix = function (e, t) { return "MDX Compatibility= 1; MDX Missing Member Mode= Error; Safety Options= 2; Update Isolation Level= 2; " + t + "</odc:ConnectionString>   <odc:CommandType>Cube</odc:CommandType>   <odc:CommandText>" + e + "</odc:CommandText>  </odc:Connection> </odc:OfficeDataConnection></xml></head></html>" }, o.prototype.isGeneralProdCluster = function () { var e = this.appSettings.baseUrl, t = /dxt|msit|app\.powerbi.com/; return e.search(t) !== -1 }, o.prototype.getNonSovereignDataSource = function () { return this.isGeneralProdCluster() ? "https://analysis.windows.net/powerbi/api;" : "https://analysis.windows-int.net/powerbi/api" }, o.prototype.showNotSupportedDialog = function (o) { var r = i[o], n = "ModalDialog_AnalyzeInExcelUnSupportedTypeMessage" + r; n || (n = "ModalDialog_AnalyzeInExcelUnSupportedTypeMessageUnspecified"), this.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcelUnSupportedDataset, r), new t.dialogs.FeatureNotSupportedDialogBuilder(this.modalDialogService).show("ModalDialog_AnalyzeInExcelUnSupportedTypeTitle", n, "https://go.microsoft.com/fwlink/?LinkID=786428") }, o.prototype.generateLocaleString = function (e) { for (var t = n.createSupportedLanguagesModel(), o = 0, i = t; o < i.length; o++) { var r = i[o]; if (r.code === e) return "Locale Identifier= " + r.lcid } return "" }, o.inconsistentServerErrorCode = "InconsistentServerResponseData", o.dialogClass = "noChrome", o.x86InstallUpdateLink = "//go.microsoft.com/fwlink/?LinkId=746282", o.x64InstallUpdateLink = "//go.microsoft.com/fwlink/?LinkId=746283", o.onPremVsName = "sobe_onpremisevirtualserver", o.firstTimeDialogDismissPermanentlyKey = "firstTimeDialogDismissPermanently", o.ASonPremWarningDismissPermanentlyKey = "ASonPremWarningDismissPermanentlyKey", o.currentVersion = a.InstallExcelUpdatesSql2016RTM, o })(); t.AnalyzeInExcelService = s })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.reportHasUnsavedChanges = !1 } return Object.defineProperty(e.prototype, "userHasUnsavedWork", { get: function () { return this.reportHasUnsavedChanges }, enumerable: !0, configurable: !0 }), e.prototype.setReportSavedState = function (e) { this.reportHasUnsavedChanges = e }, e })(); e.CheckUnsavedService = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.promiseFactory = e, this.httpService = t } return e.prototype.getClusterUrl = function () { var e = this, t = this.promiseFactory.defer(); if (this.clusterUrl) t.resolve(this.clusterUrl); else { var o = { dismissGroupObjectId: !0 }; this.httpService.get("metadata/cluster", this.httpService.powerbiRequestOptions(null, null, o)).then((function (o) { e.clusterUrl = o.data, t.resolve(e.clusterUrl) }), (function (e) { t.reject({ error: e.error, requestId: e.requestId }) })) } return t.promise }, e })(); e.CommonClusterResolverService = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o() { return new s } var i = jsCommon.Color, r = t.utils.ColorUtility, n = jsCommon.StringExtensions; t.createItemPickerService = o; var a = 10, s = (function () { function t() { this.dataColors = new e.visuals.DataColorPalette } return t.prototype.setThemeItems = function (e, t, o) { this.setDataColors(e), this.icons = t, this.iconSets = o }, t.prototype.getDataColors = function () { return this.dataColors }, t.prototype.getRecentColors = function () { if (!this.recentColors) { this.recentColors = new Array(a); for (var e = this.dataColors.getBasePickerColors(), t = 0, o = this.recentColors.length; t < o; ++t)this.recentColors[t] = { value: e[t].value, id: t, shade: 0 } } return this.recentColors }, t.prototype.getThemes = function () { if (!this.themes) { this.themes = new Array(a); for (var e = this.dataColors.getBasePickerColors(), t = 0; t < this.themes.length; ++t)for (var o = e[t].value, n = r.getShadePctSequence(o), s = n.length, c = this.themes[t] = { parentColor: o, children: new Array(s), id: t }, l = 0; l < s; ++l)c.children[l] = { value: i.shadeColor(o, n[l]), shade: n[l] } } return this.themes }, t.prototype.getIcons = function () { return this.icons }, t.prototype.getIconSets = function () { return this.iconSets }, t.prototype.enqueueRecentColor = function (e) { if (!r.isHexColor(e && e.value)) return this.recentColors; var t = n.literalStringToRegex(e.value, "i"), o = _.find(this.recentColors, (function (e) { return 0 === e.value.search(t) })); return o ? _.pull(this.recentColors, o) : this.recentColors.pop(), this.recentColors.unshift(e), this.recentColors }, t.prototype.setCurrentInstance = function (e) { this.currentScope !== e && (this.closePickerAndWheel(), this.currentScope = e.isPickerOpen ? e : null) }, t.prototype.setDataColors = function (t) { this.closePickerAndWheel(), this.dataColors = t || new e.visuals.DataColorPalette, this.themes = void 0; var o = this.recentColors; if (o) for (var r = this.dataColors.getBasePickerColors(), n = 0, a = o.length; n < a; n++) { var s = o[n]; null != s.id && null != s.shade && (s.value = i.shadeColor(r[s.id].value, s.shade)) } }, t.prototype.closePickerAndWheel = function () { this.currentScope && (this.currentScope.isPickerOpen = !1, this.currentScope.isWheelOpen = !1) }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createDataClassificationService = t; var o = (function () { function t(e) { this.promiseFactory = e } return t.prototype.isEnabledAsync = function () { return this.getDataClassificationsAsync().then((function (e) { return e.length > 0 })) }, t.prototype.getDataClassificationsAsync = function () { if (this.loadDataClassificationPromise) return this.loadDataClassificationPromise; var t = this.promiseFactory.defer(); this.loadDataClassificationPromise = t.promise; var o = e.httpService.powerbiRequestOptions(); return e.httpService.get("/metadata/dataclassifications", o).then((function (e) { t.resolve(e.data) }), (function () { t.reject() })), this.loadDataClassificationPromise }, t })(); e.DataClassificationService = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new o } e.createDelayedQueryResultHandler = t; var o = (function () { function e() { } return e.prototype.setQueryResolver = function (e) { this.queryResolver = e }, e.prototype.registerDelayedResult = function (e, t, o) { this.queryResolver ? this.queryResolver.resolveDelayedQuery(e, t, o) : o.reject() }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function o(e, t, o, i) { return new a(e, t, o, i) } var i = e.data.EmptyDataClientError, r = e.data.InvalidDataResponseClientError; t.createDelayedQueryResultResolver = o; var n = 1e4, a = (function () {
            function t(e, t, o, i) { this.$timeout = t, this.telemetryService = o, this.httpService = i, this.jobsWaitingForResults = {}, this.jobsAlreadyResolved = [], e.addDelayedQueryDataListener(this) } return t.prototype.resolveDelayedQuery = function (e, t, o) { var i = this, r = this.$timeout(n); r.then((function () { return i.preemptiveQuery(e) })), this.jobsWaitingForResults[e] = { jobId: e, requestId: t, deferred: o, preemptiveQueryPromise: r }, this.jobsAlreadyResolved.indexOf(e) >= 0 && this.onDelayedQueryDataAvailable(e) }, t.prototype.onDelayedQueryDataAvailable = function (e) {
                var o = this, i = this.jobsWaitingForResults[e];
                i ? (this.$timeout.cancel(this.jobsWaitingForResults[e].preemptiveQueryPromise), delete this.jobsWaitingForResults[e], this.getQueryData(e, void 0).then((function (e) { return o.handleQueryDataResult(e, i) })).catch((function () { i.deferred.reject(new r) }))) : this.jobsAlreadyResolved.indexOf(e) < 0 && (this.jobsAlreadyResolved.push(e), this.jobsAlreadyResolved.length > t.MaxResolvedJobsToTrack && this.jobsAlreadyResolved.shift())
            }, t.prototype.preemptiveQuery = function (t) { var o = this, i = this.jobsWaitingForResults[t]; i && this.getQueryData(t, void 0).then((function (r) { o.handleQueryDataResult(r, i), delete o.jobsWaitingForResults[t], o.telemetryService.logEvent(e.telemetry.AppPreemptiveQueryData, t) })) }, t.prototype.handleQueryDataResult = function (t, o) { var r = t.data; if (r && r.data) { var n = r.data, a = { descriptor: n.descriptor, dsr: n.dsr, metrics: n.metrics, requestId: o.requestId }; o.deferred.resolve(a) } else if (r.error) { var s = new e.ServiceErrorToClientError(r.error); s.requestId = t.requestId, o.deferred.reject(s) } else o.deferred.reject(new i) }, t.prototype.getQueryData = function (e, t) { var o = this.httpService.powerbiRequestOptions(t, "GetDelayedQueryResult"); return this.httpService.get("explore/queryresult/" + e, o) }, t.MaxResolvedJobsToTrack = 100, t
        })()
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e) { return void 0 === e && (e = { TracingEnabled: !1, BypassGeocodingCache: !1 }), new r(e) } var i = jsCommon.JsonExtensions; t.createDiagnosticSettingsService = o; var r = (function () { function t(e) { this.settings = e, this.clearGeocodingCacheIfNeeded() } return t.prototype.getTracingEnabled = function () { return this.settings.TracingEnabled }, t.prototype.getBypassGeocodingCache = function () { return this.settings.BypassGeocodingCache }, t.prototype.onDiagnosticSettingsChanged = function (e) { this.settings = i.tryParseJSON(e), this.clearGeocodingCacheIfNeeded() }, t.prototype.clearGeocodingCacheIfNeeded = function () { this.settings.BypassGeocodingCache && e.visuals.services.clearGeocodingCache() }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o) { return new i(e, t, o) } t.createDomainHelperService = o; var i = (function () { function t(e, t, o) { this.promiseFactory = e, this.telemetryService = t, this.httpService = o } return t.prototype.emailIsInVerifiedDomain = function (e) { var t = this, o = this.promiseFactory.defer(); return this.getVerifiedDomains().then((function (i) { o.resolve(t.verifyEmailInGivenVerifiedDomains(e, i)) }), (function () { o.reject() })), o.promise }, t.prototype.getVerifiedDomains = function () { if (this.verifiedDomainsPromise) return this.verifiedDomainsPromise; var t = this.promiseFactory.defer(), o = this.telemetryService.startEvent(e.telemetry.DomainHelperGetVerifiedDomains), i = this.httpService.powerbiRequestOptions(o.event, "TenantVerifiedDomains"); return this.httpService.get("powerbi/invitation/verifiedDomains", i).then((function (e) { var i = { verifiedDomains: {}, blockedDomains: {} }, r = e.data; r.verifiedDomains && r.verifiedDomains.map((function (e) { var t = e.toUpperCase(); return i.verifiedDomains[t] = t, t })), r.blockedDomains && r.blockedDomains.map((function (e) { var t = e.toUpperCase(); return i.blockedDomains[t] = t, t })), t.resolve(i), o.resolve() }), (function (e) { t.reject(), o.reject() })), this.verifiedDomainsPromise = t.promise, this.verifiedDomainsPromise }, t.prototype.verifyEmailInGivenVerifiedDomains = function (e, t) { var o = e.split("@"); return !(!t || !_.isEmpty(t.verifiedDomains)) || o.length > 1 && t && !!t.verifiedDomains[o[1].toUpperCase()] }, t })(); t.DomainHelperService = i })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o, i, r, n) { return new a(e, t, o, i, r, n) } var i = jsCommon.StringExtensions, r = jsCommon.Trace, n = jsCommon.HttpConstants; t.createDownloadReportService = o; var a = (function () { function o(e, t, o, i, r, n) { this.httpService = e, this.telemetryService = t, this.notificationToast = o, this.errorService = i, this.localizationService = r, this.fileSaver = n, this.httpService = e } return o.prototype.downloadReport = function (e) { var t = "export/v201606/reports/" + e.id + "/pbix"; this.downloadPbix(e, t) }, o.prototype.downloadModel = function (e) { var t = "export/v201701/model/" + e.id + "/pbix"; this.downloadPbix(e, t) }, o.prototype.downloadPbix = function (o, a) { var s = this, c = this.telemetryService.startEvent(e.telemetry.DownloadReport, ""), l = this.httpService.powerbiRequestOptions(c.event, "DownloadReport"); l.enableTelemetry = !0, l.responseType = n.Blob; var d = this.notificationToast.notify({ title: t.localize.get("NotificationMessage_ExportToPowerBIDesktopTitle"), message: t.localize.get("NotificationMessage_ExportToPowerBIDesktopSubtitle"), notificationType: 3, sticky: !0 }), u = function (e) { s.notificationToast.hide(d), c.resolve(), s.fileSaver.saveAs(e.data, i.normalizeFileName(o.filename + ".pbix")), s.notificationToast.notify({ title: s.localizationService.get("NotificationMessage_ExportToPowerBIDesktopSuccededTitle"), message: s.localizationService.format("NotificationMessage_ExportToPowerBIDesktopSuccededMessage", [o.filename]), notificationType: 4 }) }, p = function (i, n) { r.warning("could not retrieve .pbix file for report: " + o.id); var a = "ErrorTitle_FailedToGeneratePowerBIDesktopFile", l = "ErrorMessage_FailedToGeneratePowerBIDesktopFile"; if (400 === i.status) switch (n) { case e.BYOKEncryptedModelRequiresPremiumCapacity: a = "PremiumRequired_TitleText", l = "ServerError_BYOKEncryptedModelRequiresPremiumCapacity"; break; case e.CustomerKeyNotAccessible: a = "ErrorTitle_FailedToGeneratePowerBIDesktopFile", l = "ServerError_CustomerKeyNotAccessible"; break; case e.CustomerKeyVaultError: a = "ErrorTitle_FailedToGeneratePowerBIDesktopFile", l = "ServerError_CustomerKeyVaultError"; break; case e.ModelSizeExceedsSharedCapacityLimit: a = "PremiumRequired_TitleText", l = "ErrorMessage_FailedToGeneratePowerBIDesktopFile_PremiumRequired_LargeDataset"; break; case e.ModelWithIncrementalRefreshIsNotDownloadable: a = "ErrorTitle_FailedToGeneratePowerBIDesktopFile", l = "ErrorMessage_FailedToGeneratePowerBIDesktopFile_UnsupportedModelFeatures" }s.showError(a, l, i.requestId, i.status.toString()); var d = i.headers(t.PowerBIErrorHeader); c.event.info.errorReason = d || "generalServerError", c.reject() }, h = function (e) { if (s.notificationToast.hide(d), e.data instanceof Blob) { var t = new FileReader; t.onload = function (o) { var i = jsCommon.JsonExtensions.tryParseJSON(t.result); i && i.error && i.error.code ? p(e, i.error.code) : p(e, "") }, t.onerror = function (o) { r.verbose("failed to read error code: " + t.error), p(e, "") }, t.readAsText(e.data) } else p(e, e.error.code) }; this.httpService.get(a, l).then((function (e) { var t = e.headers("Content-Type"); if (t && t.indexOf(jsCommon.HttpConstants.JsonContentType) > -1) { var o = function (e) { r.verbose("new url to large model .pbix file: " + e); var t = s.httpService.powerbiRequestOptions(c.event, "DownloadReport"); t.enableTelemetry = !0, t.responseType = n.Blob, delete t.headers.Authorization, s.httpService.get(e, t).then(u, h) }; if (e.data instanceof Blob) { var i = new FileReader; i.onload = function (e) { o(JSON.parse(i.result).url) }, i.onerror = function (t) { r.verbose("failed to get new url to large model .pbix file: " + i.error), h(e) }, i.readAsText(e.data) } else { o(e.data.url) } } else u(e) }), h) }, o.prototype.showError = function (e, o, i, r) { this.errorService.error(t.localize.get(o), o, { requestId: i, statusCode: r, title: t.localize.get(e) }) }, o })(); t.DownloadReportService = a })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new o } e.createDragDataService = t; var o = (function () { function e() { } return e.prototype.setDragElement = function (e) { this.dragElement = e }, e.prototype.setDragContext = function (e) { this.dragContext = e }, e.prototype.getDragElement = function () { return this.dragElement }, e.prototype.getDragContext = function () { return this.dragContext }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new o(e, t) } e.createDropdownMenuService = t; var o = (function () { function e(e, t) { var o = this; this.rtl = e, this.windowMetrics = t, $(window).on("resize", (function () { return o.hideMenu() })) } return e.prototype.showMenu = function (e, t, o, i, r) { this.prepareMenuItem(e, t, o, i, r), this.showMenuCore(), i && i.stopPropagation() }, e.prototype.toggleActive = function (e, t, o, i, r) { this.prepareMenuItem(e, t, o, i, r), this.isActive(e) ? this.hideMenu() : this.showMenuCore(), i && i.stopPropagation() }, e.prototype.hideMenu = function () { this.currentDropdownElement && this.isActive(this.currentDropdownElement) && (this.isOpen = !1, this.currentDropdownElement.removeClass(e.dropDownActiveClass), this.currentDropdownElement.remove(), this.currentDropdownElement = null, $(window).off(jsCommon.DOMConstants.mouseDownEventName, this.clickHandler)) }, e.prototype.showMenuCore = function () { var t = this; this.isOpen = !0, this.currentDropdownElement && (this.clickHandler = function (e) { return t.mouseDownHideDialog(e) }, $(window).on(jsCommon.DOMConstants.mouseDownEventName, this.clickHandler), this.currentDropdownElement.addClass(e.dropDownActiveClass)) }, e.prototype.prepareMenuItem = function (e, t, o, i, r) { if (this.currentDropdownElement) { var n = this.currentDropdownElement; n.is(e) || (n.remove(), this.currentDropdownElement = null, this.currentAnchorElement = null) } this.currentDropdownElement || (this.currentDropdownElement = e, this.currentAnchorElement = t, this.currentDropdownElement.appendTo("body")); var a, s, c, l; if (o) a = o.y, s = o.x, c = 0, l = 0; else { if (!t) return; a = t.offset().top, s = t.offset().left, c = t.outerWidth(!0), l = t.height() } this.rtl && this.rtl.isRtlLayout && (s = this.windowMetrics.windowWidth - (s + c)); var d = r ? s + c : s, u = e.outerWidth(!0), p = u + d > $(window).width(), h = p ? d + c - u : d, m = r ? a : a + l, f = e.outerHeight(!0); p = f + m > $(window).height(); var g = p ? m - f : m; e.filter("ul").css({ position: "absolute", zIndex: 1e3, top: g, left: this.rtl && this.rtl.isRtlLayout ? null : Math.ceil(h), right: this.rtl && this.rtl.isRtlLayout ? Math.floor(h) : null, opacity: 1 }) }, e.prototype.mouseDownHideDialog = function (e) { this.currentDropdownElement && this.isActive(this.currentDropdownElement) && this.outOfBoundsClickHandler(e) && (this.currentDropdownElement.remove(), this.isOpen = !1) }, e.prototype.outOfBoundsClickHandler = function (e) { var t = e.pageX, o = e.pageY; return !(this.currentAnchorElement && this.currentDropdownElement && this.isActive(this.currentDropdownElement) && !this.isOutOfBounds(this.currentAnchorElement, t, o)) && (this.currentDropdownElement && this.isActive(this.currentDropdownElement) ? this.isOutOfBounds(this.currentDropdownElement, t, o) : void 0) }, e.prototype.isOutOfBounds = function (e, t, o) { var i = e.offset(), r = i.left, n = i.top, a = r + e.outerWidth(), s = n + e.outerHeight(); return r > t || t > a || n > o || o > s }, e.prototype.isActive = function (t) { return t.hasClass(e.dropDownActiveClass) }, e.dropDownActiveClass = "active", e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, o, i, n, a) { return new r(e, t, o, i, n, a) } e.createDropdownService = t; var o = (function () { function e(e, t, o, i, r) { void 0 === r && (r = 0); var n = this; this.registeredDropdown = e, this.overlayOptions = t, this.dropdownService = o, this.hideDelay = r, i && (this.registeredDropdown.template.on("mouseenter", (function () { n.onMouseEnter() })), this.registeredDropdown.template.on("mouseleave", (function () { n.onMouseLeave() })), this.registeredDropdown.template.on("click", (function () { n.pin() }))) } return e.prototype.pin = function () { this.cancelHideTimeout(), this.pinned = !0 }, e.prototype.unpin = function () { this.pinned = !1 }, e.prototype.isPinned = function () { return this.pinned }, e.prototype.hide = function (e) { var t = this; this.cancelHideTimeout(); var o = void 0 !== e ? e : this.hideDelay; 0 === o ? this.hideDropdown() : this.hideTimeout = setTimeout((function () { t.hideDropdown() }), o) }, e.prototype.hideDropdown = function () { this.pinned || this.dropdownService.hide(this.registeredDropdown) }, e.prototype.show = function () { this.cancelHideTimeout() }, e.prototype.cancelHideTimeout = function () { this.hideTimeout && (clearTimeout(this.hideTimeout), this.hideTimeout = void 0) }, e.prototype.onMouseEnter = function () { this.cancelHideTimeout() }, e.prototype.onMouseLeave = function () { this.hide() }, e })(); e.RegisteredDropdownContext = o, e.TemplatePath_ContextMenu = "contextMenu.html"; var i, r = (function () { function t(e, t, o, i, r, n) { this.$rootScope = e, this.$templateCache = t, this.$compile = o, this.overlayService = i, this.featureSwitchService = r, this.$timeout = n, this.registeredDropdowns = [] } return t.prototype.showContextMenu = function (t, o, i, r, a, s, c, l) { if (t && !_.isEmpty(t.items)) { var d = new n.ContextMenu(this.createServices(), e.TemplatePath_ContextMenu, t, i, (!0), r, a, s, c, l && l.backgroundStyle, l && l.foregroundStyle, l && l.anchorElement); this.registerDropdown(d), l = l || { position: o, hideExistingOverlays: !0, showInsideVisibleArea: !0 }, this.showDropdown(d, l) } }, t.prototype.showMenu = function (e, t, r, n, a, s, c) { var l = i.compileAndBindDropdown(this.createServices(), t, e, n, c), d = new o(l, r, this, a, s); return this.registerDropdown(d.registeredDropdown), this.showDropdown(d.registeredDropdown, d.overlayOptions), d }, t.prototype.hide = function (e) { this.unregisterDropdown(e) }, t.prototype.hideAll = function (e) { if (void 0 === e && (e = !0), this.overlayService.hideAllDropdowns(!0, void 0, e), !this.featureSwitchService.featureSwitches.inlineExplore) for (; !_.isEmpty(this.registeredDropdowns);)this.unregisterDropdown(this.registeredDropdowns[0]) }, t.prototype.isDropdownRegistered = function (e) { return _.some(this.registeredDropdowns, e) }, t.prototype.showDropdown = function (e, t) { var o = this; this.$timeout((function () { _.includes(o.registeredDropdowns, e) && o.overlayService.showOverlay(e.template, t) }), 0, !1) }, t.prototype.unregisterDropdown = function (t) { _.pull(this.registeredDropdowns, t), t.template.off(e.constants.OverlayCloseEventName), t.scope.$destroy(), this.overlayService.unregister(t.template) }, t.prototype.registerDropdown = function (t) { var o = this; this.registeredDropdowns.push(t), t.template.on(e.constants.OverlayCloseEventName, (function () { return o.unregisterDropdown(t) })), this.overlayService.isRegistered(t.template) || this.overlayService.register(t.template) }, t.prototype.createServices = function () { var e = this; return { $rootScope: this.$rootScope, $compile: this.$compile, $templateCache: this.$templateCache, registeredDropdowns: this.registeredDropdowns, hideAll: function () { return e.hideAll() }, show: function (t, o) { return e.showDropdown(t, o) }, unregister: function (t) { return e.unregisterDropdown(t) }, register: function (t) { return e.registerDropdown(t) } } }, t })(); !(function (e) { function t(e, t, o, i, r) { var n, a = r; a = r ? r.$new(!0) : e.$rootScope.$new(!0), _.assign(a, o); var s, c = e.$templateCache.get("views/dropdowns/" + t); return i && (s = { transcludeControllers: (n = {}, n.$$angularInjector = { instance: i }, n) }), { scope: a, template: e.$compile(c)(a, void 0, s) } } e.compileAndBindDropdown = t })(i || (i = {})); var n; !(function (e) { var t = (function () { function e(e, t, o, r, n, a, s, c, l, d, u, p) { this.services = e; var h = { model: o, darkTheme: a, verticalScrollbar: c, themeableElement: l, backgroundStyle: d, foregroundStyle: u, menuClick: function (t) { e.hideAll(), r(t) } }; n && (h.menuItemEnter = this.onMenuItemEntered.bind(this, t, a, l, d, u, p)); var m = i.compileAndBindDropdown(e, t, h); this.scope = m.scope, this.template = m.template, s && this.template.attr("id", s) } return e.prototype.onMenuItemEntered = function (t, o, i, r, n, a, s, c) { var l = _.last(this.services.registeredDropdowns); if (l && l.parent && (this.services.unregister(l), l = _.last(this.services.registeredDropdowns)), l && s.children) { var d = new e(this.services, t, { items: s.children }, l.scope.menuClick, (!1), o, (void 0), (!0), i, r, n, a); this.services.register(d), d.parent = l, this.services.show(d, { anchorElement: $(c.currentTarget), returnFocusToElement: a, hideExistingOverlays: !1, horizontal: !0, showInsideVisibleArea: !0, showOutsideAnchorElement: !0 }) } }, e })(); e.ContextMenu = t })(n || (n = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(t) { return t.parent[e.common.constants.contentProviderStoreCustomConfigurationService] ? t.parent[e.common.constants.contentProviderStoreCustomConfigurationService] : (t.parent[e.common.constants.contentProviderStoreCustomConfigurationService] = new i, t.parent[e.common.constants.contentProviderStoreCustomConfigurationService]) } t.createContentProviderConfigHandlerService = o; var i = (function () { function e() { } return e })(); t.ContentProviderConfigHandlerService = i })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function t(o) { this._id = o + t._lastId++ , this._frames = e.styleService.createStyleFrames("cls-" + this._id) } return Object.defineProperty(t.prototype, "frames", { get: function () { return this._frames }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "className", { get: function () { return this._frames.getClassName() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "style", { get: function () { return this._frames.style }, set: function (e) { this._frames.style = e }, enumerable: !0, configurable: !0 }), t.prototype.addFrame = function (e) { this._frames.addFrame(e) }, t.prototype.addFrameFromDefinition = function (e, t) { e.style && this._frames.addFrameFromDefinition(e, t) }, t.prototype.ensureInitialFrame = function () { return this._frames.ensureInitialFrame(), this }, t.prototype.startAnimationWithDefinition = function (e, t) { e.style && (this._frames.addFrameFromDefinition(e, t), this.startAnimationIfNeeded()) }, t.prototype.updateClassIfNeeded = function () { this._frames.style && e.styleService.appendClassRule(this.className, this._frames.style) }, t.prototype.startAnimationIfNeeded = function () { if (this._frames.canAnimate() && this._frames.style) { var t = angular.element(document.getElementsByClassName(this.className)); t || alert("element not found in startAnimationIfNeeded "), t.length && e.styleService.startAnimation(t, this._frames) } }, t._lastId = 0, t })(); e.ElementStyleDefinition = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = window, o = (function () { function e() { } return e.prototype.isAnonymousLiveEmbed = function () { return t.isAnonymousEmbed === !0 }, e.prototype.isAppTokenEmbed = function () { return t.isAppTokenEmbed === !0 }, e.prototype.isSaasDashboardEmbed = function () { return t.isSaasDashboardEmbed === !0 }, e.prototype.isSaasEmbed = function () { return t.isSaasEmbed === !0 }, e.prototype.isMobile = function () { return t.isMobile === !0 }, e.prototype.isSecurePublishToWeb = function () { return t.isSecurePublishToWeb === !0 }, e.prototype.isEmbedTokenEmbed = function () { return !jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(t.powerBIEmbedToken) }, e.prototype.getEmbedTypeDescription = function () { return this.isAnonymousLiveEmbed() ? "AnonymousLiveEmbed" : this.isAppTokenEmbed() ? "AppTokenEmbed" : this.isSaasEmbed() ? this.isEmbedTokenEmbed() ? "EmbedToken" : "SaaSEmbed" : this.isSaasDashboardEmbed() ? "SaaSDashboardEmbed" : this.isTileEmbedScenario() ? "SaaSTileEmbed" : this.isSecurePublishToWeb() ? "SecurePublishToWebEmbed" : "UnknownEmbed" }, e.prototype.isReportEmbedScenario = function () { return this.isAnonymousLiveEmbed() || this.isAppTokenEmbed() || this.isSaasEmbed() || this.isSecurePublishToWeb() }, e.prototype.isTileEmbedScenario = function () { return t.isSaasTileEmbed === !0 }, e.prototype.isDashboardEmbedScenario = function () { return this.isSaasDashboardEmbed() }, e.prototype.getPublicEmbedUrl = function () { return this.isAnonymousLiveEmbed() ? document.URL : "" }, e.prototype.getPublicEmbedReferrer = function () { return this.isAnonymousLiveEmbed() ? document.referrer : "" }, e })(); e.EmbedModeService = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { function t(e, t) { return new o(t) } e.createFileSaverService = t; var o = (function () { function t(e) { this.moduleLoader = e } return t.prototype.saveAs = function (t, o, i) { return __awaiter(this, void 0, e.Promise, (function () { var e; return __generator(this, (function (r) { return i || (i = { type: jsCommon.HttpConstants.ApplicationOctetStream }), e = new Blob([t], i), this.saveBlobAs(e, o), [2] })) })) }, t.prototype.saveBlobAs = function (t, o) { return __awaiter(this, void 0, e.Promise, (function () { return __generator(this, (function (e) { switch (e.label) { case 0: return [4, this.moduleLoader.require({ javascript: "filesaver" })]; case 1: return e.sent(), saveAs(t, o), [2] } })) })) }, t })() })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e) { return new i(e) } t.createFontService = o; var i = (function () { function t(e) { this.promiseFactory = e } return t.prototype.getAllFonts = function () { var o = this.promiseFactory.defer(); return o.resolve(_.map(t.StandardFonts, (function (t) { return e.Prototype.inherit(t) }))), o.promise }, t.getFamilyCSS = function (e) { return e ? e.map((function (e) { return e.indexOf(" ") > -1 ? "'" + e + "'" : e })).join(", ") : null }, t.StandardFonts = _.map([{ families: ["Arial"], displayName: "Arial" }, { families: ["Arial Black"], displayName: "Arial Black" }, { families: ["Arial Unicode MS"], displayName: "Arial Unicode MS" }, { families: ["Calibri"], displayName: "Calibri" }, { families: ["Cambria"], displayName: "Cambria" }, { families: ["Cambria Math"], displayName: "Cambria Math" }, { families: ["Candara"], displayName: "Candara" }, { families: ["Comic Sans MS"], displayName: "Comic Sans MS" }, { families: ["Consolas"], displayName: "Consolas" }, { families: ["Constantia"], displayName: "Constantia" }, { families: ["Corbel"], displayName: "Corbel" }, { families: ["Courier New"], displayName: "Courier New" }, { families: ["wf_standard-font", "helvetica", "arial", "sans-serif"], displayName: "DIN" }, { families: ["Georgia"], displayName: "Georgia" }, { families: ["Lucida Sans Unicode"], displayName: "Lucida Sans Unicode" }, { families: ["Segoe UI Bold", "wf_segoe-ui_bold", "helvetica", "arial", "sans-serif"], displayName: "Segoe (Bold)" }, { families: ["Segoe UI", "wf_segoe-ui_normal", "helvetica", "arial", "sans-serif"], displayName: "Segoe UI" }, { families: ["Segoe UI Light", "wf_segoe-ui_light", "helvetica", "arial", "sans-serif"], displayName: "Segoe UI Light" }, { families: ["Symbol"], displayName: "Symbol", suppressStyle: !0 }, { families: ["Tahoma"], displayName: "Tahoma" }, { families: ["Times New Roman"], displayName: "Times New Roman" }, { families: ["Trebuchet MS"], displayName: "Trebuchet MS" }, { families: ["Verdana"], displayName: "Verdana" }, { families: ["Wingdings"], displayName: "Wingdings", suppressStyle: !0 }], (function (e) { return { family: t.getFamilyCSS(e.families), displayName: e.displayName, suppressStyle: e.suppressStyle } })), t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return { strategy: new e.models.DefaultGridLayoutStrategy, displayLayout: 0, setViewport: _.noop, resetZoom: _.noop, setStrategy: _.noop } } var o; !(function (e) { function t() { return { rowSpan: e.gridItemSmallLandscapeRowSpan, colSpan: e.gridItemSmallLandscapeColSpan } } function o() { return { rowSpan: e.gridItemMediumLandscapeRowSpan, colSpan: e.gridItemMediumLandscapeColSpan } } function i() { return { rowSpan: e.gridItemLargeLandscapeRowSpan, colSpan: e.gridItemLargeLandscapeColSpan } } function r(t) { return { height: t.rowSpan * e.defaultGridHeight - e.defaultGridItemSpacing, width: t.colSpan * e.defaultGridWidth - e.defaultGridItemSpacing } } function n(t) { return Math.ceil((t + e.defaultGridItemSpacing) / e.defaultGridWidth) } function a(t) { return Math.ceil((t + e.defaultGridItemSpacing + e.defaultGridItemHeaderHeight) / e.defaultGridHeight) } e.defaultGridWidth = 260, e.defaultGridHeight = 180, e.defaultGridItemSpacing = 10, e.defaultGridItemHeaderHeight = 50, e.dynamicGridWidth = 44, e.dynamicGridHeight = 50, e.dynamicGridItemSpacing = 4, e.dynamicMaxGridWidthUnits = 6, e.dynamicMaxGridHeigthUnits = 7, e.gridItemSmallLandscapeRowSpan = 1, e.gridItemSmallLandscapeColSpan = 1, e.gridItemMediumLandscapeRowSpan = 2 * e.gridItemSmallLandscapeRowSpan, e.gridItemMediumLandscapeColSpan = 2 * e.gridItemSmallLandscapeColSpan, e.gridItemLargeLandscapeRowSpan = 3 * e.gridItemSmallLandscapeRowSpan, e.gridItemLargeLandscapeColSpan = 3 * e.gridItemSmallLandscapeColSpan, e.getSmallLandscapeGridItem = t, e.getMediumLandscapeGridItem = o, e.getLargeLandscapeGridItem = i, e.getDefaultGridItemViewport = r, e.getDefaultColSpanFromWidth = n, e.getDefaultRowSpanFromHeight = a, e.gridItemSizes = [t(), o(), i()], e.gridItemSizeCount = e.gridItemSizes.length, e.resizeBuffer = 20 })(o = e.GridLayoutConstants || (e.GridLayoutConstants = {})), e.createGridLayoutService = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { function o(e) { return new i(e) } t.createDashboardInvitationService = o; var i = (function () { function t(e) { this.$location = e } return t.prototype.getInvitationClaim = function () { var t = this.$location.search(); if (!_.isEmpty(t)) { var o, i = t[e.constants.invitation.invitationCodeQueryParam], r = t[e.constants.invitation.invitationCodeQueryParamV2]; if (_.isEmpty(i)) { if (!_.isEmpty(r)) { var n = decodeURIComponent(r), a = jsCommon.JsonExtensions.tryParseJSON(atob(n)); a && (o = { tenantId: a.tenantId, invitationId: a.code, redirectedFromSignup: a.redirectedFromSignup, extshare: a.extShare, dashboardObjectId: a.dashboardId, b2bShare: a.b2bShare, appId: a.appId, reportId: a.reportId, reportType: a.reportType, isAppInvitation: !!a.appId, isReportInvitation: !!a.reportId, isDashboardInvitation: !!a.dashboardId, continueToPbi: !!a.continueToPbi, updatedQuery: jsCommon.QueryStringUtil.addOrUpdateQueryString(e.constants.invitation.invitationCodeQueryParamV2, r) }) } } else { var s = decodeURIComponent(i), c = s.split("|"); if (c.length < 2) return; var l = _.without(c, "extshare").join("|"); o = { tenantId: c[0], invitationId: c[1], isDashboardInvitation: !0, redirectedFromSignup: _.some(c, (function (e) { return "redirectedFromSignup" === e })), extshare: _.some(c, (function (e) { return "extshare" === e })), updatedQuery: jsCommon.QueryStringUtil.addOrUpdateQueryString(e.constants.invitation.invitationCodeQueryParam, l) } } return o } }, t })() })(t = e.services || (e.services = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new l } var o = jsCommon.StringExtensions, i = "<mark>", r = "</mark>", n = i + "$1" + r, a = "<em>", s = "</em>", c = a + "$1" + s; e.createHighlightService = t; var l = (function () { function e() { } return e.prototype.highlight = function (e, t, i) { if (!t || !e) return e; if (t = o.stripTagDelimiters(t), e = o.stripTagDelimiters(e), !t || !e) return e; try { t = encodeURI(t); var r = this.resolveReplacementToken(i); return decodeURI(this.addHighlightMarkup(encodeURI(e), t, r)) } catch (t) { return e } }, e.prototype.resolveReplacementToken = function (e) { if (!e) return n; switch (e) { case "em": return c; case "mark": return n; default: return n } }, e.prototype.addHighlightMarkup = function (e, t, i) { return e.replace(new RegExp("(" + o.escapeStringForRegex(t) + ")", "gi"), i) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = window.callPhantom, o = (function () { function e() { } return e.prototype.invoke = function (e) { _.isFunction(t) && t({ status: e.operationName }) }, e })(); e.PhantomJsHostInvokerService = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = window.chromiumBridge, o = (function () { function e() { } return e.prototype.invoke = function (e) { t && t.call(e.operationName) }, e })(); e.ChromiumHostInvokerService = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e.prototype.invoke = function (e) { }, e })(); e.VoidHostInvokerService = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(t, o) { e.hostServiceSink.onSuccess(t, o) } function o(t, o) { e.hostServiceSink.onFailure(t, o) } e.onHostMessageSuccess = t, e.onHostMessageFailure = o; var i = (function () { function t(t, o) { this.promiseFactory = t, this.hostInvokerService = o, this.deferredMap = {}, this.secret = e.sessionStorageService.getData("SecureMobileWebViewSecret") || void 0 } return t.prototype.invoke = function (e, t, o) { var i = this.promiseFactory.defer(), r = { serviceName: e, operationName: t, invocationId: jsCommon.Utility.generateGuid(), oneWay: !1, arguments: o, secret: this.secret }; return this.deferredMap[r.invocationId] = i, this.hostInvokerService.invoke(r), i.promise }, t.prototype.invokeAndForget = function (e, t, o) { var i = { serviceName: e, operationName: t, invocationId: jsCommon.Utility.generateGuid(), oneWay: !0, arguments: o, secret: this.secret }; this.hostInvokerService.invoke(i) }, t.prototype.onSuccess = function (e, t) { if (e in this.deferredMap) { var o = void 0; if (angular.isDefined(t)) try { o = JSON.parse(t) } catch (t) { return void this.onFailure(e, "JSON parse error") } var i = this.deferredMap[e]; delete this.deferredMap[e], i.resolve(o) } }, t.prototype.onFailure = function (e, t) { if (e in this.deferredMap) { var o = this.deferredMap[e]; delete this.deferredMap[e], o.reject(t) } }, t })(); e.HostService = i })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.None = 0] = "None", e[e.PhantomJs = 1] = "PhantomJs", e[e.Chromium = 2] = "Chromium" })(t = e.HostType || (e.HostType = {})); var o; !(function (e) { var t; !(function (e) { e.hostTypeQueryParamKey = "hostType", e.none = "none", e.localBrowser = "localbrowser", e.phantomJs = "phantomjs", e.chromium = "chromium" })(t = e.HostType || (e.HostType = {})) })(o || (o = {})); var i = (function () { function e(e) { this.hostTypeName = e || this.getHostTypeNameOrDefault(), this.hostType = this.convertHostTypeNameToHostType(this.hostTypeName) } return e.prototype.getHostType = function () { return this.hostType }, e.prototype.hasHostType = function () { return this.hostType !== t.None }, e.prototype.isPhantomJs = function () { return this.hostType === t.PhantomJs }, e.prototype.isChromium = function () { return this.hostType === t.Chromium }, e.prototype.getHostTypeNameOrDefault = function () { for (var e = window.location.search.substr(1).split("&"), t = 0, i = e.length; t < i; ++t) { var r = e[t].split("="); if (decodeURIComponent(r[0]) === o.HostType.hostTypeQueryParamKey) { return decodeURIComponent(r[1]) } } return o.HostType.none }, e.prototype.convertHostTypeNameToHostType = function (e) { switch (e.toLowerCase()) { case o.HostType.phantomJs: return t.PhantomJs; case o.HostType.chromium: return t.Chromium; default: return t.None } }, e })(); e.HostTypeResolutionService = i })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new o } e.createLastFocusedElementService = t; var o = (function () { function e() { } return e.prototype.setLastFocusedElement = function (e) { this.lastFocusedElement = e }, e.prototype.returnFocus = function () { if (this.lastFocusedElement) { var e = angular.element(this.lastFocusedElement); e && e.focus(), this.lastFocusedElement = null } }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function o(e, t, o, i, r, n, a, s) { return new u(e, t, o, i, r, n, a, s) } var i = e, r = i.common, n = r.constants, a = i.telemetry; t.createLicenseHelperService = o; var s = "powerbi/metadata/trial", c = "metadata/userserviceplan/accept2017proTrial", l = "https://go.microsoft.com/fwlink/?linkid=847283", d = "https://go.microsoft.com/fwlink/?linkid=847284", u = (function () {
            function t(e, t, o, i, r, n, a, s) { var c = this; this.telemetryService = e, this.localizationService = t, this.windowService = o, this.userInfoService = i, this.errorService = r, this.httpService = n, this.featureSwitchService = a, this.tenantSettingService = s, this.modalDialog = this.errorService.control(), this.errorDialogDisplayed = !1, this.featureSwitchService.getFeatureSwitches().then((function () { c.featureSwitchService.featureSwitches.tenantSettingPublishGetHelpInfoEnabled && (c.helpAndSupportTenantSetting = {}, c.tenantSettingService.getTenantSettingForHelpAndSupport().subscribe((function (e) { c.helpAndSupportTenantSetting = e }))) })), this.constructTryItFreeDialogBody() } return t.prototype.accept2017proTrial = function () { return __awaiter(this, void 0, e.Promise, (function () { var e, t, o, i; return __generator(this, (function (r) { switch (r.label) { case 0: e = this.httpService.powerbiRequestOptions(), t = this.telemetryService.startEvent(a.LicenseEnforcementAccept2017proTrial, "Unknown", null), r.label = 1; case 1: return r.trys.push([1, 3, , 4]), [4, this.httpService.put(c, null, e)]; case 2: return o = r.sent(), 200 === o.status || 204 === o.status ? (t.event.info.result = "Accept", t.resolve(), this.telemetryService.flush()) : this.createServiceErrorAndRejectTelemetry(t, "HttpStatusCode = " + o.status.toString()), [3, 4]; case 3: return i = r.sent(), this.createServiceErrorAndRejectTelemetry(t, "HttpStatusCode = " + i.status.toString()), [3, 4]; case 4: return [2] } })) })) }, t.prototype.acceptProTrial = function (e) { var t = this.startFreeTrialDialogEvent(e); this.sendProTrialRequest(t) }, t.prototype.showCustomizedLicensingRequestUrl = function () { return this.featureSwitchService.featureSwitches.tenantSettingPublishGetHelpInfoEnabled && !_.isEmpty(this.helpAndSupportTenantSetting.licensingRequests) }, t.prototype.constructStartTrialSuccessDialogBody = function () {
                var e = t.startTrialSuccessDialogTemplate.replace(/{UpgradeAccount_RequestTrialSuccessDialogMessage}/g, this.localizationService.format("UpgradeAccount_RequestTrialSuccessDialogMessage", [n.FreeTrialPeriod.toString()])).replace(/{ExtendTrial_RequestExtensionSuccessDialogLinkText}/g, this.localizationService.get("ExtendTrial_RequestExtensionSuccessDialogLinkText"));
                this.trialSuccessDialogContent = $(e)
            }, t.prototype.constructTryItFreeDialogBody = function () { this.termsDialogContent = $("<div></div>"), this.termsDialogContent.append($('<div class="startTrialMessage">' + this.localizationService.get("UpgradeAccount_StartTrialMessage") + ' <a href="https://go.microsoft.com/fwlink/?LinkId=870194" target="_blank">' + this.localizationService.get("LearnMore") + "</a></div><br>")), this.termsDialogContent.append($("<div>" + this.localizationService.format("UpgradeAccount_StartTrialTermsMessage", ['<a href="https://go.microsoft.com/fwlink/?LinkId=717425" target="_blank">' + this.localizationService.get("UpgradeAccount_StartTrialTermsMessageTermsAndConditons") + "</a>"]) + "</div>")) }, t.prototype.displayDialogToAcceptTrialTerms = function (e, t) { var o = this, i = this.startFreeTrialDialogEvent(e), r = [new InJs.ModalDialogAction(this.localizationService.get("UpgradeDialogButtonText_Trial"), function (e, t) { o.modalDialog.hideDialog(), o.sendProTrialRequest(i) }), new InJs.ModalDialogAction(this.localizationService.get("ModalDialog_Cancel"), function (e, t) { o.modalDialog.hideDialog(), i.event.info.result = "Cancel", i.resolve() })]; this.modalDialog.showCustomDialog(this.localizationService.format("UpgradeAccount_StartTrialTermsTitle", [n.FreeTrialPeriod.toString()]), this.termsDialogContent, r, null, !0, !0, null, t) }, t.prototype.displayDialogForTrialSuccess = function () { var e = this, t = [new InJs.ModalDialogAction(this.localizationService.get("PBI_Button_Label_Close"), function (t, o) { e.modalDialog.hideDialog(), e.windowService.location.reload() })]; this.constructStartTrialSuccessDialogBody(), this.modalDialog.showCustomDialog(this.localizationService.get("ExtendTrial_RequestExtensionSuccessDialogTitle"), this.trialSuccessDialogContent, t, null) }, t.prototype.displayDialogToUpgrade = function (e, t) { var o = this, i = this.userInfoService, r = i.userFreeTrialDaysRemaining; r < 0 && (r = 0); var n = this.localizationService, a = n.format("UpgradeAccount_DaysLeft_ProactiveUpgradeText", [r]); 1 === r ? a = n.format("UpgradeAccount_ExpiredTomorrow_ProactiveUpgradeText", [r]) : 0 === r && (a = n.get("UpgradeAccount_Expired")); var s = "<div>" + a + ' <a href="' + d + '" target="_blank">' + this.localizationService.get("LearnMore") + "</a></div>"; if (!i.userHasPremiumPlan && (i.userHasFreeTrial || i.userFreeTrialExpired)) { var c = this.upgradeToProDialogEvent(e), u = [new InJs.ModalDialogAction(this.localizationService.get("UpgradeDialogButtonText_UpgradeAccount"), function (e, t) { c.event.info.result = "Accept", c.resolve(), o.modalDialog.hideDialog(), o.windowService.open(l, "_blank") }), new InJs.ModalDialogAction(this.localizationService.get("ModalDialog_Cancel"), function (e, t) { o.modalDialog.hideDialog(), c.event.info.result = "Cancel", c.resolve() })]; this.modalDialog.showCustomDialog(this.localizationService.get("UpgradeAccount_Title"), $(s), u, null, !0, !0, null, t) } }, t.prototype.sendProTrialRequest = function (e) { var t = s; this.sendTrialRequestInternal(e, t) }, t.prototype.sendTrialRequestInternal = function (e, t) { var o = this, i = this.httpService.powerbiRequestOptions(); this.httpService.put(t, null, i).then((function (t) { 200 === t.status ? (e.event.info.result = "Accept", e.resolve(), o.telemetryService.flush(), o.displayDialogForTrialSuccess()) : o.createServiceErrorAndRejectTelemetry(e, "HttpStatusCode = " + t.status.toString()) }), (function (t) { o.createServiceErrorAndRejectTelemetry(e, "HttpStatusCode = " + t.status.toString()) })) }, t.prototype.displayFeatureDisabledErrorMessage = function (e, t, o, i) { var r = this.getDialogOptions(!1); this.displayLicenseErrorInternal(e, t, o, r, null, i) }, t.prototype.displayConnectErrorMessage = function (e, t) { var o = "UpgradeAccount_ConnectContentGenericMessage", i = "UpgradeAccount_ConnectContentGenericTitle", n = "ConnectContentProvider"; t && !e ? (n = "ConnectContentPacks", o = "UpgradeAccount_ConnectContentMessage", i = "UpgradeAccount_ConnectContentTitle") : e && (n = "ConnectApps", o = "UpgradeAccount_InstallAppMessage", i = "UpgradeAccount_InstallAppTitle"), this.userInfoService.userFreeTrialExpired ? (o = "UpgradeAccount_DisabledFeatureMessageTrialExpired", this.displayFeatureDisabledErrorMessage(n, this.localizationService.get(o), this.localizationService.get(i))) : this.displayFeatureDisabledErrorMessage(n, this.localizationService.format(o, [r.constants.FreeTrialPeriod.toString(10)]), this.localizationService.get(i)) }, t.prototype.displayQuotaExceededErrorMessage = function (e, t, o, i) { var r = this.getDialogOptions(!0); this.displayLicenseErrorInternal(e, t, o, r, i) }, t.prototype.displayLicenseErrorInternal = function (e, t, o, i, r, n) { var s = this; if (!this.errorDialogDisplayed) { var c = this.startFeatureDisabledDialogEvent(e), u = function (t) { if (s.errorDialogDisplayed) { s.errorDialogDisplayed = !1; var o = "Unknown"; switch (t) { case 1: s.displayDialogToAcceptTrialTerms(e, n), o = "Accept"; break; case 3: var i = s.showCustomizedLicensingRequestUrl() ? s.helpAndSupportTenantSetting.licensingRequests : l; s.showCustomizedLicensingRequestUrl() && s.telemetryService.logEvent(a.LicenseEnforcementAccessCustomizedProperties), s.windowService.open(i, "_blank"), o = "Upgrade"; break; case 2: r && r(); break; case 0: o = "Cancel" }c.event.info.result = o, c.resolve() } }, p = $("<div/>").append($("<span/>").addClass("space-after").text(t)).append($('<a href="' + d + '"  target="_blank" />').text(this.localizationService.get("LearnMore"))); this.errorService.error("", "FeatureDisabledForUsersLicense", { title: o, dialogOptions: i, dismissCallback: u, showAdditionalErrorInfo: !1, isDismissable: !0, onDialogClosed: function () { return u(0) }, dialogContainerClass: n, hideGetHelpLink: !0 }, p, "User"), this.errorDialogDisplayed = !0 } }, t.prototype.getDialogOptions = function (e) { var t = this.localizationService, o = this.userInfoService, i = []; return o.isPremiumUser || (o.userFreeTrialExpired || this.showCustomizedLicensingRequestUrl() || i.push({ label: t.get("UpgradeAccount_TryfreeButton"), resultValue: 1, cssClass: "primary" }), i.push({ label: t.get("UpgradeDialogButtonText_UpgradeAccount"), resultValue: 3, cssClass: "primary" })), e && i.push({ label: this.localizationService.get("QuotaManagement_ManageStorage"), resultValue: 2 }), i.push({ label: t.get("ModalDialog_Cancel"), resultValue: 0 }), i }, t.prototype.startFeatureDisabledDialogEvent = function (e) { return this.telemetryService.startEvent(a.LicenseEnforcementShowFeatureDisabledDialog, e, "Unknown", null) }, t.prototype.startFreeTrialDialogEvent = function (e) { return this.telemetryService.startEvent(a.LicenseEnforcementShowStartFreeTrialDialog, e, "Unknown", null) }, t.prototype.upgradeToProDialogEvent = function (e) { return this.telemetryService.startEvent(a.LicenseEnforcementShowUpgradeToProDialog, e, "Unknown", null) }, t.prototype.createServiceErrorAndRejectTelemetry = function (e, t) { this.errorService.error(this.localizationService.get("ErrorMessage_DefaultTitle"), "trialActivationError"), e.event.info.result = "Error", e.event.info.errorReason = t, e.reject() }, t.purchaseProLinkTemplate = "<a href='https://go.microsoft.com/fwlink/?LinkID=624536&clcid=0x409' target='_blank'>{ExtendTrial_RequestExtensionSuccessDialogLinkText}</a>", t.startTrialSuccessDialogTemplate = "<div>{UpgradeAccount_RequestTrialSuccessDialogMessage} " + t.purchaseProLinkTemplate + "</div>", t
        })()
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})), define("PowerBICommon/services/loadProgressNotificationService", ["require", "exports"], (function (e, t) { function o(e, t, o, n, a, s) { return void 0 === o && (o = _.noop), void 0 === a && (a = i), void 0 === s && (s = !1), new r(e, t, o, n, a, s) } Object.defineProperty(t, "__esModule", { value: !0 }), t.create = o; var i = 1e3, r = (function () { function e(e, t, o, r, n, a) { void 0 === n && (n = i), void 0 === a && (a = !1), this.$timeout = e, this.completionFn = t, this.cancelFn = o, this.ngZone = r, this.decrementDelayInMilliseconds = n, this.ignoreShouldTrackLoadProgressCheck = a, this.counter = 0, this.reset() } return e.prototype.beginLoad = function () { this.shouldTrackProgress && this.counter++ }, e.prototype.endLoad = function () { var e = this; this.shouldTrackProgress && this.ngZone.runOutsideAngular((function () { e.$timeout((function () { e.counter-- , 0 === e.counter && e.ngZone.run((function () { return e.invokeCompletionCallback() })) }), e.decrementDelayInMilliseconds, !1) })) }, e.prototype.reset = function () { this.trackableHost ? (this.shouldTrackProgress = this.ignoreShouldTrackLoadProgressCheck || this.trackableHost.shouldTrackLoadProgress(), this.shouldTrackProgress || this.invokeCompletionCallback()) : this.shouldTrackProgress = !1 }, e.prototype.cancelTracking = function () { this.cancelFn() }, e.prototype.register = function (e) { this.trackableHost = e }, e.prototype.invokeCompletionCallback = function () { this.completionFn() }, e })() })); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new o(e, t) } e.createLocalFileService = t; var o = (function () { function t(o, i) { var r = this; this.rootScope = o, this.compile = i, this.serviceScope = this.rootScope.$new(), this.serviceScope.$on(e.constants.localFileSelectedEventName, (function (e, t) { t && r.chooseFileDeffered.resolve(t) })), this.chooseLocalFileTemplate = angular.element(t.htmlTemplateChooseFile), this.chooseLocalFileElement = this.compile(this.chooseLocalFileTemplate)(this.serviceScope), $("body").append(this.chooseLocalFileElement), this.serviceScope.$on("$destroy", (function () { return r.chooseLocalFileElement.remove() })) } return t.prototype.chooseLocalFile = function (t, o) { this.chooseFileDeffered = t, this.serviceScope.$broadcast(e.constants.chooseLocalFileEventName, o) }, t.htmlTemplateChooseFile = "<local-file-browser class='localFileBrowser'> </local-file-browser>", t })(); e.LocalFileService = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e.prototype.getData = function (e) { try { if (localStorage) return JSON.parse(localStorage.getItem(e)) } catch (e) { } return null }, e.prototype.setData = function (e, t) { try { localStorage && localStorage.setItem(e, JSON.stringify(t)) } catch (e) { } }, e.prototype.remove = function (e) { try { localStorage && localStorage.removeItem(e) } catch (e) { } }, e })(); e.LocalStorageService = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new o } e.createExternalUrlService = t; var o = (function () { function e() { this.bingGeocodingUrl = "https://dev.virtualearth.net/REST/v1/Locations", this.bingSpatialDataUrl = "https://platform.bing.com/geo/spatial/v1/public/Geodata", this.bingMapControlUrl = "https://www.bing.com/api/maps/mapcontrol" } return e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o, i) { return new a(e, t, new s(o), i) } var i = e.visuals.services.BingMapsGeocoder, r = e.visuals.MapUtil.latLongIsInvalid; t.createGeocoder = o; var n, a = (function (e) { function t(t, o, i, r) { var n = e.call(this, (function () { return n.batchGeocoding }), (function () { return r.getBypassGeocodingCache() })) || this; return n.externalUrlService = t, n.logger = i, n.batchGeocoding = !1, o.getFeatureSwitches().then((function (e) { return n.batchGeocoding = e.useBatchGeocoding })), n } return __extends(t, e), t.prototype.bingGeocodingUrl = function () { return this.externalUrlService.bingGeocodingUrl }, t.prototype.bingSpatialDataUrl = function () { return this.externalUrlService.bingSpatialDataUrl }, t.prototype.bingGeocodingLogger = function () { return this.logger }, t })(i); !(function (e) { e.FromCache = "cache", e.Boundary = "shape", e.Batch = "batch", e.Query = "q", e.AddressLine = "addr", e.AdminDistrict = "admin", e.CountryRegion = "country", e.Locality = "locality", e.PostalCode = "postal", e.Error = "error", e.Empty = "empty", e.Multi = "multi", e.InvalidLatLong = "invalidlatlong", e.EmptyPrimitives = "noshapes", e.MultiPrimitives = "multishapes", e.UpHierarchy = "uphier", e.HighConfidence = "high", e.MediumConfidence = "medium", e.LowConfidence = "low", e.NoConfidence = "noconfidence", e.AmbiguousMatch = "ambig", e.GoodMatch = "good", e.NoMatchCode = "nomatchcode" })(n || (n = {})), t.LoggingBatchDelay = 2e3; var s = (function () { function o(e) { this.telemetryService = e, this.pending = {} } return o.prototype.log = function (o) { var i = this, r = o.join(","); this.pending[r] = (this.pending[r] || 0) + 1, this.timeout || (this.timeout = setTimeout((function () { i.timeout = void 0; var t = i.pending; i.pending = {}; for (var o in t) i.telemetryService.logEvent(e.telemetry.GeocodingSummary, o, t[o]) }), t.LoggingBatchDelay)) }, o.prototype.doSafely = function (t) { try { t() } catch (t) { this.telemetryService.logEvent(e.telemetry.HandledException, void 0, t && t.stack || "", t && t.message || "error while geocoding logging") } }, o.prototype.logGeocodeBoundaryImmediate = function (e, t) { var o = this; this.doSafely((function () { var e = [n.FromCache, n.Boundary]; o.log(e) })) }, o.prototype.logGeocodeImmediate = function (e, t) { var o = this; this.doSafely((function () { var t = [n.FromCache]; o.addGeocodeQueryFactors(e, t), o.log(t) })) }, o.prototype.logGeocodeBoundaryResult = function (e, t, o, i) { var r = this; this.doSafely((function () { var a = [n.Boundary]; if (i && a.push(n.Batch), o.error && "Geocode result is empty." !== o.error.message && a.push(n.Error), e.entityType && a.push("et=" + e.entityType), t && t.d && !_.isEmpty(t.d.results)) { t.d.results.length > 1 && a.push(n.Multi); var s = t.d.results[0].Primitives; _.isEmpty(s) ? a.push(n.EmptyPrimitives) : s.length > 1 && a.push(n.MultiPrimitives) } else a.push(n.Empty); r.log(a) })) }, o.prototype.logGeocodeResult = function (e, t, o, i) { var a = this; this.doSafely((function () { var s = []; if (i && s.push(n.Batch), o.error && "Geocode result is empty." !== o.error.message && s.push(n.Error), o && o.coordinates && r(o.coordinates, !0) && s.push(n.InvalidLatLong), a.addGeocodeQueryFactors(e, s), !t || _.isEmpty(t.resourceSets) || _.isEmpty(t.resourceSets[0].resources)) s.push(n.Empty); else { t.resourceSets[0].resources.length > 1 && s.push(n.Multi), _.some(t.resourceSets[0].resources, (function (e) { return _.some(e.matchCodes, (function (e) { return "UpHierarchy" === e })) })) && s.push(n.UpHierarchy); var c = a.findMatchedLocation(t.resourceSets[0].resources, o); c && (c.confidence ? "High" === c.confidence ? s.push(n.HighConfidence) : "Medium" === c.confidence ? s.push(n.MediumConfidence) : "Low" === c.confidence && s.push(n.LowConfidence) : s.push(n.NoConfidence), _.isEmpty(c.matchCodes) ? s.push(n.NoMatchCode) : (-1 !== _.indexOf(c.matchCodes, "Ambiguous") && s.push(n.AmbiguousMatch), -1 !== _.indexOf(c.matchCodes, "Good") && s.push(n.GoodMatch))) } a.log(s) })) }, o.prototype.findMatchedLocation = function (e, t) { if (t.coordinates && t.coordinates.latitude && t.coordinates.longitude) for (var o = 0, i = e; o < i.length; o++) { var r = i[o]; if (r.point && r.point.coordinates && r.point.coordinates.length >= 2 && t.coordinates.latitude === r.point.coordinates[0] && t.coordinates.longitude === r.point.coordinates[1]) return r } }, o.prototype.addGeocodeQueryFactors = function (e, t) { var o = e.getEntity(); if (o) { o.Query && t.push(n.Query); var i = o.Address; i && (i.AddressLine && t.push(n.AddressLine), i.AdminDistrict && t.push(n.AdminDistrict), i.CountryRegion && t.push(n.CountryRegion), i.Locality && t.push(n.Locality), i.PostalCode && t.push(n.PostalCode)) } }, o })(); t.GeocodingLogger = s })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o) { return new i(e, t, o.bingMapControlUrl) } var i = e.visuals.MapUtil.MapControlFactory; t.createMapControlFactory = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new o } e.createNetworkAvailabilityService = t; var o = (function () { function e() { } return e.prototype.isNetworkAvailable = function () { return navigator.onLine }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.Default = 0] = "Default", e[e.Error = 1] = "Error", e[e.Success = 2] = "Success", e[e.Warning = 3] = "Warning", e[e.Loading = 4] = "Loading", e[e.SecurityWarning = 5] = "SecurityWarning", e[e.Info = 6] = "Info" })(t = e.NotificationBarType || (e.NotificationBarType = {})); var o = (function () { function o(e) { this.rootScope = e, this.notifications = [], this.hideOnStateChangeIdArray = [] } return Object.defineProperty(o.prototype, "currentMessage", { get: function () { return this.notifications[0] }, enumerable: !0, configurable: !0 }), o.prototype.notify = function (e) { if (!e) return null; if (!_.isEmpty(e.id) && _.find(this.notifications, (function (t) { return t.id === e.id }))) return e.id; e.secondaryLink; return e.progressBarInfo || (e.progressBarInfo = { progressDelays: "0", progressDuration: 0 }), _.isEmpty(e.id) && (e.id = jsCommon.Utility.generateGuid()), e = _.extend({}, o.defaultOptions, e), this.notifications.push(e), e.hideOnStateChange && this.hideNotificationOnStateChange(e.id), e.id }, o.prototype.hide = function (e) { _.remove(this.notifications, (function (t) { return t.id === e })), _.pull(this.hideOnStateChangeIdArray, e), 0 === this.hideOnStateChangeIdArray.length && this.unregisterStateChangeHandler && this.unregisterStateChangeHandler() }, o.prototype.hideNotificationOnStateChange = function (t) { var o = this; 0 === this.hideOnStateChangeIdArray.length && (this.unregisterStateChangeHandler = this.rootScope.$on(e.constants.navigation.stateChangeSuccess, (function (e, t, i, r, n) { return o.handleStateChange() }))), this.hideOnStateChangeIdArray.push(t) }, o.prototype.handleStateChange = function () { for (var e = 0, t = this.hideOnStateChangeIdArray; e < t.length; e++) { var o = t[e]; this.hide(o) } }, o.defaultOptions = { notificationType: t.Default, disallowUserDismiss: !1 }, o })(); e.NotificationBarService = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e) { return new i(e) } t.createNotificationToastService = o; var i = (function () { function t(t) { this.telemetryService = t, this.telemetryService.logEvent(e.telemetry.DeprecatedNotificationToastUsage, "constructor", "") } return t.prototype.addNotificationFilter = function (e) { this.logDeprecatedUsage("addNotificationFilter") }, t.prototype.notify = function (e) { return this.logDeprecatedUsage("notify", e.message || e.title), e.id = jsCommon.Utility.generateGuid(), e.id }, t.prototype.hide = function (e) { this.logDeprecatedUsage("hide") }, t.prototype.hideCurrentNotification = function () { this.logDeprecatedUsage("hideCurrentNotification") }, t.prototype.logDeprecatedUsage = function (t, o) { void 0 === o && (o = ""), this.telemetryService.logEvent(e.telemetry.DeprecatedNotificationToastUsage, t, o) }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, o, i, r, n) { return new l(e, t, o, i, r, n) } var o = jsCommon.DOMConstants, i = e.OverlayUtils; e.createOverlayService = t; var r = "overlayActive", n = "overlay", a = 250, s = 10, c = 16, l = (function () { function t(e, t, i, r, n, a) { var s = this; this.$timeout = i, this.root = n, this.rtl = a, this.dropdowns = [], this.$window = $(t).on(o.mouseDownEventName + ".overlayService", (function (e) { return s.mouseClickHideDialog(e, s.dropdowns) })).on("resize.overlayService", (function () { return s.hideAllDropdowns() })), e.$on("$destroy", (function () { $(t).off(o.mouseDownEventName + ".overlayService"), $(t).off("resize.overlayService") })), this.root = n || $("body"), this.isInlineExploreMode = r.featureSwitches.inlineExplore } return t.prototype.register = function (e, t) { this.dropdowns.push({ element: e }), e.addClass(n).appendTo(t || this.root) }, t.prototype.unregister = function (e) { _.remove(this.dropdowns, (function (t) { return t.element.is(e) })), e.removeClass(n).removeClass(r).remove() }, t.prototype.isRegistered = function (e) { return _.some(this.dropdowns, (function (t) { return t.element.is(e) })) }, t.prototype.mouseClickHideDialog = function (e, t) { var o = this; if (this.isInlineExploreMode) { var i = this.popSubOverlays(e); return void this.exploreHideAllDropdownsExcept(!0, i) } !_.some(this.dropdowns, (function (t) { return t.element.hasClass(r) && !o.outOfBoundsClickHandler(e, t.element) })) && this.hideAllDropdowns(!0) }, t.prototype.showOverlay = function (e, t) { var o = this; if (t.hideExistingOverlays && this.hideAllDropdownsExcept(!0, e), e.addClass(r), t.anchorElement || t.anchorDimensions) { t.blurNeeded && this.registerBlurHandler(t.anchorElement, t.disableAnimation); var n = t.anchorDimensions || i.getAnchorDimensions(t.anchorElement); this.repositionDropdownWithAnchorCoordinates(e, n, !!t.preferLeft, t.horizontal, t.showOutsideAnchorElement, t.showIndicator, t.scale) } else t.position && t.showInsideVisibleArea ? this.repositionDropdownWithAnchorCoordinates(e, { left: t.position.x, top: t.position.y, width: 0, height: 0 }, !!t.preferLeft, !1, t.showOutsideAnchorElement, t.showIndicator, t.scale) : t.position && this.repositionDropdown(e, t.position); var a = _.filter(this.dropdowns, (function (t) { return t.element.is(e) })); if (!_.isEmpty(a)) { var s = a[0]; s.escHandler = function (e) { o.keyPress(e, s, t.anchorElement) }; var c = s.element.get(0); c && c.addEventListener("keydown", s.escHandler), s.isModal = t.isModal, s.returnFocusToElement = t.returnFocusToElement } this.registerScrollHandler(), jsCommon.FocusManager.focusChildInGroup(e.get(0)) }, t.prototype.registerScrollHandler = function () { var e = this; this.$timeout((function () { return e.registerScrollHandlerCore() })) }, t.prototype.registerScrollHandlerCore = function () { var t = this; this.scrollEventListener || (this.scrollEventListener = function (o) { e.directives.OnResize.isResizeSensorScrollEvent(o) || $(o.target).parents().addBack().hasClass(r) || t.hideAllDropdowns() }, document.addEventListener("scroll", this.scrollEventListener, !0)) }, t.prototype.unregisterScrollHandler = function () { document.removeEventListener("scroll", this.scrollEventListener, !0), this.scrollEventListener = void 0 }, t.prototype.keyPress = function (e, t, o) { e.skipOverlayServiceEscHandler || 27 !== e.keyCode || (o && o.focus(), this.hideDropdown(t, !0), e.stopPropagation()) }, t.prototype.registerBlurHandler = function (e, t) { var o = this; e.on("focusout.overlay", (function (i) { e.off("focusout.overlay"), o.$timeout((function () { return o.hideAllDropdowns(!!t) })) })) }, t.prototype.toggleDropdown = function (e, t) { var o = t.element; _.isString(o) && (o = this.getOverlayElement(o)), t.blurNeeded && this.registerBlurHandler(t.anchorElement, t.disableAnimation); for (var n = 0, a = this.dropdowns; n < a.length; n++) { var s = a[n]; s.element.is(o) || this.hideDropdown(s, !0) } this.repositionDropdownWithAnchorCoordinates(o, i.getAnchorDimensions(t.anchorElement), t.preferLeft, t.horizontal, !1, !1), o.toggleClass(r), this.registerScrollHandler(), e && e.stopPropagation() }, t.prototype.getOverlayElement = function (e, t) { var o = this.getOverlaySelector(e); return t ? t.siblings(o) : $(o) }, t.prototype.getOverlaySelector = function (e) { return '[dropdown-overlay-name="' + e + '"]' }, t.prototype.outOfBoundsClickHandler = function (e, t) { return !$(e.target).parents().addBack().hasClass(r) }, t.prototype.popSubOverlays = function (e) { for (var t = $(e.target).closest("." + r), o = [], i = this.dropdowns.length - 1; i >= 0 && this.dropdowns[i].element[0] !== t[0]; --i)o.push(this.dropdowns[i]); return o }, t.prototype.repositionDropdownWithAnchorCoordinates = function (e, t, o, i, r, n, a) { var l, d, u, p, h, m = this.$window.width(), f = this.$window.height(), g = e.find(".explorationAppBarMenu"), v = g.length ? g.outerWidth(!0) : e.outerWidth(!0), y = g.length ? g.outerHeight(!0) : e.outerHeight(!0), b = n ? c : 0, w = n ? Math.floor(Math.sqrt(b * b + b * b) / 2) : 0; if (i) { var S = void 0, D = void 0, C = void 0; if (S = t.top, D = t.left, h = y + S - b > f, d = h ? S + t.height - y + b : S - b, this.rtl && this.rtl.isRtlLayout) { C = D; var T = C - v - w < 0; p = !T, l = T ? C + w : C - v - w } else { C = D + t.width; var T = v + C + w > m; p = T, l = T ? C - v - w : C + w } r && l + v >= D && l < C && (l = D - v) } else { var S = t.top + t.height, D = void 0; if (h = y + S - b > f, d = h ? S - y + b : S - b, o || this.rtl && this.rtl.isRtlLayout) { D = t.left + t.width; var T = D - v - w < 0; p = !T, l = T ? D - t.width + w : D - v - w } else { D = t.left; var T = v + D + w > m; p = T, l = p ? D + t.width - v - w : D + w } l < 0 && (l = D) } d < 0 && (d = s); var E = { x: Math.ceil(l), y: d }; if (n) { var I = t.top - E.y - b / 2; I < 0 ? I += b : I > e.height() - b && (I -= b), u = { top: I }; E.x >= t.left ? u.left = -(c / 2) : u.right = -(c / 2) } this.repositionDropdown(e, E, u, a, p, h) }, t.prototype.repositionDropdown = function (e, t, o, i, r, n) { if (o) { var a = "top: " + o.top + "px", s = o.left ? "left: " + o.left + "px" : "right: " + o.right + "px", l = "height: " + c + "px;width: " + c + "px", d = "position: absolute;transform: rotate(45deg);" + l + ";" + a + ";" + s + ";", u = '<div class="indicator" style="' + d + '"></div>'; e.append($.parseHTML(u)) } var p = { top: t.y, left: t.x }; void 0 !== i && (p.transform = "scale(" + i + ")", p["transform-origin"] = (r ? "right" : "left") + " " + (n ? "bottom" : "top")), e.css(p) }, t.prototype.hideAllDropdowns = function (e, t, o) { if (this.isInlineExploreMode && o) { var i = this.dropdowns.filter((function (e) { return e.element.hasClass("default-contextmenu") })); return void this.exploreHideAllDropdownsExcept(e, i) } var r; t || (r = _.find(this.dropdowns, (function (e) { return e.isModal }))), this.hideAllDropdownsExcept(e, r && r.element) }, t.prototype.hideAllDropdownsExcept = function (e, t) { for (var o = [], i = 0, n = this.dropdowns; i < n.length; i++) { var a = n[i]; a && !a.element.is(t) && a.element.hasClass(r) && (this.hideDropdown(a, e), o.push(a)) } this.removeAllFromRegister(o) }, t.prototype.exploreHideAllDropdownsExcept = function (e, t) { for (var o = [], i = 0, n = this.dropdowns; i < n.length; i++)for (var a = n[i], s = 0, c = t; s < c.length; s++) { var l = c[s]; a === l && a && a.element.hasClass(r) && (this.hideDropdown(a, e), o.push(a)) } this.removeAllFromRegister(o) }, t.prototype.hideDropdown = function (e, t) { var o = this; if (e.escHandler) { var i = e.element.get(0); i && i.removeEventListener("keydown", e.escHandler), e.escHandler = null } e.returnFocusToElement && e.returnFocusToElement.focus(), t ? this.hideOverlay(e) : e.element.animate({ opacity: 0 }, a, (function () { return o.hideOverlay(e) })), this.unregisterScrollHandler() }, t.prototype.removeAllFromRegister = function (t) { _.forEach(t, (function (t) { return t.element.trigger(e.constants.OverlayCloseEventName) })) }, t.prototype.hideOverlay = function (e) { e.element.removeClass(r).removeAttr("style") }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e) { var t = []; for (var o in e) { var i = e[o]; t.push({ start: new Date(i.start).toISOString(), end: new Date(i.end).toISOString(), startEval: i.startEval ? new Date(i.startEval).toISOString() : void 0, fileName: o }) } return t } e.getJsParseTimes = t })(t = e.perfMarkers || (e.perfMarkers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createPopupWindowService = t; var o = (function () { function e(e) { this.windowService = e } return e.prototype.open = function (e, t, o) { void 0 === t && (t = 600), void 0 === o && (o = 480); var i = (this.windowService.outerWidth - t) / 2; i += this.windowService.screenX; var r = (this.windowService.outerHeight - o) / 2; return r += this.windowService.screenY, this.windowService.open("/popupserverredirect?url=" + encodeURIComponent(e), "_blank", "top=" + r + ", left=" + i + ", screenX=" + i + ", screenY=" + r + ", width=" + t + ", height=" + o + ", resizable=yes") }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { window.location.href = "pbidesktop:?reportId=" + e + "&groupId=" + t } e.powerBIDesktopLauncher = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e) { return new n(e) } var i = e.common.constants, r = jsCommon.BrowserUtils; t.createPrintService = o; var n = (function () { function e(e) { var t = this; if (this.rootScope = e, r.isFirefox() || r.isInternetExplorerOrEdge()) window.onbeforeprint = function () { return t.enterPrintHandler() }, window.onafterprint = function () { return t.exitPrintHandler() }; else if (window.matchMedia) { var o = window.matchMedia("print"), i = function (e) { t.mediaQueryListener(e) }; o.addListener(i), this.rootScope.$on("$destroy", (function () { return o.removeListener(i) })) } } return e.prototype.mediaQueryListener = function (e) { e.matches ? this.enterPrintHandler() : this.exitPrintHandler() }, e.prototype.enterPrintHandler = function () { this.rootScope.$emit(i.enterPrintModeEvent) }, e.prototype.exitPrintHandler = function () { this.rootScope.$emit(i.exitPrintModeEvent) }, e })(); t.PrintService = n })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e) { return new i(e) } t.createPromiseFactory = o; var i = (function () { function t(e) { this.q = e } return t.prototype.defer = function (t) { return t ? new e.PbiDeferred : this.q.defer() }, t.prototype.reject = function (t, o) { return o ? e.PbiPromise.reject(t) : this.q.reject(t) }, t.prototype.resolve = function (e) { var t = this.defer(); return t.resolve(e), t.promise }, t.prototype.all = function (t, o) { return o ? e.PbiPromise.all(t) : this.q.all(t) }, t.prototype.allSettled = function (e) { var t = this.defer(), o = e.length; if (o > 0) for (var i = 0, r = [], n = function (n) { e[n].then((function (e) { r[n] = { value: e, type: 0 } })).catch((function (e) { r[n] = { value: e, type: 1 } })).finally((function () { i++ , i === o && t.resolve(r) })) }, a = 0; a < o; a++)n(a); else t.resolve([]); return t.promise }, t.prototype.when = function (e) { return this.q.when(e) }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, i, r) { return new o(e, t, i, r) } e.createScopedMixinProvider = t; var o = (function () { function t(e, t, o, i) { this.$injector = e, this.$scope = t, this.scopedProvider = o, this.factories = i, this.instances = [] } return t.prototype.get = function (t) { var o = this.instances[t]; if (void 0 !== o) return o; for (var i = [], r = this.factories[t] || [], n = 0, a = r; n < a.length; n++) { var s = a[n]; i.push(this.instantiateMixin(s)) } return o = new e.MixinProvider(i), this.instances[t] = o, o }, t.prototype.instantiateMixin = function (e) { var t = e.ng, o = !_.isEmpty(t), i = e.scoped, r = !_.isEmpty(i), n = {}; if (o) for (var a = this.$injector, s = 0, c = t; s < c.length; s++) { var l = c[s], d = void 0; d = "$scope" === l ? this.$scope : a.get(l), n[l] = d } if (r) for (var u = this.scopedProvider, p = this.$scope, h = 0, m = i; h < m.length; h++) { var l = m[h]; n[l] = u.get(l, p) } return e.fn(n) }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createScopedProvider = t; var o = (function () { function e(e) { this.injector = e, this.defaultServiceFactories = {}, this.serviceFactoriesByInstance = {} } return e.prototype.register = function (e, t, o) { if (o) { var i = this.serviceFactoriesByInstance[o] || {}; i[e] = t, this.serviceFactoriesByInstance[o] = i } else this.defaultServiceFactories[e] = t; return this }, e.prototype.attachTo = function (t, o) { o && (t[e.InstanceNameProperty] = o); var r = new i(this.injector, this.getFactories(o), t); return t[e.getInstanceName(t)] = r, r }, e.prototype.find = function (t) { var o = t; do { var i = e.getInstanceName(o), r = o[i]; if (r) return r } while (o = o.$parent) }, e.prototype.getFactories = function (e) { var t = this.serviceFactoriesByInstance[e]; if (!t) return this.defaultServiceFactories; var o = __assign({}, this.defaultServiceFactories); for (var i in t) o[i] = t[i]; return o }, e.getInstanceName = function (t) { var o = t[e.InstanceNameProperty]; return o ? o : e.DefaultInstanceName }, e.DefaultInstanceName = "scopedInstances", e.InstanceNameProperty = "instanceProperty", e })(), i = (function () { function e(e, t, o) { this.injector = e, this.factories = t, this.scope = o, this.instances = {} } return e.prototype.get = function (e, t) { if (t || (t = this.scope), "$scope" === e) return t; var o = this.instances[e]; if (void 0 !== o) return o; var i = this.factories[e], r = [], n = i.services; if (n) for (var a = this.injector, s = 0, c = n.length; s < c; s++)r.push(a.get(n[s])); var l = i.scopedServices; if (l) for (var s = 0, c = l.length; s < c; s++) { var d = l[s], u = this.get(d, t); r.push(u) } return i.scopedProviderInstance && r.push(this), this.instances[e] = o = i.fn.apply(i, r), o }, e.prototype.register = function (e, t) { this.instances[t] = e }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new n(e) } function o(e, t, o) { var i = e.getTheScopedService(t); return !!i && (o(i), !0) } function i(e, t, i) { return o(e, "eventBridge", (function (e) { return e.publishToChannel(t, i) })) } e.createScopedRootRegistrar = t, e.withTheScopedService = o, e.sendScopedChannelEvent = i, e.ScopedRootRegistrarMixinFactory = { ng: ["$scope", "scopedRootRegistrar"], scoped: [], fn: function (e) { return new r(e) } }; var r = (function () { function e(e) { this.services = e, e.scopedRootRegistrar.addScope(e.$scope) } return e.prototype.update = function (e) { }, e.prototype.destroy = function () { this.services.scopedRootRegistrar.removeScope(this.services.$scope) }, e })(), n = (function () { function e(e) { this.scopedProvider = e, this.registeredScopes = [] } return e.prototype.addScope = function (e) { this.registeredScopes.push({ scope: e, provider: this.scopedProvider.find(e) }) }, e.prototype.removeScope = function (e) { _.remove(this.registeredScopes, (function (t) { return e === t.scope })) }, e.prototype.getTheScopedService = function (e) { if (this.registeredScopes.length) return this.registeredScopes[0].provider.get(e) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createScopeEventSubscriptionManager = t; var o = (function () { function e(e) { this.scope = e, this.unsubscribeList = [] } return e.prototype.subscribe = function (e, t) { var o = this.scope.$on(e, t); return o && this.unsubscribeList.push(o), this }, e.prototype.unsubscribeAll = function () { for (var e = this.unsubscribeList.length - 1; e >= 0; --e)this.unsubscribeList[e](); this.unsubscribeList = [] }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        function t(t) {
            var o, i = ["$scope", "$rootScope", "$timeout", "$compile", "scopedProvider"], r = i.length; return t.createOptions && (o = t.createOptions()),
                o && o.additionalServices && i.push.apply(i, o.additionalServices), i.push((function (n, a, s, c, l) { var d = { rootScope: a, timeout: s, compile: c }; if (o) { var u = o.additionalServices; if (u) for (var p = r, h = i.length - 1; p < h; p++)d[i[p]] = arguments[p]; o.scopedServiceRoot && l.attachTo(n, o.scopedProviderInstanceName); var m = o.scopedDependencies; if (m) { var f = l.find(n); if (f) for (var p = 0, h = m.length; p < h; p++) { var g = m[p]; d[g] = f.get(g, n) } } e.HostModalDialogServices.validateHostModalDialogServices(n, u, m) } var v = new t(n, d); return v.onDestroy && n.$on("$destroy", (function () { return v.onDestroy() })), v })), i
        } e.createController = t
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e.prototype.getData = function (e) { try { if (sessionStorage) return JSON.parse(sessionStorage[e]) } catch (e) { return null } return null }, e.prototype.setData = function (e, t) { try { sessionStorage && (sessionStorage[e] = JSON.stringify(t)) } catch (e) { } }, e })(); e.sessionStorageService = new t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new o } e.createSettingsService = t; var o = (function () { function e() { } return e.prototype.getShowGridlines = function () { return this.showGridlines }, e.prototype.setShowGridlines = function (e) { this.showGridlines = e }, e.prototype.getShowSmartGuides = function () { return this.showSmartGuides }, e.prototype.setShowSmartGuides = function (e) { this.showSmartGuides = e }, e.prototype.getSnapToGrid = function () { return this.snapToGrid }, e.prototype.setSnapToGrid = function (e) { this.snapToGrid = e }, e.prototype.getDefaultSectionVerticalAlignment = function () { return this.sectionVerticalAlignment }, e.prototype.setDefaultSectionVerticalAlignment = function (e) { this.sectionVerticalAlignment = e }, e.prototype.getLockObjects = function () { return this.lockObjects }, e.prototype.setLockObjects = function (e) { this.lockObjects = e }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return { value: e, unit: "undefined" != typeof t ? t : o.pixel } } var o; !(function (e) { e[e.percentage = 0] = "percentage", e[e.inch = 1] = "inch", e[e.centimeter = 2] = "centimeter", e[e.millimeter = 3] = "millimeter", e[e.em = 4] = "em", e[e.ex = 5] = "ex", e[e.point = 6] = "point", e[e.pica = 7] = "pica", e[e.pixel = 8] = "pixel" })(o = e.MeasurementUnit || (e.MeasurementUnit = {})), e.makeLayoutUnit = t; var i = (function () { function e() { } return e })(); e.BoxShadowUnit = i; var r, n = (function () { function e() { } return e })(); !(function (e) { e[e.inline = 0] = "inline", e[e.block = 1] = "block", e[e.flex = 2] = "flex", e[e.inlineBlock = 3] = "inlineBlock", e[e.inlineFlex = 4] = "inlineFlex", e[e.inlineTable = 5] = "inlineTable", e[e.listItem = 6] = "listItem", e[e.runIn = 7] = "runIn", e[e.table = 8] = "table", e[e.tableCaption = 9] = "tableCaption", e[e.tableColumnGroup = 10] = "tableColumnGroup", e[e.tableHeaderGroup = 11] = "tableHeaderGroup", e[e.tableFooterGroup = 12] = "tableFooterGroup", e[e.tableRowGroup = 13] = "tableRowGroup", e[e.tableCell = 14] = "tableCell", e[e.tableColumn = 15] = "tableColumn", e[e.tableRow = 16] = "tableRow", e[e.none = 17] = "none", e[e.initial = 18] = "initial", e[e.inherit = 19] = "inherit" })(r = e.DisplayValue || (e.DisplayValue = {})); var a; !(function (e) { e[e.slideLeftBigIn = 0] = "slideLeftBigIn", e[e.slideLeftBigOut = 1] = "slideLeftBigOut", e[e.slideRightBigIn = 2] = "slideRightBigIn", e[e.slideRightBigOut = 3] = "slideRightBigOut" })(a = e.ExtendedTransition || (e.ExtendedTransition = {})); var s = (function () { function e(e) { this.frames = [], this.style = null, this.className = e } return e.prototype.ensureInitialFrame = function () { this.frames.length > 0 || !this.style || this.frames.push({ style: this.style, duration: 0 }) }, e.prototype.addFrame = function (e) { var t = this.frames, o = t.length > 0 ? t[t.length - 1].style : this.style; c.areStylesEqual(o, e.style) || (t.push(e), null == this.style && (this.style = e.style)) }, e.prototype.addFrameFromDefinition = function (e, t) { e.style && this.addFrame({ style: e.style, duration: t }); for (var o = e.frames, i = o.frames.length, r = 1; r < i; r++)this.addFrame(o[r]) }, e.prototype.canAnimate = function () { return this.frames.length > 0 }, e.prototype.getFrames = function () { return this.frames }, e.prototype.getClassName = function () { return this.className }, e.prototype.keepFinalStyle = function () { 0 !== this.frames.length && (this.style = this.frames[this.frames.length - 1].style, this.frames = []) }, e })(), c = (function () { function e() { this.classMap = {}; var t = document.createElement("style"); document.getElementsByTagName("head")[0].appendChild(t), this.styleSheet = document.styleSheets[document.styleSheets.length - 1], e.isWebkit = "WebkitAppearance" in document.documentElement.style } return e.prototype.createEmpty = function () { return new n }, e.prototype.createPoint = function (e, o) { var i = new n; return i.top = t(e ? e : 0), i.left = t(o ? o : 0), i.position = "absolute", i }, e.prototype.createBox = function (e, o, i, r) { var a = new n; return a.top = t(e ? e : 0), a.left = t(o ? o : 0), a.width = r ? r : 0, a.height = i ? i : 0, a.position = "absolute", a.overflow = "hidden", a.whiteSpace = "normal", a.tableLayout = "fixed", a }, e.prototype.createViewport = function (e) { var t = new n; return t.width = e.width, t.height = e.height, t }, e.prototype.createTruncateBox = function (e, t, o, i, r, n) { var a = this.createBox(e, t, o, i); return a.whiteSpace = "nowrap", a.overflow = "hidden", a.textOverflow = "ellipsis", r && (a.fontSize = r), n && (a.color = n), a }, e.prototype.createTranslateTransform = function (e, t, o, i) { var r = new n; return r.transformTranslate = { x: e, y: t, z: o, unit: i || "%" }, r }, e.prototype.createRotateTransform = function (e, t, o) { var i = new n; return i.transformRotate = { x: t, y: o, z: e }, i }, e.prototype.createStyleFrames = function (e) { return new s(e) }, e.prototype.appendClassRule = function (t, o) { var i = this.classMap[t], r = "." + t; if (i) { if (e.areStylesEqual(i, o)) return; for (var n = this.styleSheet.cssRules, a = n.length, s = 0; s < a; s++) { var c = n[s]; if (c.selectorText === r) return this.classMap[t] = o, void (c.style.cssText = this.stringify(o)) } } this.classMap[t] = o; var l = r + "{" + this.stringify(o) + "}"; this.styleSheet.insertRule(l, 0) }, e.prototype.startAnimation = function (t, o) { var i = o, r = i.getFrames(), n = r.length; if (0 !== n) { i.keepFinalStyle(); var a = t; a = a.animate({}); for (var s = 0; s < n; s++) { var c = r[s], l = e.convertToJQueryAnimateStyle(c.style); a = a.animate(l, { duration: 1e3 * c.duration, easing: "ease-out" }) } } }, e.areStylesEqual = function (t, o) { return t && o && t.top === o.top && t.left === o.left && t.right === o.right && t.bottom === o.bottom && t.height === o.height && t.width === o.width && t.marginTop === o.marginTop && t.marginLeft === o.marginLeft && t.fontSize === o.fontSize && t.position === o.position && t.overflow === o.overflow && t.display === o.display && t.verticalAlign === o.verticalAlign && t.backgroundColor === o.backgroundColor && t.backgroundImage === o.backgroundImage && t.opacity === o.opacity && t.color === o.color && t.whiteSpace === o.whiteSpace && t.tableLayout === o.tableLayout && t.textAlign === o.textAlign && t.textOverflow === o.textOverflow && e.areTranslateRotateEqual(t, o) && e.areTranslateTransformEqual(t, o) && e.areBoxShadowStyleEqual(t, o) }, e.areTranslateRotateEqual = function (e, t) { if (e === t) return !0; var o = e.transformRotate, i = t.transformRotate; return o && i && o.x === i.x && o.y === i.y && o.z === i.z && o.unit === i.unit }, e.areTranslateTransformEqual = function (e, t) { if (e === t) return !0; var o = e.transformTranslate, i = t.transformTranslate; return o && i && o.x === i.x && o.y === i.y && o.unit === i.unit }, e.areBoxShadowStyleEqual = function (e, t) { if (e === t) return !0; var o = e.boxShadow, i = t.boxShadow; return o && i && o.hShadow === i.hShadow && o.vShadow === i.vShadow && o.blur === i.blur && o.spread === i.spread && o.color === i.color && o.unit === i.unit && o.inset === i.inset }, e.convertToJQueryAnimateStyle = function (t) { var o = {}; if ("undefined" != typeof t.top && (o.top = e.convertLayoutUnit(t.top)), "undefined" != typeof t.left && (o.left = e.convertLayoutUnit(t.left)), "undefined" != typeof t.right && (o.right = e.convertLayoutUnit(t.right)), "undefined" != typeof t.bottom && (o.bottom = e.convertLayoutUnit(t.bottom)), "undefined" != typeof t.height && (o.height = e.convertUnit(t.height)), "undefined" != typeof t.width && (o.width = e.convertUnit(t.width)), "undefined" != typeof t.marginTop && (o.marginTop = e.convertUnit(t.marginTop)), "undefined" != typeof t.marginLeft && (o.marginLeft = e.convertUnit(t.marginLeft)), "undefined" != typeof t.fontSize && (o.fontSize = e.convertUnit(t.fontSize)), "undefined" != typeof t.backgroundColor && (o.backgroundColor = t.backgroundColor), "undefined" != typeof t.opacity && (o.opacity = t.opacity), "undefined" != typeof t.color && (o.color = t.color), "undefined" != typeof t.display && (o.display = e.stringifyDisplayValue(t.display)), "undefined" != typeof t.transformRotate) { var i = t.transformRotate; o.rotateX = i.x || 0, o.rotateY = i.y || 0, o.rotateZ = i.z || 0 } if ("undefined" != typeof t.transformTranslate) { var r = t.transformTranslate; o.translateX = (r.x || 0) + (r.x ? r.unit : ""), o.translateY = (r.y || 0) + (r.y ? r.unit : ""), o.translateZ = (r.z || 0) + (r.z ? r.unit : "") } return o }, e.prototype.stringify = function (t) { return e.stringifyLayoutUnit(t.top, "top") + e.stringifyLayoutUnit(t.left, "left") + e.stringifyLayoutUnit(t.right, "right") + e.stringifyLayoutUnit(t.bottom, "bottom") + e.stringifyUnit(t.height, "height") + e.stringifyUnit(t.width, "width") + e.stringifyUnit(t.marginTop, "margin-top") + e.stringifyUnit(t.marginLeft, "margin-left") + e.stringifyUnit(t.fontSize, "font-size") + e.stringifyProp(t.position, "position") + e.stringifyProp(t.overflow, "overflow") + e.stringifyProp(e.stringifyDisplayValue(t.display), "display") + e.stringifyProp(t.verticalAlign, "vertical-align") + e.stringifyProp(t.backgroundColor, "background-color") + e.stringifyProp(t.backgroundImage, "background-image") + e.stringifyProp(t.opacity, "opacity") + e.stringifyProp(t.color, "color") + e.stringifyProp(t.whiteSpace, "white-space") + e.stringifyProp(t.tableLayout, "table-layout") + e.stringifyProp(t.textAlign, "text-align") + e.stringifyProp(t.textOverflow, "text-overflow") + e.stringifyProp(e.stringifyBoxShadow(t.boxShadow), "box-shadow") + e.stringifyProp(e.stringifyTranslate(t.transformTranslate), "transform", !0) + e.stringifyProp(e.stringifyRotate(t.transformRotate), "transform", !0) }, e.stringifyTranslate = function (e) { if ("undefined" == typeof e || null === e) return null; var t = e.unit; return "translateX(" + (e.x || 0) + (e.x ? t : "") + ") translateY(" + (e.y || 0) + (e.y ? t : "") + ")" }, e.stringifyRotate = function (e) { return "undefined" == typeof e || null === e ? null : "rotateX(" + (e.x || 0) + "deg) rotateY(" + (e.y || 0) + "deg) rotateZ(" + (e.z || 0) + "deg)" }, e.stringifyBoxShadow = function (e) { if ("undefined" == typeof e || null === e) return null; var t = e.unit ? e.unit + " " : "px "; return e.hShadow + t + (e.vShadow + t) + (e.blur ? e.blur + t : "") + (e.spread ? e.spread + t : "") + (e.color ? e.color + " " : "") + (e.inset ? "inset" : "") }, e.stringifyDisplayValue = function (e) { switch (e) { case r.inline: return "inline"; case r.block: return "block"; case r.flex: return "flex"; case r.inlineBlock: return "inline-block"; case r.inlineFlex: return "inline-flex"; case r.inlineTable: return "inline-table"; case r.listItem: return "list-item"; case r.runIn: return "run-in"; case r.table: return "table"; case r.tableCaption: return "table-caption"; case r.tableColumnGroup: return "table-column-group"; case r.tableHeaderGroup: return "table-header-group"; case r.tableFooterGroup: return "table-footer-group"; case r.tableRowGroup: return "table-row-group"; case r.tableCell: return "table-cell"; case r.tableColumn: return "table-column"; case r.tableRow: return "table-row"; case r.none: return "none"; case r.initial: return "initial"; default: return "inherit" } }, e.stringifyProp = function (t, o, i) { return "undefined" == typeof t || null === t ? "" : (e.isWebkit && i && (o = "-webkit-" + o), o + ":" + t + ";") }, e.stringifyUnit = function (t, o) { return "undefined" == typeof t || null === t ? "" : o + ":" + e.convertUnit(t) + ";" }, e.stringifyLayoutUnit = function (t, o) { return "undefined" == typeof t || null === t ? "" : o + ":" + e.convertLayoutUnit(t) + ";" }, e.convertUnit = function (e) { return e + "px" }, e.convertLayoutUnit = function (e) { var t = e.value.toString(), i = ""; switch (e.unit) { case o.percentage: i = "%"; break; case o.inch: i = "in"; break; case o.centimeter: i = "cm"; break; case o.millimeter: i = "mm"; break; case o.em: i = "em"; break; case o.ex: i = "ex"; break; case o.point: i = "pt"; break; case o.pica: i = "pc"; break; default: i = "px" }return t += i }, e.prototype.getDeviceViewport = function () { return { width: window.outerWidth, height: 0 } }, e })(); e.styleService = new c })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, o, r) { return new i(e, t, o, r) } e.createSvgProvider = t; var o; !(function (e) { e.container = "svgProviderContainer" })(o = e.svgProviderClassName || (e.svgProviderClassName = {})); var i = (function () { function e(e, t, i, r) { this.$http = e, this.http = t, this.promiseFactory = i, this.cssGeneration = r; var n = $("#" + o.container); 0 === n.length ? (this.svgContainer = $("<div id='" + o.container + '\' style="display: none;"></div>'), $("body").append(this.svgContainer)) : this.svgContainer = n } return e.prototype.loadSheet = function (e) { var t = this, o = this.promiseFactory.defer(), i = this.getSheetId(e); if (this.svgContainer.find("#" + i).length) o.resolve(void 0), this.addSVGHighContrastRules(); else { var r = $('<div id="' + i + '"></div>'); this.svgContainer.append(r); var n = this.getSVGResourceUri(e); this.$http.get(n).then((function (e) { e && e.data && r.append(e.data), o.resolve(i), t.addSVGHighContrastRules() }), (function (e) { r.remove(), o.reject(e) })) } return o.promise }, e.prototype.getSheetId = function (e) { return "svgProvider-" + e }, e.prototype.getSVGResourceUri = function (e) { return this.http.getAbsoluteUri("/images/" + e + ".svg") }, e.prototype.addSVGHighContrastRules = function () { this.cssGeneration.addRule(".fwns", "{fill: @foregroundColor !important; opacity: 1 !important; stroke: none !important; }"), this.cssGeneration.addRule(".fwns1", "{fill: @backgroundColor !important; opacity: 1 !important; stroke: none !important; }"), this.cssGeneration.addRule(".nfwns", "{fill: none !important; stroke: none !important; }") }, e })(); e.SvgProvider = i })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t) { return null == e ? !t : "string" == typeof e && r.isFullHexString(e) } function i(e, t) { void 0 === t && (t = []); var i = ["background", "foreground", "accent", "tableAccent", "foreground", "foregroundLight", "foregroundDark", "foregroundNeutralLight", "foregroundNeutralDark", "foregroundNeutralSecondary", "foregroundNeutralSecondaryAlt", "foregroundNeutralSecondaryAlt2", "foregroundNeutralTertiary", "foregroundNeutralTertiaryAlt", "foregroundSelected", "foregroundButton", "background", "backgroundLight", "backgroundNeutral", "backgroundDark", "hyperlink", "visitedHyperlink", "shapeStroke", "disabledText", "mapPushpin", "good", "neutral", "bad", "maximum", "center", "minimum", "null"], r = ["title", "label", "callout", "header", "largeTitle", "dataTitle", "boldLabel", "largeLabel", "largeLightLabel", "lightLabel", "semiboldLabel", "smallLabel", "smallLightLabel", "smallDataLabel"], s = ["name", "dataColors", "textClasses", "visualStyles", "isHighContrast", "icons"].concat(i, r, t); try { var c = a.tryParseJSON(e); if (_.isObject(c) && !_.isArray(c)) { var l = c.name; if (!l || !_.isString(l)) throw new Error("Theme name missing"); var d = c.dataColors; if (null != d && (!_.isArray(d) || _.some(d, (function (e) { return !o(e, !0) })))) throw new Error("Invalid theme data colors"); for (var u = 0, p = i; u < p.length; u++) { var h = p[u]; if (!o(c[h], !1)) throw new Error("Invalid theme data color") } for (var h in c) if (-1 === s.indexOf(h)) throw new Error("Invalid theme field: " + h); var m = c.textClasses; if (!_.isEmpty(m)) for (var h in m) if (-1 === r.indexOf(h)) throw new Error("Invalid theme text class: " + h); if (!_.isEmpty(c.dataColors)) { var f = n.getDefaultColors(); c.dataColors.length < f.length && (c.dataColors = c.dataColors.concat(f.slice(c.dataColors.length).map((function (e) { return e.value })))) } return c } } catch (e) { } } var r = jsCommon.Color, n = e.visuals.DefaultColorManager, a = jsCommon.JsonExtensions; t.validateCustomThemeColor = o, t.parseCustomVisualTheme = i })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createTimeoutService = t; var o = (function () { function e(e) { this.promiseFactory = e, this.queueDictionaryForBigDelays = {}, this.queueDictionaryForSmallDelays = {} } return e.prototype.setTimeout = function (e, t) { void 0 === e && (e = 0), void 0 === t && (t = !1); var o = this.promiseFactory.defer(t), i = 50, r = this.queueDictionaryForBigDelays; e <= 100 && (i = 5, r = this.queueDictionaryForSmallDelays); var n = e ? Math.ceil((Date.now() + e) / i) : 0, a = r[n]; return a || (a = r[n] = [], window.setTimeout((function () { delete r[n], _.forEach(a, (function (e) { return e.resolve(null) })) }), e)), a.push(o), o }, e })(); e.TimeoutService = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o) { return new u(e, t, o) } var i = jsCommon.CssConstants.createClassAndSelector, r = e.common.directives.TooltipAnchorElementType, n = e.visuals.TooltipCommon, a = t.models.TooltipTheme, s = jsCommon.DOMConstants, c = i("themeableElement"); t.createTooltipService = o; var l; !(function (e) { e[e.arrowTopLeft = 0] = "arrowTopLeft", e[e.arrowTopMiddle = 1] = "arrowTopMiddle", e[e.arrowTopRight = 2] = "arrowTopRight", e[e.arrowBottomLeft = 3] = "arrowBottomLeft", e[e.arrowBottomRight = 4] = "arrowBottomRight" })(l = t.ArrowPosition || (t.ArrowPosition = {})); var d; !(function (e) { e[e.top = 0] = "top", e[e.bottom = 1] = "bottom" })(d = t.ArrowVerticalPosition || (t.ArrowVerticalPosition = {})); var u = (function () { function e(e, t, o) { this.rtl = e, this.windowMetrics = t, this.localizationService = o, this.arrowPositionClassSet = this.getArrowPositionClassSet() } return e.prototype.showTooltip = function (t, o, i) { var r = this, n = this.createTooltipOptions(t, o, i); if (n && n.anchorElement && (n.delay = n.delay || e.defaultDisplayDelay, n.arrowPosition = void 0 !== n.arrowPosition ? n.arrowPosition : l.arrowBottomRight, !this.isTooltipVisible())) { if (n.showTooltipEvent) { var a = n.showTooltipEvent.originalEvent || n.showTooltipEvent; if (this.showTooltipTimeoutId && (this.previousMouseX === a.pageX || this.previousMouseY === a.pageY)) return this.previousMouseX = a.pageX, void (this.previousMouseY = a.pageY); this.previousMouseX = a.pageX, this.previousMouseY = a.pageY } this.showTooltipTimeoutId && window.clearTimeout(this.showTooltipTimeoutId), this.showTooltipTimeoutId = window.setTimeout((function () { r.tooltipElement || (r.tooltipElement = $(e.htmlTemplate).addClass(c.class), r.tooltipTitleElement = r.tooltipElement.find(".title"), r.tooltipDescriptionElement = r.tooltipElement.find(".description")), r.customClass = n.customClass, r.tooltipTitleElement.text(n.title), r.tooltipDescriptionElement.text(n.description); var t = r.getElementOffset(n.anchorElement, n.arrowPosition); null != t.top && t.top < e.minimalTopOffest && (n.arrowPosition = r.flipTooltipBelow(n.arrowPosition)), r.tooltipElement.addClass(l[n.arrowPosition]).addClass(n.customClass).appendTo("body"), r.updateTooltipPosition(n.anchorElement, n.arrowPosition), r.tooltipElement.addClass(e.tooltipActiveClass), r.showTooltipTimeoutId = null }), n.delay) } }, e.prototype.hideTooltip = function (t) { t && (t.preventDefault(), t.stopPropagation()), this.showTooltipTimeoutId && (window.clearTimeout(this.showTooltipTimeoutId), this.showTooltipTimeoutId = null), this.tooltipElement && (this.tooltipElement.removeClass(e.tooltipActiveClass).removeClass(this.arrowPositionClassSet).removeClass(this.customClass), this.tooltipTitleElement.empty(), this.tooltipDescriptionElement.empty(), this.tooltipElement.detach()) }, e.prototype.createTooltipOptions = function (o, i, n) { if (!o.tooltipDisable && (o.tooltipShowOnFocus || i.type !== s.focusInEventName)) { var c, l = o.tooltipLocalizeTitle; _.isEmpty(l) || (c = this.localizationService.get(l)); var d, u = o.tooltipLocalizeDescription; _.isEmpty(u) || (d = this.localizationService.get(u)); var p = c || o.tooltipTitle, h = d || o.tooltipDescription; if (null != p || null != h) { var m, f = o.tooltipAnchorElementSelector, g = o.tooltipAnchorElementType; if (f) switch (g) { case r.Sibling: m = n.siblings(f); break; case r.Ancestor: m = n.closest(f); break; case r.Descendant: m = n.find(f); break; default: m = $(f) }m && 0 !== m.length || (m = n); var v = o.tooltipArrowPosition; if (null == v && null != o.tooltipArrowVerticalPosition) { var y = m.offset(); v = t.TooltipService.getBestFitArrowPosition(y, o.tooltipArrowVerticalPosition, e.flipTooltipVerticallyMarginPx) } var b = o.tooltipDelay; null == b && o.tooltipShowOnFocus && (b = t.TooltipService.defaultFocusDisplayDelay); var w = o.tooltipTheme || a.Light, S = t.models.TooltipTheme[w].toLowerCase(); return o.isTooltipForModalDialog && (S += " modal-tooltip"), { anchorElement: m, showTooltipEvent: i, title: p, description: h, delay: b, arrowPosition: v, customClass: S } } } }, e.prototype.isTooltipVisible = function () { return this.tooltipElement && this.tooltipElement.hasClass(e.tooltipActiveClass) && this.tooltipElement.is(":visible") }, e.prototype.updateTooltipPosition = function (e, t) { var o = this.getElementOffset(e, t); this.tooltipElement.css({ left: this.rtl && this.rtl.isRtlLayout ? null : o.left, right: this.rtl && this.rtl.isRtlLayout ? o.left : null, top: o.top }) }, e.prototype.getArrowPositionClassSet = function () { var e, t = ""; for (e in l) isNaN(e) && (t = t + " " + e); return t }, e.prototype.getElementOffset = function (t, o) { var i = this.tooltipElement.outerWidth(), r = this.tooltipElement.outerHeight(), n = t.width(), a = t.height(), s = t.offset(), c = e.arrowOffset; switch (this.rtl && this.rtl.isRtlLayout && (s.left = this.windowMetrics.windowWidth - (s.left + n)), o) { case l.arrowTopLeft: return { left: s.left + n / 2 - c.x, top: s.top + a + c.y }; case l.arrowTopMiddle: return { left: s.left + (n - i) / 2, top: s.top + a + c.y }; case l.arrowTopRight: return { left: s.left + n / 2 - i + c.x, top: s.top + a + c.y }; case l.arrowBottomLeft: return { left: s.left + n / 2 - c.x, top: s.top - r - c.y }; case l.arrowBottomRight: return { left: s.left + n / 2 - i + c.x, top: s.top - r - c.y } } }, e.prototype.flipTooltipBelow = function (e) { switch (e) { case l.arrowBottomLeft: return l.arrowTopLeft; case l.arrowBottomRight: return l.arrowTopRight }return e }, e.getBestFitArrowPosition = function (e, t, o) { var i; i = "height" in e ? e : "x" in e ? { top: e.y, left: e.x, height: 0, width: 0 } : __assign({}, e, { height: 0, width: 0 }), null != o && i.top <= o && (t = d.top); var r = n.getClickedScreenArea(i, { width: window.innerWidth, height: window.innerHeight }); return 0 === r || 3 === r ? t === d.top ? l.arrowTopLeft : l.arrowBottomLeft : t === d.top ? l.arrowTopRight : l.arrowBottomRight }, e.defaultDisplayDelay = 1e3, e.defaultFocusDisplayDelay = 500, e.flipTooltipVerticallyMarginPx = 70, e.tooltipActiveClass = "active", e.htmlTemplate = "<div class='tooltip'><div class='title'></div><div class='description'></div></div>", e.arrowOffset = { x: 20, y: 12 }, e.minimalTopOffest = 40, e })(); t.TooltipService = u })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new o(e, t) } e.createUpload = t; var o = (function () { function t(e, t) { this.upload = function (t) { var o = e.get("$upload"); return o.upload(t) }, this.worker = t } return t.prototype.post = function (t, o, i) { var r = e.HttpRequestConfig.create("POST", t, i, null); return r.file = o, this.worker.request(r, this.upload) }, t.prototype.put = function (t, o, i) { var r = e.HttpRequestConfig.create("PUT", t, i, null); return r.file = o, this.worker.request(r, this.upload) }, t })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i = jsCommon.BrowserUtils, r = e.common.constants; o.printMedia = "print"; var n = (function () { function e() { } return e.getPrintTargetViewPort = function (e) { var o = { width: t.constants.defaultPortraitPrintWidth, height: t.constants.defaultPortraitPrintHeight }; if (e.width() > e.height() && (o.width = t.constants.defaultLandscapePrintWidth, o.height = t.constants.defaultLandscapePrintHeight), i.isChrome()) { var r = e.parent(); o.width = r.width(), o.height = r.height() } return o }, e.calculateScaleFactor = function (e, t, o) { var i = t.width / e.width, r = t.height / e.height; return o ? Math.max(i, r) : Math.min(i, r) }, e.prototype.getStyleString = function (e) { for (var t = Object.keys(e), o = "", i = 0, r = t.length; i < r; i++) { var n = t[i]; o = o + n + ":" + e[n] + ";" } return o }, e.prototype.onInit = function (e, t, o, i, n, a, s) { var c = this; s || (this.domLayoutChangedDeregister = e.$on(r.enterPrintModeEvent, (function (e) { e.stopPropagation(), c.insertPrintStylingInDOM(t, o, i, n, a) })), this.onExitPrintModeDeregister = e.$on(r.exitPrintModeEvent, (function (e) { e.stopPropagation(), c.removePrintStylingFromDOM(t) }))) }, e.prototype.onDestroy = function (e, t) { t || (this.domLayoutChangedDeregister && this.domLayoutChangedDeregister(), this.onExitPrintModeDeregister && this.onExitPrintModeDeregister()), this.removePrintStylingFromDOM(e, !0) }, e.prototype.insertPrintStylingInDOM = function (e, t, i, r, n) { if (null != i) { if (n.featureSwitches.printingEnabled === !1) { if (!this.printDisabledElement) { var a = r.get("PrintingIsDisabledForThisTenantMessage"), s = $("<div>").addClass("errorTitle").text(a), c = $("<div>").attr("id", "printDisabledOverlay").append(s); this.printDisabledElement = c, $("body").append(this.printDisabledElement) } return void e.hide() } this.printStyleElement || (this.printStyleElement = $("<style></style>").attr("type", "text/css").attr("media", o.printMedia), $("body").append(this.printStyleElement)); var l = t(e), d = this.getStyleString(l); this.printStyleElement.get(0).sheet.insertRule("." + i + " { " + d + " }") } }, e.prototype.removePrintStylingFromDOM = function (e, t) { if (void 0 === t && (t = !1), this.printDisabledElement && (this.printDisabledElement.remove(), this.printDisabledElement = void 0, e.show()), this.printStyleElement) if (t) this.printStyleElement.remove(), this.printStyleElement = void 0; else for (var o = this.printStyleElement.get(0).sheet, i = o.cssRules.length; i--;)o.removeRule(i) }, e })(); o.ContainerPrinterHelper = n })(o = t.helpers || (t.helpers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = e.common.helpers.ContainerPrinterHelper, i = (function () { function e(e, t, i) { var r = this; this.rootScope = e, this.featureSwitchService = t, this.localizationService = i, this.restrict = "A", this.link = function (e, t, o) { var i = e.$eval(o.calculatePrintStyles), n = e.$eval(o.disablePrint); r.helper.onInit(r.rootScope, t, i, o.printContainerSelector, r.localizationService, r.featureSwitchService, n); var a = e.$on("$destroy", (function () { r.helper.onDestroy(t, !!n), a() })) }, this.helper = new o } return e })(); t.ContainerPrinter = i })(o = t.directives || (t.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.restrict = "E", this.templateUrl = "views/customModalDialog.html", this.replace = !0, this.scope = { message: "=" }, this.scope = e } return e })(); e.CustomModalDialog = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = jsCommon.FocusManagerFocusOnEventName, o = (function () { function e(e) { var t = this; this.$parse = e, this.restrict = "A", this.replace = !1, this.scope = !1, this.compileBase = function (e, o, i, r) { var n = t.$parse(r[e]); return function (e, t) { t.on(o, (function (t) { var o = function () { return n(e, { $event: t }) }; e.$eval(o), t.isDefaultPrevented() || e.$digest() })); var i = e.$on("$destroy", (function () { t.off(o), i() })) } } } return e })(); e.FastEvent = o; var i = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastClick", "click", e, o) }, t } return __extends(t, e), t })(o); e.FastClick = i; var r = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastMousedown", "mousedown", e, o) }, t } return __extends(t, e), t })(o); e.FastMousedown = r; var n = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastMouseup", "mouseup", e, o) }, t } return __extends(t, e), t })(o); e.FastMouseup = n; var a = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastKeydown", "keydown", e, o) }, t } return __extends(t, e), t })(o); e.FastKeydown = a; var s = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastKeyup", "keyup", e, o) }, t } return __extends(t, e), t })(o); e.FastKeyup = s; var c = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastMouseenter", "mouseenter", e, o) }, t } return __extends(t, e), t })(o); e.FastMouseenter = c; var l = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastTouchmove", "touchmove", e, o) }, t } return __extends(t, e), t })(o); e.FastTouchmove = l; var d = (function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.compile = function (e, o) { return t.compileBase("fastTouchend", "touchend", e, o) }, t } return __extends(t, e), t })(o); e.FastTouchend = d; var u = (function (e) { function o() { var o = null !== e && e.apply(this, arguments) || this; return o.compile = function (e, i) { return o.compileBase("fastFocus", t, e, i) }, o } return __extends(o, e), o })(o); e.FastFocus = u })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.asyncFeatureSwitchService = e, this.restrict = "A", this.priority = 599, this.terminal = !0, this.multiElement = !0, this.transclude = "element", this.link = function (e, o, i, r, n) { n((function (e, r) { t.asyncFeatureSwitchService.getFeatureSwitches().then((function (t) { t[i.featureSwitch] ? o.after(e) : (e.remove(), r && r.$destroy()) })) })) } } return e })(); e.FeatureSwitch = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.asyncFeatureSwitchService = e, this.restrict = "A", this.link = function (e, o, i) { t.asyncFeatureSwitchService.getFeatureSwitches().then((function (e) { for (var t = _.map(i.featureSwitchClass.split(","), (function (e) { return e.trim() })), r = 0, n = t; r < n.length; r++) { var a = n[r]; e[a] && o.addClass(a) } })) } } return e })(); e.FeatureSwitchClass = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.asyncFeatureSwitchService = e, this.restrict = "A", this.priority = 599, this.terminal = !0, this.multiElement = !0, this.transclude = "element", this.link = function (e, o, i, r, n) { n((function (e, r) { t.asyncFeatureSwitchService.getFeatureSwitches().then((function (t) { t[i.featureSwitchNot] ? (e.remove(), r && r.$destroy()) : o.after(e) })) })) } } return e })(); e.FeatureSwitchNot = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.restrict = "E", this.templateUrl = "views/optionsModalDialog.html", this.replace = !0, this.scope = { message: "=", selected: 0, options: [] }, this.scope = e } return e })(); e.OptionsModalDialog = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.link = function (e, t, o) { var i = function (e) { t.hasClass("ng-pristine") && t.select() }; t.on(jsCommon.DOMConstants.focusEventName, null, i), e.$on("$destroy", (function () { t.off(jsCommon.DOMConstants.focusEventName, i) })) } } return e })(); e.SelectPristineOnFocus = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return { isRtlLayout: "True" === e.isCurrentContextRtl } } e.createRtl = t })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } e.createWindowMetrics = t; var o = (function () { function e(e) { this.windowService = e } return Object.defineProperty(e.prototype, "windowWidth", { get: function () { var e = this.windowService.innerWidth; return e !== this._windowWidth ? this._windowWidth = e : this._windowWidth }, enumerable: !0, configurable: !0 }), e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = window, o = (function () { function o() { } return o.getClusterIndexForClusterUri = function () { for (var o = 0; o < e.constants.clusterBackendUri.length; o++)for (var i = e.constants.clusterBackendUri[o], r = 0, n = i.hostNameMatch; r < n.length; r++) { var a = n[r]; if (t.clusterUri.toLocaleLowerCase().indexOf(a) >= 0) return o } }, o })(); e.ClusterLocationHelper = o })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function o(t) {
            var o = [{ name: "ApplyStyle", blockType: 1, consumerHostFlags: 9611 }, { name: "AutoSelect", dependencies: ["$timeout"], blockType: 1, consumerHostFlags: 1032 }, { name: "ClearOnEscape", blockType: 1, consumerHostFlags: 9995 }, { name: "ClickTelemetry", dependencies: ["telemetryService"], blockType: 1, consumerHostFlags: 1037 }, { name: "CollapsibleSection", blockType: 1, consumerHostFlags: 1037 }, { name: "ColorPicker", blockType: 2, consumerHostFlags: 9743 }, { name: "IconPicker", blockType: 2, consumerHostFlags: 9743 }, {
                name: "IconSetPicker", blockType: 2,
                consumerHostFlags: 9743
            }, { name: "ColorTile", blockType: 1, consumerHostFlags: 9743 }, { name: "ConfirmationModalDialog", blockType: 1, consumerHostFlags: 1160 }, { name: "ContainerPrinter", dependencies: ["$rootScope", "featureSwitchService", "localizationService"], blockType: 1, consumerHostFlags: 8267 }, { name: "CustomModalDialog", blockType: 1, consumerHostFlags: 9226 }, { name: "CustomClick", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "BindAriaLabelAndTooltip", blockType: 1, consumerHostFlags: 1677 }, { name: "BindTextAndTooltip", blockType: 1, consumerHostFlags: 1165 }, { name: "DialogConfirmContent", blockType: 1, consumerHostFlags: 9727 }, { name: "DialogFrame", dependencies: ["modalDialogService"], blockType: 2, consumerHostFlags: 16383 }, { name: "Drag", dependencies: ["$interval", "dragDataService"], blockType: 1, consumerHostFlags: 9739 }, { name: "DragScroll", dependencies: ["dragDataService"], blockType: 1, consumerHostFlags: 9739 }, { name: "Drop", dependencies: ["$parse", "$timeout", "timeoutService"], blockType: 1, consumerHostFlags: 9739 }, { name: "DropDownList", blockType: 2, consumerHostFlags: 9995 }, { name: "DropDownListItem", blockType: 2, consumerHostFlags: 9995 }, { name: "DropdownOverlay", dependencies: ["overlayService", "$parse"], blockType: 1, consumerHostFlags: 9995 }, { name: "DropdownOverlayInvoke", dependencies: ["overlayService"], blockType: 1, consumerHostFlags: 9483 }, { name: "DropdownMenu", blockType: 1, consumerHostFlags: 9499 }, { name: "DropdownMenuItems", blockType: 1, consumerHostFlags: 9727 }, { name: "EditableLabel", blockType: 2, consumerHostFlags: 9995 }, { name: "EditableListItem", blockType: 1, consumerHostFlags: 1032 }, { name: "EmailsList", blockType: 2, consumerHostFlags: 1032 }, { name: "ErrorDetailsInfo", blockType: 2, consumerHostFlags: 1032 }, { name: "Expando", blockType: 2, consumerHostFlags: 16383 }, { name: "FastClick", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastFocus", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastKeydown", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastKeyup", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastMousedown", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastMouseenter", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastMouseup", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastTouchmove", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FastTouchend", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FeatureNotSupportedDialog", dependencies: ["modalDialogService"], blockType: 2, consumerHostFlags: 16383 }, { name: "FeatureSwitch", dependencies: ["asyncFeatureSwitchService"], blockType: 1, consumerHostFlags: 16383 }, { name: "FeatureSwitchClass", dependencies: ["asyncFeatureSwitchService"], blockType: 1, consumerHostFlags: 16383 }, { name: "FeatureSwitchNot", dependencies: ["asyncFeatureSwitchService"], blockType: 1, consumerHostFlags: 16383 }, { name: "GradientBar", blockType: 1, consumerHostFlags: 16383 }, { name: "HostDialogContainer", blockType: 2, consumerHostFlags: 16383 }, { name: "HighlightString", dependencies: ["highlight"], blockType: 1, consumerHostFlags: 16383 }, { name: "IconSelector", blockType: 2, consumerHostFlags: 1032 }, { name: "InlineMessage", blockType: 1, consumerHostFlags: 1036 }, { name: "InlineNameValuePairs", blockType: 1, consumerHostFlags: 1036 }, { name: "Integer", blockType: 1, consumerHostFlags: 9611 }, { name: "InViewport", blockType: 1, consumerHostFlags: 9611 }, { name: "Localize", dependencies: ["localizationService"], blockType: 1, consumerHostFlags: 16383 }, { name: "LocalizeAttr", dependencies: ["localizationService"], blockType: 1, consumerHostFlags: 16383 }, { name: "LocalizeTooltip", dependencies: ["localizationService"], blockType: 1, consumerHostFlags: 16383 }, { name: "MakeACopyModalDialog", blockType: 1, consumerHostFlags: 1032 }, { name: "MakeACopyProgressModalDialog", blockType: 1, consumerHostFlags: 1032 }, { name: "MessageDialog", blockType: 2, consumerHostFlags: 9738 }, { name: "AboutVisualDialog", blockType: 2, consumerHostFlags: 778 }, { name: "ModalDialog", blockType: 1, consumerHostFlags: 9727 }, { name: "ModalOverlay", blockType: 1, consumerHostFlags: 4 }, { name: "NgBindAttr", blockType: 1, consumerHostFlags: 16383 }, { name: "NgOnSelect", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "NgRightClick", syncModule: "PowerBICommon/directives/ngRightClick", blockType: 1, consumerHostFlags: 16383, excludedConsumerHostFlags: 2 }, { name: "NgRepeatFinishEvent", dependencies: ["$timeout"], blockType: 1, consumerHostFlags: 16383 }, { name: "NgScrollbars", dependencies: ["$timeout"], blockType: 1, consumerHostFlags: 9995 }, { name: "NotificationBar", dependencies: ["notificationBar"], blockType: 1, consumerHostFlags: 9483 }, { name: "NumUpDown", dependencies: ["localizationService"], blockType: 1, consumerHostFlags: 16383 }, { name: "OnResize", dependencies: ["$parse", "moduleLoader"], blockType: 1, consumerHostFlags: 10123 }, { name: "OptionsModalDialog", blockType: 1, consumerHostFlags: 16383 }, { name: "PbiLazyLoadContents", dependencies: ["$compile", "pbiLazyLoad", "moduleLoader"], blockType: 1, consumerHostFlags: 16383 }, { name: "PbiTable", dependencies: ["$rootScope", "$compile", "$filter", "localizationService"], blockType: 1, consumerHostFlags: 1544 }, { name: "Pinchable", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 9483 }, { name: "PopupContainer", blockType: 1, consumerHostFlags: 9739 }, { name: "Resizable", blockType: 1, consumerHostFlags: 9611 }, { name: "SearchBox", blockType: 1, consumerHostFlags: 9995 }, { name: "Select", blockType: 1, consumerHostFlags: 16383 }, { name: "SelectMenu", dependencies: ["$timeout"], blockType: 1, consumerHostFlags: 16383 }, { name: "SelectPristineOnFocus", blockType: 1, consumerHostFlags: 1032 }, { name: "SelectTextOnClick", dependencies: ["$window"], blockType: 1, consumerHostFlags: 1032 }, { name: "ShareAccess", blockType: 2, consumerHostFlags: 1032 }, { name: "TextInput", blockType: 1, consumerHostFlags: 1096 }, { name: "GridLayout", blockType: 1, consumerHostFlags: 1256 }, { name: "GridLayoutItem", blockType: 1, consumerHostFlags: 1256 }, { name: "LazyIcon", blockType: 2, consumerHostFlags: 1256 }, { name: "Tooltip", blockType: 1, consumerHostFlags: 10123 }, { name: "TriggeredRecompile", blockType: 2, consumerHostFlags: 16383 }, { name: "LoadNotification", blockType: 1, consumerHostFlags: 9499 }, { name: "VResizable", blockType: 1, consumerHostFlags: 9611 }]; i(t, e.a11y.PbiA11yBaseBlockDefinitions, { directivesTarget: "powerbi.a11y", directivesMap: e.a11y.directives }), i(t, o, { directivesTarget: "powerbi.common.directives", directivesMap: e.common.directives, componentsTarget: "powerbi.common.components", componentsMap: e.common.components })
        } function i(e, t, o) { for (var i = 0, r = t; i < r.length; i++) { var a = r[i], s = a.consumerHostFlags; null == s && (s = 16383), null != a.excludedConsumerHostFlags && (s &= ~a.excludedConsumerHostFlags); (s & e) === e && n(a.name, a.blockType, a.factory, a.syncModule, o, a.dependencies) } } function r(e) { return _.includes(m[1], _.camelCase(e)) } function n(t, o, i, r, n, p) { var h = _.camelCase(t), f = m[o]; e.contract.checkValue(f, "Attempt to register unknown base block type"), _.includes(f, h) || (a(i, o) ? d(t, i, r, n.componentsTarget, n.componentsMap) : s(i, o) ? u(t, i, r, p, n.directivesTarget, n.directivesMap) : c(i, o) ? l(t, i, r, n.filtersTarget, n.filtersMap) : debug.assertNever(i), f.push(h)) } function a(e, t) { return 2 === t } function s(e, t) { return 1 === t } function c(e, t) { return 4 === t } function l(t, o, i, r, n) { var a; a = o ? o : i ? e.requireSync(i) : n[t], t = _.camelCase(t), angular.module(r).filter(t, a) } function d(t, o, i, r, n) { var a; a = o ? o : i ? e.requireSync(i) : n[t], t = _.camelCase(t), angular.module(r).component(t, a) } function u(t, o, i, r, n, a) { var s; o ? (s = o, r = s.ng) : i ? (s = e.requireSync(i), r = s.ng) : s = a[t], t = _.camelCase(t), r || (r = []), r.push((function () { for (var e = [], t = 0, o = arguments.length; t < o; t++)e.push(arguments[t]); return new (Function.prototype.bind.apply(s, [null].concat(e))) })), angular.module(n).directive(t, r) } function p(t, o, i, r) { void 0 === i && (i = !0); var n = e.build, a = ""; i && (a = h.getQueryStringValue("unmin") ? "" : ".min"); var s; switch (o) { case 0: s = "scripts"; break; case 1: s = "styles"; break; case 2: case 3: s = "externals"; break; default: debug.assertNever(o) }var c = [n]; return "True" === window.useCDN && (c = [window.cdnUrl + n]), r && c.push(r), c.concat([s, "" + t + a]).join("/") } var h = jsCommon.QueryStringUtil, m = { 1: [], 2: [], 4: [] }; t.registerPBICommonBuildingBlocksForHost = o, angular.module("powerbi.common", []), angular.module("powerbi.common.directives", []), angular.module("powerbi.common.components", []), angular.module("powerbi.common.controllers", []); var f = ["powerbi.common.directives", "powerbi.common.components", "powerbi.common.controllers", "stylelibrary", "oc.lazyLoad", "powerbi.a11y"]; angular.module("powerbi.common", f).config(["$compileProvider", function (e) { e.commentDirectivesEnabled(!1), e.cssClassDirectivesEnabled(!1), e.preAssignBindingsEnabled(!0) }]).config(["$qProvider", function (e) { e.errorOnUnhandledRejections(!1) }]).factory("promiseFactory", ["$q", "$exceptionHandler", function (o, i) { var r = t.createPromiseFactory(o); return e.Promise.init(r, i), r }]).factory("pbiTimeout", ["$rootScope", function (t) { return e.createPbiTimeout((function (e) { return t.$evalAsync(e) })) }]).factory("scopedProvider", ["$injector", function (e) { return t.createScopedProvider(e) }]).factory("scopedRootRegistrar", ["scopedProvider", function (e) { return t.createScopedRootRegistrar(e) }]).provider("lazy", (function () { var e = this; return this.factories = {}, this.$get = ["$injector", "moduleLoader", "promiseFactory", function (o, i, r) { return t.createLazyInjector(i, r, o, e.factories) }], this })).provider("lazySync", (function () { var e = this; return this.factories = {}, this.$get = ["$injector", "moduleLoader", function (o, i) { return t.createLazySyncInjector(o, e.factories) }], this })).config(["lazyProvider", function (e) { e.factories.cloudDiscovery = { source: { javascript: "PowerBICommon/services/cloudDiscovery" }, ng: ["userInfo", "promiseFactory", "httpService"], fn: function (e, t, o, i) { return e.create(t, o, i) } } }]).factory("legacyLicenseHelperService", ["telemetryService", "localizationService", "$window", "userInfo", "errorService", "httpService", "featureSwitchService", "tenantSettingService", function (e, o, i, r, n, a, s, c) { return t.createLicenseHelperService(e, o, i, r, n, a, s, c) }]).factory("lazyScopedFactories", ["scopedProvider", function (e) { var o = {}; return e.register("lazyScoped", { services: ["$injector", "moduleLoader", "promiseFactory"], scopedServices: ["$scope"], scopedProviderInstance: !0, fn: function (e, i, r, n, a) { return t.createScopedLazyProvider(i, e, a, n, r, o) } }), o }]).provider("mixins", (function () { var e = this; return this.factories = {}, this.$get = ["$injector", function (o) { return t.createMixinsProvider(o, e.factories) }], this })).factory("mixinScopedFactories", ["scopedProvider", function (e) { var o = {}; return e.register("mixinScoped", { services: ["$injector"], scopedServices: ["$scope"], scopedProviderInstance: !0, fn: function (e, i, r) { return t.createScopedMixinProvider(e, i, r, o) } }), o }]).factory("lazyScopedSyncFactories", ["scopedProvider", function (e) { var o = {}; return e.register("lazyScopedSync", { services: ["$injector"], scopedServices: ["$scope"], scopedProviderInstance: !0, fn: function (e, i, r) { return t.createScopedLazySyncProvider(e, r, i, o) } }), o }]).factory("rtl", (function () { return t.createRtl() })).provider("moduleLoader", (function () { var o = this; return this.config = t.createRequireConfig(), this.$get = ["promiseFactory", "telemetryService", "rtl", function (t, i, r) { return e.createModuleLoader(t, { log: function (t, o, r) { return i.logEvent(e.telemetry.ModuleLoad, t, o, r) }, error: function (t, o, r, n) { return i.logEvent(e.telemetry.ModuleLoadError, t, r, n, o.stack, o.message) } }, o.config, { rtl: r.isRtlLayout }) }], this })).factory("dragDataService", (function () { return t.createDragDataService() })).factory("hostTypeResolutionService", [function () { return new t.HostTypeResolutionService }]).factory("hostInvokerService", ["hostTypeResolutionService", "$window", "$http", function (e, o, i) { switch (e.getHostType()) { case t.HostType.PhantomJs: return new t.PhantomJsHostInvokerService; case t.HostType.Chromium: return new t.ChromiumHostInvokerService; default: return new t.VoidHostInvokerService } }]).factory("hostService", ["promiseFactory", "hostInvokerService", function (e, o) { return t.hostServiceSink = new t.HostService(e, o), t.hostServiceSink }]).factory("lastFocusedElementService", (function () { return t.createLastFocusedElementService() })).factory("highlight", (function () { return t.createHighlightService() })).factory("windowMetrics", ["$window", function (e) { return t.createWindowMetrics(e) }]).factory("overlayService", ["rtl", "$rootScope", "$window", "$timeout", "featureSwitchService", function (e, o, i, r, n) { return t.createOverlayService(o, i, r, n, null, e) }]).factory("dropdownMenuService", ["rtl", "windowMetrics", function (e, o) { return t.createDropdownMenuService(e, o) }]).factory("dropdown", ["$rootScope", "$templateCache", "$compile", "overlayService", "featureSwitchService", "$timeout", function (e, o, i, r, n, a) { return t.createDropdownService(e, o, i, r, n, a) }]).factory("delayedQueryResultHandler", (function () { return t.createDelayedQueryResultHandler() })).factory("gridLayout", (function () { return t.createGridLayoutService() })).factory("tooltipService", ["rtl", "windowMetrics", "localizationService", function (e, o, i) { return t.createTooltipService(e, o, i) }]).factory("powerBIDesktopLauncher", [function () { return _.noop }]).factory("platformCapabilities", (function () { return { supportsPointerCapture: !0, supportsFrameBasedResize: !0, supportsMinervaDialog: !0, supportsMouseover: !0 } })).factory("tabularDataCache", (function () { return e.data.tabular.createTabularDataCache() })).factory("contentProviderConfigHandler", ["$window", function (e) { return t.createContentProviderConfigHandlerService(e) }]).factory("dashboardInvitationHttp", ["httpService", function (t) { return e.createDashboardInvitationHttpService(t) }]).factory("dashboardInvitation", ["$location", function (t) { return e.common.services.createDashboardInvitationService(t) }]).provider("applicationOptions", (function () { var e = this; return this.applicationOptions = t.createApplicationOptions(), this.$get = ["telemetryService", function (t) { return t.setLogToConsole(e.applicationOptions.logToConsole), t.setLogAllEvents(e.applicationOptions.logAllTelemetryEvents), e.applicationOptions }], this })).provider("emailSubscriptionService", (function () { var e = !0; return { $get: function () { return { supportsEmailSubscription: e } }, setEmailSubscription: function (t) { e = t } } })).provider("viewRelatedContentService", (function () { var e = !1; return { $get: function () { return { disableViewRelated: e } }, setDisableViewRelated: function (t) { e = t } } })).factory("timeoutService", ["promiseFactory", function (t) { return e.common.createTimeoutService(t) }]).provider("dataReaderProvider", (function () { var o = this; return o.$get = ["promiseFactory", "featureSwitchService", "delayedQueryResultHandler", "httpService", "impersonationService", "localizationService", "localeProviderService", "telemetryService", "tabularDataCache", "timeoutService", function (i, r, n, a, s, c, l, d, u, p) { var h = { bingSocialDataReader: { name: "bingSocialDataReader", reader: function (t) { return new e.data.bingSocial.BingSocialDataReader(t, a) } }, tabular: { name: "tabular", reader: function (t) { return new e.data.tabular.TabularDataReader(t, u) }, queryGenerator: function () { return e.data.tabular.createQueryGenerator() }, schemaReader: function (t) { return e.data.dsr.createConceptualSchemaReader(i, d, l, o.conceptualSchemaCommunication || e.data.dsr.createConceptualSchemaProxyHttpCommunication(a, i, "explore/conceptualschema"), e.data.dsr.ConceptualSchemaFactory.createLocOptions(c)) } } }; e.data.dsr.registerDsrPlugin(h, { promiseFactory: i, telemetryService: d, localeProvider: l, reader: { timeoutService: p, communication: { httpService: a, uri: "explore/querydata", impersinationStateProvider: s }, delayedQueryResultHandler: n, featureSwitches: function () { return t.utils.getDsrReaderSwitches(r.featureSwitches) } }, schemaReader: { communication: { httpService: a, uri: "explore/conceptualschema" }, localizationOptions: e.data.dsr.ConceptualSchemaFactory.createLocOptions(c) } }); var m = {}; return o.registerExplorationDataReaderExtension && o.registerExplorationDataReaderExtension(m, i, !1), e.data.createDataReaderProvider(e.data.createDataReaderFactory(h, m), { promiseFactory: function () { return i } }) }], o })).provider("pbiLazyLoad", t.services.PbiLazyLoadProvider).factory("dataProxy", ["promiseFactory", "dataReaderProvider", "telemetryService", function (t, o, i) { return e.data.createDataProxy(t, o, i) }]).factory("auditingHttp", ["httpService", function (e) { return t.createAuditingHttpService(e) }]).factory("auditing", ["telemetryService", "featureSwitchService", "auditingHttp", function (e, o, i) { return t.createAuditingService(e, o, i) }]).factory("dataClassificationService", ["promiseFactory", function (e) { return t.createDataClassificationService(e) }]).factory("singleExecutableDataProxyFactory", ["dataProxy", "promiseFactory", "timeoutService", function (t, o, i) { return { create: function () { return e.data.createSingleExecutableDataProxy(t, o, i) } } }]).factory("federatedSchemaValidator", (function () { return e.data.createDefaultFederatedSchemaValidator() })).factory("conceptualSchemaProxy", ["promiseFactory", "dataReaderProvider", "featureSwitchService", "federatedSchemaValidator", function (t, o, i, r) { return e.data.createConceptualSchemaProxy(t, o, i, r) }]).provider("telemetryService", (function () { var e = this; return e.$get = ["modernTelemetryService", function (e) { var o, i = window; try { if (i !== i.parent) for (var r = 0; i && (null != i.opener || i !== i.parent) && null == o && r < 5;)i = i.opener || i.parent, o = i.powerbi && i.powerbi.common && i.parentTelemetryService, r++; if (o) return o } catch (e) { } return o = e, jsCommon.Trace.resetListeners(), jsCommon.Trace.addListener(o), t.parentTelemetryService = o, o }], e })).factory("settingsService", (function () { return t.createSettingsService() })).factory("externalUrlService", (function () { return t.createExternalUrlService() })).factory("geocoder", ["externalUrlService", "asyncFeatureSwitchService", "telemetryService", "diagnosticSettingsService", function (e, o, i, r) { return t.createGeocoder(e, o, i, r) }]).factory("mapControlFactory", ["promiseFactory", "moduleLoader", "externalUrlService", function (e, o, i) { return t.createMapControlFactory(e, o, i) }]).factory("datasetsService", ["httpService", function (e) { return t.createDatasetsService(e) }]).factory("svgProvider", ["$http", "httpService", "promiseFactory", "highContrastCssGenerationService", function (t, o, i, r) { return e.common.createSvgProvider(t, o, i, r) }]).factory("activeFolderIdLegacy", ["promiseFactory", function (e) { return t.createActiveFolderIdService(e) }]).factory("localFileService", ["$rootScope", "$compile", function (e, o) { return t.createLocalFileService(e, o) }]).service("notificationBar", ["$rootScope", t.NotificationBarService]).factory("notificationToast", ["telemetryService", function (e) { return t.createNotificationToastService(e) }]).factory("modalDialogService", ["$compile", "pbiLazyLoad", "promiseFactory", "$templateCache", "$timeout", "$rootScope", "telemetryService", "moduleLoader", function (e, o, i, r, n, a, s, c) { return t.createModalDialogService(e, o, i, r, n, a, s, c) }]).factory("checkUnsavedService", [function () { return new t.CheckUnsavedService }]).factory("localStorage", [function () { return new t.LocalStorageService }]).factory("networkAvailability", [function () { return t.createNetworkAvailabilityService() }]).factory("embedModeService", [function () { return new t.EmbedModeService }]).factory("fileSaver", ["telemetryService", "moduleLoader", function (t, o) { return e.createFileSaverService(t, o) }]).factory("analyzeInExcel", ["appSettings", "impersonationService", "localizationService", "localStorage", "telemetryService", "modalDialogService", "$window", "$rootScope", "lazy", "promiseFactory", "featureSwitchService", "fileSaver", "lastFocusedElementService", "httpService", "licenseEnforcementService", function (e, o, i, r, n, a, s, c, l, d, u, p, h, m, f) { return t.createAnalyzeInExcelService(e, o, i, r, n, a, s, c, l, d, u, p, h, m, f) }]).factory("domainHelperService", ["promiseFactory", "telemetryService", "httpService", function (e, o, i) { return t.createDomainHelperService(e, o, i) }]).factory("aggrOps", ["featureSwitchService", function (t) { return e.data.createSQAggregationOperations() }]).factory("downloadReport", ["telemetryService", "notificationToast", "errorService", "localizationService", "fileSaver", "httpService", function (e, o, i, r, n, a) { return t.createDownloadReportService(a, e, o, i, r, n) }]).factory("upload", ["$injector", "httpRequestWorker", function (e, o) { return t.createUpload(e, o) }]).factory("fontService", ["promiseFactory", function (e) { return t.createFontService(e) }]).factory("diagnosticSettingsService", [function () { return t.createDiagnosticSettingsService() }]).factory("optionsDialogBuilder", ["modalDialogService", "$rootScope", "$timeout", function (e, o, i) { return t.createOptionsDialogBuilder(e, o, i) }]).factory("printService", ["$rootScope", function (t) { return e.common.createPrintService(t) }]).factory("screenReaderService", ["localizationService", "ngZone", function (t, o) { return e.common.createScreenReaderService(t, o) }]).run(["ngZone", function (e) { jsCommon.Zone.initialize(e) }]).run(["pbiTimeout", function (t) { e.PbiPromise.init(t, !1) }]).run(["activeFolderId", function (e) { window.powerbi.common.activeFolderIdService = e }]), t.registerBuildingBlocksForHost = i, t.containsDirective = r, t.getFilePath = p
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})), angular.module("powerbi.common").run(["$templateCache", function (e) {
    e.put("components/colorPicker/colorPicker.html", '<div class="colorpicker popup-container-toggle" ng-class="{ \'open\': $ctrl.isPickerOpen }" ng-if="!$ctrl.isIconHidden" accessible-click="$ctrl.togglePickerState()" role="button" tabindex="{{$ctrl.isDisabled ? -1 : 0}}" aria-labelledby="{{$ctrl.labelId}}"><div class="colorpicker-anchor"><color-tile class="selected-color-box" color="$ctrl.color && $ctrl.color.value || $ctrl.defaultColor && $ctrl.defaultColor.value"><svg-use-symbol sheet="visualizationPaneIcons" ng-if="!$ctrl.color && !$ctrl.defaultColor" symbol-id="nofill"></svg-use-symbol></color-tile><pbi-icon class="colorpicker-icon" name="flickup" size="micro"></pbi-icon></div></div><popup-container ng-if="$ctrl.isPickerOpen" focus-trap parent="$ctrl.buttonElement" close="$ctrl.closePopup()" container-selector="$ctrl.containerSelector"><div class="flyout" onclick="event.stopPropagation()"><div class=\'color-section-title\' localize="ColorPicker_ThemeColors" localize-tooltip></div><div class="color-theme" role="listbox" ng-repeat="theme in $ctrl.themes" ng-init="themeIndex = $index"><color-tile class="parent-color" role="option" aria-posinset="1" aria-setsize="{{theme.children.length+1}}" tabindex="{{themeIndex === 0 ? 0 : -1}}" color="theme.parentColor" ng-keydown="$ctrl.onItemKeyDown($event, 0, themeIndex, false)" accessible-click="$ctrl.colorSelected($event, {id: theme.id, shade: 0, value: theme.parentColor })" bind-aria-label-and-tooltip="$ctrl.getThemeColorLocalizedNames(themeIndex, theme.parentColor)"></color-tile><color-tile class="child-color" role="option" aria-posinset="{{$index+2}}" aria-setsize="{{theme.children.length+1}}" tabindex="-1" ng-class="{\'child-color-first\':$first, \'child-color-last\':$last}" color="childColor.value" ng-keydown="$ctrl.onItemKeyDown($event, childIndex+1, themeIndex, false)" accessible-click="$ctrl.colorSelected($event, {id: theme.id, shade: childColor.shade, value: childColor.value })" ng-repeat="childColor in theme.children track by $index" ng-init="childIndex = $index" bind-aria-label-and-tooltip="$ctrl.getThemeColorLocalizedNames(themeIndex, childColor.value, childColor.shade)"></color-tile></div><div class="no-fill-container" tabindex="0" accessible-click="$ctrl.colorSelected($event)" ng-keydown="$ctrl.onNoPickKeyDown($event)" ng-if="$ctrl.isNoItemSupported"><color-tile class="no-fill-box no-fill-background"><svg-use-symbol sheet="visualizationPaneIcons" symbol-id="nofill"></svg-use-symbol></color-tile><div class="no-fill-caption" localize="ColorPicker_NoFill"></div></div><div class=\'color-section-title\' localize="ColorPicker_RecentColors" localize-tooltip></div><div class=\'recent-colors-container\' role="listbox"><color-tile role="option" aria-posinset="$index+1" tabindex="{{$index === 0 ? 0 : -1}}" ng-keydown="$ctrl.onItemKeyDown($event, undefined, $index, true)" ng-repeat="recentColor in $ctrl.recentColors track by $index" class="recent-color" color="recentColor.value" ng-class="{\'no-fill-background\': !recentColor}" accessible-click="$ctrl.colorSelected($event, recentColor)" bind-aria-label-and-tooltip="recentColor.value"></color-tile></div><div class=\'color-section-button\' role="button" tabindex="0" ng-keydown="$ctrl.onItemPickerKeyDown($event)" accessible-click="$ctrl.toggleWheel($event)"><svg-use-symbol class="color-section-morecolors-icon" sheet="visualizationPaneIcons" symbol-id="color_wheel"></svg-use-symbol><span class="color-section-morecolors-title trimmedTextWithEllipsis" localize="ColorPicker_CustomColor" localize-tooltip></span></div><div class=\'color-section-title colorpicker-revert\' role="button" tabindex="0" ng-keydown="$ctrl.onRevertToDefaultKeyDown($event)" accessible-click="$ctrl.revertToDefault($event)"><span class=\'colorpicker-revert-title trimmedTextWithEllipsis\' localize="ColorPicker_RevertToDefault" localize-tooltip></span></div></div><div class="colorwheel" focus-trap ng-if="$ctrl.isWheelOpen" ng-init="$ctrl.showColorWheel()"><canvas class="colorwheel-picker" width="170" height="170" ng-click="$ctrl.customColorPicked($event)"/><div class="colorwheel-controls"> <span class="colorwheel-hex-pound">#</span> <input type="text" role="textbox" contenteditable="true" tabindex="0" maxlength="6" class="colorwheel-hex-input" ng-model="::$ctrl.hexColor" fast-click="$event.stopPropagation()" ng-change="$ctrl.hexColorEntered($ctrl.hexColor)" fast-keydown="$ctrl.close($event)"/><div class="colorwheel-button" role="button" tabindex="0" accessible-click="$ctrl.toggleWheel($event)" ng-keydown="$ctrl.onColorWheelKeyDown($event)" localize="Generic_Back"></div></div></div></popup-container>'), e.put("components/dropDownList/dropDownList.html", '<ng-transclude><ng-repeat ng-repeat="menuItem in $ctrl.model.items"><drop-down-list-item model="menuItem" foreground-style="::$ctrl.foregroundStyle" list-pos="$index" list-size="$ctrl.model.items.length"></drop-down-list-item></ng-repeat></ng-transclude>'), e.put("components/dropDownListItem/dropDownListItem.html", '<ng-transclude><ng-switch on="$ctrl.model.type"><a ng-href="{{::$ctrl.model.href}}" role="presentation" ng-attr-target="{{::$ctrl.model.href ? \'_blank\' : undefined }}"><div tabindex="0" class="label" role="menuitemcheckbox" aria-setsize="{{$ctrl.listSize}}" aria-posinset="{{$ctrl.listPos+1}}" aria-labelledby="contextmenu-label-text-{{$ctrl.model.text}}" aria-checked="{{($ctrl.model.checked || $ctrl.model.selected) ? true : false}}" aria-disabled="{{$ctrl.model.disabled ? true : false}}" aria-haspopup="{{$ctrl.model.children ? true : false}}" ng-switch-when="0" ng-class="{\'checked\': $ctrl.model.checked, \'hasChildren\': $ctrl.model.children, \'hasIcon\': $ctrl.hasIcon, \'selected\': $ctrl.model.selected, \'expanded\': $ctrl.model.expanded }" ng-disabled="::$ctrl.model.disabled" ng-attr-title="{{::$ctrl.model.tooltip || $ctrl.model.text}}" accessible-click="$ctrl.onAccessibleClick($event)" apply-style="::$ctrl.foregroundStyle"><svg-use-symbol sheet="exploreCanvasIcons" ng-if="$ctrl.model.checked" symbol-id="contextMenuCheckArrow"></svg-use-symbol><i ng-if="$ctrl.model.showIcon" class=\'dropdown-icon {{ $ctrl.model.icon }}\'></i> <span ng-if="$ctrl.model.showIcon && $ctrl.model.customIcon"><img class="itemIcon" ng-src="{{$ctrl.model.customIcon}}"/></span><h6 id="contextmenu-label-text-{{$ctrl.model.text}}" ng-bind="::$ctrl.model.text" class="itemLabel trimmedTextWithEllipsis"></h6></div></a><hr role="separator" ng-switch-when="1"/><h1 ng-switch-when="2" aria-label="{{$ctrl.model.text}}" ng-bind="::$ctrl.model.text"></h1></ng-switch></ng-transclude>'), e.put("components/editableLabel/editableLabel.html", '<div class="editableLabel" ng-class="{ active: $ctrl.isEditing, error: !$ctrl.isValid }" ng-switch="$ctrl.inputType"><div class="textLabel" ng-class="$ctrl.textLabelClasses" ng-style="$ctrl.textLabelStyles" ng-show="!$ctrl.isEditing" ng-click="$ctrl.disableClick || $ctrl.setEditableState(true)" ng-bind-html="$ctrl.displayContent" ng-attr-title="{{ $ctrl.customTooltip ? undefined : $ctrl.displayName }}"></div><textarea ng-switch-when="textarea" class="textInput" ng-if="$ctrl.isEditing" spellcheck="false" maxlength="{{::$ctrl.maxInputLength}}" ng-blur="$ctrl.onInternalBlur()" ng-readonly="$ctrl.readonly" ng-model="$ctrl.internalDisplayName" fast-keydown="$ctrl.onInternalKeyDown($event)" fast-keyup="$ctrl.onInternalKeyUp($event)"></textarea> <input ng-switch-default class="textInput" type="text" ng-if="$ctrl.isEditing" ng-style="{\'width\': $ctrl.textInputWidth}" spellcheck="false" maxlength="{{::$ctrl.maxInputLength}}" ng-blur="$ctrl.onInternalBlur()" ng-readonly="$ctrl.readonly" ng-model="$ctrl.internalDisplayName" fast-keydown="$ctrl.onInternalKeyDown($event)" fast-keyup="$ctrl.onInternalKeyUp($event)"></input></div>'), e.put("components/emailsList/emailsList.html", '<div class="emailsList" pbi-lazy-load-contents="$ctrl.moduleConfig"><tags-input ng-model="$ctrl.viewModel.inputUserList" tag-class="{invalid: $tag.isInvalid}" placeholder="{{ ::$ctrl.getInputPlaceholder() }}" max-tags="$ctrl.maxTags" spellcheck="false" replace-spaces-with-dashes="false" add-on-paste="true" paste-split-pattern=",|;" min-length="1" display-property="displayName" key-property="objectId" on-tag-adding="$ctrl.isValidUser($tag, $ctrl.checkValidOrgUser)" on-invalid-tag="$ctrl.showInvalidUserError($tag)" on-tag-added="$ctrl.setDirty();$ctrl.onTagAddedWithoutError($tag)" on-tag-removed="$ctrl.setDirty();$ctrl.onTagRemoved({$tag: $tag})" template="components/emailsList/emailsListTag.html" arialabel="{{$ctrl.arialabel}}" arialabelledby="{{$ctrl.arialabelledby}}" ariadescribedby="{{$ctrl.ariadescribedby}}" ariarequired="$ctrl.ariarequired"><auto-complete source="$ctrl.findUsers($query)" debounce-delay="200" min-length="1" onclick="event.stopPropagation();" add-on-blur="false" load-on-empty="true" template="components/emailsList/emailsListAutoComplete.html"></auto-complete><div class="autoCompleteSpinner" ng-if="$ctrl.areUsersLoading() || $ctrl.isFindingUsers"><spinner></spinner></div></tags-input><div class="errorMessageContainer" ng-if="$ctrl.viewModel.hasValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="errorMessage" ng-bind="$ctrl.viewModel.errorMessage" role="alert"></span></div></div>'), e.put("components/emailsList/emailsListAutoComplete.html", '<span aria-live="polite"><span class="displayName" highlight-string="data.displayName" search-string="data.searchString" highlight-tag="em" ng-attr-aria-label="{{data.displayName}}"></span><span class="userPrincipalName" highlight-string="data.userAdditionalDetailsForAutoComplete" search-string="data.searchString" highlight-tag="em" ng-attr-aria-label="{{data.userAdditionalDetailsForAutoComplete}}"></span></span>'), e.put("components/emailsList/emailsListTag.html", '<span class="displayName" ng-bind="::data.displayName" ng-attr-title="{{::data.userPrincipalName || data.displayName}}"></span><a class="removeBtn" ng-click="$removeTag()" role="button"><i class="glyphicon pbi-glyph-cancel" localize-tooltip="Delete"></i></a>'), e.put("components/errorDetailsInfo/errorDetailsInfo.html", '<div class="errorDetailsInfo"><div class="errorTitle" ng-bind="::$ctrl.errorDetails.message"></div><div class="additionalErrorInfo" ng-if="::$ctrl.errorInfoItems"><a href="" localize="ErrorShowTechnicalDetails" ng-click="$ctrl.shouldShowErrorInfoItems = !$ctrl.shouldShowErrorInfoItems" ng-if="!$ctrl.shouldShowErrorInfoItems"></a><div class="errorInfoItems" ng-if="$ctrl.shouldShowErrorInfoItems"><div class="errorInfoItem" ng-repeat=" errorInfoItem in ::$ctrl.errorInfoItems"><span class="errorInfoHeader" ng-bind="::errorInfoItem.errorInfoKey"></span><span class="errorInfoText" ng-bind="::errorInfoItem.errorInfoValue"></span></div></div></div></div>'), e.put("components/expando/expando.html", "<i class=\"glyphicon glyph-mini expand\" ng-class=\"$ctrl.expanded ? 'pbi-glyph-chevronupmedium' : 'pbi-glyph-chevrondownmedium'\" localize-tooltip=\"{{$ctrl.expanded ? 'Chevron_CollapseDescription' : 'Chevron_ExpandDescription'}}\" dynamic-tooltip-update></i>"), e.put("components/iconPicker/iconPicker.html", '<div class="colorpicker popup-container-toggle" ng-class="{ \'open\': $ctrl.isPickerOpen }" ng-if="!$ctrl.isIconHidden" accessible-click="$ctrl.togglePickerState()" role="button" tabindex="{{$ctrl.isDisabled ? -1 : 0}}" aria-labelledby="{{$ctrl.labelId}}"><div class="colorpicker-anchor"><div class="icon"> <img ng-if="$ctrl.icon && $ctrl.icon.url" ng-src="{{$ctrl.icon.encodedUrl}}"/><svg-use-symbol ng-if="$ctrl.icon && $ctrl.icon.svgId" class="iconSvg" sheet="conditionalFormattingDialogIcons" symbol-id="{{$ctrl.icon.svgId}}"></svg-use-symbol></div><pbi-icon class="colorpicker-icon" name="flickup" size="micro"></pbi-icon></div></div><popup-container ng-if="$ctrl.isPickerOpen" focus-trap parent="$ctrl.buttonElement" close="$ctrl.closePopup()" container-selector="$ctrl.containerSelector"><div class="flyout" onclick="event.stopPropagation()"><div><div class="icon-container" role="listbox"><div class="icon-container-scroll"><div class="icon" role="option" aria-posinset="$index+1" tabindex="{{$index === 0 ? 0 : -1}}" ng-repeat="(id, icon) in $ctrl.icons track by $index" ng-keydown="$ctrl.onIconKeydown($event, $index)" accessible-click="$ctrl.iconSelected($event, id)" bind-aria-label-and-tooltip="::$ctrl.getIconDescription(icon)"> <img ng-if="icon.url" ng-src="{{icon.encodedUrl}}"/><svg-use-symbol ng-if="icon.svgId" class="iconSvg" sheet="conditionalFormattingDialogIcons" symbol-id="{{icon.svgId}}"></svg-use-symbol></div></div></div><div class="no-icon" localize="IconPicker_NoIcon" localize-tooltip tabindex="0" accessible-click="$ctrl.iconSelected($event, undefined)" ng-keydown="$ctrl.onNoPickKeyDown($event)"></div></div></div></popup-container>'),
    e.put("components/iconSelector/iconSelector.html", '<section class="iconSelectorIcon {{::$ctrl.getIconStaticClass(icon)}}" ng-class="{\'active\': $ctrl.isSelected(icon)}" ng-style="::{\'color\': icon.color, \'background-color\': icon.backgroundColor}" ng-repeat="icon in ::$ctrl.icons" ng-click="$ctrl.onIconSelected(icon)" bind-aria-label-and-tooltip="$ctrl.getThemeColorLocalizedNames($index + 1, icon.backgroundColor)" tabindex="0"><pbi-icon name="{{::icon.iconName}}" size="{{::$ctrl.getIconSize(icon)}}" ng-if="::!!icon.iconName"></pbi-icon><span ng-if="::!icon.iconName"></span></section>'), e.put("components/iconSetPicker/iconSetPicker.html", '<div class="iconSetPicker popup-container-toggle" ng-class="{ \'open\': $ctrl.isPickerOpen }" ng-if="!$ctrl.isIconHidden" accessible-click="$ctrl.togglePickerState()" role="button" tabindex="{{$ctrl.isDisabled ? -1 : 0}}" aria-labelledby="{{$ctrl.labelId}}"><div class=\'iconsetpicker-anchor\'><div ng-if="$ctrl.iconSetId" class="selectedIconSet"><div class="iconSet-icon" ng-repeat="icon in $ctrl.iconSets[$ctrl.iconSetId].icons"> <img ng-if="icon.url" ng-src="{{icon.encodedUrl}}"><svg-use-symbol ng-if="icon.svgId" class="iconSvg" sheet="conditionalFormattingDialogIcons" symbol-id="{{icon.svgId}}"></svg-use-symbol></div></div><div ng-if="!$ctrl.iconSetId" class="iconSet-custom" localize="ConditionalFormattingDialog_RuleBased_IconStyleCustom"></div><pbi-icon class="iconSetPicker-icon" name="flickup" size="micro"></pbi-icon></div></div><popup-container ng-if="$ctrl.isPickerOpen" focus-trap parent="$ctrl.buttonElement" close="$ctrl.closePopup()" container-selector="$ctrl.containerSelector"><div class="flyout iconSet-flyout" onclick="event.stopPropagation()"><div class="iconSet-container" role="listbox"><div class="iconSet-container-scroll"><div class="iconSet" role="option" aria-posinset="$index+1" tabindex="{{$index === 0 ? 0 : -1}}" ng-repeat="(id, iconSet) in $ctrl.iconSets track by $index" ng-keydown="$ctrl.onItemKeydown($event, $index)" accessible-click="$ctrl.iconSetSelected($event, id)" bind-aria-label-and-tooltip="iconSet.description"><div class="iconSet-icon " ng-repeat="icon in iconSet.icons"> <img ng-if="icon.url" ng-src="{{icon.encodedUrl}}"><svg-use-symbol ng-if="icon.svgId" class="iconSvg" sheet="conditionalFormattingDialogIcons" symbol-id="{{icon.svgId}}"></svg-use-symbol></div></div></div></div></div></popup-container>'), e.put("components/lazyIcon/lazyIcon.html", '<img ng-if="$ctrl.src" ng-src="{{$ctrl.src}}"/><pbi-icon ng-if="!$ctrl.src" name="{{$ctrl.placeholder}}" size="{{$ctrl.placeholderSize}}"></pbi-icon>'), e.put("components/modalDialog/aboutVisualDialog/aboutVisualDialog.html", '<dialog-frame><dialog-header ng-if="::!!$ctrl.config.titleText"><span ng-bind="::$ctrl.config.titleText"/></dialog-header><dialog-body class="about-visual-selectable"><p> <span class="about-visual-bold" Localize="AboutVisualDialog_Name"/>:&nbsp;<span ng-bind="::$ctrl.config.visualName"/></p><p> <span class="about-visual-bold" Localize="AboutVisualDialog_ID"/>:&nbsp;<span ng-bind="::$ctrl.config.guid"/></p><p ng-if="::$ctrl.config.version"> <span class="about-visual-bold" Localize="AboutVisualDialog_Version"/>:&nbsp;<span ng-bind="::$ctrl.config.version"/></p><p> <span class="about-visual-bold" Localize="AboutVisualDialog_Source"/>:&nbsp;<span ng-bind="::$ctrl.config.source"/></p><p> <span class="about-visual-bold" Localize="AboutVisualDialog_Support"/>:&nbsp;<span ng-bind="::$ctrl.config.supportUrl"/></p></dialog-body><dialog-footer> <button autofocus type="button" ng-click="$ctrl.close()" class="primary" Localize="PBI_Button_Label_Close"/></dialog-footer></dialog-frame>'), e.put("components/modalDialog/aboutVisualDialog/aboutVisualDialogDefinition.html", '<about-visual-dialog config="config"></about-visual-dialog>'), e.put("components/modalDialog/dialogFrame/dialogFrame.html", '<div role="dialog" class="container themeableElement" tabindex="-1" ng-keydown="$ctrl.onKeydown($event)" aria-labelledby="messageDialogHeader"><div class="frameDragHandle"></div><div class="frame"><header id="messageDialogHeader" class="dialogHeader" ng-transclude="dialogHeader"></header><main class="dialogBody" ng-transclude="dialogBody"></main><section class="dialogFooter" ng-transclude="dialogFooter"></section></div><pbi-button kind="icon" labelless="true" icon-name="cancel" icon-size="mini" no-label tabindex="-1" class="closeIcon" ng-click="$ctrl.onCloseButtonClick()" ng-if="::$ctrl.isDismissable()"></pbi-button></div>'), e.put("components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialog.html", '<dialog-frame><dialog-header><span localize="$ctrl.titleText"></span></dialog-header><dialog-body><article localize="$ctrl.message"></article><a class="learnMoreLink" ng-if="::$ctrl.learnMoreUrl" target=\'_blank\' ng-href="{{::$ctrl.learnMoreUrl}}" localize="LearnMore"></a></dialog-body><dialog-footer> <button autofocus type="submit" ng-click="$ctrl.close()" class="primary" localize="PBI_Button_Label_Close"></button></dialog-footer></dialog-frame>'), e.put("components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialogDefinition.html", '<feature-not-supported-dialog title-text="::titleText" message="::message" learn-more-url="::learnMoreUrl"></feature-not-supported-dialog>'), e.put("components/modalDialog/hostDialogContainer/hostDialogContainer.html", "<ng-transclude></ng-transclude>"), e.put("components/modalDialog/messageDialog/messageDialog.html", '<dialog-frame><dialog-header ng-if="::!!$ctrl.config.titleText"><span ng-bind="::$ctrl.config.titleText"/></dialog-header><dialog-body><p ng-bind="::$ctrl.config.messageText"/><section ng-if="::$ctrl.config.additionalMessageTexts"><p ng-repeat="message in ::$ctrl.config.additionalMessageTexts" ng-bind="::message"></p></section></dialog-body><dialog-footer> <button autofocus type="submit" ng-click="$ctrl.ok()" class="primary" ng-if="::$ctrl.config.okButtonText" ng-bind="::$ctrl.config.okButtonText"/> <button class="cancelBtn" ng-click="$ctrl.cancel()" ng-if="::$ctrl.config.cancelButtonText" ng-bind="::$ctrl.config.cancelButtonText"/></dialog-footer></dialog-frame>'), e.put("components/modalDialog/messageDialog/messageDialogDefinition.html", '<message-dialog config="config"></message-dialog>'), e.put("components/shareAccess/shareAccess.html", '<pbi-radio-group no-label ng-model="$ctrl.isSharedWithOrg" ng-change="$ctrl.selectionChanged()"><pbi-radio class="entireOrganizationRadio" label="TenantSetting_ApplyTo_EntireOrganization" ng-value="true"></pbi-radio><pbi-radio class="specificUsersRadio" label="TenantSetting_ApplyTo_SpecificUsers" ng-value="false"></pbi-radio></pbi-radio-group><div class="emailListContainer" ng-if="!$ctrl.isSharedWithOrg"><emails-list view-model="$ctrl.emails" allow-security-groups="true" allow-object-ids="true" allow-unified-groups="true"></emails-list></div>'), e.put("views/collapsibleSectionView.html", '<div class="collapsibleSectionControl" ng-class="{isExpanded: isCollapsibleSectionExpanded === true}"><div class="sectionTitle"><span class="collapseToggleContainer" ng-click="isCollapsibleSectionExpanded = !isCollapsibleSectionExpanded"><i class="glyphicon pbi-glyph-caretright collapseToggle"></i> <span>{{isCollapsibleSectionExpanded ? localizedExpandedTitle : localizedCollapsedTitle}}</span></span></div><div class="content" ng-show="isCollapsibleSectionExpanded" ng-transclude></div></div>'), e.put("views/colorTile.html", "<div class=\"color-tile\" ng-attr-style=\"{{'background-color:'+color+'!important;'}}\"></div>"), e.put("views/confirmationModalDialog.html", '<div><div class="title" ng-if="viewModel.title">{{::viewModel.title}}</div><div class="message" ng-if="viewModel.message">{{::viewModel.message}}</div></div>'), e.put("views/customModalDialog.html", '<div class="customModalDialog"><div class="dialogMessage" ng-bind="::message"></div></div>'), e.put("views/dialogConfirmContent.html", '<div class="content"><div class="title">{{viewModel.title}}</div><div class="message" ng-if="viewModel.message">{{viewModel.message}}</div></div>'), e.put("views/dropdownMenu.html", "<ul class='angular-dropdown' ng-class='{dropdownMenuClass: true, dark: dropdownDarkTheme === true}'><li ng-repeat='item in dropdownMenu' class='dropdown-item' dropdown-item-label='labelField' dropdown-item-description='descriptionField' dropdown-item-class='classField' dropdown-menu-item='item'></li></ul>"), e.put("views/dropdownMenuItems.html", '<ul class="clickable-menu-items {{dropdownClass}}" focus-trap role="menu" ng-class="{dark: dropdownDarkTheme === true}"><li ng-repeat="item in dropdownItems" class="dropdown-item {{item.dropdownItemClass}}" ng-click="dropdownOnItemSelected({ selected: item }); $event.stopPropagation();" ng-class="{selectedItem: item.checked}"> <button ng-if="::item.type === 0 && !item.href" class="{{::item.containerClass}}" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}" role="menuitem"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-if="::item.description">{{::item.description}}</div></div></button><a ng-if="::item.type === 0 && item.href" class="{{::item.containerClass}}" role="menuitem" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}" ng-href="{{::item.href}}" ng-attr-target="{{::item.hrefTarget ? item.hrefTarget : \'_blank\' }}"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-if="::item.description">{{::item.description}}</div></div></a><span ng-if="::item.type === 1" class="{{::item.containerClass}}" tabindex="0" role="heading" aria-posinset="{{$index+1}}" aria-setsize="{{dropdownItems.length}}"><i class="dropdown-icon {{::item.iconClass}}" ng-if="::!!item.iconClass"></i><div class="dropdown-content {{item.itemClass}}"><div class="dropdown-label {{::item.labelClass}}">{{::item.text}}</div><div class="dropdown-description {{::item.descriptionClass}}" ng-attr-title="{{::item.descriptionTitle}}" ng-if="::item.description">{{::item.description}}</div></div></span><span ng-if="::item.type === 2" class="dropdown-separator"></span></li></ul>'), e.put("views/dropdowns/contextMenu.html", '<dropdown-overlay focus-nav-mode="Group" keyboard-shortcuts="" dropdown-overlay-class="default-contextmenu dropdownOverlay" ng-class="::{dark: darkTheme === true, verticalScrollbar: verticalScrollbar === true, themeableElement: themeableElement === true, fluentTheme: fluentTheme === true}" apply-style="::backgroundStyle"><drop-down-list role="menu" model="::model" foreground-style="::foregroundStyle" on-item-selected="menuClick(key)" on-item-enter="menuItemEnter(menuitem, $event)"></drop-down-list></dropdown-overlay>'), e.put("views/dropdowns/dropdownItemsLegacy.html", '<dropdown-overlay dropdown-overlay-name="{{overlayName}}" dropdown-overlay-class="angular-dropdown {{overlayClass}} override-box-shadow" on-close="onClose()"><dropdown-menu-items dropdown-items="menuItems" dropdown-class="active {{overlayClass}}" dropdown-on-item-selected="onItemSelected(selected)"></dropdown-menu-items></dropdown-overlay>'), e.put("views/editableListItem.html", '<div class="editableListItemContent" ng-transclude></div> <button class="removeButton" ng-click="remove()" localize-tooltip="Delete"><i class="glyphicon pbi-glyph-close glyph-mini" aria-hidden="true"></i></button>'), e.put("views/gradientBar.html", '<div class="gradient-bar"></div>'), e.put("views/inlineMessageView.html", '<div class="inlineWarning" ng-class="{errorBackground: useErrorBackground}"><div class="message" ng-init="detailExpand=false"><span ng-switch="displayIcon"><span ng-switch-when="0" class="glyphicon glyph-small" ng-class="\'pbi-glyph-info\'"></span><span ng-switch-when="1" class="glyphicon glyph-small" ng-class="\'pbi-glyph-error\'"></span><span ng-switch-when="2" class="glyphicon glyph-small" ng-class="\'pbi-glyph-warning\'"></span></span><span ng-transclude/><span ng-if="traceDetails!=null"><span class="detailsExpander" ng-click="detailExpand=!detailExpand" ng-switch="detailExpand"><a href=\'\' localize="SettingsDataset_ShowDetails" ng-switch-when="false"></a><a href=\'\' localize="SettingsDataset_HideDetails" ng-switch-when="true"></a></span><span ng-show="detailExpand"><table class="warningDetails"><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_ActivityIdText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.activityId"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_RequestIdText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.requestId"></td></tr><tr ng-if="traceDetails.clusterUri"><td class="warningDetailName"><span localize="AdditionalErrorInfo_ClusterUriText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.clusterUri"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_ErrorCodeText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.errorCode"></td></tr><tr ng-if="traceDetails.error"><td class="warningDetailName"><span localize="AdditionalErrorInfo_ErrorText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.error"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_TimestampText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.time"></td></tr><tr><td class="warningDetailName"><span localize="AdditionalErrorInfo_VersionText"></span>:</td><td class="warningDetailValue" ng-bind="traceDetails.version"></td></tr></table><table ng-if="traceDetails.details && traceDetails.details.length > 0" class="warningErrorDetails"><tr ng-repeat="errorDetail in traceDetails.details"><td class="warningErrorDetailName"><span ng-bind="errorDetail.key"></span>:</td><td class="warningDetailValue" ng-bind="errorDetail.value"></td></tr></table></span><div ng-if="traceDetails.linkText" class="warningTroubleshootLink"><a href=\'{{traceDetails.link}}\' target="_blank" ng-bind="traceDetails.linkText"></a></div></span></div></div>'), e.put("views/inlineNameValuePairsView.html", '<div class="inlineWarning"><div class="message"><span ng-if="showTitle" ng-class="mode==\'info\'?\'pbi-glyph-info\':\'pbi-glyph-error\'" class="glyphicon glyph-small"></span><span ng-transclude/><span ng-if="nameValuePairs!=null"><span class="detailsExpander" ng-click="detailExpand=!detailExpand" ng-switch="detailExpand" ng-show="showTitle"><a href=\'\' localize="SettingsDataset_ShowDetails" ng-switch-when="false"></a><a href=\'\' localize="SettingsDataset_HideDetails" ng-switch-when="true"></a></span><table class="warningDetails" ng-show="detailExpand"><tr ng-repeat="pair in nameValuePairs"><td class="warningDetailName"><span ng-bind="::pair.Name"/>:</td><td class="warningDetailValue"><span ng-bind="::pair.Value"/></td></tr></table></span></div></div>'), e.put("views/loadNotificationView.html", '<div class="loading-modalContainer"><div class="content"><div class="information"><spinner [size]="\'large\'"></spinner><span class="message" ng-bind="message"></span></div></div></div>'), e.put("views/modalDialog.html", '<div class="modal"><div class="overlay"></div><div class="dialog" role="dialog" focus-trap><div ng-transclude ng-class="{\'dialog-content-filled\': viewModel.contentFilledDialog, \'dialog-content\': !viewModel.contentFilledDialog}"></div><div class="actions" ng-if="!viewModel.hideActionsButtons"> <button class="confirm biButton primary" ng-class="{\'elevated\': viewModel.confirmButtonImportance === \'elevated\', \'normal\': viewModel.confirmButtonImportance === \'normal\' }" ng-click="confirm()" ng-disabled="viewModel.isConfirmButtonDisabled">{{viewModel.confirmButtonText}}</button> <button class="cancel biButton" ng-if="!viewModel.hideCancelButton" ng-class="{\'elevated\': viewModel.cancelButtonImportance === \'elevated\', \'normal\': viewModel.cancelButtonImportance === \'normal\' }" ng-click="cancel()">{{viewModel.cancelButtonText}}</button></div> <button class="closeBtn pbi-glyph-exit glyphicon glyph-small" ng-click="cancel()" aria-label="Close"></button></div></div>'), e.put("views/modalOverlay.html", '<div class="modal"><div class="overlay"></div></div>'), e.put("views/notificationBar.html", '<div class="notification-bar unselectable" focus-group="ctrl-F6" focus-priority="10" ng-if="service.notifications.length" ng-class="{error : service.currentMessage.notificationType === 1, securityWarning : service.currentMessage.notificationType === 5, info: service.currentMessage.notificationType === 6 }"><div class="progressBarLoader" ng-if="service.currentMessage.notificationType === 4" ng-style="{\'animation-duration\': service.currentMessage.progressBarInfo.progressDuration + \'s\', \'animation-delay\': service.currentMessage.progressBarInfo.progressDelays}"></div><div class="bar-actions"> <button ng-repeat="action in service.currentMessage.actions track by $index" ng-bind="action.displayText" ng-click="action.action()" class="primary"></button> <button class="dismissBtn glyphicon pbi-glyph-close glyph-small" ng-if="!service.currentMessage.disallowUserDismiss" ng-click="dismiss(service.currentMessage)"></button></div><div class="bar-content" ng-switch="service.currentMessage.notificationType"><span ng-switch-when="1" class="icon glyphicon pbi-glyph-error glyph-small"></span><span ng-switch-when="2" class="icon glyphicon pbi-glyph-success glyph-small"></span><span ng-switch-when="3" class="icon glyphicon pbi-glyph-warning glyph-small"></span><spinner ng-switch-when="4"></spinner><span ng-switch-when="5" class="icon glyphicon pbi-glyph-securityalert glyph-small"></span><span ng-switch-when="6" class="icon glyphicon pbi-glyph-info glyph-small"></span><div ng-switch="!!service.currentMessage.embeddedMessageAction"> <span ng-switch-default class="message">{{service.currentMessage.message}}<a ng-if="service.currentMessage.secondaryLink" class="actionLink" ng-href="{{service.currentMessage.secondaryLink.urlString}}" ng-click="service.currentMessage.secondaryLink.action()" target="_blank" ng-bind="service.currentMessage.secondaryLink.displayText"></a></span><span ng-switch-when="true" localize="{{service.currentMessage.message}}" localize-fragments><a fragment-index="0" class="embeddedActionLink" ng-href="{{service.currentMessage.embeddedMessageAction.urlString}}" ng-click="service.currentMessage.embeddedMessageAction.action()" target="_blank" ng-bind="service.currentMessage.embeddedMessageAction.displayText"></a><a class="actionLink" ng-href="{{service.currentMessage.secondaryLink.urlString}}" ng-click="service.currentMessage.secondaryLink.action()" target="_blank" ng-bind="service.currentMessage.secondaryLink.displayText"></a></span></div></div></div>'), e.put("views/numUpDown.html", '<div class="inputRange unit-numupdown" ng-class="{\'invalid\': inputInvalid(), \'focused\': focused }"> <input type="number" ng-disabled="isDisabled" class="inputUpDown" name="{{::inputName}}" aria-labelledby="{{labelId}}" min="{{::options ? options.minValue : validators.min}}" max="{{::options ? options.maxValue : validators.max}}" ng-blur="onFocusChanged(false)" ng-change="valueChanged()" ng-focus="onFocusChanged(true)" ng-model="modelValue" ng-pattern="::integerPattern" ng-required="!placeholderText" placeholder="{{::placeholderText}}"/><span ng-bind="::unitSymbol"></span><span class="navigationButtons"><div class="buttonBox" ng-click="onUpDownValueChanged(\'up\')"><i class="numericArrowUp glyphicon glyph-micro"></i></div><div class="buttonBox" ng-click="onUpDownValueChanged(\'down\')"><i class="numericArrowDown glyphicon glyph-micro"></i></div></span></div>'), e.put("views/optionsModalDialog.html", '<div class="customModalDialog"><div class="dialogMessage" ng-bind="::message"></div><div><ul><li ng-repeat="val in options"><div class="pbi-input"> <input type="radio" name="option" ng-model="$parent.selected" ng-value="$index"> <label class="form-label">{{val}}</label></div></li></ul></div></div>'), e.put("views/popupContainer.html", '<div class="popup-container"><ng-transclude></ng-transclude></div>'), e.put("views/searchBox.html", '<div class="searchBox" localize-tooltip="SearchBox_Text"><i class="glyphicon pbi-glyph-search"></i> <input type="text" ng-class="{\'inputWithClearButton addPadding\': showClearButton && filter}" clear-on-escape ng-model="filter" ng-model-options="{debounce: 300}" ng-blur="onBlur({$event: $event})" placeholder="{{::placeholderText}}" ondrop="return false;" focus-on="shouldFocus" maxlength="200"/><i ng-if="showClearButton && filter" class="delete glyphicon pbi-glyph-close glyph-micro" ng-click="clearFilterInput()" ng-keyup="$event.keyCode == 13 && clearFilterInput()" tabindex="0"></i></div>'), e.put("views/selectMenu.html", '<select ng-model="selectValue" aria-labelledby="{{labelId}}" class="select-element" ng-disabled="isDisabled"><option ng-repeat="option in options track by $index" value="{{option.value}}" ng-selected="{{selectValue === option.value}}" ng-bind="option.displayName"></option></select>'), e.put("views/textInput.html", '<input class="inputText" ng-class="textInputStyle" type="text" ng-focus="onInternalFocus()" ng-blur="onInternalBlur()" ng-keydown="onInternalKeyDown($event)" ng-model="inputValue" ng-change="onInternalChange()" maxlength="{{::maxInputLength}}" placeholder="{{::placeholder}}" spellcheck="false" ng-trim="false"/>'), e.put("views/toggleSwitch.html", '<div class="toggle-switch" role="switch" aria-checked="{{!!toggleValue}}" tabindex="{{isDisabled ? -1 : 0}}" accessible-click="handleToggleEvent($event)" ng-focus="handleToggleFocus($event)" aria-labelledby="{{::labelId}}"> <input type="checkbox" name="toggle-switch" class="toggle-switch-checkbox" id="{{::$id}}" ng-model="toggleValue"/><label class="toggle-switch-label" for="{{::$id}}" ng-switch="!!toggleValue"><span ng-if="!warningMessage" ng-switch-when="true" class="toggle-switch-text trimmedTextWithEllipsis" localize="ToggleSwitchOn"></span><pbi-icon role="tooltip" aria-hidden="!warningMessage" aria-label="warningMessage.detail" ng-if="warningMessage" ng-switch-when="true" class="warning" name="warning" size="small" tooltip tooltip-config="getTooltipConfig()"></pbi-icon><span ng-switch-when="false" class="toggle-switch-text trimmedTextWithEllipsis" localize="ToggleSwitchOff"></span><span class="toggle-switch-inner"></span></label></div>')
}]); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.services = e, this.itemPicker = t } return e.prototype.closePopup = function () { this.itemPicker.isPickerOpen = !1, this.onClose && this.onClose() }, e.prototype.togglePickerState = function () { return this.itemPicker.isPickerOpen ? void this.closePopup() : void (this.itemPicker.isPickerOpen = !0) }, e.prototype.togglePicker = function (e) { this.itemPicker.buttonElement || (this.itemPicker.buttonElement = this.services.$element.find(this.itemPicker.getButtonSelector())), this.itemPicker.onToggle(), e || (this.itemPicker.isWheelOpen = !1), this.services.itemPicker.setCurrentInstance(this.itemPicker) }, e.prototype.onItemPickerKeyDown = function (e) { this.closePopupContainer(e), e && e.shiftKey && 9 === e.keyCode && this.setToPreviousFocus(e, this.previousRecentPosition) }, e.prototype.onItemKeyDown = function (e, t, o, i) { if (e && e.keyCode) { var r = { columnIndex: o, rowIndex: t, recent: i }; return 27 === e.keyCode ? void this.closePopupContainer(e) : 9 === e.keyCode ? void (e.shiftKey ? i ? this.itemPicker.isNoItemSupported ? (this.services.$element.find(".no-fill-container").eq(0).focus(), e.preventDefault()) : (this.setToPreviousFocus(e, this.previousPosition), this.previousRecentPosition = r) : (this.previousPosition = r, this.services.$element.find(".colorpicker-revert").eq(0).focus(), e.preventDefault()) : i ? this.previousRecentPosition = r : (this.previousPosition = r, this.itemPicker.isNoItemSupported || this.setToPreviousFocus(e, this.previousRecentPosition))) : void this.shiftItemFocus({ direction: e.keyCode, itemPosition: r }) } }, e.prototype.onNoPickKeyDown = function (e) { 9 === e.keyCode && (e.shiftKey ? this.setToPreviousFocus(e, this.previousPosition) : this.setToPreviousFocus(e, this.previousRecentPosition)), 27 === e.keyCode && this.closePopupContainer(e) }, e.prototype.onRevertToDefaultKeyDown = function (e) { this.closePopupContainer(e), e.shiftKey || 9 !== e.keyCode || this.setToPreviousFocus(e, this.previousPosition) }, e.prototype.setToPreviousFocus = function (e, t) { t && (this.setFocus(t), e.preventDefault()) }, e.prototype.closePopupContainer = function (e) { e && 27 === e.keyCode && (this.closePopup(), e.stopPropagation()) }, e.prototype.shiftItemFocus = function (e) { var t, o; e.itemPosition.recent ? t = this.getNextIndex(this.itemPicker.getRecentItemCount(), e.itemPosition.columnIndex, e.direction) : 38 === e.direction || 40 === e.direction ? (t = e.itemPosition.columnIndex, o = this.getNextIndex(this.itemPicker.getColumnItemCount(t), e.itemPosition.rowIndex, e.direction)) : 37 !== e.direction && 39 !== e.direction || (t = this.getNextIndex(this.itemPicker.getRowItemCount(e.itemPosition.rowIndex), e.itemPosition.columnIndex, e.direction), o = e.itemPosition.rowIndex), this.setFocus({ columnIndex: t, rowIndex: o, recent: e.itemPosition.recent }) }, e.prototype.getNextIndex = function (e, t, o) { return 39 === o || 40 === o ? (t++ , t = t >= e ? 0 : t) : 37 !== o && 38 !== o || (t-- , t = t < 0 ? e - 1 : t), t }, e.prototype.setFocus = function (e) { this.itemPicker.getElementFromPosition(e).focus() }, e })(); e.ItemPickerHandler = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i = t.utils.ColorUtility, r = e.FillSolidColorTypeDescriptor, n = e.common.controllers.ItemPickerHandler, a = (function () { function t(e, t) { this.scope = e, this.services = t, this.handler = new n(this.services, this) } return t.createOptions = function () { return { additionalServices: ["$element", "localizationService"], scopedDependencies: ["itemPicker", "eventBridge"] } }, t.prototype.$onInit = function () { var t = this; this.isNoItemSupported = r.nullable(this.type.fill.solid.color), this.recentColors = this.services.itemPicker.getRecentColors(), this.themes = this.services.itemPicker.getThemes(), this.scope.$watch("$ctrl.isPickerOpen", (function (e, o) { o !== e && t.handler.togglePicker(e) })), this.scope = void 0, this.subscriptionManager = this.services.eventBridge.createChannelSubscriptionManager().subscribe(e.events.visualThemeChanged, (function () { return t.onVisualThemeChanged() })), this.labelId = this.services.$element.attr("id") }, t.prototype.$onDestroy = function () { this.subscriptionManager.unsubscribeAll() }, t.prototype.close = function (e) { 13 === e.keyCode && i.isHexColor(i.ensureValidHex(this.hexColor)) && this.handler.closePopup(), this.onColorWheelKeyDown(e) }, t.prototype.colorSelected = function (e, t) { e.stopPropagation(), t && !this.isWheelOpen && (this.recentColors = this.services.itemPicker.enqueueRecentColor(t)), this.updateModel(t), this.handler.closePopup() }, t.prototype.togglePickerState = function () { this.handler.togglePickerState() }, t.prototype.togglePicker = function (e) { this.handler.togglePicker(e) }, t.prototype.toggleWheel = function (e) { e.stopPropagation(), i.isHexColor(this.color && this.color.value) && (this.hexColor = i.getHexWithoutPound(this.color.value), this.recentColors = this.services.itemPicker.enqueueRecentColor(this.color)), this.isWheelOpen = !this.isWheelOpen }, t.prototype.revertToDefault = function (e) { this.colorSelected(e, null) }, t.prototype.hexColorEntered = function (e) { var t = i.ensureValidHex(e); t && this.updateModel({ value: t }) }, t.prototype.updateModel = function (e) { this.color = e, this.onChangeColor(e) }, t.prototype.showColorWheel = function () { var e = this.services.$element; this.canvas = $(e).find(".colorwheel-picker")[0]; var t = this.canvas.getContext("2d"), o = t.getImageData(0, 0, t.canvas.width, t.canvas.height), r = i.getColorWheelImage(o); t.putImageData(r, 0, 0) }, t.prototype.customColorPicked = function (e) { var t = $(this.canvas).offset(), o = Math.floor(e.pageX - t.left), r = Math.floor(e.pageY - t.top), n = this.canvas.getContext("2d").getImageData(o, r, 1, 1), a = n.data, s = i.rgbToHex(a[0], a[1], a[2]); this.hexColor = i.getHexWithoutPound(s), this.colorSelected(e, { value: s }), this.handler.closePopup() }, t.prototype.onRevertToDefaultKeyDown = function (e) { this.handler.onRevertToDefaultKeyDown(e) }, t.prototype.onColorWheelKeyDown = function (e) { e && 27 === e.keyCode && this.toggleWheel(e) }, t.prototype.onNoPickKeyDown = function (e) { this.handler.onNoPickKeyDown(e) }, t.prototype.onItemKeyDown = function (e, t, o, i) { this.handler.onItemKeyDown(e, t, o, i) }, t.prototype.onItemPickerKeyDown = function (e) { this.handler.onItemPickerKeyDown(e) }, t.prototype.getThemeColorLocalizedNames = function (e, t, o) { var i; switch (e) { case 0: i = this.services.localizationService.get("ColorPicker_ThemeColors_White"); break; case 1: i = this.services.localizationService.get("ColorPicker_ThemeColors_Black"); break; default: i = this.services.localizationService.format("ColorPicker_ThemeColors_Series", [t, e]) }return null != o && (i = this.services.localizationService.format(o > 0 ? "ColorPicker_ThemeColors_Percentage_Lighter" : "ColorPicker_ThemeColors_Percentage_Darker", [i, Math.abs(100 * o)])), i }, t.prototype.closePopup = function () { this.handler.closePopup() }, Object.defineProperty(t.prototype, "onClose", { set: function (e) { this.handler.onClose = e }, enumerable: !0, configurable: !0 }), t.prototype.getRowItemCount = function (e) { return this.themes.length }, t.prototype.getColumnItemCount = function (e) { return this.themes[e].children.length + 1 }, t.prototype.getRecentItemCount = function () { return this.recentColors.length }, t.prototype.onToggle = function () { this.recentColors = this.services.itemPicker.getRecentColors(), this.services.itemPicker.enqueueRecentColor(this.color) }, t.prototype.getElementFromPosition = function (e) { return e.recent ? this.services.$element.find(".recent-color.color-tile").eq(e.columnIndex) : this.services.$element.find(".color-theme").eq(e.columnIndex).find(".color-tile").eq(e.rowIndex) }, t.prototype.getButtonSelector = function () { return ".colorpicker" }, t.prototype.onVisualThemeChanged = function () { this.themes = this.services.itemPicker.getThemes() }, t })(); o.ColorPickerController = a })(o = t.controllers || (t.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.ColorPicker = { bindings: { isPickerOpen: "<?", isWheelOpen: "<?", isIconHidden: "<?", buttonElement: "<?", type: "<", defaultColor: "<", color: "<", onChangeColor: "<", onClose: "<?", isDisabled: "<?", labelId: "<?", containerSelector: "<?" }, controller: e.createController(e.controllers.ColorPickerController), templateUrl: "components/colorPicker/colorPicker.html" } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var o; !(function (t) {
            var o = (function () {
                function o(e, o) { this.columnCount = 10, this.scope = e, this.services = o, this.handler = new t.ItemPickerHandler(this.services, this) } return o.createOptions = function () { return { additionalServices: ["$element", "localizationService"], scopedDependencies: ["itemPicker", "eventBridge"] } }, Object.defineProperty(o.prototype, "iconId", { get: function () { return this.iconIdInternal }, set: function (e) { this.updateModel(e) }, enumerable: !0, configurable: !0 }), o.prototype.$onInit = function () { var t = this; this.isNoItemSupported = !0, this.updateIcons(), this.updateModel(this.iconIdInternal), this.scope.$watch("$ctrl.isPickerOpen", (function (e, o) { o !== e && t.handler.togglePicker(e) })), this.scope = void 0, this.subscriptionManager = this.services.eventBridge.createChannelSubscriptionManager().subscribe(e.events.visualThemeChanged, (function () { return t.onVisualThemeChanged() })), this.labelId = this.services.$element.attr("id") }, o.prototype.$onDestroy = function () { this.subscriptionManager.unsubscribeAll() }, Object.defineProperty(o.prototype, "onClose", { set: function (e) { this.handler.onClose = e }, enumerable: !0, configurable: !0 }), o.prototype.closePopup = function () { this.handler.closePopup() }, o.prototype.onVisualThemeChanged = function () { this.updateIcons() }, o.prototype.updateIcons = function () {
                    this.icons = _.cloneDeep(this.services.itemPicker.getIcons()); for (var e in this.icons) { var t = this.icons[e]; t.url && (t.encodedUrl = jsCommon.Utility.encodeUriForImageDataSvg(t.url)) }
                }, o.prototype.getIconDescription = function (e) { if (e.description) { if ("string" == typeof e.description) return e.description; if (e.description.resourceKey) return this.services.localizationService.get(e.description.resourceKey) } }, o.prototype.onIconKeydown = function (e, t) { this.handler.onItemKeyDown(e, Math.floor(t / this.columnCount), t % this.columnCount, !1), e.preventDefault() }, o.prototype.getRowItemCount = function (e) { var t = Object.keys(this.icons).length; return e < Math.floor(t / this.columnCount) ? this.columnCount : t % this.columnCount }, o.prototype.getColumnItemCount = function (e) { var t = Object.keys(this.icons).length / this.columnCount, o = Math.floor(t); return e < (t - o) * this.columnCount - 1 && o++ , o }, o.prototype.getElementFromPosition = function (e) { return this.services.$element.find(".icon-container").eq(0).find(".icon").eq(e.columnIndex + e.rowIndex * this.columnCount) }, o.prototype.getRecentItemCount = function () { return 0 }, o.prototype.onToggle = function () { }, o.prototype.getButtonSelector = function () { return ".colorpicker" }, o.prototype.iconSelected = function (e, t) { this.updateModel(t), this.handler.closePopup(), this.onChangeIcon(t) }, o.prototype.updateModel = function (e) { this.iconIdInternal = e, this.icons && (e ? this.icon = this.icons[this.iconIdInternal] : this.icon = void 0) }, o.prototype.close = function (e) { 13 === e.keyCode && this.handler.closePopup() }, o.prototype.togglePickerState = function () { this.handler.togglePickerState() }, o.prototype.onNoPickKeyDown = function (e) { this.handler.onNoPickKeyDown(e) }, o
            })(); t.IconPickerController = o
        })(o = t.controllers || (t.controllers = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (t) {
        t.IconPicker = {
            bindings: { isIconHidden: "<?", onChangeIcon: "<", iconId: "=", onClose: "<?", isDisabled: "<?", labelId: "<?", containerSelector: "<?" },
            controller: e.createController(e.controllers.IconPickerController),
            templateUrl: "components/iconPicker/iconPicker.html"
        }
        })(t = e.components || (e.components = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) {
    var t; !(function (t) {
        var o; !(function (t) {
            var o = (function () {
                function o(e, o) {
                    this.scope = e,
                    this.services = o,
                    this.handler = new t.ItemPickerHandler(this.services, this)
                }
                return o.createOptions = function () {
                    return {
                        additionalServices: ["$element", "localizationService"],
                        scopedDependencies: ["itemPicker", "eventBridge"]
                    }
                }, o.prototype.$onInit = function () {
                    var t = this;
                    this.isNoItemSupported = !1,
                        this.updateIconSets(),
                        this.scope.$watch("$ctrl.isPickerOpen", (function (e, o) {
                            o !== e && t.handler.togglePicker(e)
                        })),
                        this.scope = void 0,
                        this.subscriptionManager = this.services.eventBridge.createChannelSubscriptionManager().subscribe(e.events.visualThemeChanged, (function () {
                            return t.onVisualThemeChanged()
                        })), this.labelId = this.services.$element.attr("id")
                    }, o.prototype.$onDestroy = function () {
                        this.subscriptionManager.unsubscribeAll()
                    }, Object.defineProperty(o.prototype, "onClose", {
                        set: function (e) { this.handler.onClose = e }, enumerable: !0, configurable: !0
                    }), o.prototype.closePopup = function () {
                        this.handler.closePopup()
                    }, o.prototype.onVisualThemeChanged = function () {
                        this.updateIconSets()
                    }, o.prototype.updateIconSets = function () {
                        this.iconSets = this.services.itemPicker.getIconSets(), this.icons = this.services.itemPicker.getIcons(); for (var e in this.iconSets) { var t = this.iconSets[e]; t.icons = []; for (var o = 0, i = t.iconIds; o < i.length; o++) { var r = i[o], n = this.icons[r]; n.url && (n.encodedUrl = jsCommon.Utility.encodeUriForImageDataSvg(n.url)), t.icons.push(n) } }
                    }, o.prototype.onItemKeydown = function (e, t) {
                        this.handler.onItemKeyDown(e, t, 0, !1), e.preventDefault()
                    }, o.prototype.getRowItemCount = function (e) {
                        return 1
                    }, o.prototype.getColumnItemCount = function (e) {
                        return Object.keys(this.iconSets).length
                    }, o.prototype.getElementFromPosition = function (e) {
                        return this.services.$element.find(".iconSet-container").eq(0).find(".iconSet").eq(e.rowIndex)
                    }, o.prototype.getRecentItemCount = function () {
                        return 0
                    }, o.prototype.onToggle = function () {
                    }, o.prototype.iconSetSelected = function (e, t) {
                        this.updateModel(t), this.handler.closePopup(), this.onIconSetSelected(t)
                    }, o.prototype.updateModel = function (e) {
                        this.iconSetId = e
                    }, o.prototype.togglePickerState = function () {
                        this.handler.togglePickerState()
                    }, o.prototype.close = function (e) {
                        13 === e.keyCode && this.handler.closePopup()
                    }, o.prototype.getButtonSelector = function () {
                        return ".iconSetPicker"
                    }, o
            })(); t.IconSetPickerController = o
        })(o = t.controllers || (t.controllers = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (t) {
        t.IconSetPicker = {
            bindings: { isIconHidden: "<?", onIconSetSelected: "<", iconSetId: "=", onClose: "<?", isDisabled: "<?", labelId: "<?", containerSelector: "<?" }, controller: e.createController(e.controllers.IconSetPickerController), templateUrl: "components/iconSetPicker/iconSetPicker.html"
        }
        })(t = e.components || (e.components = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (e) {
            var t = jsCommon.FocusManager, o = (function () {
                function e(e, t) {
                    this.services = t
                } return e.createOptions = function () {
                    return { additionalServices: ["$element"] }
                }, e.prototype.$onInit = function () {
                    this.unregister = t.getInstance().register(this.services.$element.get(0))
                    }, e.prototype.$onDestroy = function () {
                        this.unregister && this.unregister()
                    }, e.prototype.onMenuItemSelected = function (e) {
                        1 !== e.type && !e.disabled && null != e.key && _.isEmpty(e.children) && this.onItemSelected({ key: e.key })
                    }, e.prototype.onMenuItemEnter = function (e, o) {
                    this.onItemEnter({ menuitem: e, $event: o });
                    var i = $(o.currentTarget).find(":focusable")[0] || o.currentTarget; t.focus(i, !1)
                    }, e
            })(); e.DropDownListController = o
        })(t = e.controllers || (e.controllers = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) {
    var t; !(function (t) {
        var o; !(function (o) {
            o.DropDownList = {
                templateUrl: "components/dropDownList/dropDownList.html",
                bindings: { model: "<", foregroundStyle: "<", onItemSelected: "&", onItemEnter: "&" },
                transclude: !0, controller: e.common.createController(t.controllers.DropDownListController)
            }
        })(o = t.components || (t.components = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (e) {
            var t = (function () {
                function e(e, t) { this.services = t }
                return e.createOptions = function () {
                    return { additionalServices: ["$element"] }
                }, e.prototype.$onInit = function () {
                    var e = this;
                    this.services.$element.mouseenter((function (t) { return e.onEnter(t) }))
                    }, e.prototype.onAccessibleClick = function (e) {
                        this.model.children ? e.keyCode !== $.ui.keyCode.ENTER && e.keyCode !== $.ui.keyCode.SPACE || this.onEnter(e) : this.onClick()
                    }, Object.defineProperty(e.prototype, "hasIcon", {
                        get: function () { return this.model.showIcon && (!!this.model.icon || !!this.model.customIcon) },
                        enumerable: !0,
                        configurable: !0
                    }), e.prototype.onClick = function () {
                        this.dropDownListCtrl.onMenuItemSelected(this.model)
                    }, e.prototype.onEnter = function (e) {
                        this.dropDownListCtrl.onMenuItemEnter(this.model, e)
                    }, e
            })();
            e.DropDownListItemController = t
        })(t = e.controllers || (e.controllers = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) {
    var t; !(function (e) {
        var t; !(function (t) {
        t.DropDownListItem = {
            templateUrl: "components/dropDownListItem/dropDownListItem.html",
            bindings: { model: "<", foregroundStyle: "<", listPos: "<", listSize: "<" }, transclude: !0,
            require: { dropDownListCtrl: "^?dropDownList" },
            controller: e.createController(e.controllers.DropDownListItemController)
        }
        })(t = e.components || (e.components = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {}));

var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i = 100, r = !0, n = (function () { function o(e, t) { this.scope = e, this.services = t, this.element = t.$element, this.isEditing = !1, this.isValid = !0 } return o.createOptions = function () { return { additionalServices: ["$element", "highlight"] } }, o.prototype.$onInit = function () { this.inputMatchLabelWidth = null == this.inputMatchLabelWidth ? r : this.inputMatchLabelWidth, this.maxInputLength = null == this.maxInputLength ? i : this.maxInputLength, this.textLabel = this.element.find(".textLabel"), this.updateText(this.displayName, this.searchString), this.internalDisplayName = this.displayName }, o.prototype.$onChanges = function (e) { e.editable && !e.editable.isFirstChange() && this.disableClick && this.setEditableState(e.editable.currentValue), e.displayName && (this.internalDisplayName = e.displayName.currentValue), (e.displayName && !e.displayName.isFirstChange() || e.searchString && !e.searchString.isFirstChange()) && this.updateText(this.displayName, this.searchString) }, o.prototype.updateText = function (e, t) { e && t ? this.displayContent = this.services.highlight.highlight(e, t) : this.displayContent = jsCommon.StringExtensions.encodeHtml(e) }, o.prototype.onInternalKeyUp = function (e) { e.stopPropagation(), this.isValid = !this.validate || this.validate(this.displayName) }, o.prototype.onInternalBlur = function () { !this.cancelInput && this.onBlur && this.onBlur({ newName: this.internalDisplayName }), this.cancelInput = !1, this.isValid = !0, this.scope.$emit(t.constants.editableLabelOnBlurEventName), this.disableClick || this.setEditableState(!1) }, o.prototype.onInternalKeyDown = function (e) { switch (e.stopPropagation(), e.keyCode) { case 13: "textarea" === this.inputType ? e.ctrlKey && (this.inputTextbox.blur(), e.preventDefault()) : (this.inputTextbox.blur(), e.preventDefault()); break; case 27: this.cancelInput = !0, this.cancel && this.cancel(), this.inputTextbox.blur(), e.preventDefault() } }, o.prototype.setEditableState = function (t) { var o = this; this.isEditing = t, t && (this.inputMatchLabelWidth && (this.textInputWidth = e.TextMeasurementService.getDivElementWidth(this.textLabel)), this.services.timeout((function () { o.inputTextbox = o.element.find(".textInput"), o.inputTextbox.focus().select(), o.onEditStart && o.onEditStart() }), 0)) }, o })(); o.EditableLabelController = n })(o = t.controllers || (t.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.EditableLabel = { templateUrl: "components/editableLabel/editableLabel.html", bindings: { displayName: "<", disableClick: "<?", editable: "<?", searchString: "<?", readonly: "<?", inputType: "<?", maxInputLength: "<?", customTooltip: "<?", inputMatchLabelWidth: "<?", onBlur: "&?", onEditStart: "&?", cancel: "&?", validate: "=?", textLabelClasses: "<?", textLabelStyles: "<?" }, controller: e.createController(e.controllers.EditableLabelController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.inputUserList = [], this.validEmailsList = [], this.validObjectIds = [], this.hasValidationError = !1, this.isDirty = !1 } return e })(); e.EmailsListModel = t })(t = e.models || (e.models = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = "([!#$%&'*+/=?^{|}~\\w\\-\\.\\u00c0-\\uffff]{1,64}@[\\w\\-\\.\\u00c0-\\uffff]{1,253}\\.\\w{1,63})", i = new RegExp("^" + o + "$"); t.ObjectIdRegExp = /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/, t.MaxAllowedEmailAddresses = 500, t.EmailValidator = new RegExp("^(" + o + "|([^;,]*)<" + o + ">)$"); var r = (function () { function o(e, t) { this.services = t, this.isUserExisting = !0, this.checkValidOrgUser = !1, this.isFindingUsers = !1, this.findingUsers = [] } return o.createOptions = function () { return { additionalServices: ["localizationService", "promiseFactory", "$element"] } }, o.emailsToUsers = function (e) { for (var t = [], o = 0, r = e; o < r.length; o++) { var n = r[o], a = $.trim(n), s = ""; a && (i.test(a) && (s = a), t.push({ displayName: a, userPrincipalName: s, objectId: s, objectType: 1, isSecurityGroup: !1 })) } return t }, o.prototype.$onInit = function () { var e = this, t = "ngTagsInput"; this.moduleConfig = { name: t, dependency: { javascript: t, css: [t] } }; var o = this.services.$element; o.keyup((function (t) { 8 === t.keyCode && "" === o.find("input.input").val() && e.clearInvalidUserError() })), this.initializeViewModel(this.viewModel) }, o.prototype.getInputPlaceholder = function () { var e = this.services.localizationService; return _.isEmpty(this.placeholder) ? this.blockUsers ? e.get("SecurityGroupsListPlaceholder") : e.get("EmailsListPlaceholder") : e.get(this.placeholder) }, o.prototype.validationTrigger = function () { var e = [], o = this.resetViewModel(), r = o.inputUserList; o.inputUserList = []; for (var n = 0, a = r; n < a.length; n++) { var s = a[n]; this.isValidUser(s) ? (o.inputUserList.push(s), this.allowObjectIds && t.ObjectIdRegExp.test(s.objectId) ? o.validObjectIds.push(s.objectId) : i.test(s.userPrincipalName) && o.validEmailsList.push(s.userPrincipalName)) : e.push(s.userPrincipalName || s.objectId || s.displayName) } var c = this.services.localizationService, l = c.get("PowerBI_ListDelimiter"); return e.length > 0 ? (e = _.uniq(e), o.errorMessage = this.blockUsers ? c.format("EmailsList_WrongSecurityGroups", [e.join(l)]) : c.format("EmailsList_WrongEmailAddresses", [e.join(l)])) : 0 === o.inputUserList.length ? o.errorMessage = this.blockUsers ? c.get("EmailsList_NoSecurityGroupSpecified") : c.get("EmailsList_NoEmailAddressSpecified") : o.inputUserList.length >= t.MaxAllowedEmailAddresses && (o.errorMessage = this.blockUsers ? c.format("EmailsList_SecurityGroupExceeded", [t.MaxAllowedEmailAddresses.toString()]) : c.format("EmailsList_EmailAddressExceeded", [t.MaxAllowedEmailAddresses.toString()])), o.hasValidationError = "" !== o.errorMessage, !this.viewModel.hasValidationError }, o.prototype.areUsersLoading = function () { return null != this.findUsersPromise }, o.prototype.setDirty = function () { this.viewModel.isDirty = !0 }, o.prototype.showInvalidUserError = function (e) { var t = this.viewModel, o = this.services.localizationService, i = e.userPrincipalName || e.displayName; t.hasValidationError = !0, t.errorMessage = this.blockUsers ? o.format("EmailsList_WrongSecurityGroups", [i]) : o.format("EmailsList_WrongEmailAddresses", [i]) }, o.prototype.isValidUser = function (e, o) { if (void 0 === o && (o = !1), e.objectId && this.allowObjectIds && t.ObjectIdRegExp.test(e.objectId) && !this.isUserRepeated(e) && this.isValidObjectType(e)) return !0; if (e.userPrincipalName) { if (e.userPrincipalName = _.trim(e.userPrincipalName), !i.test(e.userPrincipalName)) return !1; o && this.findUserObjectIds(e) } else { if (!(!e.objectId || this.allowObjectIds && t.ObjectIdRegExp.test(e.objectId))) return !1; e.displayName = _.trim(e.displayName); var r = e.displayName.match(t.EmailValidator); if (!r) return !1; var n = r[2], a = r[3], s = r[4]; n ? (e.displayName = n, e.userPrincipalName = n, e.objectId = n, e.objectType = 3) : s && (e.displayName = a, e.userPrincipalName = s, e.objectId = s, e.objectType = 3), o && this.findUserObjectIds(e) } return !this.isUserRepeated(e) && this.isValidObjectType(e) }, o.prototype.findUsers = function (t) { var o = this, i = _.trim(t), r = this.services.promiseFactory.defer(); if (!i) return r.resolve([]), r.promise; var n = this.allowSecurityGroups || this.allowUnifiedGroups || this.allowEmailEnabledSecurityGroups, a = n ? this.blockUsers ? 2 : 3 : 1, s = !!this.includeGuests; return this.findUsersPromise = e.userDirectoryService.findUsers(i, a, e.constants.emailsListFindUsersLimit, s), this.findUsersPromise.then((function (e) { if (e.data) { var t = _.reduce(e.data, (function (e, t) { return o.isValidObjectType(t) && (t.aadAppId ? t.userAdditionalDetailsForAutoComplete = "AppID: " + t.aadAppId : t.userAdditionalDetailsForAutoComplete = t.userPrincipalName, t.searchString = i, e.push(t)), e }), []); r.resolve(t) } else r.reject() }), (function () { r.reject() })).finally((function () { o.findUsersPromise = null })), r.promise }, o.prototype.onTagAddedWithoutError = function (e) { this.viewModel.hasValidationError && this.clearInvalidUserError(), this.onTagAdded && this.onTagAdded({ $tag: e }) }, o.prototype.clearInvalidUserError = function () { var e = this.viewModel; e.hasValidationError = !1, e.errorMessage = "" }, o.prototype.resetViewModel = function () { var e = this.viewModel; return e.validEmailsList = [], e.validObjectIds = [], this.clearInvalidUserError(), e }, o.prototype.initializeViewModel = function (e) { var t = this; e && (e.validationTrigger = function () { return t.validationTrigger() }) }, o.prototype.isUserRepeated = function (e) { var t = _.filter(this.viewModel.inputUserList, (function (t) { return t.userPrincipalName && t.userPrincipalName === e.userPrincipalName || t.objectId && t.objectId === e.objectId })); return !_.isEmpty(t) }, o.prototype.isValidObjectType = function (e) { return 2 === e.objectType ? e.isSecurityGroup ? this.allowSecurityGroups || this.allowEmailEnabledSecurityGroups && 3 === e.groupType : 2 === e.groupType ? this.allowDistributionLists : this.allowUnifiedGroups : 1 === e.objectType && e.aadAppId ? this.allowServicePrincipals : (1 === e.objectType || 3 === e.objectType) && !this.blockUsers }, o.prototype.findUserObjectIds = function (e) { var t = this; this.findingUsers.push({ name: e.userPrincipalName, status: !0 }), this.isFindingUsers = !0, this.findUsers(e.userPrincipalName).then((function (o) { if (0 === o.length) { var i = _.findIndex(t.findingUsers, (function (t) { return t.name === e.userPrincipalName })); t.findingUsers[i].status = !1, t.isFindingUsers = _.some(t.findingUsers, (function (e) { return e.status === !0 })), t.showInvalidUserError(e) } else if (1 === o.length) { var r = _.findIndex(t.viewModel.inputUserList, (function (t) { return t.userPrincipalName === e.userPrincipalName })); t.viewModel.inputUserList[r].objectId = o[0].objectId, t.viewModel.inputUserList[r].objectType = o[0].objectType; var i = _.findIndex(t.findingUsers, (function (t) { return t.name === e.userPrincipalName })); t.findingUsers[i].status = !1, t.isFindingUsers = _.some(t.findingUsers, (function (e) { return e.status === !0 })), t.isFindingUsers || (t.findingUsers = []) } })) }, o })(); t.EmailsListController = r })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.EmailsList = { templateUrl: "components/emailsList/emailsList.html", bindings: { viewModel: "<", onTagAdded: "&?", onTagRemoved: "&?", allowDistributionLists: "<?", allowUnifiedGroups: "<?", allowEmailEnabledSecurityGroups: "<?", allowSecurityGroups: "<?", allowServicePrincipals: "<?", allowObjectIds: "<?", blockUsers: "<?", includeGuests: "<?", placeholder: "<?", maxTags: "<?", arialabel: "@?", arialabelledby: "@?", ariadescribedby: "@?", ariarequired: "<?", checkValidOrgUser: "<?", isFindingUsers: "=?" }, controller: e.createController(e.controllers.EmailsListController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t(e, t) { this.services = t } return t.createOptions = function () { return { additionalServices: ["errorOptionsHelper", "telemetryService", "customTraceLoggerService"] } }, t.prototype.$onInit = function () { if (!_.isEmpty(this.errorDetails.displayableErrorInfo)) { this.errorInfoItems = this.services.errorOptionsHelper.getErrorInfo(this.errorOptions); var t = this.services.customTraceLoggerService; if (t) { var o = t.flushLogEntries(), i = { errorInfoKey: e.localize.get("AdditionalErrorInfo_CorrelationIdText"), errorInfoValue: o }; this.errorInfoItems && this.errorInfoItems.splice(Math.min(this.errorInfoItems.length, 2), 0, i) } } return null }, t })(); t.ErrorDetailsInfoController = o })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.ErrorDetailsInfo = { templateUrl: "components/errorDetailsInfo/errorDetailsInfo.html", bindings: { errorDetails: "<", errorOptions: "<" }, controller: e.createController(e.controllers.ErrorDetailsInfoController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.Micro = 0] = "Micro", e[e.Small = 1] = "Small", e[e.Medium = 2] = "Medium", e[e.Large = 3] = "Large" })(t = e.IconSize || (e.IconSize = {})) })(t = e.viewModels || (e.viewModels = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = jsCommon.EnumExtensions, i = jsCommon.StringExtensions, r = "medium", n = (function () { function t(e, t) { this.services = t } return t.createOptions = function () { return { additionalServices: ["localizationService"] } }, t.prototype.onIconSelected = function (e) { this.config.onIconSelected(e) }, t.prototype.getIconSize = function (t) { return null == t.size ? r : o.toString(e.viewModels.IconSize, t.size).toLocaleLowerCase() }, t.prototype.getIconStaticClass = function (e) { return _.isEmpty(e.cssClass) ? this.getIconSize(e) : i.format("{0} {1}", e.cssClass, this.getIconSize(e)) }, t.prototype.isSelected = function (e) { return this.config.isIconSelected(e) }, t.prototype.getThemeColorLocalizedNames = function (e, t) { return this.services.localizationService.format("ColorPicker_ThemeColors_Series", [t, e]) }, t })(); t.IconSelectorController = n })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.IconSelector = { templateUrl: "components/iconSelector/iconSelector.html", bindings: { config: "<", icons: "<" }, controller: e.createController(e.controllers.IconSelectorController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.LazyIcon = { templateUrl: "components/lazyIcon/lazyIcon.html", bindings: { src: "<", placeholder: "<", placeholderSize: "<" } } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = 100, o = jsCommon.FocusManager, i = jsCommon.DomOrderFocusFinder, r = (function () { function e(e, t) { this.services = t, this.unregister = o.getInstance().register(this.services.$element.get(0)), this.focusFinder = new i } return e.createOptions = function () { return { additionalServices: ["modalDialogService", "$element"] } }, e.prototype.$postLink = function () { this.setFocus() }, e.prototype.$onDestroy = function () { this.unregister && this.unregister() }, e.prototype.setFocus = function () { var e = this, i = setInterval((function () { if (e.services.$element.is(":visible")) { clearInterval(i); var t = e.focusFinder.findNext(e.services.$element.get(0), !0, !0); return void (t && o.focus(t)) } }), t) }, e.prototype.onKeydown = function (e) { this.isDismissable() && 27 === e.which && this.onCloseButtonClick() }, e.prototype.onCloseButtonClick = function () { this.isDismissable() && (this.onCloseClick ? this.onCloseClick() : this.services.modalDialogService.close()) }, e.prototype.isDismissable = function () { return this.dismissable !== !1 }, e })(); e.DialogFrameController = r })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.DialogFrame = { controller: e.createController(e.controllers.DialogFrameController), templateUrl: "components/modalDialog/dialogFrame/dialogFrame.html", bindings: { onCloseClick: "&?", dismissable: "<?" }, transclude: { dialogHeader: "dialogHeader", dialogBody: "dialogBody", dialogFooter: "dialogFooter" } } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.services = t } return e.createOptions = function () { return { additionalServices: ["modalDialogService"] } }, e.prototype.close = function () { this.services.modalDialogService.close() }, e })(); e.FeatureNotSupportedDialogController = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.FeatureNotSupportedDialog = { controller: e.createController(e.controllers.FeatureNotSupportedDialogController), templateUrl: "components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialog.html", bindings: { message: "<", titleText: "<", learnMoreUrl: "<?" } } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.modalDialogService = e } return e.prototype.show = function (e, t, o) { var i = { titleText: e, message: t, learnMoreUrl: o }, r = { bindings: i, definitionTemplateCachePath: "components/modalDialog/featureNotSupportedDialog/featureNotSupportedDialogDefinition.html", dialogName: "FeatureNotSupported" }; return this.modalDialogService.showHostModalDialog(r) }, e })(); e.FeatureNotSupportedDialogBuilder = t })(t = e.dialogs || (e.dialogs = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var o = (function () { function t() { } return t.createOptions = function () { return { scopedServiceRoot: !0, scopedProviderInstanceName: "HostDialog", scopedDependencies: e.HostModalDialogServices.AvailableScopedServices } }, t })(); t.HostDialogController = o })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.HostDialogContainer = { templateUrl: "components/modalDialog/hostDialogContainer/hostDialogContainer.html", bindings: {}, transclude: !0, controller: e.createController(e.controllers.HostDialogController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.services = t } return e.createOptions = function () { return { additionalServices: ["localizationService", "modalDialogService"] } }, e.prototype.$onInit = function () { var e = this; this.config.messageText = this.services.localizationService.getOptional(this.config.messageText) || this.config.messageText, this.config.cancelButtonText = this.services.localizationService.getOptional(this.config.cancelButtonText) || this.config.cancelButtonText, this.config.okButtonText = this.services.localizationService.getOptional(this.config.okButtonText) || this.config.okButtonText, this.config.titleText = this.services.localizationService.getOptional(this.config.titleText) || this.config.titleText, _.isEmpty(this.config.additionalMessageTexts) || (this.config.additionalMessageTexts = _.map(this.config.additionalMessageTexts, (function (t) { return e.services.localizationService.getOptional(t) || t }))) }, e.prototype.ok = function () { this.services.modalDialogService.close(0) }, e.prototype.cancel = function () { this.services.modalDialogService.close(1) }, e })(); e.MessageDialogController = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.MessageDialog = { templateUrl: "components/modalDialog/messageDialog/messageDialog.html", bindings: { config: "<" }, controller: e.createController(e.controllers.MessageDialogController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.modalDialogService = e } return e.prototype.show = function (e, t) { var o = { config: t }, i = { dialogName: e, definitionTemplateCachePath: "components/modalDialog/messageDialog/messageDialogDefinition.html", bindings: o }; return this.modalDialogService.showHostModalDialog(i) }, e })(); e.MessageDialogBuilder = t })(t = e.dialog || (e.dialog = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.services = t } return e.createOptions = function () { return { additionalServices: ["localizationService", "modalDialogService"] } }, e.prototype.$onInit = function () { }, e.prototype.close = function () { this.services.modalDialogService.close(0) }, e })(); e.AboutVisualDialogController = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.AboutVisualDialog = { templateUrl: "components/modalDialog/aboutVisualDialog/aboutVisualDialog.html", bindings: { config: "<" }, controller: e.createController(e.controllers.AboutVisualDialogController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { var t = this; this.restrict = "E", this.replace = !0, this.transclude = !0, this.scope = { ngScrollbarsConfig: "<" }, this.template = '<div class="scrollbar-inner" drag-scroll ng-transclude></div>', this.link = function (e, o) { jsCommon.Zone.runOutsideAngular((function () { t.$timeout((function () { o.scrollbar(e.ngScrollbarsConfig) })), e.$on("$destroy", (function () { o.scrollbar("destroy") })) })) }, this.$timeout = e } return e.scrollVertical = function (e, t) { if (e && t) { var o = $(e), i = $(t), r = o.scrollTop(), n = o.offset(), a = i.offset(); a.top < n.top ? o.scrollTop(r - (n.top - a.top)) : a.top + i.height() > n.top + o.height() && o.scrollTop(r + a.top + i.height() - n.top - o.height()) } }, e })(); e.NgScrollbars = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = e.common.models.EmailsListModel, i = (function () { function e() { } return e.prototype.$onInit = function () { var e = this; this.cacheEmailsIfNeeded(), this.ngModel.$render = function () { return e.cacheEmailsIfNeeded() } }, Object.defineProperty(e.prototype, "isSharedWithOrg", { get: function () { return "all" === this.getModel().sharedWith }, set: function (e) { var t = this.getModel(); e ? (this.cacheEmailsIfNeeded(), t.sharedWith = "all") : t.sharedWith = this.emails || new o }, enumerable: !0, configurable: !0 }), e.prototype.getModel = function () { return this.ngModel.$viewValue }, e.prototype.cacheEmailsIfNeeded = function () { var e = this.getModel().sharedWith; e instanceof o && (this.emails = e) }, e })(); t.ShareAccessController = i })(o = t.controllers || (t.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.ShareAccess = { controller: e.createController(e.controllers.ShareAccessController), templateUrl: "components/shareAccess/shareAccess.html", require: { ngModel: "ngModel" } } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.scope = e, this.services = t } return e.createOptions = function () { return { additionalServices: ["$element", "$attrs", "$transclude"] } }, e.prototype.transcludeContent = function () { var e = this; this.services.$element.empty(), this.transcludedScope && this.transcludedScope.$destroy(), this.services.$transclude((function (t, o) { e.services.$element.append(t), e.transcludedScope = o })) }, e.prototype.$onInit = function () { var e = this, t = this.services.$attrs.trigger; this.scope.$parent.$watch(t, (function (t, o) { t !== o && e.transcludeContent() })), this.transcludeContent() }, e })(); e.TriggeredRecompileController = t })(t = e.controllers || (e.controllers = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { t.TriggeredRecompile = { transclude: !0, controller: e.createController(e.controllers.TriggeredRecompileController) } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.Expando = { templateUrl: "components/expando/expando.html", bindings: { expanded: "<" } } })(t = e.components || (e.components = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.modalDialogService = e } return e.prototype.show = function (e, t) { var o = { config: t }, i = { dialogName: e, definitionTemplateCachePath: "components/modalDialog/aboutVisualDialog/aboutVisualDialogDefinition.html", bindings: o }; return this.modalDialogService.showHostModalDialog(i) }, e })(); e.AboutVisualDialogBuilder = t })(t = e.dialog || (e.dialog = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var o; !(function (t) {
            var o = e.common.controllers.TransformElement; t.TransformSelector = "transform"; var i = (function () {
                function e(e, t) { this.services = t } return e.createOptions = function () { return { additionalServices: ["$element", "platformCapabilities"] } }, e.prototype.$postLink = function () { this.position && this.updatePosition(this.position), this.attachHandlers && this.updateTransformElement() }, e.prototype.$onDestroy = function () { this.transformElement && this.transformElement.destroy() }, e.prototype.$onChanges = function (e) {
                    var t = !1; if (e.autoScrollSelector) { var o = e.autoScrollSelector, i = o.currentValue; o.previousValue && (this.autoScrollElement = void 0), i && (this.autoScrollElement = $(this.services.$element).closest(i)), t = !e.autoScrollSelector.isFirstChange() } e.attachHandlers && e.attachHandlers.currentValue && !e.attachHandlers.isFirstChange() && (t = !0), e.position && !e.position.isFirstChange() && this.updatePosition(e.position.currentValue),
                        e.transformOptions && !e.transformOptions.isFirstChange() && (t = !0), this.attachHandlers && t && this.updateTransformElement()
                }, e.prototype.updateTransformElement = function () { var e = __assign({}, this.transformOptions, { supportsPointerCapture: this.services.platformCapabilities.supportsPointerCapture, restrictDraw: this.restrictDraw }); this.autoScrollElement && (e.autoScrollParent = this.autoScrollElement), this.transformElement ? this.transformElement.updateOptions(e) : this.transformElement = new o(this.services.$element, e) }, e.prototype.updatePosition = function (e) { var t = []; e.angle && t.push("rotate(" + e.angle + "deg)"), t.push("translate(" + e.x + "px, " + e.y + "px)"), this.services.$element.height(e.height).width(e.width).css("transform", t.join(" ")).zIndex(e.z) }, e
            })(); t.TransformController = i
        })(o = t.components || (t.components = {}))
    })(t = e.common || (e.common = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.restrict = "A", this.replace = !1, this.link = function (e, t, o) { var i = e.$watch(o.bindAriaLabelAndTooltip, (function (e) { t.attr("aria-label", e || "").attr("title", e || "") })); e.$on("$destroy", (function () { i() })) } } return e })(); e.BindAriaLabelAndTooltip = t })(t = e.directives || (e.directives = {})) })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})), define("PowerBICommon/services/cloudDiscovery", ["require", "exports"], (function (e, t) { function o(e, t, o) { return new a(e, t, o) } function i(e) { if (!e || !e.services || !e.clients) { return { error: { code: r } } } for (var t = { cloudName: e.cloudName, service: {}, client: {} }, o = 0, i = e.services; o < i.length; o++) { var n = i[o]; switch (n.name) { case "aad": t.service.aad = n; break; case "powerbi-marketing": t.service.powerbiMarketing = n; break; case "powerbi-frontend": t.service.powerbiFrontend = n; break; case "powerbi-backend": t.service.powerbiBackend = n; break; case "bingmaps-control": t.service.bingmapsControl = n; break; case "bingmaps-geocoding": t.service.bingmapsGeocoding = n; break; case "bingmaps-spatialdata": t.service.bingmapsSpatialdata = n } } for (var a = 0, s = e.clients; a < s.length; a++) { var c = s[a]; switch (c.name) { case "powerbi-desktop": t.client.powerbiDesktop = c; break; case "powerbi-mobile": t.client.powerbiMobile = c; break; case "powerbi-gateway": t.client.powerbiGateway = c; break; case "powerbi-excel-addin": t.client.powerbiExcelAddin = c; break; case "powerbi-msolap": t.client.powerbiMsolap = c } } return { data: t } } Object.defineProperty(t, "__esModule", { value: !0 }); var r = "InconsistentServerResponceData", n = "v201606"; t.create = o; var a = (function () { function e(e, t, o) { this.userInfo = e, this.promiseFactory = t, this.httpService = o } return e.prototype.getCloudDiscoveryData = function (e) { var t = this, o = this.promiseFactory.defer(); return this.cachedResult ? o.resolve(this.cachedResult) : (e ? this.backendUrl = "https://api.powerbi.com/powerbi/globalservice/" + n + "/environments/discover?user=" + this.userInfo.name : this.backendUrl = "/powerbi/globalservice/" + n + "/environments/discover?user=" + this.userInfo.name, this.httpService.post(this.backendUrl, null, null).then((function (e) { var r = i(e.data); r.error ? o.reject(r) : (t.cachedResult = r, o.resolve(r)) }), (function (e) { var t = { error: e.error }; o.reject(t) }))), o.promise }, e })(); t.convertRawData = i })); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { var i = new o(e, t, {}); return function (e) { return i.get(e) } } e.createLazySyncInjector = t; var o = (function () { function e(e, t, o) { this.$inj = e, this.factories = t, this.instances = o } return e.prototype.get = function (e) { var t = this.instances[e]; if (void 0 !== t) return t; var o = this.factories[e], i = o.ng, r = _.size(i), n = new Array(r), a = 0; if (r) for (var s = this.$inj, c = 0, l = i; c < l.length; c++) { var d = l[c]; n[a++] = s.get(d) } return this.instances[e] = o.fn.apply(o, n) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new i(e, t) } var o = (function () { function e(e) { this.mixins = e } return e.prototype.update = function (e) { for (var t = 0, o = this.mixins; t < o.length; t++) { o[t].update(e) } }, e.prototype.destroy = function () { for (var e = 0, t = this.mixins; e < t.length; e++) { var o = t[e]; o.destroy && o.destroy() } }, e })(); e.MixinProvider = o, e.createMixinsProvider = t; var i = (function () { function e(e, t) { this.$injector = e, this.factories = t, this.instances = [] } return e.prototype.get = function (e) { var t = this.instances[e]; if (void 0 !== t) return t; for (var i = [], r = this.factories[e] || [], n = 0, a = r; n < a.length; n++) { var s = a[n]; i.push(this.instantiateMixin(s)) } return t = new o(i), this.instances[e] = t, t }, e.prototype.instantiateMixin = function (e) { var t = e.ng, o = !_.isEmpty(t), i = {}; if (o) for (var r = this.$injector, n = 0, a = t; n < a.length; n++) { var s = a[n], c = void 0; c = r.get(s), i[s] = c } return e.fn(i) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, i) { return new o(e, t, i) } e.createOptionsDialogBuilder = t; var o = (function () { function e(e, t, o) { this.modalDialogService = e, this.rootScope = t, this.timeoutService = o } return e.prototype.show = function (e, t, o, i, r, n, a) { var s = this, c = this.rootScope.$new(!0); if (_.isEmpty(i)) return c; null == a || a > i.length ? c.selected = 0 : c.selected = a, c.options = _.map(i, (function (e) { return e.name })); var l = [new InJs.ModalDialogAction(r, function () { var e = i[c.selected].action; c.closeDialog(), s.timeoutService((function () { e() }), 0) }), new InJs.ModalDialogAction(n, function () { c.closeDialog() })], d = { dialogName: e, isDismissable: !0, scope: c, template: "<options-modal-dialog></options-modal-dialog>", dialogActions: l, containerCssClass: o, htmlMessageText: t }; return this.modalDialogService.showLegacyWebModalDialog(d) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o(e, t, o, i, n, a) { var s = new r(e, t, o, i, n, a, {}); return function (e) { return s.get(e) } } var i = e.PbiPromise; t.createScopedLazyProvider = o; var r = (function () { function e(e, t, o, i, r, n, a) { this.loader = e, this.$inj = t, this.scoped = o, this.$scope = i, this.promiseFactory = r, this.factories = n, this.instances = a } return e.prototype.get = function (e) { return __awaiter(this, void 0, i, (function () { var t, o, i, r, n, a, s, c, l, d, u, p, h, m, f, g, v, y, b, m, w, S, D, C, T, E, I, P = this; return __generator(this, (function (k) { switch (k.label) { case 0: if (t = this.instances[e], void 0 !== t) return [2, t.promise]; if (t = this.instances[e] = this.promiseFactory.defer(!0), o = this.factories[e], !o) return t.reject(), [2, t.promise]; if (i = o.ng, r = _.size(i), n = o.scoped, a = _.size(n), s = o.scopedModular, c = _.size(s), l = new Array(r + a + c), d = 0, r) for (u = this.$inj, p = 0, h = i; p < h.length; p++)m = h[p], f = void 0, f = "$scope" === m ? this.$scope : u.get(m), l[d++] = f; if (a) for (g = this.scoped, v = this.$scope, y = 0, b = n; y < b.length; y++)m = b[y], l[d++] = g.get(m, v); if (!c) return [3, 4]; w = _.map(s, (function (e) { return P.get(e) })), S = 0, D = w, k.label = 1; case 1: return S < D.length ? (C = D[S], T = l, E = d++ , [4, C]) : [3, 4]; case 2: T[E] = k.sent(), k.label = 3; case 3: return S++ , [3, 1]; case 4: return [4, this.loader.require(o.source)]; case 5: return I = k.sent(), t.resolve(o.fn.apply(o, [I].concat(l))), [2, t.promise] } })) })) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, i, r) { var n = new o(e, t, i, r, {}); return function (e) { return n.get(e) } } e.createScopedLazySyncProvider = t; var o = (function () { function e(e, t, o, i, r) { this.$inj = e, this.scoped = t, this.$scope = o, this.factories = i, this.instances = r } return e.prototype.get = function (e) { var t = this.instances[e]; if (void 0 !== t) return t; var o = this.factories[e], i = o.ng, r = _.size(i), n = o.scoped, a = _.size(n), s = new Array(r + a), c = 0; if (r) for (var l = this.$inj, d = 0, u = i; d < u.length; d++) { var p = u[d], h = void 0; h = "$scope" === p ? this.$scope : l.get(p), s[c++] = h } if (a) for (var m = this.scoped, f = this.$scope, g = 0, v = n; g < v.length; g++) { var p = v[g]; s[c++] = m.get(p, f) } return this.instances[e] = o.fn.apply(o, s) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new i(e, t) } var o = jsCommon.ScreenReaderUtil; e.createScreenReaderService = t; var i = (function () { function e(e, t) { var o = this; this.localizationService = e, this.debounceDelay = 800, this.debounceMessageQueue = {}, this.debouncePriorities = [], this.lastDebounce = Date.now(), this.fullstop = this.localizationService.get("ScreenReader_Fullstop"), t.runOutsideAngular((function () { window.setInterval((function () { Date.now() - o.lastDebounce < o.debounceDelay || o.debounceCallback() }), o.debounceDelay / 2) })) } return e.prototype.concatMessages = function (e) { if (!_.isEmpty(e)) return e.join(this.fullstop + " ") }, e.prototype.alert = function (e) { o.alertScreenReader(e) }, e.prototype.alertPolite = function (e) { o.alertScreenReader(e, { isPolite: !0 }) }, e.prototype.alertWithDebounce = function (e, t) { this.lastDebounce = Date.now(), this.debounceMessageQueue[e] = t }, e.prototype.cancelDebounce = function (e) { this.debounceMessageQueue.hasOwnProperty(e) && delete this.debounceMessageQueue[e] }, e.prototype.extendDebounce = function (e) { this.lastDebounce = Date.now() }, e.prototype.addDebouncePriority = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; for (var o = 0, i = -1, r = 0, n = e; r < n.length; r++) { var a = n[r]; (i = this.debouncePriorities.indexOf(a)) >= 0 ? o = i : (this.debouncePriorities.splice(o, 0, a), o++) } }, e.prototype.debounceCallback = function () { var e = this, t = Object.keys(this.debounceMessageQueue); t = _.sortBy(t, (function (t) { return e.debouncePriorities.indexOf(t) })); for (var o = [], i = 0, r = t; i < r.length; i++) { var n = r[i], a = this.debounceMessageQueue[n]; a && (_.isString(a) && o.push(a), delete this.debounceMessageQueue[n]) } o.length > 0 && this.alert(o.join(this.fullstop + " ")) }, e })() })(t = e.common || (e.common = {})) })(powerbi || (powerbi = {}));; "use strict"; var powerbi; !(function (e) { var n; !(function (e) { angular.module("powerbi.a11y", []), e.PbiA11yBaseBlockDefinitions = [{ name: "AccessibleClick", dependencies: ["$parse"], blockType: 1, consumerHostFlags: 16383 }, { name: "FocusOn", blockType: 1, consumerHostFlags: 16383 }, { name: "FocusTrap", dependencies: ["$parse", "focusTrapService"], blockType: 1, consumerHostFlags: 16383 }, { name: "PbiAutoFocus", dependencies: ["$timeout"], blockType: 1, consumerHostFlags: 16383 }, { name: "AlertOnEnter", dependencies: ["focusTracker"], blockType: 1, consumerHostFlags: 16383 }, { name: "AlertOnExit", dependencies: ["focusTracker"], blockType: 1, consumerHostFlags: 16383 }, { name: "OnFocusEnter", dependencies: ["$parse", "focusTracker"], blockType: 1, consumerHostFlags: 16383 }, { name: "OnFocusExit", dependencies: ["$parse", "focusTracker"], blockType: 1, consumerHostFlags: 16383 }, { name: "KeyboardShortcuts", dependencies: ["shortcutsService"], blockType: 1, consumerHostFlags: 16383 }] })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = ["BUTTON", "A", "INPUT", "TEXTAREA", "SELECT", "DETAILS", "SUMMARY"], r = (function () { function e(e) { var r = this; this.$parse = e, this.retrict = "A", this.scope = !1, this.compile = function (e, t) { var i = r.$parse(t.accessibleClick); return function (e, r) { r.on("click", (function (n) { var r = function () { return i(e, { $event: n }) }; e.$apply(r) })), _.includes(n, r[0].nodeName) || r.on("keydown", (function (n) { var t = function () { return i(e, { $event: n }) }; 32 !== n.keyCode && 13 !== n.keyCode || !r.is(document.activeElement) || (n.preventDefault(), e.$apply(t)) })) } } } return e })(); e.AccessibleClick = r })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = (function () { function e(e) { var n = this; this.focusTracker = e, this.retrict = "A", this.link = function (e, r, t) { var i = t.alertOnEnter, o = n.focusTracker.announceOnFocusTransition(i, r.get(0), "inward", "assertive", !1); e.$on("$destroy", (function () { o.unsubscribe() })) } } return e })(); e.AlertOnEnter = n })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = (function () { function e(e) { var n = this; this.focusTracker = e, this.retrict = "A", this.link = function (e, r, t) { var i = t.alertOnExit, o = n.focusTracker.announceOnFocusTransition(i, r.get(0), "outward", "assertive", !1); e.$on("$destroy", (function () { o.unsubscribe() })) } } return e })(); e.AlertOnExit = n })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = (function () { function e() { this.restrict = "A", this.link = function (e, n, r) { var t = e.$watch(r.focusOn, (function (e, r) { void 0 !== e && setTimeout((function () { jsCommon.FocusManager.focus(n[0]) }), 0) })); e.$on("$destroy", (function () { t() })) } } return e })(); e.FocusOn = n })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = jsCommon.DOMConstants, r = (function () { function e(e, r) { var t = this; this.$parse = e, this.focusTrapService = r, this.restrict = "A", this.link = function (e, r, i) { var o = r; o.$$trapDestroyed = !1, i.focusOnEscape && (o.$$escapeHandler = t.$parse(i.focusOnEscape), o.$$keydownHandler = function (n) { return t.handleKeyEvent(n, e, o) }, o.on(n.keyDownEventName, o.$$keydownHandler)); var c = e.$watch((function () { return _.some(r.find(":tabbable")) }), (function (e, n) { e === !0 && (t.focusTrapService.registerFocusTrap(o), c()) })); o.on("$destroy", (function () { return t.destroy(o) })) } } return e.prototype.destroy = function (e) { e.$$trapDestroyed || (e.$$keydownHandler && e.off(n.keyDownEventName, e.$$keydownHandler), this.focusTrapService.unregisterFocusTrap(e), e.$$trapDestroyed = !0) }, e.prototype.handleKeyEvent = function (e, n, r) { switch (e.keyCode) { case 27: r.$$escapeHandler && n.$evalAsync(r.$$escapeHandler), this.destroy(r) } }, e })(); e.FocusTrap = r })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = (function () { function e(e) { var n = this; this.shortcutsService = e, this.restrict = "A", this.link = function (e, r, t) { var i = jsCommon.FocusManager.setFocusOnPreviousElementOnDestroy(r, !0, !0); r.on("$destroy", (function () { return i() })); var o = jsCommon.createElementShortcut(t.keyboardShortcuts, r.get(0)); o && (n.shortcutsService.registerShortcut(o), e.$on("$destroy", (function () { return n.shortcutsService.unregisterShortcut(o) }))) } } return e })(); e.KeyboardShortcuts = n })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = (function () { function e(e, n) { var r = this; this.$parse = e, this.focusTracker = n, this.retrict = "A", this.link = function (e, n, t) { var i = r.$parse(t.onFocusEnter), o = r.focusTracker.onFocusTransition(n.get(0), "inward").subscribe((function () { return e.evalAsync(i) })); e.$on("$destroy", (function () { o.unsubscribe() })) } } return e })(); e.OnFocusEnter = n })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = (function () { function e(e, n) { var r = this; this.$parse = e, this.focusTracker = n, this.retrict = "A", this.link = function (e, n, t) { var i = r.$parse(t.onFocusExit), o = r.focusTracker.onFocusTransition(n.get(0), "outward").subscribe((function () { return e.evalAsync(i) })); e.$on("$destroy", (function () { o.unsubscribe() })) } } return e })(); e.OnFocusExit = n })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n = (function () { function e(e) { var n = this; this.$timeout = e, this.restrict = "A", this.link = function (e, r, t) { var i = function () { return r.is(":tabbable") || r.find(":tabbable").length > 0 }, o = e.$watch(i, (function (e, t) { if (e === !0) { var i = r.is(":tabbable") ? r.get(0) : r.find(":tabbable").get(0); i && n.$timeout((function () { return i.focus() })), o() } })) } } return e })(); e.PbiAutoFocus = n })(n = e.directives || (e.directives = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var n; !(function (e) { var n; !(function (e) { var n; !(function (e) { function n(e) { var n = $(document.activeElement); return n.is(e) || n.closest(e).length > 0 } e.isFocusInTree = n })(n = e.FocusUtility || (e.FocusUtility = {})) })(n = e.util || (e.util = {})) })(n = e.a11y || (e.a11y = {})) })(powerbi || (powerbi = {}));; "use strict"; var __awaiter = this && this.__awaiter || function (e, t, o, i) { return new (o || (o = Promise))(function (a, r) { function n(e) { try { l(i.next(e)) } catch (e) { r(e) } } function s(e) { try { l(i.throw(e)) } catch (e) { r(e) } } function l(e) { e.done ? a(e.value) : new o(function (t) { t(e.value) }).then(n, s) } l((i = i.apply(e, t || [])).next()) }) }, __generator = this && this.__generator || function (e, t) { function o(e) { return function (t) { return i([e, t]) } } function i(o) { if (a) throw new TypeError("Generator is already executing."); for (; l;)try { if (a = 1, r && (n = 2 & o[0] ? r.return : o[0] ? r.throw || ((n = r.return) && n.call(r), 0) : r.next) && !(n = n.call(r, o[1])).done) return n; switch (r = 0, n && (o = [2 & o[0], n.value]), o[0]) { case 0: case 1: n = o; break; case 4: return l.label++ , { value: o[1], done: !1 }; case 5: l.label++ , r = o[1], o = [0]; continue; case 7: o = l.ops.pop(), l.trys.pop(); continue; default: if (n = l.trys, !(n = n.length > 0 && n[n.length - 1]) && (6 === o[0] || 2 === o[0])) { l = 0; continue } if (3 === o[0] && (!n || o[1] > n[0] && o[1] < n[3])) { l.label = o[1]; break } if (6 === o[0] && l.label < n[1]) { l.label = n[1], n = o; break } if (n && l.label < n[2]) { l.label = n[2], l.ops.push(o); break } n[2] && l.ops.pop(), l.trys.pop(); continue }o = t.call(e, l) } catch (e) { o = [6, e], r = 0 } finally { a = n = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } } var a, r, n, s, l = { label: 0, sent: function () { if (1 & n[0]) throw n[1]; return n[1] }, trys: [], ops: [] }; return s = { next: o(0), throw: o(1), return: o(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this }), s }, powerbi; !(function (e) { var t; !(function (t) { function o(t) { var o = [{ name: "AuthDialog", blockType: 1, consumerHostFlags: 12 }, { name: "AuthenticationDialog", blockType: 2, consumerHostFlags: 12 }, { name: "AuthenticationDialogBody", blockType: 2, consumerHostFlags: 12 }, { name: "DatasetParametersDialog", blockType: 1, consumerHostFlags: 12 }]; e.common.registerBuildingBlocksForHost(t, o, { componentsTarget: "powerbi.connectivity", componentsMap: e.connectivity.components, directivesTarget: "powerbi.connectivity.directives", directivesMap: e.connectivity.directives }) } angular.module("powerbi.connectivity.controllers", []), angular.module("powerbi.connectivity.directives", []), angular.module("powerbi.connectivity.components", []); var i = ["powerbi.common", "powerbi.connectivity.controllers", "powerbi.connectivity.directives", "powerbi.connectivity.components"]; angular.module("powerbi.connectivity", i).factory("gatewaysMetadataService", ["promiseFactory", "gatewaysMetadataHttpService", "telemetryService", "featureSwitchService", function (t, o, i, a) { return e.connectivity.createGatewaysMetadataService(t, o, i, a) }]).factory("gatewaysMetadataHttpService", [function () { return e.connectivity.createGatewaysMetadataHttpService() }]), t.registerBuildingBlocksForHost = o })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = e.common.constants, i = window, a = (function () { function t() { } return t.convertTestPackageConnectionDetailsToErrorMessage = function (t) { return ["SharePointProviderUnableToGetFilesAndFolders", "SharePointProviderUnableToGetFileProperties", "SharePoint_ItemNotExist", "SharePoint_FileNotFound", "OneDriveProviderUnableToGetFileProperties"].indexOf(t.faultCode) < 0 ? e.common.localize.get("ErrorMessage_DefaultTitle") : e.common.localize.get("SettingsDataset_OneDrive_FileNotFound") }, t.retrieveUnderlyingErrorMessageFromPowerBIServiceException = function (e, o) { return e ? t.retrieveErrorDetailsMessageFromPowerBIServiceException(e.error, o) : null }, t.retrieveErrorDetailsMessageFromPowerBIServiceException = function (e, t) { if (e && e["pbi.error"] && e["pbi.error"].details) { var o = e["pbi.error"].details.filter((function (e) { return e.code === t })); if (!_.isEmpty(o)) return o[0].detail.value } return null }, t.convertHttpResultToNameValuePairs = function (t) { if (t) { return [{ Name: e.common.localize.get("AdditionalErrorInfo_ActivityIdText"), Value: t.activityId }, { Name: e.common.localize.get("AdditionalErrorInfo_RequestIdText"), Value: t.requestId }, { Name: e.common.localize.get("AdditionalErrorInfo_ErrorCodeText"), Value: t.status.toString() }, { Name: e.common.localize.get("AdditionalErrorInfo_TimestampText"), Value: (new Date).toString() }, { Name: e.common.localize.get("AdditionalErrorInfo_VersionText"), Value: e.build }, { Name: e.common.localize.get("AdditionalErrorInfo_ClusterUriText"), Value: i.clusterUri }] } return null }, t.convertInvalidParameterErrorToNameValuePairs = function (e) { try { var t = e.error; if (null == t || t.code !== o.ContentProviderInvalidModelParameterErrorCode || null == t["pbi.error"] || null == t["pbi.error"].details || 0 === t["pbi.error"].details.length) return null; for (var i = [], a = 0, r = t["pbi.error"].details; a < r.length; a++) { var n = r[a]; if (null != n && null != n.code && null != n.detail && null != n.detail.value) { var s = n.code, l = n.detail.value; i.push({ Name: s, Value: l }) } } return i } catch (e) { return null } }, t })(); t.ErrorConverterHelper = a })(o = t.helpers || (t.helpers = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { } return e.alwaysPromptForCredentials = function (e, t) { if (null != e || null != t) return e && e.alwaysPromptForContentProviderCreds || t && t.alwaysPrompt }, e })(); e.DatasetParametersDialogHelper = t })(t = e.helpers || (e.helpers = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = e.common.contracts.gateway.CredentialType, i = (function () { function e(e, t) { this.services = t } return e.createOptions = function () { return { additionalServices: ["localizationService"] } }, e.prototype.$onInit = function () { this.initAuthDialog() }, e.prototype.dismissSpinnerError = function () { this.viewModel.authDialogModel.showSpinner = !1, this.viewModel.authDialogModel.showError = !1, this.viewModel.authDialogModel.isAuthenticating = !1 }, e.prototype.shouldShowOAuthNotSupported = function () { return this.viewModel.showOAuthNotSupported() || this.showOAuthNotSupported }, e.prototype.customizeAuthDialog = function () { var e = this.viewModel.authDialogModel; switch (this.resetAuthDialogState(), e.datasource.credentialTypes[e.selectedAuthenticationIndex]) { case o.Anonymous: case o.WindowsWithoutImpersonation: this.customizeAuthDialogShowNothing(); break; case o.Basic: this.customizeAuthDialogShowUserNameAndPassword(); break; case o.OAuth2: this.customizeAuthDialogShowSignIn(); break; case o.Key: this.customizeAuthDialogShowAccountKey(); break; case o.Windows: this.customizeAuthDialogShowDetailsMessage(this.services.localizationService.get("AuthDialog_DetailsMessage_WindowsAuth")) } }, e.prototype.isRDLReport = function () { return 0 === this.viewModel.authDialogModel.assetType }, e.prototype.initAuthDialog = function () { this.showOAuthNotSupported = !1; var e = this.viewModel.authDialogModel; e.selectedAuthenticationIndex || (e.selectedAuthenticationIndex = 0), e.skipTestConnection || (e.skipTestConnection = !1), e.editableField1Value = "", e.editableField2Value = "", e.showSingleSignOn = e.allowSingleSignOn, e.isSingleSignOnEnabled = null != e.datasource && 2 === e.datasource.singleSignOnType, this.customizeAuthDialog(), this.dismissSpinnerError() }, e.prototype.resetAuthDialogState = function () { this.showOAuthNotSupported = !1, this.viewModel.authDialogModel.isAuthenticating = !1 }, e.prototype.customizeAuthDialogShowNothing = function () { this.viewModel.authDialogModel.showEditableField1 = !1, this.viewModel.authDialogModel.showEditableField2 = !1, this.viewModel.authDialogModel.showWaitingMessageForOAuth = !1, this.viewModel.authDialogModel.editableField1Label = "", this.viewModel.authDialogModel.showDetailsMessage = !1 }, e.prototype.customizeAuthDialogShowUserNameAndPassword = function () { this.viewModel.authDialogModel.showEditableField1 = !0, this.viewModel.authDialogModel.showEditableField2 = !0, this.viewModel.authDialogModel.showWaitingMessageForOAuth = !1, this.viewModel.authDialogModel.showDetailsMessage = !1, this.viewModel.authDialogModel.editableField1Label = this.services.localizationService.get("AuthDialog_FieldName_Username"), this.viewModel.authDialogModel.editableField2Label = this.services.localizationService.get("AuthDialog_FieldName_Password") }, e.prototype.customizeAuthDialogShowAccountKey = function () { this.viewModel.authDialogModel.showEditableField1 = !0, this.viewModel.authDialogModel.showEditableField2 = !1, this.viewModel.authDialogModel.showWaitingMessageForOAuth = !1, this.viewModel.authDialogModel.editableField1Label = this.services.localizationService.get("AuthDialog_FieldName_AccountKey") }, e.prototype.customizeAuthDialogShowSignIn = function () { if (this.viewModel.authDialogModel.showEditableField1 = !1, this.viewModel.authDialogModel.showEditableField2 = !1, this.viewModel.authDialogModel.showWaitingMessageForOAuth = !1, this.viewModel.authDialogModel.showDetailsMessage = !1, null == this.viewModel.authDialogModel.datasource.oAuth2URL) return this.showOAuthNotSupported = !0, void (this.viewModel.authDialogModel.isAuthenticating = !0) }, e.prototype.customizeAuthDialogShowDetailsMessage = function (e) { this.viewModel.authDialogModel.showEditableField1 = !1, this.viewModel.authDialogModel.showEditableField2 = !1, this.viewModel.authDialogModel.showWaitingMessageForOAuth = !1, this.viewModel.authDialogModel.editableField1Label = "", this.viewModel.authDialogModel.showDetailsMessage = !0, this.viewModel.authDialogModel.detailsMessage = e }, e })(); t.AuthenticationDialogBodyController = i })(o = t.controllers || (t.controllers = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { o.AuthenticationDialogBody = { templateUrl: "components/authenticationDialogBody/authenticationDialogBody.html", bindings: { viewModel: "<" }, controller: e.common.createController(t.controllers.AuthenticationDialogBodyController) } })(o = t.components || (t.components = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = e.common.constants, i = e.common.contracts.gateway.CredentialType, a = e.common.EncryptionContext, r = e.connectivity.helpers.ErrorConverterHelper, n = e.common.models.ModalDialogModel, s = e.common.models, l = e.common.contracts.gateway.PrivacyLevel, c = e.common.models.TestConnectionState, d = window, u = (function () { function t(e, t) { this.services = t, this.loginWindow = null } return t.createOptions = function () { return { additionalServices: ["$window", "datasetsService", "gatewaysMetadataService", "localizationService", "moduleLoader", "promiseFactory", "telemetryService"] } }, t.prototype.$onInit = function () { var e = this; this.initModalDialog(), this.getEntropy(), this.dialogBodyModel = { authDialogModel: this.viewModel, errorDetails: function () { return e.errorDetails }, errorMessage: function () { return e.errorMessage }, showOAuthError: function () { return e.showOAuthError }, oAuthErrorMessage: function () { return e.oAuthErrorMessage }, showOAuthNotSupported: function () { return e.showOAuthNotSupported } } }, t.prototype.closeDialog = function () { var t = this; if (this.viewModel.showModalDialog = !1, this.viewModel.showPlainUI) { var i = this.services.$window.parent; if (null != i) { var a = { message: e.common.constants.contentProviderStoreCloseModalDialogMessage }; i.postMessage(JSON.stringify(a), o.hostOrigin) } } setTimeout((function () { t.notifyCloseDialog && t.notifyCloseDialog() }), 0) }, t.prototype.confirmDialog = function () { return this.viewModel.showError = !1, this.viewModel.allowSingleSignOn && this.isSingleSignOnChanged() ? void this.updateSingleSignOn() : this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex] === i.OAuth2 && void 0 === this.oAuthResponse ? void this.signInThroughOAuth() : (this.viewModel.showSpinner = !0, this.dialogModel.isConfirmButtonDisabled = !0, this.viewModel.isAuthenticating = !0, void (this.viewModel.datasource.isCloudDirectQuery ? this.updateCloudDirectQueryCredentials() : this.updateDatasourceRequest())) }, t.prototype.initModalDialog = function () { this.dialogModel = new n((!1), this.services.localizationService.get("AuthDialog_LinkText_SignIn"), (!0), (!1), (!1), (!1)); var e = this.dialogModel, t = this.viewModel, o = this.services.localizationService; e.cancelButtonText = o.get("ModalDialogButtonText_Cancel"), e.isConfirmButtonDisabled = !1, e.autoCloseDialogOnConfirmButtonSelected = !1, e.confirmButtonImportance = s.ButtonImportance.Elevated, e.cancelButtonImportance = s.ButtonImportance.Elevated, this.showOAuthError = !1, this.showOAuthNotSupported = !1, t.showModalDialog = !0, t.showError = !1, t.showSingleSignOn = this.viewModel.allowSingleSignOn, t.isSingleSignOnEnabled = null != this.viewModel.datasource && 2 === this.viewModel.datasource.singleSignOnType, this.oAuthErrorMessage = o.get("OAuth_Security_Error") }, t.prototype.getEntropy = function () { var e = this; this.services.gatewaysMetadataService.getEntropy().then((function (t) { if (t) { e.entropy = []; for (var o = t.length, i = 0; i < o; i++)e.entropy.push(t.charCodeAt(i)) } else e.entropy = a.generateEntropy() })) }, t.prototype.isSingleSignOnChanged = function () { var e = this.viewModel.isSingleSignOnEnabled, t = this.viewModel.datasource.singleSignOnType; return e && 2 !== t || !e && 0 !== t }, t.prototype.updateCloudDirectQueryCredentials = function () { var e = this, t = this.services.localizationService, o = this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex], i = this.getCredentialsFromInput(), a = { credentials: JSON.stringify(i), credentialType: o, encryptedConnection: 0, privacyLevel: l.Public, encryptionAlgorithm: "none", skipTestConnection: this.viewModel.skipTestConnection }; this.services.gatewaysMetadataService.updateCredentials(this.viewModel.datasource.gatewayObjectId, this.viewModel.datasource.dataSourceObjectId, a).then((function () { if (e.resetModelAfterAuthentication(!1), e.viewModel.datasource.testConnectionState = c.Passed, e.datasetDatasourceUpdated) { var t = e.viewModel.datasource, o = { name: t.name ? t.name : t.fullName }; e.datasetDatasourceUpdated(o) } e.closeDialog() }), (function (o) { e.resetModelAfterAuthentication(!0), e.errorMessage = t.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"), e.errorDetails = r.convertHttpResultToNameValuePairs(o) })) }, t.prototype.updateSingleSignOn = function () { var e = this, t = this.services.localizationService; this.services.gatewaysMetadataService.updateDataSource(this.viewModel.datasource.gatewayObjectId, this.viewModel.datasource.dataSourceObjectId, { dataSourceType: null, onPremGatewayRequired: null, connectionDetails: null, credentialDetails: null, dataSourceAnnotation: null, supportedAuthenticationTypes: null, singleSignOnType: this.viewModel.isSingleSignOnEnabled === !0 ? 2 : 0 }).then((function () { e.resetModelAfterAuthentication(!1), e.viewModel.datasource.singleSignOnType = e.viewModel.isSingleSignOnEnabled ? 2 : 0, e.confirmDialog() }), (function (o) { e.resetModelAfterAuthentication(!0), e.errorMessage = t.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"), e.errorDetails = r.convertHttpResultToNameValuePairs(o) })) }, t.prototype.getCredentialsFromInput = function () { switch (this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex]) { case i.Anonymous: case i.Windows: case i.WindowsWithoutImpersonation: return this.getEmptyCredentialDetails(); case i.Basic: return this.getCredentialDetailsUsernameAndPassword(); case i.Key: return this.getCredentialDetailsKey(); case i.OAuth2: return this.getCredentialDetailsRedirectEndpoint() } }, t.prototype.updateDatasourceCredentials = function (e) { var t = this, o = this.services.promiseFactory.defer(); return this.services.gatewaysMetadataService.updateCredentials(this.viewModel.datasource.gatewayObjectId, this.viewModel.datasource.dataSourceObjectId, e).then((function () { t.resetModelAfterAuthentication(!1), t.viewModel.datasource.testConnectionState = s.TestConnectionState.Passed, t.viewModel.validateParameters ? t.validateParameters().finally((function () { o.resolve(null) })) : (t.updateDataSourceComplete(), o.resolve(null)) }), (function (e) { t.errorMessage = t.services.localizationService.format("UpdateDatasourceCredential_Error_Title", [r.retrieveUnderlyingErrorMessageFromPowerBIServiceException(e.data, "DM_ErrorDetailNameCode_UnderlyingErrorMessage")]), t.errorDetails = r.convertHttpResultToNameValuePairs(e), t.resetModelAfterAuthentication(!0), o.reject(e) })), o.promise }, t.prototype.validateParameters = function () { var e = this, t = this.services.promiseFactory.defer(); if (this.shouldRunValidateParametersOnImport()) { var o = this.createValidateParametersEvent(); this.services.gatewaysMetadataService.validateParametersBeforeImport(this.viewModel.providerKey, this.viewModel.dataAccessInfo, o.event).then((function (t) { e.handleParameterValidationSuccessResult(o) }), (function (t) { e.handleParameterValidationErrorResult(t, o) })).finally((function () { return t.resolve(null) })) } else if (this.shouldRunValidateParametersOnUpdate()) { var i = this.createValidateParametersEvent(); this.services.gatewaysMetadataService.validateParametersBeforeUpdate(this.viewModel.datasource.modelId, i.event).then((function (t) { e.handleParameterValidationSuccessResult(i) }), (function (t) { e.handleParameterValidationErrorResult(t, i) })).finally((function () { return t.resolve(null) })) } else t.resolve(null); return t.promise }, t.prototype.createValidateParametersEvent = function () { return this.services.telemetryService.startEvent(e.telemetry.MashUpContentProviderValidateParameters, this.viewModel.providerId, this.viewModel.providerKey, this.viewModel.isImportScenario) }, t.prototype.shouldRunValidateParametersOnImport = function () { return this.viewModel.isImportScenario && null != this.viewModel.dataAccessInfo && null != this.viewModel.providerKey }, t.prototype.shouldRunValidateParametersOnUpdate = function () { return !this.viewModel.isImportScenario && null != this.viewModel.datasource && null != this.viewModel.datasource.modelId }, t.prototype.sendUpdateDatasourceRequest = function (t) { var o = this, a = this.services.telemetryService; this.viewModel.showError = !1; var r; r = this.viewModel.isImportScenario ? a.startEvent(e.telemetry.MashUpContentProviderUpdateDatasource, this.viewModel.providerId, null) : a.startEvent(e.telemetry.DashboardAuthenticationDialogSaveCredentials, this.viewModel.providerId); var n = this.viewModel.datasource.credentialTypes[this.viewModel.selectedAuthenticationIndex]; if (this.viewModel.datasource.onpremGatewayRequired) { var s = atob(this.viewModel.personalGateway.gatewayPublicKey).split(/<\/Modulus>|<Modulus>/)[1]; this.encryptCredentials(t, s, n, this.entropy).then((function (t) { o.updateDatasourceCredentials(t).then((function () { r.resolve() }), (function (t) { r.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)) })) })) } else { var c = n === i.Anonymous ? l.Public : l.Private, d = { credentials: JSON.stringify(t), credentialType: n, encryptedConnection: 2, privacyLevel: null == this.viewModel.selectedPrivacyLevelIndex ? c : this.viewModel.privacyLevelMapping.indexOf(this.viewModel.privacyLevelOptions[this.viewModel.selectedPrivacyLevelIndex]), encryptionAlgorithm: "none", skipTestConnection: this.viewModel.skipTestConnection }; this.updateDatasourceCredentials(d).then((function () { r.resolve() }), (function (t) { r.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)) })) } }, t.prototype.handleParameterValidationSuccessResult = function (e) { e.resolve(), this.updateDataSourceComplete() }, t.prototype.handleParameterValidationErrorResult = function (t, o) { o.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)); var i = r.convertInvalidParameterErrorToNameValuePairs(t); if (_.isEmpty(i)) this.updateDataSourceComplete(); else { if (this.datasetShowParameterDialogAfterInvalidParameter) { var a = { error: i }; this.datasetShowParameterDialogAfterInvalidParameter(a) } this.viewModel.isImportScenario || this.updateDataSourceComplete() } }, t.prototype.updateDataSourceComplete = function () { var e = this.viewModel.datasource, t = e.name ? e.name : e.fullName; if (this.datasetDatasourceUpdated) { var o = { name: t }; this.datasetDatasourceUpdated(o) } if (this.datasetShowDatasourceUpdatedNotification) { var o = { name: t }; this.datasetShowDatasourceUpdatedNotification(o) } this.viewModel.leaveShowing || this.closeDialog() }, t.prototype.sendUpdatePackageRequest = function (t) { var o = this, i = this.services.telemetryService, a = this.services.localizationService; this.dialogModel.isConfirmButtonDisabled = !0, this.viewModel.showError = !1; for (var n, s = 0, l = t.credentialData; s < l.length; s++) { var d = l[s]; if ("redirectEndpoint" === d.name) { if (n = d.value, n && n.length > 0) { n = n.substr(n.indexOf("code=") + 5); var u = n.indexOf("&"); u > 0 && (n = n.substr(0, u)), n = encodeURIComponent(n) } break } } var p = this.viewModel.datasource.packageId, v = i.startEvent(e.telemetry.DashboardAuthenticationDialogSaveCredentials, this.viewModel.providerId); this.services.datasetsService.updatePackageCredentials(p, n, v.event).then((function () { if (v.resolve(), o.resetModelAfterAuthentication(!1), o.viewModel.datasource.testConnectionState = c.Passed, o.datasetDatasourceUpdated) { var e = o.viewModel.datasource, t = { name: e.name ? e.name : e.fullName }; o.datasetDatasourceUpdated(t) } o.closeDialog() }), (function (t) { o.errorDetails = r.convertHttpResultToNameValuePairs(t); var i = t.data; i ? (o.errorMessage = r.convertTestPackageConnectionDetailsToErrorMessage(t.data.testConnectionResponse), o.errorDetails && o.errorDetails.push({ Name: o.services.localizationService.get("Details"), Value: i.testConnectionResponse.faultCode })) : o.errorMessage = a.get("UpdateDatasourceCredential_Error_ShortTitle"), o.resetModelAfterAuthentication(!0), v.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)) })) }, t.prototype.resetModelAfterAuthentication = function (e) { this.viewModel.showSpinner = !1, this.viewModel.isAuthenticating = !1, this.viewModel.showWaitingMessageForOAuth = !1, this.viewModel.showError = e, this.dialogModel.isConfirmButtonDisabled = !1 }, t.prototype.updateDatasourceRequest = function () { var e = this.getCredentialsFromInput(); this.viewModel.updatePackage ? this.sendUpdatePackageRequest(e) : this.sendUpdateDatasourceRequest(e) }, t.prototype.getCredentialDetailsUsernameAndPassword = function () { return { credentialData: [{ name: "username", value: this.viewModel.editableField1Value }, { name: "password", value: this.viewModel.editableField2Value }] } }, t.prototype.getCredentialDetailsKey = function () { return { credentialData: [{ name: "key", value: this.viewModel.editableField1Value }] } }, t.prototype.getCredentialDetailsRedirectEndpoint = function () { return { credentialData: [{ name: "redirectEndpoint", value: this.oAuthResponse }, { name: "oAuth2Nonce", value: this.viewModel.datasource.oAuth2Nonce }] } }, t.prototype.getEmptyCredentialDetails = function () { return { credentialData: [] } }, t.prototype.signInThroughOAuth = function () { var t = this, o = this.viewModel.datasource.oAuth2URL; if ("https:" !== o.substring(0, 6).toLowerCase()) return this.showOAuthError = !0, void (this.oAuthErrorMessage = this.oAuthErrorMessage); this.showOAuthError = !1; var i = window.location.host, a = this.reformUrlWithNewState(o, i), r = a[1], n = function (o) { var i = JSON.parse(o.data); if (i && i.OAuthResponse) { var a = i.OAuthResponse, n = d.oauthRedirectUrl; n += "?" === a.substring(0, 1) ? a : "?" + a, t.oAuthResponse = decodeURIComponent(t.reformUrlWithNewState(n, r)[0]), t.viewModel.showWaitingMessageForOAuth = !0, t.services.telemetryService.logEvent(e.telemetry.ConnectivityOAuthSucceeded, t.viewModel.providerId, t.viewModel.providerKey), t.confirmDialog() } else t.showOAuthError = !0, t.oAuthErrorMessage = t.oAuthErrorMessage }; null === this.loginWindow && this.services.$window.addEventListener(jsCommon.DOMConstants.messageEventName, n); var s = a[0]; if (s) { var l = window.location.origin, c = { login_uri: s, redirect_targeturi: l }, u = d.oauthRedirectUrl + jsCommon.QueryStringUtil.rebuildQueryString(c); this.services.telemetryService.logEvent(e.telemetry.ConnectivityOAuthInitiated, this.viewModel.providerId, this.viewModel.providerKey), this.loginWindow = e.common.helpers.OAuthPopupWindowHelper.popupOAuthWindow(u), this.loginWindow || (this.showOAuthError = !0, this.viewModel.isAuthenticating = !1, jsCommon.BrowserUtility.isInternetExplorerBrowser() ? (this.oAuthErrorMessage = this.services.localizationService.get("OAuth_Referrer_Not_Available_Error"), this.services.telemetryService.logEvent(e.telemetry.ConnectivityOAuthReferrerNotAvailableInIE, this.viewModel.providerId, this.viewModel.providerKey)) : this.oAuthErrorMessage = this.oAuthErrorMessage) } }, t.prototype.reformUrlWithNewState = function (e, t) { var o = jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))), i = null; return o.state && (i = o.state, o.state = t), o["#state"] && (i = o["#state"], o["#state"] = t), [e.substring(0, e.indexOf("?")) + jsCommon.QueryStringUtil.rebuildQueryString(o), i] }, t.prototype.encryptCredentials = function (t, o, r, n) { var s = this, c = this.services.promiseFactory.defer(); return a.create(JSON.stringify(t), o, n, (function (t) { var o = r === i.Anonymous ? l.Public : l.Private, a = { credentials: t, credentialType: r, encryptedConnection: s.viewModel.datasource.datasourceType === e.common.contracts.gateway.DataSourceType.SqlServer ? 0 : 2, privacyLevel: null == s.viewModel.selectedPrivacyLevelIndex ? o : s.viewModel.privacyLevelMapping.indexOf(s.viewModel.privacyLevelOptions[s.viewModel.selectedPrivacyLevelIndex]), encryptionAlgorithm: "RSA-OAEP" }; c.resolve(a) }), this.services.moduleLoader).then((function (e) { e.RSAEncrypt() })), c.promise }, t })(); t.AuthenticationDialogController = u })(o = t.controllers || (t.controllers = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { o.AuthenticationDialog = { templateUrl: "components/authenticationDialog/authenticationDialog.html", bindings: { viewModel: "=", datasetDatasourceUpdated: "&", datasetShowParameterDialogAfterInvalidParameter: "&", datasetShowDatasourceUpdatedNotification: "&", notifyCloseDialog: "&" }, controller: e.common.createController(t.controllers.AuthenticationDialogController) } })(o = t.components || (t.components = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var o; !(function (t) {
            var o = e.common.contracts.gateway.CredentialType, i = e.common.EncryptionContext, a = e.connectivity.helpers.ErrorConverterHelper, r = e.common.constants, n = e.common.contracts.gateway.PrivacyLevel, s = e.common.models.TestConnectionState, l = window, c = (function () {
                function t(e, t) { var o = this; this.scope = e, this.model = this.scope.viewModel, this.services = t, this.loginWindow = null, this.scope.customizeAuthDialog = function () { return o.customizeAuthDialog() }, this.scope.dismissSpinnerError = function () { return o.dismissSpinnerError() }, this.scope.signInThroughOAuth = function () { return o.signInThroughOAuth() }, this.initModalDialog(), this.initAuthDialog(), this.getEntropy() } return t.createOptions = function () { return { additionalServices: ["$window", "$element", "datasetsService", "featureSwitchService", "gatewaysMetadataService", "localizationService", "moduleLoader", "promiseFactory", "telemetryService"] } }, t.prototype.getEntropy = function () { var e = this; this.services.gatewaysMetadataService.getEntropy().then((function (t) { if (t) { e.entropy = []; for (var o = t.length, a = 0; a < o; a++)e.entropy.push(t.charCodeAt(a)) } else e.entropy = i.generateEntropy() })) }, t.prototype.relocateToLink = function () { var t = e.models.contentProviderHelpLink[this.model.providerId]; t ? this.services.$window.open(t, "_blank") : this.services.$window.open(e.models.contentProviderFallbackLink, "_blank") }, t.prototype.initModalDialog = function () { var t = this; this.scope.dialogModel = new e.common.models.ModalDialogModel((!1), this.services.localizationService.get("AuthDialog_LinkText_SignIn"), (!0), (!1), (!1), (!1)), this.scope.dialogModel.cancelButtonText = this.services.localizationService.get("ModalDialogButtonText_Cancel"), this.scope.dialogModel.isConfirmButtonDisabled = !1, this.scope.dialogModel.autoCloseDialogOnConfirmButtonSelected = !1, this.scope.dialogModel.confirmButtonImportance = e.common.models.ButtonImportance.Elevated, this.scope.dialogModel.cancelButtonImportance = e.common.models.ButtonImportance.Elevated, this.scope.relocateToLink = function () { return t.relocateToLink() }, this.scope.confirmDialog = function () { return t.confirmDialog() }, this.scope.cancelDialog = function () { return t.cancelDialog() }, this.scope.closeDialog = function () { return t.closeDialog() }, this.scope.showOAuthError = !1, this.scope.showOAuthNotSupported = !1, this.model.showModalDialog = !0, this.model.showError = !1, this.oAuthErrorMessage = this.services.localizationService.get("OAuth_Security_Error") }, t.prototype.initAuthDialog = function () { this.model.selectedAuthenticationIndex || (this.model.selectedAuthenticationIndex = 0), this.model.skipTestConnection || (this.model.skipTestConnection = !1), this.model.editableField1Value = "", this.model.editableField2Value = "", this.model.showSingleSignOn = this.model.allowSingleSignOn, this.model.isSingleSignOnEnabled = null != this.model.datasource && 2 === this.model.datasource.singleSignOnType, this.customizeAuthDialog(), this.dismissSpinnerError() }, t.prototype.confirmDialog = function () { return this.model.showError = !1, this.model.allowSingleSignOn && this.isSingleSignOnChanged() ? void this.updateSingleSignOn() : this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex] === o.OAuth2 && void 0 === this.scope.oAuthResponse ? void this.signInThroughOAuth() : (this.model.showSpinner = !0, this.scope.dialogModel.isConfirmButtonDisabled = !0, this.model.isAuthenticating = !0, void (this.model.datasource.isCloudDirectQuery ? this.updateCloudDirectQueryCredentials() : this.model.isManageGatewaysScenario ? this.returnToManageGatewaysToAddDatasource() : this.updateDatasourceRequest())) }, t.prototype.returnToManageGatewaysToAddDatasource = function () { this.resetModelAfterAuthentication(!1), this.model.datasource.testConnectionState = e.common.models.TestConnectionState.Passed, this.model.credentialData = this.getCredentialsFromInput(), this.updateDataSourceComplete() }, t.prototype.isSingleSignOnChanged = function () { return this.model.isSingleSignOnEnabled && 2 !== this.model.datasource.singleSignOnType || !this.model.isSingleSignOnEnabled && 0 !== this.model.datasource.singleSignOnType }, t.prototype.updateCloudDirectQueryCredentials = function () { var t = this, o = this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex], i = this.getCredentialsFromInput(), l = { credentials: JSON.stringify(i), credentialType: o, encryptedConnection: 0, privacyLevel: n.Public, encryptionAlgorithm: "none", skipTestConnection: this.model.skipTestConnection }; this.services.gatewaysMetadataService.updateCredentials(this.model.datasource.gatewayObjectId, this.model.datasource.dataSourceObjectId, l).then((function () { t.resetModelAfterAuthentication(!1), t.model.datasource.testConnectionState = s.Passed; var e = t.model.datasource; t.scope.$emit(r.datasetDatasourceUpdated, e.name ? e.name : e.fullName), t.closeDialog() }), (function (o) { t.resetModelAfterAuthentication(!0), t.scope.errorMessage = e.common.localize.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"), t.scope.errorDetails = a.convertHttpResultToNameValuePairs(o) })) }, t.prototype.updateSingleSignOn = function () { var t = this; this.services.gatewaysMetadataService.updateDataSource(this.model.datasource.gatewayObjectId, this.model.datasource.dataSourceObjectId, { dataSourceType: null, onPremGatewayRequired: null, connectionDetails: null, credentialDetails: null, dataSourceAnnotation: null, supportedAuthenticationTypes: null, singleSignOnType: this.model.isSingleSignOnEnabled === !0 ? 2 : 0 }).then((function () { t.resetModelAfterAuthentication(!1), t.model.datasource.singleSignOnType = t.model.isSingleSignOnEnabled ? 2 : 0, t.confirmDialog() }), (function (o) { t.resetModelAfterAuthentication(!0), t.scope.errorMessage = e.common.localize.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential"), t.scope.errorDetails = a.convertHttpResultToNameValuePairs(o) })) }, t.prototype.getCredentialsFromInput = function () { switch (this.model.datasource.credentialTypes[this.model.selectedAuthenticationIndex]) { case o.Anonymous: case o.Windows: case o.WindowsWithoutImpersonation: return this.getEmptyCredentialDetails(); case o.Basic: return this.getCredentialDetailsUsernameAndPassword(); case o.Key: return this.getCredentialDetailsKey(); case o.OAuth2: return this.getCredentialDetailsRedirectEndpoint() } }, t.prototype.updateDatasourceCredentials = function (t) {
                    var o = this, i = this.services.promiseFactory.defer(); return this.services.gatewaysMetadataService.updateCredentials(this.model.datasource.gatewayObjectId, this.model.datasource.dataSourceObjectId, t).then((function () { o.resetModelAfterAuthentication(!1), o.model.datasource.testConnectionState = e.common.models.TestConnectionState.Passed, o.model.validateParameters ? o.validateParameters().finally((function () { i.resolve(null) })) : (o.updateDataSourceComplete(), i.resolve(null)) }), (function (e) {
                        o.scope.errorMessage = o.services.localizationService.format("UpdateDatasourceCredential_Error_Title", [a.retrieveUnderlyingErrorMessageFromPowerBIServiceException(e.data, "DM_ErrorDetailNameCode_UnderlyingErrorMessage")]), o.scope.errorDetails = a.convertHttpResultToNameValuePairs(e),
                        o.resetModelAfterAuthentication(!0), i.reject(e)
                    })), i.promise
                }, t.prototype.validateParameters = function () { var e = this, t = this.services.promiseFactory.defer(); if (this.shouldRunValidateParametersOnImport()) { var o = this.createValidateParametersEvent(); this.services.gatewaysMetadataService.validateParametersBeforeImport(this.model.providerKey, this.model.dataAccessInfo, o.event).then((function (t) { e.handleParameterValidationSuccessResult(t, o) }), (function (t) { e.handleParameterValidationErrorResult(t, o) })).finally((function () { return t.resolve(null) })) } else if (this.shouldRunValidateParametersOnUpdate()) { var i = this.createValidateParametersEvent(); this.services.gatewaysMetadataService.validateParametersBeforeUpdate(this.model.datasource.modelId, i.event).then((function (t) { e.handleParameterValidationSuccessResult(t, i) }), (function (t) { e.handleParameterValidationErrorResult(t, i) })).finally((function () { return t.resolve(null) })) } else t.resolve(null); return t.promise }, t.prototype.createValidateParametersEvent = function () { return this.services.telemetryService.startEvent(e.telemetry.MashUpContentProviderValidateParameters, this.model.providerId, this.model.providerKey, this.model.isImportScenario) }, t.prototype.shouldRunValidateParametersOnImport = function () { return this.model.isImportScenario && null != this.model.dataAccessInfo && null != this.model.providerKey }, t.prototype.shouldRunValidateParametersOnUpdate = function () { return !this.model.isImportScenario && null != this.model.datasource && null != this.model.datasource.modelId }, t.prototype.sendUpdateDatasourceRequest = function (t) { var i = this, a = this.services.telemetryService, r = this.model; r.showError = !1; var s; s = r.isImportScenario ? a.startEvent(e.telemetry.MashUpContentProviderUpdateDatasource, r.providerId, null) : a.startEvent(e.telemetry.DashboardAuthenticationDialogSaveCredentials, r.providerId); var l = r.datasource.credentialTypes[r.selectedAuthenticationIndex]; if (r.datasource.onpremGatewayRequired) { var c = atob(r.personalGateway.gatewayPublicKey).split(/<\/Modulus>|<Modulus>/)[1]; this.encryptCredentials(t, c, l, this.entropy).then((function (t) { i.updateDatasourceCredentials(t).then((function () { s.resolve() }), (function (t) { s.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)) })) })) } else { var d = l === o.Anonymous ? n.Public : n.Private, u = { credentials: JSON.stringify(t), credentialType: l, encryptedConnection: 2, privacyLevel: null == r.selectedPrivacyLevelIndex ? d : r.privacyLevelMapping.indexOf(r.privacyLevelOptions[r.selectedPrivacyLevelIndex]), encryptionAlgorithm: "none", skipTestConnection: this.model.skipTestConnection }; this.updateDatasourceCredentials(u).then((function () { s.resolve() }), (function (t) { s.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)) })) } }, t.prototype.handleParameterValidationSuccessResult = function (e, t) { t.resolve(), this.updateDataSourceComplete() }, t.prototype.handleParameterValidationErrorResult = function (t, o) { o.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)); var i = a.convertInvalidParameterErrorToNameValuePairs(t); _.isEmpty(i) ? this.updateDataSourceComplete() : (this.scope.$emit(e.common.constants.datasetShowParameterDialogAfterInvalidParameter, i), this.model.isImportScenario || this.updateDataSourceComplete()) }, t.prototype.updateDataSourceComplete = function () { var e = this.model.datasource, t = e.name ? e.name : e.fullName; this.scope.$emit(r.datasetDatasourceUpdated, t), this.scope.$emit(r.datasetShowDatasourceUpdatedNotification, t), this.model.leaveShowing || this.closeDialog() }, t.prototype.sendUpdatePackageRequest = function (t) { var o = this, i = this.services.telemetryService; this.scope.dialogModel.isConfirmButtonDisabled = !0, this.model.showError = !1; for (var n, l = 0, c = t.credentialData; l < c.length; l++) { var d = c[l]; if ("redirectEndpoint" === d.name) { if (n = d.value, n && n.length > 0) { n = n.substr(n.indexOf("code=") + 5); var u = n.indexOf("&"); u > 0 && (n = n.substr(0, u)), n = encodeURIComponent(n) } break } } var p = this.model.datasource.packageId, v = i.startEvent(e.telemetry.DashboardAuthenticationDialogSaveCredentials, this.model.providerId); this.services.datasetsService.updatePackageCredentials(p, n, v.event).then((function () { v.resolve(), o.resetModelAfterAuthentication(!1), o.model.datasource.testConnectionState = s.Passed; var e = o.model.datasource; o.scope.$emit(r.datasetDatasourceUpdated, e.name ? e.name : e.fullName), o.closeDialog() }), (function (t) { o.scope.errorDetails = a.convertHttpResultToNameValuePairs(t); var i = t.data; i ? (o.scope.errorMessage = a.convertTestPackageConnectionDetailsToErrorMessage(t.data.testConnectionResponse), o.scope.errorDetails && o.scope.errorDetails.push({ Name: e.common.localize.get("Details"), Value: i.testConnectionResponse.faultCode })) : o.scope.errorMessage = e.common.localize.get("UpdateDatasourceCredential_Error_ShortTitle"), o.resetModelAfterAuthentication(!0), v.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)) })) }, t.prototype.cancelDialog = function () { this.closeDialog(e.common.constants.contentProviderStoreCancelModalDialogMessage) }, t.prototype.closeDialog = function (t) { var o = this; if (void 0 === t && (t = e.common.constants.contentProviderStoreCloseModalDialogMessage), this.model.showModalDialog = !1, this.scope.viewModel.showPlainUI && null != this.services.$window.parent) { var i = { message: t }; this.services.$window.parent.postMessage(JSON.stringify(i), e.common.constants.hostOrigin) } setTimeout((function () { o.model.showAuthDialog = !1, o.scope.$digest() }), 0) }, t.prototype.customizeAuthDialog = function () { this.resetAuthDialogState(); var e = this.model; switch (e.datasource.credentialTypes[e.selectedAuthenticationIndex]) { case o.Anonymous: case o.WindowsWithoutImpersonation: this.customizeAuthDialogShowNothing(); break; case o.Basic: this.customizeAuthDialogShowUserNameAndPassword(); break; case o.OAuth2: this.customizeAuthDialogShowSignIn(); break; case o.Key: this.customizeAuthDialogShowAccountKey(); break; case o.Windows: this.customizeAuthDialogShowDetailsMessage(this.services.localizationService.get("AuthDialog_DetailsMessage_WindowsAuth")) } }, t.prototype.resetAuthDialogState = function () { this.scope.showOAuthNotSupported = !1, this.model.isAuthenticating = !1 }, t.prototype.resetModelAfterAuthentication = function (e) { this.model.showSpinner = !1, this.model.isAuthenticating = !1, this.model.showWaitingMessageForOAuth = !1, this.model.showError = e, this.scope.dialogModel.isConfirmButtonDisabled = !1, e && this.services.$element.find(".expandableBlockWarning").get(0).scrollIntoView() }, t.prototype.customizeAuthDialogShowUserNameAndPassword = function () { this.model.showEditableField1 = !0, this.model.showEditableField2 = !0, this.model.showWaitingMessageForOAuth = !1, this.model.showDetailsMessage = !1, this.model.editableField1Label = this.services.localizationService.get("AuthDialog_FieldName_Username"), this.model.editableField2Label = this.services.localizationService.get("AuthDialog_FieldName_Password") }, t.prototype.customizeAuthDialogShowAccountKey = function () { this.model.showEditableField1 = !0, this.model.showEditableField2 = !1, this.model.showWaitingMessageForOAuth = !1, this.model.editableField1Label = this.services.localizationService.get("AuthDialog_FieldName_AccountKey") }, t.prototype.customizeAuthDialogShowSignIn = function () { if (this.model.showEditableField1 = !1, this.model.showEditableField2 = !1, this.model.showWaitingMessageForOAuth = !1, this.model.showDetailsMessage = !1, null == this.scope.viewModel.datasource.oAuth2URL) return this.scope.showOAuthNotSupported = !0, void (this.model.isAuthenticating = !0) }, t.prototype.customizeAuthDialogShowNothing = function () { this.model.showEditableField1 = !1, this.model.showEditableField2 = !1, this.model.showWaitingMessageForOAuth = !1, this.model.editableField1Label = "", this.model.showDetailsMessage = !1 }, t.prototype.customizeAuthDialogShowDetailsMessage = function (e) { this.model.showEditableField1 = !1, this.model.showEditableField2 = !1, this.model.showWaitingMessageForOAuth = !1, this.model.editableField1Label = "", this.model.showDetailsMessage = !0, this.model.detailsMessage = e }, t.prototype.updateDatasourceRequest = function () { var e = this.getCredentialsFromInput(); this.model.updatePackage ? this.sendUpdatePackageRequest(e) : this.sendUpdateDatasourceRequest(e) }, t.prototype.getCredentialDetailsUsernameAndPassword = function () { return { credentialData: [{ name: "username", value: this.model.editableField1Value }, { name: "password", value: this.model.editableField2Value }] } }, t.prototype.getCredentialDetailsKey = function () { return { credentialData: [{ name: "key", value: this.model.editableField1Value }] } }, t.prototype.getCredentialDetailsRedirectEndpoint = function () { return { credentialData: [{ name: "redirectEndpoint", value: this.scope.oAuthResponse }, { name: "oAuth2Nonce", value: this.scope.viewModel.datasource.oAuth2Nonce }] } }, t.prototype.getEmptyCredentialDetails = function () { return { credentialData: [] } }, t.prototype.dismissSpinnerError = function () { this.model.showSpinner = !1, this.model.showError = !1, this.model.isAuthenticating = !1 }, t.prototype.signInThroughOAuth = function () { var t = this, o = this.scope.viewModel.datasource.oAuth2URL; if ("https:" !== o.substring(0, 6).toLowerCase()) return this.scope.showOAuthError = !0, void (this.scope.oAuthErrorMessage = this.oAuthErrorMessage); this.scope.showOAuthError = !1; var i = window.location.host, a = this.reformUrlWithNewState(o, i), r = a[1], n = function (o) { var i = JSON.parse(o.data); if (i && i.OAuthResponse) { var a = i.OAuthResponse, n = l.oauthRedirectUrl; n += "?" === a.substring(0, 1) ? a : "?" + a, t.scope.oAuthResponse = decodeURIComponent(t.reformUrlWithNewState(n, r)[0]), t.model.showWaitingMessageForOAuth = !0, t.services.telemetryService.logEvent(e.telemetry.ConnectivityOAuthSucceeded, t.model.providerId, t.model.providerKey), t.confirmDialog() } else t.scope.showOAuthError = !0, t.scope.oAuthErrorMessage = t.oAuthErrorMessage }; null === this.loginWindow && this.services.$window.addEventListener(jsCommon.DOMConstants.messageEventName, n), this.scope.$on(e.common.constants.scopeDestroyEventName, (function () { t.services.$window.removeEventListener(jsCommon.DOMConstants.messageEventName, n, !1), t.loginWindow = null })); var s = a[0]; if (s) { var c = window.location.origin, d = { login_uri: s, redirect_targeturi: c }, u = l.oauthRedirectUrl + jsCommon.QueryStringUtil.rebuildQueryString(d); this.services.telemetryService.logEvent(e.telemetry.ConnectivityOAuthInitiated, this.model.providerId, this.model.providerKey), this.loginWindow = e.common.helpers.OAuthPopupWindowHelper.popupOAuthWindow(u), this.loginWindow || (this.scope.showOAuthError = !0, this.model.isAuthenticating = !1, jsCommon.BrowserUtility.isInternetExplorerBrowser() ? (this.scope.oAuthErrorMessage = this.services.localizationService.get("OAuth_Referrer_Not_Available_Error"), this.services.telemetryService.logEvent(e.telemetry.ConnectivityOAuthReferrerNotAvailableInIE, this.model.providerId, this.model.providerKey)) : this.scope.oAuthErrorMessage = this.oAuthErrorMessage) } }, t.prototype.reformUrlWithNewState = function (e, t) { var o = jsCommon.QueryStringUtil.parseQueryString(e.substring(e.indexOf("?"))), i = null; return o.state && (i = o.state, o.state = t), o["#state"] && (i = o["#state"], o["#state"] = t), [e.substring(0, e.indexOf("?")) + jsCommon.QueryStringUtil.rebuildQueryString(o), i] }, t.prototype.encryptCredentials = function (t, a, r, s) { var l = this.services.promiseFactory.defer(), c = this.model; return i.create(JSON.stringify(t), a, s, (function (t) { var i = r === o.Anonymous ? n.Public : n.Private, a = { credentials: t, credentialType: r, encryptedConnection: c.datasource.datasourceType === e.common.contracts.gateway.DataSourceType.SqlServer ? 0 : 2, privacyLevel: null == c.selectedPrivacyLevelIndex ? i : c.privacyLevelMapping.indexOf(c.privacyLevelOptions[c.selectedPrivacyLevelIndex]), encryptionAlgorithm: "RSA-OAEP" }; l.resolve(a) }), this.services.moduleLoader).then((function (e) { e.RSAEncrypt() })), l.promise }, t
            })(); t.AuthDialogController = c
        })(o = t.controllers || (t.controllers = {}))
    })(t = e.connectivity || (e.connectivity = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = e.connectivity.helpers.DatasetParametersDialogHelper, i = e.common.helpers.ImportHelper, a = e.common.helpers.ModelConverterHelper, r = e.common.models.TestConnectionState, n = e.connectivity.helpers.ErrorConverterHelper, s = 0, l = (function () { function t(e, t) { this.scope = e, this.model = this.scope.viewModel, this.services = t, this.initModalDialog() } return t.createOptions = function () { return { additionalServices: ["$window", "datasetsService", "errorService", "telemetryService", "localizationService", "featureSwitchService", "gatewaysMetadataService"] } }, t.prototype.relocateToLink = function () { var t = e.models.contentProviderHelpLink[this.model.providerIdentification.providerId]; t ? this.services.$window.open(t, "_blank") : this.services.$window.open(e.models.contentProviderFallbackLink, "_blank") }, t.prototype.initModalDialog = function () { var t = this, o = this.scope.dialogModel = new e.common.models.ModalDialogModel((!1), this.services.localizationService.get("DatasetParametersDialog_NextButtonText"), (!0), (!1), (!1), (!1)); o.cancelButtonText = this.services.localizationService.get("ModalDialogButtonText_Cancel"), o.isConfirmButtonDisabled = !0, o.autoCloseDialogOnConfirmButtonSelected = !1, o.confirmButtonImportance = e.common.models.ButtonImportance.Elevated, o.cancelButtonImportance = e.common.models.ButtonImportance.Elevated, this.scope.confirmDialog = function () { return t.confirmDialog() }, this.scope.closeDialog = function () { return t.closeDialog() }, this.scope.enableConfirmButton = function () { return t.enableConfirmButton() }, this.scope.relocateToLink = function () { return t.relocateToLink() }, this.scope.checkConfirmButton = function () { return t.checkConfirmButton() }, this.scope.$watch("viewModel.showDatasetParametersDialog", (function (e, o) { e && e !== o && t.scope.checkConfirmButton() }), !0), this.scope.$watch("viewModel.parametersForm.$dirty", (function (e, o) { e && e !== o && t.scope.dialogModel.isConfirmButtonDisabled && (t.scope.dialogModel.isConfirmButtonDisabled = !1) }), !0) }, t.prototype.enableConfirmButton = function () { this.scope.dialogModel.isConfirmButtonDisabled && (this.scope.dialogModel.isConfirmButtonDisabled = !1) }, t.prototype.confirmDialog = function () { var t = this; if (!this.areAllParametersValueSet()) return this.model.showValidationError = !0, void (this.model.invalidParameterNameValuePairs = null); this.model.showValidationError = !1, this.model.showSpinner = !0; var o = this.services.telemetryService, i = this.services.datasetsService, a = this.model.providerIdentification; if (this.scope.dialogModel.isConfirmButtonDisabled = !0, this.model.isImportScenario) { var r = o.startEvent(e.telemetry.MashUpContentProviderSaveModelParameters, a.providerId, a.providerKey), n = a.providerKey; n || (n = a.providerId.toString()), this.model.proxy.updateMashUpProviderPackageModelParameters(n, this.model.datasetModel.dataset.parameters, r.event).then((function (e) { r.resolve(), t.discoverDatasourcesForImport(e) }), (function (e) { t.resetState(), i.displayOopsErrorAndEndTelemetry(o, t.services.errorService, "DatasetParametersDialog_Error_FailedToUpdateModelParameters", e, r) })) } else { var s = o.startEvent(e.telemetry.DashboardParametersDialogSaveParameters, a.providerId); i.updateModelParameters(this.model.datasetModel.dataset.modelId.toString(), this.model.datasetModel.dataset.parameters, s.event).then((function () { s.resolve(), t.getModelDatasources() }), (function (e) { t.resetState(), i.displayOopsErrorAndEndTelemetry(o, t.services.errorService, "DatasetParametersDialog_Error_FailedToUpdateModelParameters", e, s) })) } }, t.prototype.getModelDatasources = function () { var t = this, o = this.services.telemetryService, i = this.services.datasetsService, r = this.model.providerIdentification, n = o.startEvent(e.telemetry.DashboardGetAggregatedDatasourcesForOneModel, r.providerId); this.services.gatewaysMetadataService.getModelDataSources(this.model.datasetModel.dataset.modelId).then((function (e) { n.resolve(), t.model.datasetModel.dataset.datasources = a.convertDMTSDiscoverDatasourcesResponseToDatasources(t.model.datasetModel.dataset.modelId, e.datasources), t.closeDialog(), t.getCredentials() }), (function (e) { t.resetState(), i.displayOopsErrorAndEndTelemetry(o, t.services.errorService, "SettingsDataset_Error_FailedToLoadDatasources", e, n) })) }, t.prototype.discoverDatasourcesForImport = function (t) { var o = this, i = this.services.telemetryService, n = this.services.datasetsService, l = this.model.providerIdentification, c = t.data; this.model.dataAccessInfo = c; var d = i.startEvent(e.telemetry.MashUpContentProviderGetAggregatedDatasourcesForImport, l.providerCategory, l.providerId, l.providerKey); n.discoverDatasourceForImport(l.providerId.toString(), c, d.event).then((function (e) { d.resolve(), o.model.datasetModel.dataset.datasources = a.convertDMTSDiscoverDatasourcesResponseToDatasources(0, e.data.datasources), o.services.gatewaysMetadataService.getDataSourceStatus(o.model.datasetModel.dataset.datasources[s].gatewayObjectId, o.model.datasetModel.dataset.datasources[s].dataSourceObjectId).then((function () { o.model.datasetModel.dataset.datasources[s].alreadyExecutedTestConnection = !0, o.model.datasetModel.dataset.datasources[s].testConnectionState = r.Passed }), (function () { o.model.datasetModel.dataset.datasources[s].alreadyExecutedTestConnection = !0, o.model.datasetModel.dataset.datasources[s].testConnectionState = r.Failed })).finally((function () { o.scope.viewModel.showPlainUI ? o.scope.viewModel.showDatasetParametersDialog = !1 : o.closeDialog(), o.getCredentials() })) }), (function (e) { o.resetState(), n.displayOopsErrorAndEndTelemetry(i, o.services.errorService, "SettingsDataset_Error_FailedToLoadDatasources", e, d) })) }, t.prototype.getCredentials = function () { var t = this; if (this.alwaysPromptForCredentials() || null != this.model.datasetModel.dataset.datasources && this.model.datasetModel.dataset.datasources.length > 0 && this.model.datasetModel.dataset.datasources[0].testConnectionState !== r.Passed) { var o = { dsIndex: 0, dataAccessInfo: this.model.dataAccessInfo, modelId: this.model.datasetModel.dataset.modelId, providerKey: this.model.providerIdentification.providerKey, validateParameters: !0 }; return void this.scope.$emit(e.common.constants.datasetShowAuthDialog, o) } if (this.model.isImportScenario) { var a = this.services.telemetryService.startEvent(e.telemetry.MashUpContentProviderValidateParameters, this.model.providerIdentification.providerId, this.model.providerIdentification.providerKey, this.model.isImportScenario); this.services.gatewaysMetadataService.validateParametersBeforeImport(this.model.providerIdentification.providerKey, this.model.dataAccessInfo, a.event).then((function (e) { t.handleParameterValidationSuccessResult(e, a) }), (function (e) { t.handleParameterValidationErrorResult(e, a) })) } else i.continueWithImportFlow(this.services.$window, !1, this.model.dataAccessInfo) }, t.prototype.handleParameterValidationSuccessResult = function (e, t) { t.resolve(), i.continueWithImportFlow(this.services.$window, !1, this.model.dataAccessInfo) }, t.prototype.handleParameterValidationErrorResult = function (t, o) { o.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error)); var a = n.convertInvalidParameterErrorToNameValuePairs(t); null != a && a.length > 0 ? this.scope.$emit(e.common.constants.datasetShowParameterDialogAfterInvalidParameter, a) : i.continueWithImportFlow(this.services.$window, !1, this.model.dataAccessInfo) }, t.prototype.closeDialog = function () { if (this.resetState(), this.model.showDatasetParametersDialog = !1, this.scope.viewModel.showPlainUI && null != this.services.$window.parent) { var t = { message: e.common.constants.contentProviderStoreCloseModalDialogMessage }; this.services.$window.parent.postMessage(JSON.stringify(t), e.common.constants.hostOrigin) } }, t.prototype.resetState = function () { this.model.showSpinner = !1, this.checkConfirmButton() }, t.prototype.areAllParametersValueSet = function () { return 0 === _.filter(this.model.datasetModel.dataset.parameters, (function (e) { return void 0 === e.value || "" === e.value })).length }, t.prototype.areAnyParametersValueSet = function () { var e = this.model.datasetModel.dataset.parameters; return _.filter(e, (function (e) { return void 0 === e.value || "" === e.value })).length < e.length }, t.prototype.checkConfirmButton = function () { this.scope && this.scope.dialogModel && (this.scope.dialogModel.isConfirmButtonDisabled = !this.areAnyParametersValueSet()) }, t.prototype.alwaysPromptForCredentials = function () { return o.alwaysPromptForCredentials(this.services.featureSwitchService.featureSwitches, this.model) }, t })(); t.DatasetParametersDialogController = l })(o = t.controllers || (t.controllers = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (t) { var o = (function () { function t() { this.restrict = "E", this.replace = !0, this.templateUrl = "views/authDialogView.html", this.scope = { viewModel: "=" }, this.controller = e.common.createController(e.connectivity.controllers.AuthDialogController) } return t })(); t.AuthDialog = o })(o = t.directives || (t.directives = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var o; !(function (o) { var i = (function () { function o() { this.restrict = "E", this.replace = !0, this.templateUrl = "views/datasetParametersDialogView.html", this.scope = { viewModel: "=" }, this.controller = e.common.createController(t.controllers.DatasetParametersDialogController) } return o })(); o.DatasetParametersDialog = i })(o = t.directives || (t.directives = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e() { this.showDatasetParametersDialog = !1, this.showSpinner = !1, this.showValidationError = !1 } return e })(); e.DatasetParametersDialogModel = t })(t = e.models || (e.models = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.source = e, this.metadata = [], this.actions = [] } return e })(); e.DataSourceContextMenuItemModel = t })(t = e.models || (e.models = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.NotReachable = 1] = "NotReachable", e[e.Live = 2] = "Live", e[e.Unknown = 3] = "Unknown" })(t = e.GatewayStatus || (e.GatewayStatus = {})); var o = (function () { function e(e) { this.source = e, this.metadata = [], this.actions = [] } return e })(); e.GatewayContextMenuItemModel = o })(t = e.models || (e.models = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { var t; !(function (e) { e[e.None = 0] = "None", e[e.Gateway = 1] = "Gateway", e[e.DataSource = 2] = "DataSource" })(t = e.GatewaysSelectionType || (e.GatewaysSelectionType = {})) })(t = e.models || (e.models = {})) })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function o() { return new l } var i = "/metadata/datamovement/gateways", a = "/metadata/datamovement/gatewayclusters", r = "/metadata/datamovement/entropy", n = "/metadata/datamovement/models", s = i + "/version"; t.createGatewaysMetadataHttpService = o; var l = (function () { function t() { } return t.prototype.getGateways = function (t, o) { var a = e.common.httpService.powerbiRequestOptions(o, "GetGateways"); return a.enableTelemetry = !0, e.common.httpService.get(i + "?type=" + t + "&api-version=10.0", a) }, t.prototype.getGatewayStatus = function (t, o) { var a = e.common.httpService.powerbiRequestOptions(o, "GetGatewayStatus"); return a.enableTelemetry = !0, e.common.httpService.get(i + "/" + t + "/status?api-version=10.0", a) }, t.prototype.deleteGatewayObjectId = function (t, o) { var a = e.common.httpService.powerbiRequestOptions(o, "DeleteGateway"); return a.enableTelemetry = !0, e.common.httpService.delete(i + "/" + t + "?api-version=10.0", a) }, t.prototype.createDataSource = function (t, o, a) { var r = e.common.httpService.powerbiRequestOptions(a, "CreateDataSource"); return r.enableTelemetry = !0, e.common.httpService.post(i + "/" + t + "/dataSources?api-version=10.0", JSON.stringify(o), r) }, t.prototype.createDataSourceToCluster = function (t, o, i) { var r = e.common.httpService.powerbiRequestOptions(i, "CreateDataSourceToCluster"); return r.enableTelemetry = !0, e.common.httpService.post(a + "/" + t + "/dataSources?api-version=10.0", JSON.stringify(o), r) }, t.prototype.getDataSources = function (t, o) { var a = e.common.httpService.powerbiRequestOptions(o, "GetDataSources"); return a.enableTelemetry = !0, e.common.httpService.get(i + "/" + t + "/dataSources?api-version=10.0", a) }, t.prototype.getDataSourceStatus = function (t, o, a) { var r = e.common.httpService.powerbiRequestOptions(a, "GetDataSourceStatus"); return r.retryCount = 1, r.enableTelemetry = !0, e.common.httpService.get(i + "/" + t + "/dataSources/" + o + "/status?api-version=10.0", r) }, t.prototype.updateDataSource = function (t, o, a, r) { var n = e.common.httpService.powerbiRequestOptions(r, "UpdateDataSource"); return n.enableTelemetry = !0, e.common.httpService.patch(i + "/" + t + "/dataSources/" + o + "?api-version=10.0", { datasourceName: a.dataSourceName, datasourceAnnotation: a.dataSourceAnnotation, singleSignonType: a.singleSignOnType }, n) }, t.prototype.deleteDataSource = function (t, o, a) { var r = e.common.httpService.powerbiRequestOptions(a, "DeleteDataSource"); return r.enableTelemetry = !0, e.common.httpService.delete(i + "/" + t + "/dataSources/" + o + "?api-version=10.0", r) }, t.prototype.getModelDataSources = function (t, o, i) { var a = e.common.httpService.powerbiRequestOptions(o, "GetModelDataSources"); a.retryCount = 1, a.enableTelemetry = !0; var r = n + "/" + t + "/dataSources?api-version=10.0"; return i && (r = jsCommon.UrlUtils.setQueryParameters(r, { cachePolicy: "ForceRefresh" }, !0)), e.common.httpService.get(r, a) }, t.prototype.getDatapoolDataSources = function (t, o) { var i = e.common.httpService.powerbiRequestOptions(o, "GetDatapoolsDataSources"); return i.retryCount = 1, i.enableTelemetry = !0, e.common.httpService.get("metadata/dataflows/settings/" + t + "/datasources", i) }, t.prototype.getRdlDataSources = function (t, o) { var i = e.common.httpService.powerbiRequestOptions(o, "GetRdlDataSources"); return i.retryCount = 1, i.enableTelemetry = !0, e.common.httpService.get("metadata/rdl/" + t + "/datasources/monikers", i) }, t.prototype.rediscoverModelDataSources = function (t, o) { var i = e.common.httpService.powerbiRequestOptions(o, "RediscoverModelDataSources"); return i.retryCount = 1, i.enableTelemetry = !0, e.common.httpService.post(n + "/" + t + "/datasources/rediscover?api-version=10.0", null, i) }, t.prototype.bindModelToGateway = function (t, o, i, a) { var r = e.common.httpService.powerbiRequestOptions(i, "BindModelToGateway"); r.enableTelemetry = !0; var s = { gatewayObjectId: o }; return a && a.length > 0 && (s.datasourceObjectIds = a), e.common.httpService.post(n + "/" + t + "/bind?api-version=10.0", JSON.stringify(s), r) }, t.prototype.addDataSourcePrincipals = function (t, o, a, r) { var n = e.common.httpService.powerbiRequestOptions(r, "AddDataSourcePrincipals"); return n.enableTelemetry = !0, e.common.httpService.patch(i + "/" + t + "/datasources/" + o + "/principals?api-version=10.0", JSON.stringify(a), n) }, t.prototype.deleteDataSourcePrincipals = function (t, o, a, r) { var n = e.common.httpService.powerbiRequestOptions(r, "DeleteDataSourcePrincipals"); return n.enableTelemetry = !0, e.common.httpService.patch(i + "/" + t + "/datasources/" + o + "/principals/delete?api-version=10.0", JSON.stringify(a), n) }, t.prototype.getDataSourcePrincipals = function (t, o, a) { var r = e.common.httpService.powerbiRequestOptions(a, "GetDataSourcePrincipals"); return r.enableTelemetry = !0, e.common.httpService.get(i + "/" + t + "/datasources/" + o + "/principals?api-version=10.0", r) }, t.prototype.addGatewayPrincipals = function (t, o, a) { var r = e.common.httpService.powerbiRequestOptions(a, "AddGatewayPrincipals"); return r.enableTelemetry = !0, e.common.httpService.patch(i + "/" + t + "/principals?api-version=10.0", JSON.stringify(o), r) }, t.prototype.getGatewayPrincipals = function (t, o) { var a = e.common.httpService.powerbiRequestOptions(o, "GetGatewayPrincipals"); return a.enableTelemetry = !0, e.common.httpService.get(i + "/" + t + "/principals?api-version=10.0", a) }, t.prototype.deleteGatewayPrincipals = function (t, o, a) { var r = e.common.httpService.powerbiRequestOptions(a, "DeleteGatewayPrincipals"); return r.enableTelemetry = !0, e.common.httpService.patch(i + "/" + t + "/principals/delete?api-version=10.0", JSON.stringify(o), r) }, t.prototype.getEntropy = function (t) { var o = e.common.httpService.powerbiRequestOptions(t, "GetEntropy"); return o.enableTelemetry = !0, e.common.httpService.get(r, o) }, t.prototype.updateCredentials = function (t, o, a, r) { var n = e.common.httpService.powerbiRequestOptions(r, "UpdateCredentials"); return n.enableTelemetry = !0, e.common.httpService.put(i + "/" + t + "/dataSources/" + o + "/credentials?api-version=10.0", a, n) }, t.prototype.updateClusterCredentials = function (t, o, i, r) { var n = e.common.httpService.powerbiRequestOptions(r, "UpdateClusterCredentials"); return n.enableTelemetry = !0, e.common.httpService.put(a + "/" + t + "/dataSources/" + o + "/credentials?api-version=10.0", i, n) }, t.prototype.getGatewaysVersion = function (t) { var o = e.common.httpService.powerbiRequestOptions(t, "GetGatewaysVersion"); return o.enableTelemetry = !0, e.common.httpService.get(s, o) }, t.prototype.supportedDataSources = function (t, o, i) { var r = e.common.httpService.powerbiRequestOptions(i, "SupportedDataSources"); return r.enableTelemetry = !0, e.common.httpService.get(a + "/" + t + "/supportedDatasources?locale=" + o + "&api-version=10.0", r) }, t.prototype.getDataSourceOAuthDetailsForGatewayCluster = function (t, o, i) { var r = e.common.httpService.powerbiRequestOptions(i, "GetDataSourceOAuthDetailsForGatewayCluster"); return r.enableTelemetry = !0, e.common.httpService.get(a + "/" + t + "/dataSources/" + o + "/getOAuthDetails?api-version=10.0", r) }, t.prototype.initiateOAuthLoginOnGatewayCluster = function (t, o, i) { var r = e.common.httpService.powerbiRequestOptions(i, "InitiateOAuthLoginOnGatewayCluster"); return r.enableTelemetry = !0, e.common.httpService.post(a + "/" + t + "/initiateOAuthLogin?api-version=10.0", o, r) }, t.prototype.getUPNMappingResult = function (t, o, i) { var a = e.common.httpService.powerbiRequestOptions(i, "GetUPNMapping"); return e.common.httpService.post("metadata/datamovement/mapUpn", { upns: t, analysisServicesUpnMapping: o }, a) }, t.prototype.getGatewayClusters = function (t) { var o = e.common.httpService.powerbiRequestOptions(t, "GetGatewayClusters"); return o.enableTelemetry = !0, e.common.httpService.get(a + "?api-version=10.0", o) }, t.prototype.updateGatewayCluster = function (t, o, i) { var r = e.common.httpService.powerbiRequestOptions(i, "UpdateGatewayCluster"); return r.enableTelemetry = !0, e.common.httpService.patch(a + "/" + t + "?api-version=10.0", JSON.stringify(o), r) }, t.prototype.getClusterDataSourceStatus = function (t, o, i) { var r = e.common.httpService.powerbiRequestOptions(i, "GetClusterDataSourceStatus"); return r.retryCount = 1, r.enableTelemetry = !0, e.common.httpService.get(a + "/" + t + "/dataSources/" + o + "/status?api-version=10.0", r) }, t.prototype.getGatewayClusterStatus = function (t, o) { var i = e.common.httpService.powerbiRequestOptions(o, "GetGatewayClusterStatus"); return i.enableTelemetry = !0, e.common.httpService.get(a + "/" + t + "/status?api-version=10.0", i) }, t.prototype.getSSOTestConnection = function (t, o, i, r) { var n = e.common.httpService.powerbiRequestOptions(i, "SSOConnectionTest"); return n.enableTelemetry = !0, n.retryCount = 0, e.common.httpService.post(a + "/" + t + "/dataSources/" + o + "/SSOTestConnection?api-version=10.0", r, n) }, t })() })(t = e.connectivity || (e.connectivity = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function o(e, t, o, i) { return new r(e, t, o, i) } var i = e.common.contracts.gateway.GatewayStatus, a = e.common.contracts.gateway.GatewayType; t.createGatewaysMetadataService = o; var r = (function () {
            function t(e, t, o, i) { this._promiseFactory = e, this._gatewaysHttpService = t, this._telemetryService = o, this._featureSwitchService = i } return t.prototype.getGateways = function () { var e = this._promiseFactory.defer(); return this._gatewaysHttpService.getGateways(a.Resource, null).then((function (t) { e.resolve(t.data) }), (function (t) { e.reject(t) })), e.promise }, t.prototype.getPersonalGatewayAndGetStatus = function () { return __awaiter(this, void 0, e.Promise, (function () { var e; return __generator(this, (function (t) { switch (t.label) { case 0: return [4, this._gatewaysHttpService.getGateways(a.Personal, null)]; case 1: return e = t.sent(), [4, this.getPersonalGatewayStatus(e.data[0])]; case 2: return [2, t.sent()] } })) })) }, t.prototype.getGatewayStatus = function (e) { var t = this._promiseFactory.defer(); return this._gatewaysHttpService.getGatewayStatus(e, null).then((function (e) { t.resolve(e.data) }), (function (e) { t.reject(e) })), t.promise }, t.prototype.deleteGateway = function (t) { var o = this._promiseFactory.defer(), i = this._telemetryService.startEvent(e.telemetry.SettingsDeleteGateway); return this._gatewaysHttpService.deleteGatewayObjectId(t, i.event).then((function () { i.resolve(), o.resolve(null) }), (function (e) { i.reject(), o.reject(e) })), o.promise }, t.prototype.createDataSource = function (t, o) {
                var i = this._promiseFactory.defer(), a = this._telemetryService.startEvent(e.telemetry.SettingsCreateDataSource, o.dataSourceType, o.credentialDetails.credentialType);
                return this._gatewaysHttpService.createDataSource(t, o, a.event).then((function (e) { a.resolve(), i.resolve(e.data) }), (function (e) { a.reject(), i.reject(e) })), i.promise
            }, t.prototype.createDataSourceToCluster = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.createDataSourceToCluster(e, t, null).then((function (e) { o.resolve(e) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.getDataSources = function (e) { var t = this._promiseFactory.defer(); return this._gatewaysHttpService.getDataSources(e, null).then((function (e) { t.resolve(e.data) }), (function (e) { t.reject(e) })), t.promise }, t.prototype.getDataSourceStatus = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.getDataSourceStatus(e, t, null).then((function () { o.resolve(null) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.updateDataSource = function (t, o, i) { var a = this._promiseFactory.defer(), r = this._telemetryService.startEvent(e.telemetry.SettingsUpdateGatewayDatasourceUPNMapping); return this._gatewaysHttpService.updateDataSource(t, o, i, r.event).then((function () { r.resolve(), a.resolve(null) }), (function (e) { r.reject(), a.reject(e) })), a.promise }, t.prototype.deleteDataSource = function (t, o) { var i = this._promiseFactory.defer(), a = this._telemetryService.startEvent(e.telemetry.SettingsDeleteDataSource); return this._gatewaysHttpService.deleteDataSource(t, o, a.event).then((function () { a.resolve(), i.resolve(null) }), (function (e) { a.reject(), i.reject(e) })), i.promise }, t.prototype.getModelDataSources = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.getModelDataSources(e, null, t).then((function (e) { o.resolve(e.data) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.getDatapoolDataSources = function (e) { var t = this._promiseFactory.defer(); return this._gatewaysHttpService.getDatapoolDataSources(e, null).then((function (e) { t.resolve(e.data) }), (function (e) { t.reject(e) })), t.promise }, t.prototype.getRdlDataSources = function (e) { var t = this._promiseFactory.defer(); return this._gatewaysHttpService.getRdlDataSources(e, null).then((function (e) { t.resolve(e.data) }), (function (e) { t.reject(e) })), t.promise }, t.prototype.rediscoverModelDataSources = function (e) { var t = this._promiseFactory.defer(); return this._gatewaysHttpService.rediscoverModelDataSources(e, null).then((function (e) { t.resolve(e.data) }), (function (e) { t.reject(e) })), t.promise }, t.prototype.bindModelToGateway = function (t, o, i) { var a = this._promiseFactory.defer(), r = this._telemetryService.startEvent(e.telemetry.SettingsBindModelToGateway); return this._gatewaysHttpService.bindModelToGateway(t, o, r.event, i).then((function () { r.resolve(), a.resolve(null) }), (function (e) { r.reject(), a.reject(e) })), a.promise }, t.prototype.addDataSourcePrincipals = function (t, o, i) { var a = this._promiseFactory.defer(), r = _.filter(i, (function (e) { return e.principalList.length > 0 && 3 & e.accessRight })), n = _.reduce(r, (function (e, t) { return e += t.principalList.length }), 0), s = this._telemetryService.startEvent(e.telemetry.SettingsAddDataSourcePrincipals, n); return this._gatewaysHttpService.addDataSourcePrincipals(t, o, i, s.event).then((function () { s.resolve(), a.resolve(null) }), (function (e) { s.reject(), a.reject(e) })), a.promise }, t.prototype.deleteDataSourcePrincipals = function (t, o, i) { var a = this._promiseFactory.defer(), r = _.filter(i, (function (e) { return e.principalList.length > 0 && 0 === e.accessRight })), n = _.reduce(r, (function (e, t) { return e += t.principalList.length }), 0), s = this._telemetryService.startEvent(e.telemetry.SettingsRemoveDataSourcePrincipals, n); return this._gatewaysHttpService.deleteDataSourcePrincipals(t, o, i, s.event).then((function () { s.resolve(), a.resolve(null) }), (function (e) { s.reject(), a.reject(e) })), a.promise }, t.prototype.getDataSourcePrincipals = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.getDataSourcePrincipals(e, t, null).then((function (e) { o.resolve(e.data) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.addGatewayPrincipals = function (t, o) { var i = this._promiseFactory.defer(), a = _.filter(o, (function (e) { return e.principalList.length > 0 && 3 & e.accessRight })), r = _.reduce(a, (function (e, t) { return e += t.principalList.length }), 0), n = this._telemetryService.startEvent(e.telemetry.SettingsAddGatewayPrincipals, r); return this._gatewaysHttpService.addGatewayPrincipals(t, o, n.event).then((function () { n.resolve(), i.resolve(null) }), (function (e) { n.reject(), i.reject(e) })), i.promise }, t.prototype.getGatewayPrincipals = function (e) { var t = this._promiseFactory.defer(); return this._gatewaysHttpService.getGatewayPrincipals(e, null).then((function (e) { t.resolve(e.data) }), (function (e) { t.reject(e) })), t.promise }, t.prototype.deleteGatewayPrincipals = function (t, o) { var i = this._promiseFactory.defer(), a = _.filter(o, (function (e) { return e.principalList.length > 0 && 0 === e.accessRight })), r = _.reduce(a, (function (e, t) { return e += t.principalList.length }), 0), n = this._telemetryService.startEvent(e.telemetry.SettingsRemoveGatewayPrincipals, r); return this._gatewaysHttpService.deleteGatewayPrincipals(t, o, n.event).then((function () { n.resolve(), i.resolve(null) }), (function (e) { n.reject(), i.reject(e) })), i.promise }, t.prototype.getEntropy = function () { var e = this._promiseFactory.defer(); return this._gatewaysHttpService.getEntropy(null).then((function (t) { e.resolve(t.data) }), (function (t) { e.reject(t) })), e.promise }, t.prototype.updateCredentials = function (t, o, i) { var a = this._promiseFactory.defer(), r = this._telemetryService.startEvent(e.telemetry.SettingsUpdateCredentials); return this._gatewaysHttpService.updateCredentials(t, o, i, r.event).then((function () { r.resolve(), a.resolve(null) }), (function (e) { r.reject(), a.reject(e) })), a.promise }, t.prototype.updateClusterCredentials = function (t, o, i) { var a = this._promiseFactory.defer(), r = this._telemetryService.startEvent(e.telemetry.SettingsUpdateCredentials); return this._gatewaysHttpService.updateClusterCredentials(t, o, i, r.event).then((function (e) { r.resolve(), a.resolve(e) }), (function (e) { r.reject(), a.reject(e) })), a.promise }, t.prototype.getGatewaysVersion = function () { var e = this._promiseFactory.defer(); return this._gatewaysHttpService.getGatewaysVersion(null).then((function (t) { e.resolve(t.data) }), (function (t) { e.reject(t) })), e.promise }, t.prototype.supportedDataSources = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.supportedDataSources(e, t, null).then((function (e) { o.resolve(e.data) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.getDataSourceOAuthDetailsForGatewayCluster = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.getDataSourceOAuthDetailsForGatewayCluster(e, t, null).then((function (e) { o.resolve(e.data) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.initiateOAuthLoginOnGatewayCluster = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.initiateOAuthLoginOnGatewayCluster(e, t, null).then((function (e) { o.resolve(e.data) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.getUPNMappingResult = function (t, o) { var i = this._telemetryService.startEvent(e.telemetry.SettingsTestGatewayDatasourceUPNMapping), a = this._promiseFactory.defer(); return this._gatewaysHttpService.getUPNMappingResult(t, o, i.event).then((function (e) { a.resolve(e.data) }), (function (e) { a.reject(e) })), a.promise }, t.prototype.validateParametersBeforeImport = function (t, o, i) { var a = e.common.httpService.powerbiRequestOptions(i, "ValidateParameters"); return a.retryCount = 0, e.common.httpService.post("metadata/datamovement/datasources/validateParameters/" + t, o, a) }, t.prototype.validateParametersBeforeUpdate = function (t, o) { var i = e.common.httpService.powerbiRequestOptions(o, "ValidateUpdatedParameters"); return i.retryCount = 0, e.common.httpService.post("metadata/datamovement/datasources/validateUpdatedParameters/" + t, null, i) }, t.prototype.displayOopsErrorAndEndTelemetry = function (t, o, i, a, r) { a.reject(), o.error(e.common.localize.get(i), i, { requestId: r ? r.requestId : void 0, statusCode: r ? r.status.toString() : void 0 }) }, t.prototype.getGatewayClusters = function () { return this._gatewaysHttpService.getGatewayClusters(null).then((function (e) { return e.data })) }, t.prototype.updateGatewayCluster = function (e, t) { return this._gatewaysHttpService.updateGatewayCluster(e, t, null).then((function (e) { return e.data })) }, t.prototype.getClusterDataSourceStatus = function (e, t) { var o = this._promiseFactory.defer(); return this._gatewaysHttpService.getClusterDataSourceStatus(e, t, null).then((function (e) { o.resolve(e) }), (function (e) { o.reject(e) })), o.promise }, t.prototype.getPersonalGatewayStatus = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var e, o; return __generator(this, (function (a) { switch (a.label) { case 0: if (!t) return [3, 5]; a.label = 1; case 1: return a.trys.push([1, 3, , 4]), [4, this.getGatewayStatus(t.gatewayObjectId)]; case 2: return e = a.sent(), [2, this.constructPersonalGatewayDetailsAndStatusJson(t, e)]; case 3: return o = a.sent(), o.error && o.error.code.match("DM_GWPipeline_Client_GatewayUnreachable") ? (t.gatewayStatus = i.NotReachable, [2, this.constructPersonalGatewayDetailsAndStatusJson(t, void 0, i.NotReachable)]) : [2, o]; case 4: return [3, 6]; case 5: return [2, this.constructPersonalGatewayDetailsAndStatusJson(void 0, void 0, i.NotInstalled)]; case 6: return [2] } })) })) }, t.prototype.constructPersonalGatewayDetailsAndStatusJson = function (e, t, o) { return { gatewayId: e && e.gatewayId, gatewayName: e && e.gatewayName, gatewayObjectId: e && e.gatewayObjectId, gatewayDescription: e && e.gatewayDescription, gatewayPublicKey: e && e.gatewayPublicKey, gatewayStatusJson: t ? t : { gatewayStatus: o }, gatewayAnnotation: e && e.gatewayAnnotation, gatewayType: e ? e.gatewayType : a.Personal, allowableOptions: e && e.allowableOptions } }, t.prototype.getGatewayClusterStatus = function (e) { var t = this._promiseFactory.defer(); return this._gatewaysHttpService.getGatewayClusterStatus(e, null).then((function (e) { t.resolve(e) }), (function (e) { t.reject(e) })), t.promise }, t.prototype.getSSOTestConnection = function (e, t, o, i) { var a = { userPrincipalName: o, singleSignOnType: i }; return this._gatewaysHttpService.getSSOTestConnection(e, t, null, a) }, t
        })()
    })(t = e.connectivity || (e.connectivity = {}))
})(powerbi || (powerbi = {})), angular.module("powerbi.connectivity").run(["$templateCache", function (e) { e.put("components/authenticationDialog/authenticationDialog.html", '<modal-dialog class="authDialog" auth-dialog="$ctrl.viewModel" view-model="$ctrl.dialogModel" ng-if="$ctrl.viewModel.showModalDialog && !$ctrl.viewModel.showPlainUI" on-confirm-action="$ctrl.confirmDialog()" on-cancel-action="$ctrl.closeDialog()" on-close-action="$ctrl.closeDialog()"><label class="dialogTitle trimmedTextWithEllipsis" ng-bind="::$ctrl.viewModel.dialogTitle" title="{{::$ctrl.viewModel.dialogTitle}}"></label><authentication-dialog-body view-model="$ctrl.dialogBodyModel"></authentication-dialog-body></modal-dialog><div ng-if="$ctrl.viewModel.showModalDialog && $ctrl.viewModel.showPlainUI" class="authDialog plain"><authentication-dialog-body view-model="$ctrl.dialogBodyModel"></authentication-dialog-body><section ng-if="::$ctrl.viewModel.learnMoreUrl" class="learnMoreLink"><label localize="GetData_NeedHelpConnecting"></label><a ng-href="{{::$ctrl.viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></section><section class="action"> <button ng-click="$ctrl.confirmDialog()" ng-disabled="$ctrl.viewModel.isAuthenticating" class="primary signin" localize="AuthDialog_LinkText_SignIn"></button> <button ng-click="$ctrl.closeDialog()" localize="Cancel_ButtonText" class="cancel"></button></section></div>'), e.put("components/authenticationDialogBody/authenticationDialogBody.html", '<inline-name-value-pairs name-value-pairs="$ctrl.viewModel.errorDetails()" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="$ctrl.viewModel.authDialogModel.showError"><label ng-bind="$ctrl.viewModel.errorMessage()"></label></inline-name-value-pairs><section class="authForm"><inline-message use-error-icon class="warning" ng-show="$ctrl.viewModel.showOAuthError()"><span ng-bind="$ctrl.viewModel.oAuthErrorMessage()"></span></inline-message><inline-message use-error-icon class="inlineWarning" ng-show="$ctrl.shouldShowOAuthNotSupported()"><span localize="OAuth_Not_Supported_Error"></span></inline-message><section class="disabledField" ng-repeat="property in $ctrl.viewModel.authDialogModel.datasource.connectionStringGeneralProperties"> <span>{{property.name}}</span> <input type="text" class="textBox" value="{{property.value}}" aria-label="{{property.name}}" tabindex="-1"/></section><section class="group" ng-if="$ctrl.viewModel.authDialogModel.datasource.credentialTypesNames"> <label id="authLabel" localize="AuthDialog_FieldName_Authentication"/><select ng-model="$ctrl.viewModel.authDialogModel.selectedAuthenticationIndex" ng-change="$ctrl.customizeAuthDialog()" aria-labelledby="authlabel" ng-options="$ctrl.viewModel.authDialogModel.datasource.credentialTypesNames.indexOf(credentialType) as credentialType for credentialType in $ctrl.viewModel.authDialogModel.datasource.credentialTypesNames" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner"/></section><section class="editableField1" ng-if="$ctrl.viewModel.authDialogModel.showEditableField1"> <span>{{$ctrl.viewModel.authDialogModel.editableField1Label}}</span> <input type="text" class="textBox" aria-label="{{viewModel.editableField1Label}}" value="{{$ctrl.viewModel.authDialogModel.editableField1Value}}" ng-model="$ctrl.viewModel.authDialogModel.editableField1Value" ng-change="$ctrl.dismissSpinnerError()" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner" focus-on="true"/></section><section class="editableField2" ng-if="$ctrl.viewModel.authDialogModel.showEditableField2"> <span>{{$ctrl.viewModel.authDialogModel.editableField2Label}}</span> <input type="password" class="textBox" aria-label="{{viewModel.editableField2Label}}" value="{{$ctrl.viewModel.authDialogModel.editableField2Value}}" ng-model="$ctrl.viewModel.authDialogModel.editableField2Value" ng-change="$ctrl.dismissSpinnerError()" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner"/></section><section class="privacyLevelField group" ng-if="!$ctrl.isRDLReport() && $ctrl.viewModel.authDialogModel.privacyLevelOptions"> <label id="privacylevellabel" localize="AuthDialog_FieldName_PrivacyLevel"/><select ng-model="$ctrl.viewModel.authDialogModel.selectedPrivacyLevelIndex" ng-change="$ctrl.customizeAuthDialog()" aria-labelledby="privacylevellabel" ng-options="$ctrl.viewModel.authDialogModel.privacyLevelOptions.indexOf(privacyLevel) as privacyLevel for privacyLevel in $ctrl.viewModel.authDialogModel.privacyLevelOptions" ng-disabled="$ctrl.viewModel.authDialogModel.showSpinner"/></section><section class="singleSignOnSettingCheckBox" ng-if="$ctrl.viewModel.authDialogModel.showSingleSignOn"> <input id="singleSignOnForCloudDQ" type="checkbox" ng-model="$ctrl.viewModel.authDialogModel.isSingleSignOnEnabled"/><label localize="AuthDialog_Checkbox_SingleSignOnText" for="singleSignOnForCloudDQ"/><a target="_blank" href="https://go.microsoft.com/fwlink/?linkid=861818" localize="LearnMore"/></section><div class="waitingMessageWhenApplyOAuthCredential" ng-if="$ctrl.viewModel.authDialogModel.showWaitingMessageForOAuth"></div><div class="detailsMessage" ng-if="$ctrl.viewModel.authDialogModel.showDetailsMessage"> <span>{{$ctrl.viewModel.authDialogModel.detailsMessage}}</span></div><div class="singleSignOnSettingCheckBox" feature-switch="skipTestConnection" ng-if="$ctrl.viewModel.authDialogModel.skipTestConnectionOption"> <input id="skipTestConnection" type="checkbox" ng-model="$ctrl.viewModel.authDialogModel.skipTestConnection"/><label localize="AuthDialog_Checkbox_SkipTestConnection" for="skipTestConnection"/></div><spinner class="signInSpinner" ng-show="$ctrl.viewModel.authDialogModel.showSpinner"></spinner></section>'), e.put("views/authDialogBodyView.html", '<div><inline-name-value-pairs name-value-pairs="errorDetails" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showError"><span ng-bind="errorMessage"/></inline-name-value-pairs><div class="authForm"><inline-message use-error-icon class="warning" ng-show="showOAuthError"><span ng-bind="oAuthErrorMessage"></span></inline-message><inline-message use-error-icon class="inlineWarning" ng-show="showOAuthNotSupported"><span localize="OAuth_Not_Supported_Error"></span></inline-message><div class="disabledField" ng-repeat="property in viewModel.datasource.connectionStringGeneralProperties"> <label>{{property.name}}</label> <input type="text" aria-label="{{property.name}}" class="textBox" value="{{property.value}}"/></div><div class="group" ng-if="viewModel.datasource.credentialTypesNames"> <label id="authlabel" localize="AuthDialog_FieldName_Authentication"/><select ng-model="viewModel.selectedAuthenticationIndex" ng-change="customizeAuthDialog()" aria-labelledby="authlabel" ng-options="viewModel.datasource.credentialTypesNames.indexOf(credentialType) as credentialType for credentialType in viewModel.datasource.credentialTypesNames" ng-disabled="viewModel.showSpinner"/></div><div class="editableField1" ng-if="viewModel.showEditableField1"> <span>{{viewModel.editableField1Label}}</span> <input type="text" class="textBox" aria-label="{{viewModel.editableField1Label}}" value="{{viewModel.editableField1Value}}" ng-model="viewModel.editableField1Value" ng-change="dismissSpinnerError()" ng-disabled="viewModel.showSpinner" focus-on="true"/></div><div class="editableField2" ng-if="viewModel.showEditableField2"> <span>{{viewModel.editableField2Label}}</span> <input type="password" class="textBox" aria-label="{{viewModel.editableField2Label}}" value="{{viewModel.editableField2Value}}" ng-model="viewModel.editableField2Value" ng-change="dismissSpinnerError()" ng-disabled="viewModel.showSpinner"/></div><div class="privacyLevelField group" ng-if="viewModel.privacyLevelOptions"> <label id="privacylevellabel" localize="AuthDialog_FieldName_PrivacyLevel"/><select ng-model="viewModel.selectedPrivacyLevelIndex" ng-change="customizeAuthDialog()" aria-labelledby="privacylevellabel" ng-options="viewModel.privacyLevelOptions.indexOf(privacyLevel) as privacyLevel for privacyLevel in viewModel.privacyLevelOptions" ng-disabled="viewModel.showSpinner"/></div><div class="singleSignOnSettingCheckBox" ng-if="viewModel.showSingleSignOn"> <input id="singleSignOnForCloudDQ" type="checkbox" ng-model="viewModel.isSingleSignOnEnabled"/><label localize="AuthDialog_Checkbox_SingleSignOnText" for="singleSignOnForCloudDQ"/><a target="_blank" href="https://go.microsoft.com/fwlink/?linkid=861818" localize="LearnMore"/></div><div class="waitingMessageWhenApplyOAuthCredential" ng-if="viewModel.showWaitingMessageForOAuth"></div><div class="detailsMessage" ng-if="viewModel.showDetailsMessage"> <span>{{viewModel.detailsMessage}}</span></div><div class="singleSignOnSettingCheckBox" feature-switch="skipTestConnection" ng-if="viewModel.skipTestConnectionOption"> <input id="skipTestConnection" type="checkbox" ng-model="viewModel.skipTestConnection"/><label localize="AuthDialog_Checkbox_SkipTestConnection" for="skipTestConnection"/></div><spinner class="signInSpinner" ng-show="viewModel.showSpinner"></spinner></div></div>'), e.put("views/authDialogView.html", '<div><modal-dialog class="authDialog" auth-dialog="viewModel" view-model="dialogModel" ng-if="viewModel.showModalDialog && !viewModel.showPlainUI" on-confirm-action="confirmDialog()" on-cancel-action="cancelDialog()" on-close-action="closeDialog()"><div class="title trimmedTextWithEllipsis"><span ng-bind="viewModel.dialogTitle" title="{{::viewModel.dialogTitle}}"></span></div><div class="auth-form-scrollable-region" ng-include="\'views/authDialogBodyView.html\'"></div></modal-dialog><div ng-if="viewModel.showModalDialog && viewModel.showPlainUI" class="authDialog plain"><div ng-include="\'views/authDialogBodyView.html\'" class="authDialogContent"></div><div ng-if="viewModel.learnMoreUrl" class="learnMoreLink"><span localize="GetData_NeedHelpConnecting"></span><a ng-href="{{::viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></div><div class="action"> <button ng-click="confirmDialog()" ng-disabled="viewModel.isAuthenticating" class="primary signin" localize="AuthDialog_LinkText_SignIn"></button> <button ng-click="cancelDialog()" localize="Cancel_ButtonText" class="cancel"></button></div></div></div>'), e.put("views/datasetParametersDialogBodyView.html", '<div><form name="parametersForm" class="parametersForm" ng-submit="confirmDialog()"><div ng-init="viewModel.parametersForm = parametersForm" class="parameterGroup"><div class="parameter" ng-repeat="parameter in viewModel.datasetModel.dataset.parameters"><span tabindex="-1" class="fieldName" ng-bind="parameter.name"></span><span class="description" tabindex="-1" ng-bind="parameter.description"></span> <input class="textBox" type="text" placeholder="{{parameter.sample}}" ng-model="parameter.value" ng-disabled="viewModel.showSpinner" autofocus tabindex="{{$index + 1}}" required ng-pattern="parameter.valueValidator" ng-change="enableConfirmButton()"></div></div></form></div><div class="action" ng-if="viewModel.showDatasetParametersDialog && viewModel.showPlainUI"> <button class="primary next" ng-click="confirmDialog()" localize="DatasetParametersDialog_NextButtonText" ng-disabled="dialogModel.isConfirmButtonDisabled"></button> <button class="cancel" ng-click="closeDialog()" localize="Cancel_ButtonText"></button></div>'), e.put("views/datasetParametersDialogView.html", '<div><modal-dialog class="datasetParametersDialog" view-model="dialogModel" ng-if="viewModel.showDatasetParametersDialog && !viewModel.showPlainUI" on-confirm-action="confirmDialog()" on-cancel-action="closeDialog()" on-close-action="closeDialog()"><div class="title trimmedTextWithEllipsis"><span ng-bind="viewModel.dialogTitle" title="{{::viewModel.dialogTitle}}"></span></div><div class="description">{{::viewModel.datasetModel.dataset.description}}</div><span localize="DatasetParametersDialog_HelpMessage"></span><a ng-click="relocateToLink()" href=""><span localize="LearnMore"></span></a><div class="datasetParametersDialogContentModal" ng-include="\'views/datasetParametersDialogBodyView.html\'"></div><spinner class="parametersSpinner" ng-if="viewModel.showSpinner"/><div class="validationError" ng-if="viewModel.showValidationError"><inline-name-value-pairs name-value-pairs="viewModel.invalidParameterNameValuePairs" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showValidationError"><span localize="DatasetParametersDialog_ValidationError"></span></inline-name-value-pairs></div></modal-dialog><div ng-if="viewModel.showDatasetParametersDialog && viewModel.showPlainUI" class="datasetParametersDialog plain"><div class="validationError" ng-if="viewModel.showValidationError"><inline-name-value-pairs name-value-pairs="viewModel.invalidParameterNameValuePairs" show-title="true" detail-expand="false" class="expandableBlockWarning" ng-show="viewModel.showValidationError"><span localize="DatasetParametersDialog_ValidationError"></span></inline-name-value-pairs></div><div ng-include="\'views/datasetParametersDialogBodyView.html\'" class="datasetParametersDialogContent"></div><div ng-if="viewModel.learnMoreUrl" class="learnMoreLink"><span localize="GetData_NeedHelpConnecting"></span><a ng-href="{{::viewModel.learnMoreUrl}}" target="_blank" localize="LearnMore"></a></div><div ng-if="viewModel.showSpinner"><spinner class="parametersSpinner"/><div class="credsSpinner" localize="DatasetParametersDialog_SearchingForCredentials"/></div></div></div>') }]); var powerbi; !(function (e) {
    var t; !(function (t) {
        function o(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityUpdateGatewayEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityUpdateGatewayLoggers } } function i(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityDeleteGatewayEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityDeleteGatewayLoggers } } function a(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g, y) { var f = t.CustomerAction(a, r, n, s, l, c, d, u, p, v, h, m, g, y), D = S(f.info, { dataSourceType: o, credentialType: i }); return { name: t.ConnectivityCreateDataSourceEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ dataSourceType: D.dataSourceType, credentialType: D.credentialType }, null, f.formatted()) }, info: D, loggers: t.ConnectivityCreateDataSourceLoggers } } function r(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityDeleteDataSourceEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityDeleteDataSourceLoggers } } function n(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityBindModelToGatewayEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityBindModelToGatewayLoggers } } function s(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g) { var y = t.CustomerAction(i, a, r, n, s, l, c, d, u, p, v, h, m, g), f = S(y.info, { principalCount: o }); return { name: t.ConnectivityAddDataSourcePrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ principalCount: f.principalCount }, null, y.formatted()) }, info: f, loggers: t.ConnectivityAddDataSourcePrincipalsLoggers } } function l(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g) { var y = t.CustomerAction(i, a, r, n, s, l, c, d, u, p, v, h, m, g), f = S(y.info, { principalCount: o }); return { name: t.ConnectivityRemoveDataSourcePrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ principalCount: f.principalCount }, null, y.formatted()) }, info: f, loggers: t.ConnectivityRemoveDataSourcePrincipalsLoggers } } function c(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g) { var y = t.CustomerAction(i, a, r, n, s, l, c, d, u, p, v, h, m, g), f = S(y.info, { principalCount: o }); return { name: t.ConnectivityAddGatewayPrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ principalCount: f.principalCount }, null, y.formatted()) }, info: f, loggers: t.ConnectivityAddGatewayPrincipalsLoggers } } function d(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g) { var y = t.CustomerAction(i, a, r, n, s, l, c, d, u, p, v, h, m, g), f = S(y.info, { principalCount: o }); return { name: t.ConnectivityRemoveGatewayPrincipalsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ principalCount: f.principalCount }, null, y.formatted()) }, info: f, loggers: t.ConnectivityRemoveGatewayPrincipalsLoggers } } function u(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityUpdateCredentialsEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityUpdateCredentialsLoggers } } function p(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityOpenGatewayDatasourceUPNMappingPaneLoggers } } function v(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityUpdateGatewayDatasourceUPNMappingEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityUpdateGatewayDatasourceUPNMappingLoggers } } function h(o, i, a, r, n, s, l, c, d, u, p, v, h, m) { var g = t.CustomerAction(o, i, a, r, n, s, l, c, d, u, p, v, h, m), y = S(g.info, {}); return { name: t.ConnectivityTestGatewayDatasourceUPNMappingEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted(null, null, g.formatted()) }, info: y, loggers: t.ConnectivityTestGatewayDatasourceUPNMappingLoggers } } function m(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g, y) { var f = t.Verbose(a, r, n, s, l, c, d, u, p, v, h, m, g, y), D = S(f.info, { providerId: o, providerKey: i }); return { name: t.ConnectivityOAuthInitiatedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ providerId: D.providerId, providerKey: D.providerKey }, null, f.formatted()) }, info: D, loggers: t.ConnectivityOAuthInitiatedLoggers } } function g(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g, y) { var f = t.Verbose(a, r, n, s, l, c, d, u, p, v, h, m, g, y), D = S(f.info, { providerId: o, providerKey: i }); return { name: t.ConnectivityOAuthReferrerNotAvailableInIEEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ providerId: D.providerId, providerKey: D.providerKey }, null, f.formatted()) }, info: D, loggers: t.ConnectivityOAuthReferrerNotAvailableInIELoggers } } function y(o, i, a, r, n, s, l, c, d, u, p, v, h, m, g, y) { var f = t.Verbose(a, r, n, s, l, c, d, u, p, v, h, m, g, y), D = S(f.info, { providerId: o, providerKey: i }); return { name: t.ConnectivityOAuthSucceededEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: w(), formatted: function () { return e.extendFormatted({ providerId: D.providerId, providerKey: D.providerKey }, null, f.formatted()) }, info: D, loggers: t.ConnectivityOAuthSucceededLoggers } } var w, f = jsCommon.Utility, S = jsCommon.UnionExtensions.mergeUnionType, D = e.telemetry.EventFactories; w = f ? f.generateGuid : Function.prototype, t.ConnectivityUpdateGatewayEventName = "PBI.Connectivity.UpdateGateway", t.ConnectivityUpdateGateway = o, D[t.ConnectivityUpdateGatewayEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityUpdateGatewayEventName, o, t.ConnectivityUpdateGatewayLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityDeleteGatewayEventName = "PBI.Connectivity.DeleteGateway", t.ConnectivityDeleteGateway = i, D[t.ConnectivityDeleteGatewayEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityDeleteGatewayEventName, o, t.ConnectivityDeleteGatewayLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityCreateDataSourceEventName = "PBI.Connectivity.CreateDataSource", t.ConnectivityCreateDataSource = a, D[t.ConnectivityCreateDataSourceEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityCreateDataSourceEventName, o, t.ConnectivityCreateDataSourceLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityDeleteDataSourceEventName = "PBI.Connectivity.DeleteDataSource", t.ConnectivityDeleteDataSource = r, D[t.ConnectivityDeleteDataSourceEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityDeleteDataSourceEventName, o, t.ConnectivityDeleteDataSourceLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityBindModelToGatewayEventName = "PBI.Connectivity.BindModelToGateway", t.ConnectivityBindModelToGateway = n, D[t.ConnectivityBindModelToGatewayEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityBindModelToGatewayEventName, o, t.ConnectivityBindModelToGatewayLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityAddDataSourcePrincipalsEventName = "PBI.Connectivity.AddDataSourcePrincipals", t.ConnectivityAddDataSourcePrincipals = s, D[t.ConnectivityAddDataSourcePrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityAddDataSourcePrincipalsEventName, o, t.ConnectivityAddDataSourcePrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityRemoveDataSourcePrincipalsEventName = "PBI.Connectivity.RemoveDataSourcePrincipals",
            t.ConnectivityRemoveDataSourcePrincipals = l, D[t.ConnectivityRemoveDataSourcePrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityRemoveDataSourcePrincipalsEventName, o, t.ConnectivityRemoveDataSourcePrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityAddGatewayPrincipalsEventName = "PBI.Connectivity.AddGatewayPrincipals", t.ConnectivityAddGatewayPrincipals = c, D[t.ConnectivityAddGatewayPrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityAddGatewayPrincipalsEventName, o, t.ConnectivityAddGatewayPrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityRemoveGatewayPrincipalsEventName = "PBI.Connectivity.RemoveGatewayPrincipals", t.ConnectivityRemoveGatewayPrincipals = d, D[t.ConnectivityRemoveGatewayPrincipalsEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityRemoveGatewayPrincipalsEventName, o, t.ConnectivityRemoveGatewayPrincipalsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityUpdateCredentialsEventName = "PBI.Connectivity.UpdateCredentials", t.ConnectivityUpdateCredentials = u, D[t.ConnectivityUpdateCredentialsEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityUpdateCredentialsEventName, o, t.ConnectivityUpdateCredentialsLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName = "PBI.Connectivity.OpenGatewayDatasourceUPNMappingPane", t.ConnectivityOpenGatewayDatasourceUPNMappingPane = p, D[t.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityOpenGatewayDatasourceUPNMappingPaneEventName, o, t.ConnectivityOpenGatewayDatasourceUPNMappingPaneLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityUpdateGatewayDatasourceUPNMappingEventName = "PBI.Connectivity.UpdateGatewayDatasourceUPNMapping", t.ConnectivityUpdateGatewayDatasourceUPNMapping = v, D[t.ConnectivityUpdateGatewayDatasourceUPNMappingEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityUpdateGatewayDatasourceUPNMappingEventName, o, t.ConnectivityUpdateGatewayDatasourceUPNMappingLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityTestGatewayDatasourceUPNMappingEventName = "PBI.Connectivity.TestGatewayDatasourceUPNMapping", t.ConnectivityTestGatewayDatasourceUPNMapping = h, D[t.ConnectivityTestGatewayDatasourceUPNMappingEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityTestGatewayDatasourceUPNMappingEventName, o, t.ConnectivityTestGatewayDatasourceUPNMappingLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.ConnectivityOAuthInitiatedEventName = "PBI.Connectivity.OAuthInitiated", t.ConnectivityOAuthInitiated = m, D[t.ConnectivityOAuthInitiatedEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityOAuthInitiatedEventName, o, t.ConnectivityOAuthInitiatedLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.ConnectivityOAuthReferrerNotAvailableInIEEventName = "PBI.Connectivity.OAuthReferrerNotAvailableInIE", t.ConnectivityOAuthReferrerNotAvailableInIE = g, D[t.ConnectivityOAuthReferrerNotAvailableInIEEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityOAuthReferrerNotAvailableInIEEventName, o, t.ConnectivityOAuthReferrerNotAvailableInIELoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.ConnectivityOAuthSucceededEventName = "PBI.Connectivity.OAuthSucceeded", t.ConnectivityOAuthSucceeded = y, D[t.ConnectivityOAuthSucceededEventName] = function (o) { return e.telemetryEventFactory(t.ConnectivityOAuthSucceededEventName, o, t.ConnectivityOAuthSucceededLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }
    })(t = e.telemetry || (e.telemetry = {}))
})(powerbi || (powerbi = {}));; "use strict"; var __decorate = this && this.__decorate || function (e, t, r, i) { var o, n = arguments.length, a = n < 3 ? t : null === i ? i = Object.getOwnPropertyDescriptor(t, r) : i; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, r, i); else for (var s = e.length - 1; s >= 0; s--)(o = e[s]) && (a = (n < 3 ? o(a) : n > 3 ? o(t, r, a) : o(t, r)) || a); return n > 3 && a && Object.defineProperty(t, r, a), a }, __extends = this && this.__extends || (function () { var e = function (t, r) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]) })(t, r) }; return function (t, r) { function i() { this.constructor = t } e(t, r), t.prototype = null === r ? Object.create(r) : (i.prototype = r.prototype, new i) } })(), __awaiter = this && this.__awaiter || function (e, t, r, i) { return new (r || (r = Promise))(function (o, n) { function a(e) { try { u(i.next(e)) } catch (e) { n(e) } } function s(e) { try { u(i.throw(e)) } catch (e) { n(e) } } function u(e) { e.done ? o(e.value) : new r(function (t) { t(e.value) }).then(a, s) } u((i = i.apply(e, t || [])).next()) }) }, __generator = this && this.__generator || function (e, t) { function r(e) { return function (t) { return i([e, t]) } } function i(r) { if (o) throw new TypeError("Generator is already executing."); for (; u;)try { if (o = 1, n && (a = 2 & r[0] ? n.return : r[0] ? n.throw || ((a = n.return) && a.call(n), 0) : n.next) && !(a = a.call(n, r[1])).done) return a; switch (n = 0, a && (r = [2 & r[0], a.value]), r[0]) { case 0: case 1: a = r; break; case 4: return u.label++ , { value: r[1], done: !1 }; case 5: u.label++ , n = r[1], r = [0]; continue; case 7: r = u.ops.pop(), u.trys.pop(); continue; default: if (a = u.trys, !(a = a.length > 0 && a[a.length - 1]) && (6 === r[0] || 2 === r[0])) { u = 0; continue } if (3 === r[0] && (!a || r[1] > a[0] && r[1] < a[3])) { u.label = r[1]; break } if (6 === r[0] && u.label < a[1]) { u.label = a[1], a = r; break } if (a && u.label < a[2]) { u.label = a[2], u.ops.push(r); break } a[2] && u.ops.pop(), u.trys.pop(); continue }r = t.call(e, u) } catch (e) { r = [6, e], n = 0 } finally { o = a = 0 } if (5 & r[0]) throw r[1]; return { value: r[0] ? r[1] : void 0, done: !0 } } var o, n, a, s, u = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return s = { next: r(0), throw: r(1), return: r(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this }), s }, powerbi; !(function (e) { var t; !(function (t) { function r(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m, S) { var b = t.Verbose(o, n, a, s, u, l, c, p, d, h, g, y, m, S), w = f(b.info, { visualType: r, fileName: i }); return { name: t.ApprovedResourceFailLoadedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ visualType: w.visualType, fileName: w.fileName }, null, b.formatted()) }, info: w, loggers: t.ApprovedResourceFailLoadedLoggers } } function i(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m, S) { var b = t.Verbose(o, n, a, s, u, l, c, p, d, h, g, y, m, S), w = f(b.info, { endpoint: r, allEndpointDown: i }); return { name: t.ApprovedResourceEndpointDownEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ endpoint: w.endpoint, allEndpointDown: w.allEndpointDown }, null, b.formatted()) }, info: w, loggers: t.ApprovedResourceEndpointDownLoggers } } function o(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m) { var S = t.CustomerAction(i, o, n, a, s, u, l, c, p, d, h, g, y, m), b = f(S.info, { resourcePackageName: r }); return { name: t.ApproveResourceLoadResourcePackageEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ resourcePackageName: b.resourcePackageName }, null, S.formatted()) }, info: b, loggers: t.ApproveResourceLoadResourcePackageLoggers } } function n(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m) { var S = t.Verbose(i, o, n, a, s, u, l, c, p, d, h, g, y, m), b = f(S.info, { visualType: r }); return { name: t.VisualConsentRegisterEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ visualType: b.visualType }, null, S.formatted()) }, info: b, loggers: t.VisualConsentRegisterLoggers } } function a(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m, S) { var b = t.CustomerAction(o, n, a, s, u, l, c, p, d, h, g, y, m, S), w = f(b.info, { visualType: r, userConsent: i }); return { name: t.VisualConsentSetEventName, category: e.TelemetryCategory.CustomerAction, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ visualType: w.visualType, userConsent: w.userConsent }, null, b.formatted()) }, info: w, loggers: t.VisualConsentSetLoggers } } function s(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m) { var S = t.Verbose(i, o, n, a, s, u, l, c, p, d, h, g, y, m), b = f(S.info, { visualTypes: r }); return { name: t.VisualConsentGetEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ visualTypes: b.visualTypes }, null, S.formatted()) }, info: b, loggers: t.VisualConsentGetLoggers } } function u(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m, S) { var b = t.Verbose(o, n, a, s, u, l, c, p, d, h, g, y, m, S), w = f(b.info, { requestedVisualTypes: r, actualVisualTypes: i }); return { name: t.TrustedVisualLoadEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ requestedVisualTypes: w.requestedVisualTypes, actualVisualTypes: w.actualVisualTypes }, null, b.formatted()) }, info: w, loggers: t.TrustedVisualLoadLoggers } } function l(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m) { var S = t.Verbose(i, o, n, a, s, u, l, c, p, d, h, g, y, m), b = f(S.info, { visualTypes: r }); return { name: t.TrustedVisualGetConsentEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ visualTypes: b.visualTypes }, null, S.formatted()) }, info: b, loggers: t.TrustedVisualGetConsentLoggers } } function c(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m) { var S = t.Verbose(i, o, n, a, s, u, l, c, p, d, h, g, y, m), b = f(S.info, { visualType: r }); return { name: t.VisualAuthenticationGetAADTokenEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ visualType: b.visualType }, null, S.formatted()) }, info: b, loggers: t.VisualAuthenticationGetAADTokenLoggers } } function p(r, i, o, n, a, s, u, l, c, p, d, h, g, y, m) { var S = t.Verbose(i, o, n, a, s, u, l, c, p, d, h, g, y, m), b = f(S.info, { visualType: r }); return { name: t.VisualAuthenticationGetWACTokenEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted({ visualType: b.visualType }, null, S.formatted()) }, info: b, loggers: t.VisualAuthenticationGetWACTokenLoggers } } function d(r, i, o, n, a, s, u, l, c, p, d, h, g, y) { var m = t.Verbose(r, i, o, n, a, s, u, l, c, p, d, h, g, y), S = f(m.info, {}); return { name: t.LocalResourceLoadResourcePackageItemEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: v(), formatted: function () { return e.extendFormatted(null, null, m.formatted()) }, info: S, loggers: t.LocalResourceLoadResourcePackageItemLoggers } } var v, h = jsCommon.Utility, f = jsCommon.UnionExtensions.mergeUnionType, g = e.telemetry.EventFactories; v = h ? h.generateGuid : Function.prototype, t.ApprovedResourceFailLoadedEventName = "PBI.ApprovedResource.FailLoaded", t.ApprovedResourceFailLoaded = r, g[t.ApprovedResourceFailLoadedEventName] = function (r) { return e.telemetryEventFactory(t.ApprovedResourceFailLoadedEventName, r, t.ApprovedResourceFailLoadedLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.ApprovedResourceEndpointDownEventName = "PBI.ApprovedResource.EndpointDown", t.ApprovedResourceEndpointDown = i, g[t.ApprovedResourceEndpointDownEventName] = function (r) { return e.telemetryEventFactory(t.ApprovedResourceEndpointDownEventName, r, t.ApprovedResourceEndpointDownLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.ApproveResourceLoadResourcePackageEventName = "PBI.ApproveResource.LoadResourcePackage", t.ApproveResourceLoadResourcePackage = o, g[t.ApproveResourceLoadResourcePackageEventName] = function (r) { return e.telemetryEventFactory(t.ApproveResourceLoadResourcePackageEventName, r, t.ApproveResourceLoadResourcePackageLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.VisualConsentRegisterEventName = "PBI.VisualConsent.Register", t.VisualConsentRegister = n, g[t.VisualConsentRegisterEventName] = function (r) { return e.telemetryEventFactory(t.VisualConsentRegisterEventName, r, t.VisualConsentRegisterLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualConsentSetEventName = "PBI.VisualConsent.Set", t.VisualConsentSet = a, g[t.VisualConsentSetEventName] = function (r) { return e.telemetryEventFactory(t.VisualConsentSetEventName, r, t.VisualConsentSetLoggers, t.CustomerActionEventName, e.TelemetryCategory.CustomerAction, void 0, void 0, void 0, null) }, t.VisualConsentGetEventName = "PBI.VisualConsent.Get", t.VisualConsentGet = s, g[t.VisualConsentGetEventName] = function (r) { return e.telemetryEventFactory(t.VisualConsentGetEventName, r, t.VisualConsentGetLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.TrustedVisualLoadEventName = "PBI.TrustedVisual.Load", t.TrustedVisualLoad = u, g[t.TrustedVisualLoadEventName] = function (r) { return e.telemetryEventFactory(t.TrustedVisualLoadEventName, r, t.TrustedVisualLoadLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.TrustedVisualGetConsentEventName = "PBI.TrustedVisual.GetConsent", t.TrustedVisualGetConsent = l, g[t.TrustedVisualGetConsentEventName] = function (r) { return e.telemetryEventFactory(t.TrustedVisualGetConsentEventName, r, t.TrustedVisualGetConsentLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualAuthenticationGetAADTokenEventName = "PBI.VisualAuthentication.GetAADToken", t.VisualAuthenticationGetAADToken = c, g[t.VisualAuthenticationGetAADTokenEventName] = function (r) { return e.telemetryEventFactory(t.VisualAuthenticationGetAADTokenEventName, r, t.VisualAuthenticationGetAADTokenLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualAuthenticationGetWACTokenEventName = "PBI.VisualAuthentication.GetWACToken", t.VisualAuthenticationGetWACToken = p, g[t.VisualAuthenticationGetWACTokenEventName] = function (r) { return e.telemetryEventFactory(t.VisualAuthenticationGetWACTokenEventName, r, t.VisualAuthenticationGetWACTokenLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.LocalResourceLoadResourcePackageItemEventName = "PBI.LocalResource.LoadResourcePackageItem", t.LocalResourceLoadResourcePackageItem = d, g[t.LocalResourceLoadResourcePackageItemEventName] = function (r) { return e.telemetryEventFactory(t.LocalResourceLoadResourcePackageItemEventName, r, t.LocalResourceLoadResourcePackageItemLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) } })(t = e.telemetry || (e.telemetry = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.RegisteredResources = "RegisteredResources", e.SharedResources = "SharedResources" })(t = e.ResourcePackageName || (e.ResourcePackageName = {})); var r; !(function (e) { e.ResourcePackageNames = [], e.ResourcePackageNames[1] = t.RegisteredResources, e.ResourcePackageNames[2] = t.SharedResources, e.StaticResourcesDictionary = {}, e.StaticResourcesDictionary[1] = !0, e.StaticResourcesDictionary[2] = !0 })(r = e.constants || (e.constants = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { e.resourceLoaderHttpTimeout = 2e4, e.visualCDNBlobDevName = "dev", e.visualCDNBlobDefaultName = "prod", e.visualCDNBlobAppStoreName = "app-store" })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { e.reloadEmptyVisuals = "reloadEmptyVisuals" })(t = e.constants || (e.constants = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { e.BaseTheme = "BaseTheme", e.Image = "Image", e.ShapeMap = "ShapeMap" })(t = e.SharedResourcePackageNames || (e.SharedResourcePackageNames = {})); var r; !(function (e) { e[e.CustomVisualJavascript = 0] = "CustomVisualJavascript", e[e.CustomVisualsCss = 1] = "CustomVisualsCss", e[e.CustomVisualScreenshot = 2] = "CustomVisualScreenshot", e[e.CustomVisualIcon = 3] = "CustomVisualIcon", e[e.CustomVisualWatermark = 4] = "CustomVisualWatermark", e[e.CustomVisualMetadata = 5] = "CustomVisualMetadata", e[e.Image = 100] = "Image", e[e.ShapeMap = 200] = "ShapeMap", e[e.CustomTheme = 201] = "CustomTheme", e[e.BaseTheme = 202] = "BaseTheme", e[e.DashboardTheme = 203] = "DashboardTheme", e[e.DashboardBaseTheme = 204] = "DashboardBaseTheme", e[e.HighContrastTheme = 205] = "HighContrastTheme", e[e.AppNavigation = 206] = "AppNavigation", e[e.AppTheme = 207] = "AppTheme", e[e.AppBaseTheme = 208] = "AppBaseTheme" })(r = e.ResourcePackageItemType || (e.ResourcePackageItemType = {})) })(t = e.contracts || (e.contracts = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t) { return i(e, t, !1) } function r(e, t) { return i(e, t, !0) } function i(e, t, r) { if (void 0 !== e) { var i = t.defer(), o = new FileReader; return o.onload = function () { i.resolve(o.result) }, o.onerror = function () { i.reject(o.error) }, r ? o.readAsText(e) : o.readAsDataURL(e), i.promise } } e.readAsDataUrl = t, e.readAsText = r })(t = e.BlobHelper || (e.BlobHelper = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r, i = e.contracts.ResourcePackageItemType, o = e.visualHost.constants.ResourcePackageNames, n = e.visualHost.constants.StaticResourcesDictionary; !(function (e) { function t(e, t, r) { return { type: t, path: g[t](e), name: e, content: r } } function r(e) { return _.keyBy(_.filter(e, (function (e) { return a(e) })), (function (e) { return e.name })) } function a(e) { return !!n[e.type] } function s(e, t, r) { r = p(t, r); var i = u(e, t, r); return i || (i = { id: void 0, name: r, type: t, items: [] }, e.push(i)), i } function u(e, t, r) { return r = p(t, r), _.find(e, (function (e) { return e.type === t && e.name === r })) } function l(e, t, r, i) { return c(u(e, t, i), r) } function c(e, t) { return _.find(e && e.items, (function (e) { return e.name === t })) } function p(e, t) { var r = o[e] || t; return r } function d(t, r) { null == t.id && null != r.id && (t.id = r.id); for (var i = 0, o = r.items; i < o.length; i++) { var n = o[i], a = e.findItemInPackage(t, n.name); a ? f(a, n) : t.items.push(n) } } function v(e) { return e && (0 === e.type || 3 === e.type) } function h(t) { return _.chain(t).filter((function (t) { return e.isCustomVisualResourcePackage(t) })).map((function (e) { return e.name })).uniq().value() } function f(e, t) { null == e.id && null != t.id && (e.id = t.id), !e.content && t.content && (e.content = t.content), !e.contentBlob && t.contentBlob && (e.contentBlob = t.contentBlob), !e.contentBlobUrl && t.contentBlobUrl && (e.contentBlobUrl = t.contentBlobUrl), e.content || e.contentBlob || e.promise || !t.promise || (e.promise = t.promise) } var g = {}; g[i.BaseTheme] = function (e) { return "BaseThemes/" + e + ".json" }, g[i.CustomTheme] = function (e) { return "BuiltInThemes/" + e + ".json" }, g[i.HighContrastTheme] = function (e) { return "HighContrastThemes/" + e + ".json" }, g[i.Image] = function (e) { return "Images/" + e }, g[i.ShapeMap] = function (e) { return "Shapemaps/" + e + ".json" }, e.newSharedResourceItem = t, e.getStaticResources = r, e.isStaticResource = a, e.ensureResourcePackage = s, e.findResourcePackage = u, e.findItemInPackages = l, e.findItemInPackage = c, e.ensurePackageName = p, e.mergeStaticResourcePackages = d, e.isCustomVisualResourcePackage = v, e.getCustomVisualTypes = h })(r = t.ResourcePackageUtils || (t.ResourcePackageUtils = {})) })(r = t.utils || (t.utils = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r, i = e.visualHost.BlobHelper, o = e.data.DataViewObjectDefinitions, n = e.data.services.DataViewObjectSerializer, a = e.contracts.ResourcePackageItemType, s = e.visualHost.utils.ResourcePackageUtils, u = e.data.SQExprBuilder, l = e.data.SQResourcePackageItemExpr, c = jsCommon.Trace, p = jsCommon.UrlUtils; !(function (t) { function r(e, t, r, i, o, n) { if (!e) return o.resolve(null); for (var a = b(e, t, n), s = [], u = 0, l = a; u < l.length; u++) { var c = l[u], p = c.getRefValue(); s.push(h(p, r(), i, o, { itemTypeFromReference: c.itemType })) } return o.all(s) } function d(e, t, r, i, o, a) { if (!e) return o.resolve(null); for (var s = n.serializeObjects(e, t), u = n.deserializeObjects(s, t), l = b(u, t), c = [], p = function (e) { var t = e.getRefValue(), n = h(t, r, i, o, { usePersistableFormat: a, itemTypeFromReference: e.itemType }).then((function (t) { e.setRefValue(t) })); c.push(n) }, d = 0, v = l; d < v.length; d++) { p(v[d]) } var f = o.defer(); return o.all(c).then((function () { return f.resolve(u) })), f.promise } function v(e, t) { return !!e && b(e, t).length > 0 } function h(e, t, r, i, o) { return f(s.findResourcePackage(t, e.packageType, e.packageName), e.itemName, r, i, o).then((function (e) { return null == e ? u.nullConstant() : u.text(e) }), (function (e) { return u.nullConstant() })) } function f(e, t, r, i, o) { var n = o && o.usePersistableFormat, a = o && o.itemTypeFromReference; if (!e) return i.resolve(); var u = s.findItemInPackage(e, t); !u && 2 === e.type && a && e && a && (u = s.newSharedResourceItem(t, a), e.items.push(u)); var l; if (!u || !u.path) return i.resolve(); l = 2 === e.type ? u.content ? i.resolve(u.content) : u.promise ? u.promise : u.promise = r.loadSharedResource(u.path, u.type).then((function (e) { return delete u.promise, e instanceof Blob ? u.contentBlob = e : (_.isString(e) || (e = JSON.stringify(e)), u.content = e) })) : r.loadResourcePackageItem(e, t); var c = i.defer(); return l.finally((function () { S(e, u, i, n, a).then((function (e) { return c.resolve(e) })) })), c.promise } function g(e, t, r, i) { if (r) { var o = s.findResourcePackage(r, 1); if (o) return t.loadResourcePackageItem(o, i) } return e.reject() } function y(t, r, i, o) { return g(t, r, i, o).then((function (r) { return r instanceof Blob ? e.visualHost.BlobHelper.readAsDataUrl(r, t) : ("string" != typeof r || p.isDataUri(r) || (r = p.makeJsonDataUri(r)), r) })) } function m(t, r, i, o) { return g(t, r, i, o).then((function (r) { return r instanceof Blob ? e.visualHost.BlobHelper.readAsText(r, t) : r })).then((function (e) { try { "string" == typeof e && p.isDataUri(e) && (e = p.atou(p.getBase64ContentFromDataUri(e))) } catch (t) { c.error("Error decoding registeredResource: " + JSON.stringify(t), !!t.stack), e = void 0 } return e })) } function S(e, t, r, o, n) { var s = null; if (t) { var u = n === a.ShapeMap || t.type === a.ShapeMap, l = t.type === a.BaseTheme || t.type === a.CustomTheme || t.type === a.HighContrastTheme, c = 3 === e.type || 0 === e.type, d = t.content; if (d) u && p.isDataUri(d) && (d = p.atou(p.getBase64ContentFromDataUri(d))), s = d; else if (t.contentBlob) { if (2 === e.type && t.type === a.Image || o || u || c || l) { var v = r.defer(), h = u || c || l ? i.readAsText : i.readAsDataUrl; return h(t.contentBlob, r).then((function (e) { return v.resolve(e) }), (function (e) { return v.resolve(null) })), v.promise } t.contentBlobUrl || (t.contentBlobUrl = window.URL.createObjectURL(t.contentBlob)), s = t.contentBlobUrl } } return r.resolve(s) } function b(t, r, i) { var n = []; return o.visitPropertyExprs({ definitions: t, descriptors: r, visitor: function (t, r, o, c, p) { var d = c && c.geoJson && 1 === p.length && "content" === p[0]; if (d) { var v = r; if (17 === v.type.kind && 17 === v.name.kind && 17 === v.content.kind) { if (v.type.value === e.GeoJsonTypes.shared) { var h = v.name.value; if ("string" == typeof h) { null == v.content.value && (i && i(h, a.ShapeMap), t = u.resourcePackageItem(s.ensurePackageName(2), 2, h), v.content = t) } } } } if (t instanceof l) { var f = { getRefValue: function () { return r[o] }, setRefValue: function (e) { r[o] = e } }; d && (f.itemType = a.ShapeMap), n.push(f) } } }), n } t.loadFromDataViewObjects = r, t.loadAndResolveFromDataViewObjects = d, t.hasResourceReferencesToResolve = v, t.loadAndResolveFromSQExpr = h, t.loadAndResolveContent = f, t.loadRegisteredResource = g, t.loadRegisteredResourceAsDataUri = y, t.loadRegisteredResourceAsDecodedString = m })(r = t.ResourcePackageReferenceResolver || (t.ResourcePackageReferenceResolver = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t) { for (var r, i = t.split("."); r = i.shift();) { if (!e || void 0 === e[r] || null === e[r]) return !1; e = e[r] } return !0 } e.isDefined = t })(t = e.VisualHostUtils || (e.VisualHostUtils = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t, r) { return new o(e, t, r) } function i(e, t, r) { return new o(e, t, r, (!0)) } t.createApprovedResourceLoader = r, t.createPhantomJsApprovedResourceLoader = i; var o = (function () { function r(e, t, r, i) { this.locale = e && e.locale, this.promiseFactory = e.promiseFactory, this.approvedResourceService = t, this.customVisualEndpoints = this.initEndpoints(), this.telemetryService = r, this.heartBeatPromises = [], this.onlyApprovedForServerRenderResources = i } return r.prototype.loadTrustedResourcePackages = function (e) { return this.promiseFactory.reject() }, r.prototype.loadResourcePackages = function (e) { for (var t = [], r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.loadResourcePackage(o)) } return this.promiseFactory.all(t) }, r.prototype.loadResourcePackage = function (t) { var r = this, i = function (i, o) { r.telemetryService.logEvent(e.telemetry.ApprovedResourceFailLoaded, t.name, i, r.telemetryService.root.id, !0, "PowerBI", o) }; return this.checkCustomVisualEndpointHeartBeat().catch((function (e) { return r.promiseFactory.reject(e) })).then((function (e) { var o = []; return r.approvedResourceService.isApprovedResource(t.name) ? (r.approvedResourceService.hasApi(t.name) ? o.push(r.loadResourcesWithVisualApi(e, t, i)) : o = o.concat(r.loadResourcesWithoutVisualApi(e, t, i)), r.promiseFactory.all(o)) : r.promiseFactory.reject("Visual is not an approved visual") })) }, r.prototype.loadResourcePackageItem = function (e, t) { return this.promiseFactory.reject() }, r.prototype.loadSharedResource = function (e) { return this.promiseFactory.reject() }, r.prototype.loadVisualPlugins = function (e) { var t = []; if (e) for (var r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.loadVisualPlugin(o)) } return this.promiseFactory.all(t) }, r.prototype.loadVisualPlugin = function (r) { var i = this.promiseFactory.defer(); return r && r.items && r.items.length > 0 ? this.loadResourcePackage(r).then((function () { var o = e.visuals.plugins[r.name]; o ? (o.iconUrl = t.resourceInjector.getInjectedIconUrl(r.name), i.resolve(o)) : i.reject("Unable to load visual plugin from resource package: " + r.name) })).catch((function () { i.reject("failed to resolve all promises") })) : i.resolve(null), i.promise }, r.prototype.destroy = function () { }, r.prototype.loadResourcesWithoutVisualApi = function (r, i, o) { var n = this, a = [], s = this.approvedResourceService.cdnUrlBuilder(r, i.name, ".js"), u = t.resourceInjector.injectJsUrl(this.promiseFactory, i.name, s); u.then((function () { var t = e.visuals.plugins[i.name]; return t ? (t.isDeprecated = n.approvedResourceService.isDeprecated(i.name), e.extensibility.visualPluginAdapter.transformPlugin(t), n.promiseFactory.resolve(t)) : n.promiseFactory.reject("Unable to load visual plugin from resource package: " + i.name) })).catch((function (e) { return o(s, JSON.stringify(e)), n.promiseFactory.reject(e) })), a.push(u); var l = this.approvedResourceService.cdnUrlBuilder(r, i.name, ".css"), c = t.resourceInjector.injectCssUrl(this.promiseFactory, i.name, l); return c.catch((function (e) { return o(l, JSON.stringify(e)), n.promiseFactory.reject(e) })), a.push(c), a }, r.prototype.loadResourcesWithVisualApi = function (r, i, o) { var n = this, a = this.approvedResourceService.cdnUrlBuilder(r, i.name, t.CustomVizJSONSuffix), s = this.promiseFactory.defer(); return $.ajax({ url: a, type: "GET", timeout: t.resourceLoaderHttpTimeout, dataType: "json" }).done((function (r) { i.items && i.items[0] && (i.items[0].content = JSON.stringify(r)); var o = t.visualPluginUtility.createVisualPlugin(r, n.locale, 2); o && (o.isDeprecated = n.approvedResourceService.isDeprecated(i.name), o.approvedForNoIframe = n.approvedResourceService.isApprovedForNoIframe(i.name)), e.extensibility.visualPluginAdapter.transformPlugin(o); var a = e.visuals.plugins[o.name]; a && (o.favoriteId = a.favoriteId, o.isOutOfBox = a.isOutOfBox, o.isUnpinned = a.isUnpinned), e.visuals.plugins[o.name] = o, s.resolve(null) })).fail((function (e) { var t = JSON.stringify(e); o(a, t), s.reject(t) })), s.promise }, r.prototype.initEndpoints = function () { return (e.customVisualsUrl || r.defaultCustomVisualEndpoints).split(";") }, r.prototype.checkCustomVisualEndpointHeartBeat = function () { var e = this.promiseFactory.defer(); return this.heartBeatPromises.push(e), r.customVisualEndpoint ? e.resolve(r.customVisualEndpoint) : 1 === this.heartBeatPromises.length && this.checkNextEndpoint(), e.promise }, r.prototype.checkNextEndpoint = function (t) { var i = this; t = t || 0; var o = this.customVisualEndpoints[t]; this.approvedResourceService.loadApprovedResourcesMetadata(o, this.onlyApprovedForServerRenderResources, this.promiseFactory).then((function () { i.telemetryService.logEvent(e.telemetry.ApprovedResourceEndpointDown, o, !1, i.telemetryService.root.id, !1, "PowerBI"), r.customVisualEndpoint = o; for (var t; void 0 !== (t = i.heartBeatPromises.pop());)t.resolve(o) })).catch((function (r) { var o = t + 1; if (i.telemetryService.logEvent(e.telemetry.ApprovedResourceEndpointDown, i.customVisualEndpoints[t], o === i.customVisualEndpoints.length, i.telemetryService.root.id, !0, "PowerBI", r), ++t < i.customVisualEndpoints.length) i.checkNextEndpoint(t); else for (var n = void 0; void 0 !== (n = i.heartBeatPromises.pop());)n.reject("All Custom Visual Endpoints Are Down") })) }, r.defaultCustomVisualEndpoints = "https://visuals.azureedge.net/;https://visuals2.azureedge.net/;https://extendcustomvisual.blob.core.windows.net/", r })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var commonGlobals = window, powerbi; !(function (e) { var t; !(function (t) { function r(e) { return new n(e) } var i = jsCommon.Version.gt, o = jsCommon.BrowserUtility; t.createApprovedResourceService = r; var n = (function () { function r(e) { this.options = e, this.trustedVisuals = t.TrustedVisuals, this.legacy = "legacy" } return r.prototype.isApprovedVisualsDefined = function () { return !!this.approvedVisuals }, r.prototype.isApprovedResource = function (e) { return !!this.approvedVisuals && !!this.approvedVisuals[e] }, r.prototype.isApprovedResourceServerRender = function (e) { var t = this.getCompatibleVisualVersion(e); return this.isApprovedResource(e) && !!t && !!t.approvedForServerRender }, r.prototype.isApprovedForNoIframe = function (e) { if (this.onlyApprovedForServerRenderResources || o.isInternetExplorerBrowser()) return !1; var t = this.getCompatibleVisualVersion(e); return !!t && !!t.approvedForNoIframe }, r.prototype.isTrustedResource = function (e) { return !!_.find(this.trustedVisuals, (function (t) { return t === e })) }, r.prototype.addTrustedVisual = function (e) { this.isTrustedResource(e) || this.trustedVisuals.push(e) }, r.prototype.isDeprecated = function (e) { var t = this.getCompatibleVisualVersion(e); return this.isApprovedResource(e) && !!t && !!t.isDeprecated }, r.prototype.canUseLocalStorage = function (e) { if (this.onlyApprovedForServerRenderResources) return !1; var t = this.getCompatibleVisualVersion(e); return !!t && (!!this.isApprovedResource(e) && t.canUseLocalStorage) }, r.prototype.removeApprovedResource = function (e) { this.approvedVisuals && (this.approvedVisuals[e] = void 0) }, r.prototype.getCdnEnvEndpointName = function (r) { var i = e.visualCDNBlobContainerUrl || t.visualCDNBlobDefaultName; return this.options && this.options.appStoreCdnOverride && this.options.appStoreCdnOverride() && (i = t.visualCDNBlobAppStoreName), r + i }, r.prototype.loadApprovedResourcesMetadata = function (e, r, i) { var o = this; r && (this.onlyApprovedForServerRenderResources = !0); var n = i.defer(); return this.approvedVisuals ? (this.setApprovedResources(null, this.onlyApprovedForServerRenderResources), n.resolve(null), n.promise) : ($.ajax({ url: this.getCdnEnvEndpointName(e) + "/approvedResources.json", type: "GET", timeout: t.resourceLoaderHttpTimeout, dataType: "json" }).done((function (e) { o.setApprovedResources(e, o.onlyApprovedForServerRenderResources), n.resolve(null) })).fail((function (e) { n.reject(JSON.stringify(e)) })), n.promise) }, r.prototype.cdnUrlBuilder = function (e, t, r) { var i = this.getCompatibleApiVersion(t); return i ? this.getCdnEnvEndpointName(e) + "/" + i + "/" + t + r : this.getCdnEnvEndpointName(e) + "/" + t + r }, r.prototype.getTrustedResources = function () { return this.trustedVisuals }, r.prototype.hasApi = function (e) { var t = this.getCompatibleVisualVersion(e); return !!t && (!!this.approvedVisuals && !!t && !!t.apiVersion && t.apiVersion !== this.legacy) }, r.prototype.getTelemetryUsageLimit = function (e) { var t = this.getCompatibleVisualVersion(e); return t && this.isApprovedResource(e) ? t.telemetryUsageLimit || 0 : 0 }, r.prototype.canRefreshHostData = function (e) { var t = this.getCompatibleVisualVersion(e); return !!t && (!!this.isApprovedResource(e) && t.canRefreshHostData) }, r.prototype.canGetAADToken = function (e) { var t = this.getCompatibleVisualVersion(e); return !!t && (!!this.isApprovedResource(e) && t.canGetAADToken) }, r.prototype.blockedAccessToken = function () { try { var e = JSON.parse(atob(commonGlobals.powerBIAccessToken.split(".")[1])), t = e.scp; return !(t.indexOf("user_impersonation") >= 0 || t.indexOf("__Tokens.WAC") >= 0) } catch (e) { return !1 } }, r.prototype.canGetWACToken = function (e) { var t = this.getCompatibleVisualVersion(e); return !!t && (!this.blockedAccessToken() && (!!this.isApprovedResource(e) && t.canGetWACToken)) }, r.prototype.getAllApprovedForServerRenderResourcesTypes = function () { var e = this; if (!this.approvedVisuals) return []; var t = Object.keys(this.approvedVisuals); return _.filter(t, (function (t) { return e.isApprovedResourceServerRender(t) })) }, r.prototype.getCompatibleApiVersion = function (t) { if (!this.isApprovedResource(t)) return null; if (!this.approvedVisuals[t].allVersions) return null; var r = this.approvedVisuals[t].allVersions; r.sort((function (e, t) { return e.apiVersion ? t.apiVersion ? i(e.apiVersion, t.apiVersion) ? -1 : 1 : -1 : 1 })); for (var o = function (t) { if (e.extensibility.visualApiVersions.some((function (e) { return e.version === t.apiVersion }))) return { value: t.apiVersion } }, n = 0, a = r; n < a.length; n++) { var s = a[n], u = o(s); if ("object" == typeof u) return u.value } return this.legacy }, r.prototype.getCompatibleVisualVersion = function (e) { var t = this.getCompatibleApiVersion(e); if (t) for (var r = 0, i = this.approvedVisuals[e].allVersions; r < i.length; r++) { var o = i[r]; if (o.apiVersion === t) return o } return null }, r.prototype.setApprovedResources = function (e, t) { if (e && (this.approvedVisuals = e), t) { var r = this.getAllApprovedForServerRenderResourcesTypes(), i = _.pick(this.approvedVisuals, r); this.approvedVisuals = i } }, r })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function r(e, t, r, o) { return new i(e, t, r, o) } t.createConditionalResourceLoader = r; var i = (function () {
            function r(e, t, r, i) { this.promiseFactory = e, this.resourceLoaderInitOptions = t, this.resourceLoaderFactories = r, this.approvedResourceService = i, this.resourceLoaderCollection = {} } return r.prototype.resourceLoaderSelector = function (e) { switch (e.type) { case 0: case 3: return this.getCustomVisualResourceLoader(e); case 1: case 2: return this.getStaticResourceResourceLoader() } }, r.prototype.getStaticResourceResourceLoader = function () { return this.getLocalResourceLoader() }, r.prototype.getCustomVisualResourceLoader = function (e) { if (3 === e.type) return this.getOrganizationalStoreResourceLoader(); if (this.approvedResourceService.isTrustedResource(e.name)) { if (this.getApprovedResourcesForTrustedVisualsEnabled()) return this.getTrustedResourceLoader() } else { if (this.resourceLoaderInitOptions.getApprovedResourcesEnabled()) return this.getApprovedResourceLoader(); if (this.resourceLoaderInitOptions.getSandboxVisualsEnabled()) return this.getSandboxResourceLoader() } return this.getLocalResourceLoader() }, r.prototype.getApprovedResourcesForTrustedVisualsEnabled = function () { return this.resourceLoaderInitOptions.getApprovedResourcesEnabled() || e.visualCDNBlobContainerUrl !== t.visualCDNBlobDevName }, r.prototype.getLocalResourceLoader = function () { return void 0 === this.resourceLoaderCollection.localResourceLoader && (this.resourceLoaderCollection.localResourceLoader = this.resourceLoaderFactories.localResourceLoaderFactory()), this.resourceLoaderCollection.localResourceLoader }, r.prototype.getSandboxResourceLoader = function () { return void 0 === this.resourceLoaderCollection.sandboxResourceLoader && (this.resourceLoaderCollection.sandboxResourceLoader = this.resourceLoaderFactories.sandboxResourceLoaderFactory()), this.resourceLoaderCollection.sandboxResourceLoader }, r.prototype.getApprovedResourceLoader = function () { return void 0 === this.resourceLoaderCollection.approvedResourceLoader && (this.resourceLoaderCollection.approvedResourceLoader = this.resourceLoaderFactories.approvedResourceLoaderFactory()), this.resourceLoaderCollection.approvedResourceLoader }, r.prototype.getTrustedResourceLoader = function () { return void 0 === this.resourceLoaderCollection.trustedResourceLoader && (this.resourceLoaderCollection.trustedResourceLoader = this.resourceLoaderFactories.trustedResourceLoaderFactory()), this.resourceLoaderCollection.trustedResourceLoader }, r.prototype.getOrganizationalStoreResourceLoader = function () { return void 0 === this.resourceLoaderCollection.organizationalStoreResourceLoader && (this.resourceLoaderCollection.organizationalStoreResourceLoader = this.resourceLoaderFactories.organizationalStoreResourceLoaderFactory()), this.resourceLoaderCollection.organizationalStoreResourceLoader }, r.prototype.loadTrustedResourcePackages = function (e) {
                var t = []; return t.push(this.getTrustedResourceLoader().loadTrustedResourcePackages(e)), this.promiseFactory.all(t);
            }, r.prototype.updateResourcePackageId = function (t) { if (e.visuals.plugins) { var r = e.visuals.plugins[t.name]; r && (r.resourcePackageId = t.id) } return null }, r.prototype.loadResourcePackages = function (e) { for (var t = this, r = [], i = function (e) { r.push(o.resourceLoaderSelector(e).loadResourcePackage(e).then((function () { return t.updateResourcePackageId(e) }))) }, o = this, n = 0, a = e; n < a.length; n++) { i(a[n]) } return this.promiseFactory.all(r) }, r.prototype.loadResourcePackage = function (e) { var t, r = this, i = this.resourceLoaderSelector(e); return t = i === this.resourceLoaderCollection.approvedResourceLoader ? i.loadResourcePackage(e).catch((function (t) { return r.resourceLoaderInitOptions.getSandboxVisualsEnabled ? (r.approvedResourceService.removeApprovedResource(e.name), r.getSandboxResourceLoader().loadResourcePackage(e)) : r.getLocalResourceLoader().loadResourcePackage(e) })) : i.loadResourcePackage(e), t.then((function () { return r.updateResourcePackageId(e) })) }, r.prototype.loadVisualPlugin = function (e) { return this.resourceLoaderSelector(e).loadVisualPlugin(e) }, r.prototype.loadVisualPlugins = function (e) { for (var t = [], r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.resourceLoaderSelector(o).loadVisualPlugin(o)) } return this.promiseFactory.all(t) }, r.prototype.loadResourcePackageItem = function (e, t) { return this.resourceLoaderSelector(e).loadResourcePackageItem(e, t) }, r.prototype.loadSharedResource = function (e, t) { return this.getLocalResourceLoader().loadSharedResource(e, t) }, r.prototype.destroy = function () { var e = this.resourceLoaderCollection; for (var t in e) e.hasOwnProperty(t) && e[t].destroy() }, r
        })()
    })(t = e.visualHost || (e.visualHost = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t, r, o, n, a) { return void 0 === n && (n = !1), new i(e, t, r, o, n, a) } t.createTrustedResourceLoader = r, t.CustomVizJSONSuffix = ".pbiviz.json"; var i = (function () { function r(e, t, r, i, o, n) { void 0 === o && (o = !1), this.locale = e && e.locale, this.promiseFactory = e.promiseFactory, this.approvedResourceService = t, this.resourcePackagesService = r, this.customVisualEndpoints = this.initEndpoints(), this.telemetryService = i, this.onlyApprovedForServerRenderResources = o, this.resourceLoaderInitOptions = n, this.heartBeatPromises = [] } return r.prototype.loadTrustedResourcePackages = function (r) { var i = []; if (r && r.length > 0) for (var o = 9999, n = 0, a = r; n < a.length; n++) { var s = a[n]; if (e.visuals.plugins[s]) i.push(this.promiseFactory.resolve([e.visuals.plugins[s]])); else { var u = { id: o++, name: s, type: 0, items: [{ name: s, type: e.contracts.ResourcePackageItemType.CustomVisualMetadata, path: s + t.CustomVizJSONSuffix }] }; this.resourcePackagesService.registerPackages([u]), i.push(this.loadResourcePackage(u)) } } return this.promiseFactory.all(i) }, r.prototype.loadResourcePackages = function (e) { for (var t = [], r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.loadResourcePackage(o)) } return this.promiseFactory.all(t) }, r.prototype.loadResourcePackage = function (r) { var i = this; if (this.resourceLoaderInitOptions && !this.resourceLoaderInitOptions.getApprovedResourcesEnabled() && e.visualCDNBlobContainerUrl !== t.visualCDNBlobDevName) { var o = []; return this.promiseFactory.all(o) } return this.checkCustomVisualEndpointHeartBeat().catch((function (e) { return i.promiseFactory.reject(e) })).then((function (e) { var o = []; if (i.onlyApprovedForServerRenderResources && !i.approvedResourceService.isApprovedResource(r.name)) return i.promiseFactory.reject("Visual is not an approved visual"); if (!i.approvedResourceService.hasApi(r.name)) return i.promiseFactory.reject("The trusted visual does not have a supported API version for this client"); var n = i.approvedResourceService.cdnUrlBuilder(e, r.name, t.CustomVizJSONSuffix), a = i.loadCustomVisualJson(r.name, n, r.id); return a.catch((function (e) { return i.promiseFactory.reject(e) })), o.push(a), i.promiseFactory.all(o) })) }, r.prototype.loadResourcePackageItem = function (e, t) { return this.promiseFactory.reject() }, r.prototype.loadSharedResource = function (e) { return this.promiseFactory.reject() }, r.prototype.loadVisualPlugins = function (e) { return this.promiseFactory.reject() }, r.prototype.loadVisualPlugin = function (e) { return this.promiseFactory.reject() }, r.prototype.destroy = function () { }, r.prototype.loadCustomVisualJson = function (r, i, o) { var n = this, a = this.promiseFactory.defer(); return $.ajax({ url: i, type: "GET", timeout: t.resourceLoaderHttpTimeout, dataType: "json" }).done((function (r) { var i = t.visualPluginUtility.createVisualPlugin(r, n.locale, 2); i.custom = !0, i.name === t.EsriVisual && (i.custom = !1); var o = e.visuals.plugins[i.name]; o && (i.favoriteId = o.favoriteId, i.isOutOfBox = o.isOutOfBox, i.isUnpinned = o.isUnpinned), e.extensibility.visualPluginAdapter.transformPlugin(i), e.visuals.plugins[i.name] = i, a.resolve(i) })).fail((function (t) { var o = JSON.stringify(t); n.telemetryService.logEvent(e.telemetry.ApprovedResourceFailLoaded, r, i, n.telemetryService.root.id, !0, "PowerBI", o), a.reject(o) })), a.promise }, r.prototype.initEndpoints = function () { return (e.customVisualsUrl || r.defaultCustomVisualEndpoints).split(";") }, r.prototype.checkCustomVisualEndpointHeartBeat = function () { function t() { var l = o[i]; a.loadApprovedResourcesMetadata(l, u, s).then((function () { r.customVisualEndpoint = l; for (var e = 0, t = c; e < t.length; e++) { t[e].resolve(l) } })).catch((function (r) { var a = i + 1; if (n.logEvent(e.telemetry.ApprovedResourceEndpointDown, o[i], a === o.length, n.root.id, !0, "PowerBI", r), ++i < o.length) t(); else for (var s = 0, u = c; s < u.length; s++) { var l = u[s]; l.reject("All Custom Visual Endpoints Are Down") } })) } var i = 0, o = this.customVisualEndpoints, n = this.telemetryService, a = this.approvedResourceService, s = this.promiseFactory, u = this.onlyApprovedForServerRenderResources, l = this.promiseFactory.defer(); this.heartBeatPromises.push(l); var c = this.heartBeatPromises; return r.customVisualEndpoint ? l.resolve(r.customVisualEndpoint) : 1 === this.heartBeatPromises.length && t(), l.promise }, r.defaultCustomVisualEndpoints = "https://visuals.azureedge.net/;https://visuals2.azureedge.net/;https://extendcustomvisual.blob.core.windows.net/", r })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t, r) { return new u(e, t, r || new s(e.promiseFactory)) } var i = e.telemetry.LocalResourceLoadResourcePackageItemEventName, o = e.MonitorWith, n = e.contracts.ResourcePackageItemType, a = t.utils.ResourcePackageUtils; t.createResourceLoader = r; var s = (function () { function e(e) { this.promiseFactory = e } return e.prototype.get = function (e, t, r) { return this.promiseFactory.reject() }, e.prototype.getBlob = function (e, t, r) { return this.promiseFactory.reject() }, e })(); t.DefaultSharedResourceItemProxy = s; var u = (function () { function r(e, t, r) { this.provider = t, this.sharedResourceItemProxy = r, this.promiseFactory = e && e.promiseFactory, this.locale = e && e.locale, this.telemetryV2Enabled = e && e.telemetryV2Enabled } return r.prototype.loadTrustedResourcePackages = function (e) { return this.promiseFactory.reject() }, r.prototype.loadResourcePackages = function (e) { for (var t = [], r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.loadResourcePackage(o)) } return this.promiseFactory.all(t) }, r.prototype.loadResourcePackage = function (e) { var t = []; if (e && e.items) for (var r = 0, i = e.items; r < i.length; r++) { var o = i[r]; t.push(this.loadCustomVisualResourcePackageItem(o, e)) } return this.promiseFactory.all(t) }, r.prototype.loadResourcePackageItem = function (e, t) { var r = a.findItemInPackage(e, t); return r ? r.content ? this.promiseFactory.resolve(r.content) : this.loadBlob(e.id, e.name, r) : this.promiseFactory.resolve(null) }, r.prototype.loadSharedResource = function (e, t) { return t === n.Image ? this.sharedResourceItemProxy.getBlob(null, a.ensurePackageName(2), e) : this.sharedResourceItemProxy.get(null, a.ensurePackageName(2), e) }, r.prototype.loadVisualPlugin = function (t) { var r = this, i = this.promiseFactory.defer(); return t && t.items && t.items.length > 0 ? this.loadResourcePackage(t).then((function () { var o = e.visuals.plugins[t.name]; o ? (o.iconUrl = r.getIconUrl(t), i.resolve(o)) : i.reject("Unable to load visual plugin from resource package") })).catch((function () { i.reject("failed to resolve all promises") })) : i.resolve(null), i.promise }, r.prototype.destroy = function () { }, r.prototype.loadVisualPlugins = function (e) { var t = []; if (e) for (var r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.loadVisualPlugin(o)) } return this.promiseFactory.all(t) }, r.prototype.getIconUrl = function (e) { var t = "#css-" + e.name, r = $(t)[0], i = _.find(document.styleSheets, (function (e) { return e.ownerNode === r })); if (!i) return ""; for (var o = 0, n = i.cssRules; o < n.length; o++) { var a = n[o], s = a; if (s.selectorText && s.selectorText === ".visual-icon." + e.name) return s.style.backgroundImage } return "" }, r.prototype.loadCustomVisualResourcePackageItem = function (t, r) { switch (t.type) { case e.contracts.ResourcePackageItemType.CustomVisualJavascript: return this.loadCustomVisualJS(r.id, r.name, t); case e.contracts.ResourcePackageItemType.CustomVisualsCss: return this.loadCustomVisualCss(r.id, r.name, t); case e.contracts.ResourcePackageItemType.CustomVisualMetadata: return this.loadCustomVisualMetadata(r.id, r.name, t) } }, r.prototype.loadCustomVisualJS = function (e, r, i) { var o = this, n = this.promiseFactory.defer(); return i.content ? (t.resourceInjector.injectJsCode(r, i.content), n.resolve(i.content)) : this.provider.get(e, r, i.path).then((function (e) { t.resourceInjector.injectJsCode(r, e), i.content = e, o.transformPlugin(r).then((function () { return n.resolve(e) }), (function (e) { return n.reject(e) })) })).catch((function (e) { n.reject(e) })), n.promise }, r.prototype.transformPlugin = function (t) { var r = e.visuals.plugins[t]; return r ? (e.extensibility.visualPluginAdapter.transformPlugin(r), this.promiseFactory.resolve()) : this.promiseFactory.reject("Unable to load visual plugin from resource package: " + t) }, r.prototype.loadCustomVisualCss = function (e, r, i) { var o = this.promiseFactory.defer(); return i.content ? (t.resourceInjector.injectCssCode(r, i.content), o.resolve(i.content)) : this.provider.get(e, r, i.path).then((function (e) { t.resourceInjector.injectCssCode(r, e), i.content = e, o.resolve(e) })).catch((function (e) { o.reject(e) })), o.promise }, r.prototype.loadCustomVisualMetadata = function (e, t, r) { var i = this, o = this.promiseFactory.defer(); try { r.content ? o.resolve(this.createPlugin(t, r.content)) : this.provider.get(e, t, r.path).then((function (e) { r.content = e, o.resolve(i.createPlugin(t, e)) })).catch((function (e) { o.reject(e) })) } catch (e) { o.reject(e) } return o.promise }, r.prototype.createPlugin = function (t, r) { var i = r; "object" != typeof r && (i = JSON.parse(r)); var o = e.visualHost.visualPluginUtility.createVisualPlugin(i, this.locale, 0); e.extensibility.visualPluginAdapter.transformPlugin(o); var n = e.visuals.plugins[o.name]; return n && !n.custom && (o.custom = !1), n && (o.favoriteId = n.favoriteId, o.isOutOfBox = n.isOutOfBox, o.isUnpinned = n.isUnpinned), e.visuals.plugins[o.name] = o, o }, r.prototype.loadBlob = function (e, t, r) { var i = this.promiseFactory.defer(this.telemetryV2Enabled); return r.contentBlob ? i.resolve(r.contentBlob) : r.promise ? r.promise.then((function (e) { return i.resolve(e) })) : (r.promise = this.provider.getBlob(e, t, r.path), r.promise.then((function (e) { r.contentBlob = e, i.resolve(e) })).catch((function (e) { i.reject(e) })).finally((function () { delete r.promise }))), i.promise }, __decorate([o(i)], r.prototype, "loadResourcePackageItem", null), r })(); t.LocalResourceLoader = u })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (e) { function t(e, t) { var o = e.capabilities, n = r(e, t) || r(e, "en-US"); return o && n && i(o, n), e } function r(e, t) { var r = n(t); return e && e.stringResources ? e.stringResources[r] : null } function i(e, t) { for (var r in e) if (e.hasOwnProperty(r)) if ("object" == typeof e[r]) i(e[r], t); else if ("displayNameKey" === r && e.displayName) { var n = e.displayNameKey; e.displayName = o(t, n) || e.displayName } else if ("descriptionKey" === r && e.description) { var n = e.descriptionKey; e.description = o(t, n) || e.description } else if ("placeHolderTextKey" === r && e.placeHolderText) { var n = e.placeHolderTextKey; e.placeHolderText = o(t, n) || e.placeHolderText } } function o(e, t) { return e[t] } function n(e) { var t = e; return { ar: "ar-SA", bg: "bg-BG", ca: "ca-ES", cs: "cs-CZ", da: "da-DK", de: "de-DE", el: "el-GR", "en-US": "en-US", es: "es-ES", et: "et-EE", eu: "eu-ES", fi: "fi-FI", fr: "fr-FR", gl: "gl-ES", he: "he-IL", hi: "hi-IN", hr: "hr-HR", hu: "hu-HU", id: "id-ID", it: "it-IT", ja: "ja-JP", kk: "kk-KZ", ko: "ko-KR", lt: "lt-LT", lv: "lv-LV", ms: "ms-MY", no: "nb-NO", nl: "nl-NL", pl: "pl-PL", br: "pt-BR", pt: "pt-PT", ro: "ro-RO", ru: "ru-RU", sk: "sk-SK", si: "sl-SI", "sr-Cyrl": "sr-Cyrl-RS", "sr-Latn": "sr-Latn-RS", sv: "sv-SE", th: "th-TH", tr: "tr-TR", uk: "uk-UA", vi: "vi-VN", "zh-Hans": "zh-CN", "zh-Hant": "zh-TW" }[t] || t || navigator.language } e.setLocalizedCapabilities = t, e.getLocalizedResources = r, e.getLocale = n })(t = e.LocalizationResourceUtility || (e.LocalizationResourceUtility = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r, i = jsCommon.Lazy, o = e.visuals.plugins; !(function (t) { function r(e, t) { return e ? !!e.custom : !_.includes(u, t) } function n(t) { return t && t.capabilities && t.capabilities.dataViewMappings && !!e.ScriptResultUtil.findScriptResultMapping(t.capabilities.dataViewMappings) } function a(e, t) { switch (e) { case "pythonVisual": return !0; case "scriptVisual": default: return !(!t || !t.scriptVisualEnabled) } } function s(e) { return !!e && !!l.getValue()[e.name] } var u = ["play", "subview", "smallMultiple"], l = new i(function () { var e; return e = {}, e[o.card.name] = !0, e[o.gauge.name] = !0, e[o.image.name] = !0, e[o.kpi.name] = !0, e[o.textbox.name] = !0, e }); t.isCustomVisual = r, t.isScriptVisual = n, t.isScriptVisualQueryable = a, t.isLightWeightRenderingVisual = s })(r = t.utils || (t.utils = {})); var n; !(function (r) { function i(t, r, i) { var o = e.Prototype.inherit(t); return o.create = r, i && i(o), o } function n(e, t, r) { return i(e, t, (function (e) { return a(e, r) })) } function a(t, r) { if (r) switch (t.name) { case o.scatterChart.name: t.capabilities = e.visuals.getScatterChartCapabilities(r); break; case o.areaChart.name: t.capabilities = e.visuals.getLineChartCapabilities(!1, !0, r); break; case o.lineChart.name: t.capabilities = e.visuals.getLineChartCapabilities(!1, !1, r); break; case o.stackedAreaChart.name: t.capabilities = e.visuals.getLineChartCapabilities(!0, !0, r); break; case o.waterfallChart.name: t.capabilities = e.visuals.getWaterfallChartCapabilities(r); break; case o.comboChart.name: t.capabilities = e.visuals.getComboChartCapabilities(!1); break; case o.lineStackedColumnComboChart.name: t.capabilities = e.visuals.getComboChartCapabilities(!0); break; case o.lineClusteredColumnComboChart.name: t.capabilities = e.visuals.getComboChartCapabilities(!1); break; case o.columnChart.name: case o.hundredPercentStackedColumnChart.name: t.capabilities = e.visuals.getColumnChartCapabilities(!1, !0, !1, r); break; case o.barChart.name: case o.hundredPercentStackedBarChart.name: t.capabilities = e.visuals.getColumnChartCapabilities(!0, !0, !1, r); break; case o.clusteredBarChart.name: t.capabilities = e.visuals.getColumnChartCapabilities(!0, !1, !1, r); break; case o.clusteredColumnChart.name: t.capabilities = e.visuals.getColumnChartCapabilities(!1, !1, !1, r); break; case o.pivotTable.name: t.capabilities = e.visuals.getPivotTableCapabilities(r); break; case o.filledMap.name: t.capabilities = e.visuals.getFilledMapCapabilities(r); break; case o.map.name: t.capabilities = e.visuals.getMapCapabilities(r); break; case o.funnel.name: t.capabilities = e.visuals.getFunnelChartCapabilities(r); break; case o.shapeMap.name: t.capabilities = e.visuals.getShapeMapCapabilities(); break; case o.treemap.name: t.capabilities = e.visuals.getTreemapCapabilities(r); break; case o.slicer.name: t.capabilities = e.visuals.getSlicerCapabilities(r); break; case o.keyDriversVisual.name: t.capabilities = e.visuals.getKeyDriversCapabilities(r) } } function s(e) { var t = "#css-" + e, r = $(t)[0], i = _.find(document.styleSheets, (function (e) { return e.ownerNode === r })); if (i && i.cssRules) for (var o = 0, n = i.cssRules; o < n.length; o++) { var a = n[o]; if (a.selectorText && a.selectorText === ".visual-icon." + e) return a.style.backgroundImage } return "" } function u(t, r, i, o, n) { var a = r.getPlugin(t); return a && a.module ? i.require(a.module).then((function () { return a }), (function () { return null })) : n ? e.PbiPromise.resolve(a) : o.resolve(a) } r.getPluginCopyWithFeatureSwitches = n, r.applyFeatureSwitches = a, r.getPluginIconUrl = s, r.ensurePlugin = u; var l = (function () { function e() { this.visualPlugins = {}, this.loadedVisualPlugins = {} } return e.prototype.getLoadedPlugins = function () { return _.map(this.loadedVisualPlugins, (function (e) { return e })) }, e.prototype.getLoadedPlugin = function (e) { return this.loadedVisualPlugins[e] }, e.prototype.hasPlugin = function (e) { return !!this.visualPlugins[e] }, e.prototype.loadPlugin = function (e, t) { t && (this.visualPlugins[e] = t), this.loadedVisualPlugins[e] = this.visualPlugins[e] }, e.prototype.unloadPlugin = function (e) { delete this.loadedVisualPlugins[e] }, e })(); r.VisualPluginStorage = l, (function (r) { function i(r, i, o, n, a, s) { var u = i.defer(); if (!a && r.hasPlugin(n.name)) r.loadPlugin(n.name), u.resolve(null); else if (!a && e.visuals.plugins[n.name]) r.loadPlugin(n.name, e.visuals.plugins[n.name]), u.resolve(null); else if (_.isEmpty(n.items)) u.reject("Resource package does not contain any items"); else { var l; s && (l = s.startEvent(e.telemetry.ApproveResourceLoadResourcePackage, n.name)), o.loadResourcePackage(n).catch((function (e) { })).finally((function () { var i = e.visuals.plugins[n.name]; i ? (i.iconUrl || (i.iconUrl = t.visualPluginServiceHelpers.getPluginIconUrl(n.name)), r.loadPlugin(i.name, i), u.resolve(null), l && l.resolve()) : (u.reject("Unable to load visual plugin from resource package"), l && l.reject()) })) } return u.promise } function o(e, t) { for (var r = 0, i = t; r < i.length; r++) { var o = i[r]; e.loadPlugin(o.name, o) } } r.ensurePlugin = i, r.ensureTrustedVisualPlugins = o })(l = r.VisualPluginStorage || (r.VisualPluginStorage = {})) })(n = t.visualPluginServiceHelpers || (t.visualPluginServiceHelpers = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t, r, i) { return new a(e, t, r, i) } function i(r, i, o, n, a) { i = i ? _.clone(i) : {}; var s = i.touchScreenOptimizedTooltips; switch (r) { case e.visuals.plugins.areaChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.areaChart, (function (e) { return e.module.createCartesianChart({ chartType: 1, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.barChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.barChart, (function (e) { return e.module.createCartesianChart({ chartType: 6, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.clusteredBarChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.clusteredBarChart, (function (e) { return e.module.createCartesianChart({ chartType: 5, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.clusteredColumnChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.clusteredColumnChart, (function (e) { return e.module.createCartesianChart({ chartType: 3, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.columnChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.columnChart, (function (e) { return e.module.createCartesianChart({ chartType: 4, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.comboChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.comboChart, (function (e) { return e.module.createCartesianChart({ chartType: 11, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.dataDotChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.dataDotChart, (function (e) { return e.module.createCartesianChart({ chartType: 12, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.dataDotClusteredColumnComboChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.dataDotClusteredColumnComboChart, (function (e) { return e.module.createCartesianChart({ chartType: 16, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.dataDotStackedColumnComboChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.dataDotStackedColumnComboChart, (function (e) { return e.module.createCartesianChart({ chartType: 17, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.hundredPercentStackedBarChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.hundredPercentStackedBarChart, (function (e) { return e.module.createCartesianChart({ chartType: 7, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.hundredPercentStackedColumnChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.hundredPercentStackedColumnChart, (function (e) { return e.module.createCartesianChart({ chartType: 8, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.stackedAreaChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.stackedAreaChart, (function (e) { return e.module.createCartesianChart({ chartType: 2, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.waterfallChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.waterfallChart, (function (e) { return e.module.createCartesianChart({ chartType: 13, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s, featureSwitches: i }) }), i); case e.visuals.plugins.realTimeLineChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.realTimeLineChart, (function (e) { var t = e.module; return t.createCartesianChart({ chartType: 18, animator: t.createRealTimeLineChartAnimator(), animateCategoryAxis: !0, animateValueAxis: !0, tooltipsEnabled: s }) }), i); case e.visuals.plugins.lineChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.lineChart, (function (e) { return e.module.createCartesianChart({ chartType: 0, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.lineClusteredColumnComboChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.lineClusteredColumnComboChart, (function (e) { return e.module.createCartesianChart({ chartType: 14, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.lineStackedColumnComboChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.lineStackedColumnComboChart, (function (e) { return e.module.createCartesianChart({ chartType: 15, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.scatterChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.scatterChart, (function (e) { var t = e.module; return t.createCartesianChart({ chartType: 10, behavior: t.createCartesianChartBehavior([t.createScatterChartMobileBehavior()]), tooltipsEnabled: s, featureSwitches: i }) }), i); case e.visuals.plugins.gauge.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.gauge, (function (e) { return e.module.createGauge({ gaugeSmallViewPortProperties: a.gaugeSmallViewPortProperties, tooltipsEnabled: s }, i) }), i); case e.visuals.plugins.funnel.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.funnel, (function () { return new e.visuals.FunnelChart({ animator: null, funnelSmallViewPortProperties: a.funnelSmallViewPortProperties, tooltipsEnabled: s }) }), i); case e.visuals.plugins.donutChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.donutChart, (function () { return new e.visuals.DonutChart({ disableGeometricCulling: !0, smallViewPortProperties: a.donutSmallViewPortProperties, tooltipsEnabled: s }) }), i); case e.visuals.plugins.pieChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.pieChart, (function () { return new e.visuals.DonutChart({ sliceWidthRatio: 0, disableGeometricCulling: !0, smallViewPortProperties: a.donutSmallViewPortProperties, tooltipsEnabled: s }) }), i); case e.visuals.plugins.ribbonChart.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.ribbonChart, (function (e) { return e.module.createCartesianChart({ chartType: 9, trimOrdinalDataOnOverflow: o, tooltipsEnabled: s }) }), i); case e.visuals.plugins.matrix.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.matrix, (function () { return new e.visuals.Matrix }), i); case e.visuals.plugins.table.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.table, (function () { return new e.visuals.Table }), i); case e.visuals.plugins.pivotTable.name: var u = e.visuals.PivotTableOptions.createMobileConstructorOptions(); return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.pivotTable, (function () { return new e.visuals.PivotTable(u, i) }), i); case e.visuals.plugins.tableEx.name: var l = e.visuals.TableExOptions.createMobileConstructorOptions(); return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.tableEx, (function () { return new e.visuals.TableEx(l, i) }), i); case e.visuals.plugins.map.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.map, (function () { return new e.visuals.Map({ viewChangeThrottleInterval: n, enableCurrentLocation: !!i && i.mapCurrentLocationEnabled, tooltipsEnabled: s }) }), i); case e.visuals.plugins.filledMap.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.filledMap, (function () { return new e.visuals.Map({ filledMap: !0, viewChangeThrottleInterval: n, tooltipsEnabled: s }) }), i); case e.visuals.plugins.card.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.card, (function (e) { return e.module.createCard({ cardSmallViewportProperties: a.cardSmallViewportProperties, tooltipsEnabled: s, featureSwitches: i }) }), i); case e.visuals.plugins.textbox.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.textbox, (function (e) { var t = e.module; return t.createTextbox({ viewModelAdapter: t.createAlwaysUseSmallViewportTextboxViewModelAdapter() }) }), i); case e.visuals.plugins.slicer.name: return t.visualPluginServiceHelpers.getPluginCopyWithFeatureSwitches(e.visuals.plugins.slicer, (function () { return new e.visuals.Slicer({ featureSwitches: i }) }), i); default: return e.Prototype.inherit(e.visuals.plugins[r]) } } var o = e.visualHost.utils.ResourcePackageUtils, n = t.visualPluginServiceHelpers.VisualPluginStorage; t.createMobileVisualPluginService = r; var a = (function () { function r(t, o, a, s) { var u = this; this.promiseFactory = t, this.resourceLoader = o; var l = a || { gaugeSmallViewPortProperties: { hideGaugeSideNumbersOnSmallViewPort: !0, smallGaugeMarginsOnSmallViewPort: !0, MinHeightGaugeSideNumbersVisible: r.MinHeightGaugeSideNumbersVisible, GaugeMarginsOnSmallViewPort: r.GaugeMarginsOnSmallViewPort }, funnelSmallViewPortProperties: { hideFunnelCategoryLabelsOnSmallViewPort: !0, minHeightFunnelCategoryLabelsVisible: r.MinHeightFunnelCategoryLabelsVisible }, donutSmallViewPortProperties: { maxHeightToScaleDonutLegend: r.MaxHeightToScaleDonutLegend }, cardSmallViewportProperties: null }; e.visuals.TooltipManager.ShowTooltips = !1; var c = !1, p = this.getMapThrottleInterval(); if (this.storage = new n, s) this.initBuiltInPlugins = s().then((function (t) { u.featureSwitches = t; for (var r in e.visuals.plugins) u.storage.loadPlugin(r, i(r, t, c, p, l)); e.visuals.TooltipManager.ShowTooltips = u.featureSwitches && u.featureSwitches.touchScreenOptimizedTooltips, e.visuals.TooltipManager.ShowTouchScreenOptimizedTooltips = u.featureSwitches && u.featureSwitches.touchScreenOptimizedTooltips })); else { for (var d in e.visuals.plugins) this.storage.loadPlugin(d, i(d, void 0, c, p, l)); this.initBuiltInPlugins = t.resolve(null) } } return r.prototype.getVisuals = function () { return this.storage.getLoadedPlugins() }, r.prototype.getPlugin = function (e) { return this.storage.getLoadedPlugin(e) }, r.prototype.capabilities = function (e) { var t = this.getPlugin(e); return t ? t.capabilities : void 0 }, r.prototype.ensureBuiltInPlugins = function () { return this.initBuiltInPlugins }, r.prototype.ensurePlugins = function (e) { var t = []; if (e && e.length) for (var r = 0, i = e; r < i.length; r++) { var n = i[r]; o.isCustomVisualResourcePackage(n) && t.push(this.ensurePlugin(n)) } return this.promiseFactory.allSettled(t) }, r.prototype.ensurePlugin = function (e) { return n.ensurePlugin(this.storage, this.promiseFactory, this.resourceLoader, e) }, r.prototype.ensureTrustedVisualPlugins = function (e) { n.ensureTrustedVisualPlugins(this.storage, e) }, r.prototype.requireSandbox = function (e) { return t.utils.isCustomVisual(e) }, r.prototype.isCustomVisual = function (e) { return t.utils.isCustomVisual(this.getPlugin(e), e) }, r.prototype.isScriptVisual = function (e) { return t.utils.isScriptVisual(this.getPlugin(e)) }, r.prototype.isScriptVisualQueryable = function (e) { return t.utils.isScriptVisualQueryable(e, this.featureSwitches) }, r.prototype.isLightWeightRenderingVisual = function (e) { return t.utils.isLightWeightRenderingVisual(this.getPlugin(e)) }, r.prototype.getMapThrottleInterval = function () { if (navigator.userAgent.toLowerCase().indexOf("windows phone") !== -1) return 100 }, r.prototype.getInteractivityOptions = function (e) { return { overflow: this.getMobileOverflowString(e), isInteractiveLegend: this.isChartSupportInteractivity(e), selection: !0, isVisualInteractive: !0 } }, r.prototype.getTelemetryHostInformation = function () { return { name: "MobileTileHost" } }, r.prototype.getMobileOverflowString = function (e) { switch (e) { case "multiRowCard": return "visible"; default: return "hidden" } }, r.prototype.isChartSupportInteractivity = function (e) { switch (e) { case "areaChart": case "barChart": case "clusteredBarChart": case "clusteredColumnChart": case "columnChart": case "donutChart": case "hundredPercentStackedBarChart": case "hundredPercentStackedColumnChart": case "lineChart": case "pieChart": case "scatterChart": case "table": case "matrix": case "multiRowCard": return !0; default: return !1 } }, r.prototype.getStorage = function () { return this.storage }, r.MinHeightGaugeSideNumbersVisible = 80, r.GaugeMarginsOnSmallViewPort = 10, r.MinHeightFunnelCategoryLabelsVisible = 80, r.MaxHeightToScaleDonutLegend = 300, r })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (e) {
        var t, r = jsCommon.Version; !(function (t) {
            function i(e, t, i, o) { void 0 === i && (i = !1), void 0 === o && (o = null); var n = { major: 1, minor: 8, patch: 0 }, a = document.createElement("script"); i ? o && r.gt(o, n) || r.eq(o, n) ? a.innerHTML = l(t) : a.innerHTML = u(t) : a.innerHTML = t, a.id = "js-" + e, a.setAttribute("name", e), document.body.appendChild(a) } function o(e, t) { var r = $("<style/>", { html: t, id: "css-" + e }); r.attr("name", e), $("head").append(r) } function n(t, r, i) { var o = t.defer(); return $.ajax({ url: i, dataType: "script", cache: !0, success: function () { return o.resolve(null) }, error: function (e, t, r) { return o.reject(r) }, timeout: e.resourceLoaderHttpTimeout }), o.promise } function a(t, r, i) { var o = t.defer(), n = setTimeout((function () { return o.reject("Timeout") }), e.resourceLoaderHttpTimeout); return $("<link>", { id: "css-" + r, type: "text/css", rel: "stylesheet", href: i, crossorigin: "anonymous" }).on("load", (function (e) { clearTimeout(n), o.resolve(null) })).on("error", (function (e) { clearTimeout(n), o.reject(e) })).appendTo($("head")), o.promise } function s(e) { var t = "#css-" + e, r = $(t)[0], i = _.find(document.styleSheets, (function (e) { return e.ownerNode === r })); if (i && i.cssRules) for (var o = 0, n = i.cssRules; o < n.length; o++) { var a = n[o]; if (a.selectorText && _.includes(a.selectorText, e)) return a.style.backgroundImage } return "" } function u(e) {
                return "\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    " + e + ";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                    Object.defineProperty(newWindow, key, {\n                                        get: (function(item) {\n                                            return function() {\n                                                return item;\n                                            }\n                                        })(item),\n                                        set: function() { }\n                                    });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            ";
            } function l(e) { return "\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    " + e + ";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */}\n                                        }\n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                \t\tif (key ===\"window\" || key === \"self\"){\n                                            Object.defineProperty(newWindow, key, {\n                                                get: (function(newWindow) {\n                                                    return function() {\n                                                        return newWindow;\n                                                    }\n                                                })(newWindow),\n                                                set: function() { }\n                                        });\n                                    } else {\n                                        Object.defineProperty(newWindow, key, {\n                                            get: (function(item) {\n                                                return function() {\n                                                    return item;\n                                                }\n                                            })(item),\n                                            set: function() { }\n                                        });\n                                    }\n                                } else if (typeof item === 'number' || typeof item === 'boolean' || typeof item === 'string') {\n                                      Object.defineProperty(newWindow, key, {\n                                          get: (function(w, keyString) {\n                                              return function() {\n                                                  return w[keyString];\n                                              }\n                                          })(w, key.toString()),\n                                          set: (function(w, keyString) {\n                                              return function(newValue) {\n                                                  w[keyString] = newValue;\n                                              }\n                                          })(w, key.toString())\n                                      });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            " } t.injectJsCode = i, t.injectCssCode = o, t.injectJsUrl = n, t.injectCssUrl = a, t.getInjectedIconUrl = s
        })(t = e.resourceInjector || (e.resourceInjector = {}))
    })(t = e.visualHost || (e.visualHost = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new i } var r = e.utils.ResourcePackageUtils; e.createResourcePackagesService = t; var i = (function () { function t() { this.resourcePackageNameIdLookupTable = {}, this.packages = [{ id: void 0, name: e.ResourcePackageName.SharedResources, type: 2, items: [] }] } return t.prototype.getAllPackages = function () { return this.packages }, t.prototype.registerPackages = function (e) { if (e) for (var t = 0, i = e; t < i.length; t++) { var o = i[t]; if (o.items && 0 !== o.items.length && (3 !== o.type || !o.disabled)) { this.resourcePackageNameIdLookupTable[o.id] = o.name; var n = r.findResourcePackage(this.packages, o.type, o.name); if (n) r.isStaticResource(o) ? r.mergeStaticResourcePackages(n, o) : _.merge(n, o); else { var a = _.clone(o); a.items = _.clone(o.items), this.packages.push(a) } } } }, t.prototype.getPackage = function (e) { return _.find(this.packages, (function (t) { return t.name === e })) }, t.prototype.delete = function (e) { _.remove(this.packages, (function (t) { return t.name === e })) }, t.prototype.getPackageById = function (e) { var t = this.resourcePackageNameIdLookupTable[e]; return t && this.getPackage(t) }, t.prototype.clear = function () { this.packages = [], this.resourcePackageNameIdLookupTable = {} }, t })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t, r, i, o) { return new n(e, t, r, i, o) } var i = e.contracts.ResourcePackageItemType; e.visualHost.utils.ResourcePackageUtils; t.createSandboxResourceLoader = r; var o; !(function (e) { e.loadResourcePackage = "loadResourcePackage", e.loadVisualPlugin = "loadVisualPlugin", e.loadVisualPluginWithContent = "loadVisualPluginWithContent", e.onVisualPluginLoad = "onVisualPluginLoad", e.onResourcePackageLoad = "onResourcePackageLoad", e.onVisualPluginLoadError = "onVisualPluginLoadError", e.onResourcePackageLoadError = "onResourcePackageLoadError" })(o || (o = {})); var n = (function (r) { function n(e, t, i, o, n) { var a = r.call(this, e, o, null) || this; return a.approvedResourceService = n, a.locale = e && e.locale, a.promiseFactory = e.promiseFactory, a.messageProxy = t, a.sandboxLoaderUri = i, a.provider = o, a.initIFrame(), a } return __extends(n, r), n.prototype.loadResourcePackage = function (e, t) { return this.loadVisualPlugin(e, t) }, n.prototype.loadResourcePackages = function (e) { for (var t = [], r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.loadResourcePackage(o)) } return this.promiseFactory.all(t) }, n.prototype.loadTrustedResourcePackages = function (e) { return this.promiseFactory.reject() }, n.prototype.loadSharedResource = function (e) { return this.promiseFactory.reject() }, n.prototype.loadVisualPlugin = function (r, i) { var n = this, a = this.promiseFactory.defer(); return this.loadResourcesContent(r).then((function (s) { if (!s || _.isEmpty(s)) return void a.resolve(null); var u = _.keyBy(s, "type"), l = u[e.contracts.ResourcePackageItemType.CustomVisualMetadata]; if (l) try { var c = jsCommon.JsonExtensions.tryParseJSON(l.content), p = t.visualPluginUtility.createVisualPlugin(c, n.locale, i ? 1 : 0); e.extensibility.visualPluginAdapter.transformPlugin(p); var d = e.visuals.plugins[p.name]; d && (p.favoriteId = d.favoriteId, p.isOutOfBox = d.isOutOfBox, p.isUnpinned = d.isUnpinned), e.visuals.plugins[p.name] = p, a.resolve(p) } catch (e) { a.reject(e) } else { var v = { pluginName: r.name, mappedPluginContent: u }, h = { eventName: o.loadVisualPluginWithContent, arguments: [v] }; n.messageProxy.postMessageAsync(h).then((function (t) { var r = t, i = e.visuals.plugins[r.name]; if (!i || i.custom) { r.custom = !0; var o = r.capabilities.objects; r.capabilities.objects = e.data.services.DataViewObjectDescriptorSerializer.deserialize(o), e.extensibility.visualPluginAdapter.transformPlugin(r), n.approvedResourceService && n.approvedResourceService.isApprovedVisualsDefined() && (r.isDeprecated = !0), e.visuals.plugins[r.name] = r, a.resolve(r) } })).catch((function (e) { a.reject(e) })) } })).catch((function (e) { a.reject(e) })), a.promise }, n.prototype.loadVisualPlugins = function (e) { var t = []; if (e) for (var r = 0, i = e; r < i.length; r++) { var o = i[r]; t.push(this.loadVisualPlugin(o)) } return this.promiseFactory.all(t) }, n.prototype.destroy = function () { this.iframe.remove(), this.iframe = null, this.messageProxy.destroy(), this.messageProxy = null, this.contentWindow = null }, n.prototype.initIFrame = function () { var e = this, t = this.sandboxLoaderUri; jsCommon.QueryStringUtil.getQueryStringValue("unmin") && (t += "?unmin=1"), this.iframe = $('<iframe class="sandbox-resource-loader ng-hide" sandbox="allow-scripts"></iframe>').attr("src", t).one("load", (function () { return e.onIFrameLoad() })).appendTo(document.body) }, n.prototype.onIFrameLoad = function () { this.contentWindow = this.iframe[0].contentWindow, this.messageProxy.contentWindow = this.contentWindow, this.messageProxy.flushQueue() }, n.prototype.loadResourcesContent = function (e) { for (var t = [], r = e.id, o = e.name, n = 0, a = e.items; n < a.length; n++) { var s = a[n]; s.type !== i.CustomVisualIcon && t.push(this.loadResourceContent(r, o, s, e)) } return this.promiseFactory.all(t) }, n.prototype.loadResourceContent = function (e, r, i, o) { var n = this, a = this.promiseFactory.defer(); return i.content ? a.resolve(this.getItemContent(i.content, i)) : this.provider.get(e, r, i.path).then((function (e) { e ? a.resolve(n.getItemContent(e, i)) : t.ResourcePackageReferenceResolver.loadAndResolveContent(o, i.name, n, n.promiseFactory).then((function (e) { a.resolve(n.getItemContent(e, i)) })) })).catch((function (e) { a.reject(e) })), a.promise }, n.prototype.getItemContent = function (e, t) { var r = _.isString(e) ? e : JSON.stringify(e); return t.content = t.type === i.CustomVisualMetadata ? r : void 0, { type: t.type, content: r } }, n })(t.LocalResourceLoader); t.SandboxResourceLoader = n })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, i, o, n, a) { return new r(e, t, o, n, i, a) } e.createOrganizationalStoreResourceLoader = t; var r = (function (t) { function r(e, r, i, o, n, a) { var s = t.call(this, e, r, i, o) || this; return s.resourcePackagesService = n, s.resourcePackageResolver = a, s.resourcePackagesService.getAllPackages(), s } return __extends(r, t), r.prototype.loadResourcePackage = function (r) { var i = this; if (r) return this.resourcePackageResolver(r).then((function (o) { var n = []; if (o && o.items && !o.disabled) for (var a, s = function (t) { a = e.ResourcePackageReferenceResolver.loadAndResolveContent(o, t.name, i, i.promiseFactory).then((function (e) { t.content = e })), n.push(a) }, u = 0, l = o.items; u < l.length; u++) { var c = l[u]; s(c) } else if (!o || o.disabled) return i.resourcePackagesService.delete(r.name), null; return i.promiseFactory.all(n).then((function () { return t.prototype.loadResourcePackage.call(i, o, !0) })) })).catch((function () { return i.resourcePackagesService.delete(r.name), null })) }, r })(e.SandboxResourceLoader) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.promiseFactory = e, this.promiseFactory = e } return e.prototype.loadResourcePackage = function (e) { return this.promiseFactory.resolve() }, e.prototype.loadResourcePackages = function (e) { return this.promiseFactory.resolve() }, e.prototype.loadTrustedResourcePackages = function (e) { return this.promiseFactory.resolve() }, e.prototype.loadResourcePackageItem = function (e, t) { return this.promiseFactory.resolve() }, e.prototype.loadSharedResource = function (e) { return this.promiseFactory.resolve() }, e.prototype.loadVisualPlugin = function (e) { return this.promiseFactory.resolve(null) }, e.prototype.loadVisualPlugins = function (e) { return this.promiseFactory.resolve() }, e.prototype.destroy = function () { }, e })(); e.UnapprovedResourceLoader = t })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r, i = e.data.services.DataViewObjectSerializer, o = e.data.services.SemanticQuerySerializer; !(function (t) { function r(e) { return 0 === e.length ? [] : _.map(e, u) } function n(e) { return 0 === e.length ? [] : _.map(e, l) } function a(t, r) { return _.map(t, (function (t) { return { displayName: e.data.getDisplayName(t.displayName, r) } })) } function s(t) { return _.map(t, (function (t) { return { displayName: e.data.createDisplayNameGetter(t.displayName) } })) } function u(e) { return { objectName: e.objectName, displayName: e.displayName, properties: c(e.properties), selector: i.serializeSelector(e.selector), altConstantValueSelector: i.serializeSelector(e.altConstantValueSelector), validValues: e.validValues, containerIdx: e.containerIdx } } function l(e) { return { objectName: e.objectName, displayName: e.displayName, properties: p(e.properties), selector: i.deserializeSelector(e.selector), altConstantValueSelector: i.deserializeSelector(e.altConstantValueSelector), validValues: e.validValues, containerIdx: e.containerIdx } } function c(e) { var t = {}; for (var r in e) t[r] = d(e[r]); return t } function p(e) { var t = {}; for (var r in e) t[r] = v(e[r]); return t } function d(t) { return t instanceof e.data.SemanticFilter ? o.serializeFilter(t) : void 0 === t ? null : t } function v(e) { var t = e; return t && t.From && t.Where ? o.deserializeFilter(t) : e } t.serialize = r, t.deserialize = n, t.serializeContainers = a, t.deserializeContainers = s })(r = t.VisualObjectInstanceSerializer || (t.VisualObjectInstanceSerializer = {})) })(r = t.services || (t.services = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { var r, i = e.data.services.DataViewObjectSerializer; !(function (e) { function t(e) { return _.isEmpty(e) ? [] : _.map(e, o) } function r(e) { return _.isEmpty(e) ? [] : _.map(e, n) } function o(e) { return { selector: i.serializeSelector(e.selector), altStaticSelector: i.serializeSelector(e.altStaticSelector), objects: e.objects } } function n(e) { return { selector: i.deserializeSelector(e.selector), altStaticSelector: i.deserializeSelector(e.altStaticSelector), objects: e.objects } } e.serialize = t, e.deserialize = r })(r = t.VisualObjectRepetitionSerializer || (t.VisualObjectRepetitionSerializer = {})) })(r = t.services || (t.services = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r(e) { return { colorPalette: o(e.colorPalette), isHighContrast: e.isHighContrast, icons: e.icons } } function i(e) { return { colorPalette: n(e.colorPalette), isHighContrast: e.isHighContrast, icons: e.icons } } function o(e) { return { dataColors: a(e.dataColors), foreground: e.foreground, foregroundLight: e.foregroundLight, foregroundDark: e.foregroundDark, foregroundNeutralLight: e.foregroundNeutralLight, foregroundNeutralDark: e.foregroundNeutralDark, foregroundNeutralSecondary: e.foregroundNeutralSecondary, foregroundNeutralSecondaryAlt: e.foregroundNeutralSecondaryAlt, foregroundNeutralSecondaryAlt2: e.foregroundNeutralSecondaryAlt2, foregroundNeutralTertiary: e.foregroundNeutralTertiary, foregroundNeutralTertiaryAlt: e.foregroundNeutralTertiaryAlt, foregroundSelected: e.foregroundSelected, foregroundButton: e.foregroundButton, background: e.background, backgroundLight: e.backgroundLight, backgroundNeutral: e.backgroundNeutral, backgroundDark: e.backgroundDark, hyperlink: e.hyperlink, tableAccent: e.tableAccent, visitedHyperlink: e.visitedHyperlink, mapPushpin: e.mapPushpin, shapeStroke: e.shapeStroke, disabledText: e.disabledText, selection: e.selection, separator: e.separator } } function n(e) { return { dataColors: s(e.dataColors), foreground: e.foreground, foregroundLight: e.foregroundLight, foregroundDark: e.foregroundDark, foregroundNeutralLight: e.foregroundNeutralLight, foregroundNeutralDark: e.foregroundNeutralDark, foregroundNeutralSecondary: e.foregroundNeutralSecondary, foregroundNeutralSecondaryAlt: e.foregroundNeutralSecondaryAlt, foregroundNeutralSecondaryAlt2: e.foregroundNeutralSecondaryAlt2, foregroundNeutralTertiary: e.foregroundNeutralTertiary, foregroundNeutralTertiaryAlt: e.foregroundNeutralTertiaryAlt, foregroundSelected: e.foregroundSelected, foregroundButton: e.foregroundButton, background: e.background, backgroundLight: e.backgroundLight, backgroundNeutral: e.backgroundNeutral, backgroundDark: e.backgroundDark, hyperlink: e.hyperlink, visitedHyperlink: e.visitedHyperlink, mapPushpin: e.mapPushpin, shapeStroke: e.shapeStroke, disabledText: e.disabledText, tableAccent: e.tableAccent, selection: e.selection, separator: e.separator } } function a(e) { return { colors: e.getAllColors(), sentimentColors: e.getSentimentColors(), gradientColors: e.getGradientColors() } } function s(t) { return new e.visuals.DataColorPalette(t.colors, t.sentimentColors, t.gradientColors) } t.serializeVisualStyle = r, t.deserializeVisualStyle = i, t.serializeColorPalette = o, t.deserializeColorPalette = n, t.serializeDataColors = a, t.deserializeDataColors = s })(r = t.VisualStyleSerializer || (t.VisualStyleSerializer = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, t) { return new o(e, t) } var i; !(function (e) { e[e.NotRequired = 0] = "NotRequired", e[e.Declined = 1] = "Declined", e[e.Approved = 2] = "Approved" })(i = t.UserConsent || (t.UserConsent = {})), t.createVisualConsentService = r; var o = (function () { function t(e, t) { this.promiseFactory = e, this.telemetryService = t, this.cachedConsentMap = {}, this.visualConsentOptionsMap = {} } return t.prototype.registerVisualConsent = function (t, r) { this.visualConsentOptionsMap[t] = r, this.telemetryService.logEvent(e.telemetry.VisualConsentRegister, t, this.telemetryService.root.id, !1, "PowerBI"), this.loadConsentAsync(t) }, t.prototype.hasConsent = function (e) { return this.cachedConsentMap[e] }, t.prototype.setConsent = function (t, r) { if (!this.isConsentRequiringVisual(t)) return this.promiseFactory.reject("Visual type does not require consent"); this.cachedConsentMap[t] = r; var i = this.visualConsentOptionsMap[t] && this.visualConsentOptionsMap[t].consentPersistencyProvider; return this.telemetryService.logEvent(e.telemetry.VisualConsentSet, t, r, this.telemetryService.root.id, !1, "PowerBI"), i ? i.saveConsent(r) : this.promiseFactory.reject("No persistencyProvider was set for visual " + t) }, t.prototype.getConsent = function (t) { var r = this, o = []; t = _.uniq(t), this.telemetryService.logEvent(e.telemetry.VisualConsentGet, t.join(", "), this.telemetryService.root.id, !1, "PowerBI"); for (var n = function (e) { if (!a.isConsentRequiringVisual(e)) { var t = { visualType: e, consent: i.NotRequired }; return o.push(a.promiseFactory.resolve(t)), "continue" } o.push(a.loadConsentAsync(e).then((function (t) { if (t) { var o = { visualType: e, consent: i.Approved }; return r.promiseFactory.resolve(o) } return r.showConsentDialog(e) }))) }, a = this, s = 0, u = t; s < u.length; s++) { n(u[s]) } return this.promiseFactory.allSettled(o).then((function (e) { return _.map(_.filter(e, (function (e) { return 0 === e.type })), (function (e) { return e.value })) })) }, t.prototype.isConsentRequiringVisual = function (e) { return !!this.visualConsentOptionsMap[e] }, t.prototype.loadConsentAsync = function (e) { var t = this; if (void 0 !== this.cachedConsentMap[e]) return this.promiseFactory.resolve(this.cachedConsentMap[e]); var r = this.visualConsentOptionsMap[e] && this.visualConsentOptionsMap[e].consentPersistencyProvider; return r ? r.loadConsent().then((function (r) { return t.cachedConsentMap[e] = r, t.promiseFactory.resolve(r) })).catch((function (e) { return t.promiseFactory.reject(e) })) : this.promiseFactory.reject("VisualConsentService.getConsentAsync: Missing consentPersistencyProvider for visual " + e) }, t.prototype.showConsentDialog = function (e) { var t = this; if (!this.isConsentRequiringVisual(e)) return this.promiseFactory.reject("VisualConsentService.showConsentDialog: Visual type does not require consent"); var r = this.visualConsentOptionsMap[e] && this.visualConsentOptionsMap[e].consentDialogProvider; return r ? r.showConsentDialog().then((function (r) { t.setConsent(e, r); var o = { visualType: e, consent: r ? i.Approved : i.Declined }; return t.promiseFactory.resolve(o) })).catch((function (e) { return t.promiseFactory.reject(e) })) : this.promiseFactory.reject("VisualConsentService.showConsentDialog: Missing consentDialogProvider for visual " + e) }, t })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new r } e.createVisualInstanceIdTrackingService = t; var r = (function () { function e() { this.listeners = [] } return e.prototype.associate = function (e, t) { for (var r = 0, i = this.listeners; r < i.length; r++) { i[r].onInstanceAssociated(e, t) } }, e.prototype.subscribeToInstanceIdAssociation = function (e) { _.includes(this.listeners, e) || this.listeners.push(e) }, e })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r() { return new i } t.createVisualStylePresetService = r; var i = (function () { function t() { var t; this.cache = (t = {}, t[e.visuals.plugins.table.name] = e.visuals.stylePresets.tableStylePresets(), t[e.visuals.plugins.matrix.name] = e.visuals.stylePresets.matrixStylePresets(), t[e.visuals.plugins.pivotTable.name] = e.visuals.stylePresets.pivotTableStylePresets(), t[e.visuals.plugins.tableEx.name] = e.visuals.stylePresets.tableExStylePresets(), t) } return t.prototype.getStylePresets = function (e) { return this.cache[e] }, t.prototype.getStylePreset = function (t, r) { var i = this.getStylePresets(t); if (i) return e.VisualStylePresetHelpers.getStylePreset(i, r) }, t.prototype.getEnumFromName = function (e) { return this.getEnumFromStylePresets(this.getStylePresets(e)) }, t.prototype.getEnumFromStylePresets = function (t) { return e.VisualStylePresetHelpers.getStylePresetsEnum(t) }, t })() })(r = t.services || (t.services = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i(r, i, o) { r = i ? t.LocalizationResourceUtility.setLocalizedCapabilities(r, i) : r; var n = i ? t.LocalizationResourceUtility.getLocalizedResources(r, i) : null, a = t.LocalizationResourceUtility.getLocalizedResources(r, "en-US"), s = n || a ? { enUSStrings: a, localizedStrings: n } : null, u = { name: r.visual.guid, apiVersion: r.apiVersion, class: r.visual.visualClassName, displayName: r.visual.displayName, capabilities: r.capabilities, custom: !0, iconUrl: 'url("' + r.content.iconBase64 + '")', content: r.content, version: r.visual.version, create: function () { return null }, customizeQuery: function (e) { return null }, localizationResources: s, supportUrl: r.visual.supportUrl, source: o }; return r.capabilities && r.capabilities.subtotals && e.visuals.CustomVisualPluginMethods.isSubtotalCustomizationCapabilityValid(r.capabilities.subtotals) && (u.customizeQuery = function (t) { return e.visuals.CustomVisualPluginMethods.customizeQueryForSubtotals(t, r.capabilities.subtotals) }), u } r.createVisualPlugin = i })(r = t.visualPluginUtility || (t.visualPluginUtility = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new a(e, t) } var r, i = jsCommon.Utility; !(function (e) { e.WindowMessageProxyMessageEvent = "message", e.WindowMessageProxyErrorEvent = "error" })(r = e.events || (e.events = {})); var o = "message", n = "onMessageProxyAsyncComplete"; e.createWindowMessageProxy = t; var a = (function () { function e(e, t) { var r = this; this.promiseFactory = e, this._queue = [], this._allowSameWindow = !1, this.handlers = { message: [], error: [] }, this.isFlushing = !1, t && (this._contentWindow = t), this.deferredCache = {}, this.windowMessageHandler = function (e) { return r.onMessageReceived(e) }, $(window).on(o, this.windowMessageHandler) } return Object.defineProperty(e.prototype, "allowSameWindow", { get: function () { return this._allowSameWindow }, set: function (e) { this._allowSameWindow = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "contentWindow", { get: function () { return this._contentWindow }, set: function (e) { this._contentWindow = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "queue", { get: function () { return jQuery.extend([], this._queue) }, enumerable: !0, configurable: !0 }), e.prototype.postMessage = function (e) { this.contentWindow ? this.sendMessage(e) : this.queueMessage(e) }, e.prototype.postMessageAsync = function (e) { var t = this, r = this.promiseFactory.defer(), i = this.createRandomString(); return this.deferredCache[i] = r, e.id = i, this.postMessage(e), r.promise.finally((function () { delete t.deferredCache[i] })), r.promise }, e.prototype.queueMessage = function (e, t) { void 0 === t && (t = this._queue.length); var r = this.prepareMessage(e); this._queue.splice(t, 0, r) }, e.prototype.on = function (e, t) { if (this.handlers[e]) { this.handlers[e].indexOf(t) > -1 || this.handlers[e].push(t) } }, e.prototype.off = function (e, t) { if (this.handlers[e]) { if (!t) return void (this.handlers[e].length = 0); var r = this.handlers[e].indexOf(t); r > -1 && this.handlers[e].splice(r, 1) } }, e.prototype.flushQueue = function () { !this.isFlushing && this.contentWindow && (this.isFlushing = !0, this.contentWindow.postMessage && this.contentWindow.postMessage(this._queue, "*"), this._queue.length = 0, this.isFlushing = !1) }, e.prototype.sendMessage = function (e) { var t = this.prepareMessage(e); this.contentWindow && this.contentWindow.postMessage && this.contentWindow.postMessage(t, "*") }, e.prototype.prepareMessage = function (e) { var t; try { t = JSON.stringify(e) } catch (e) { throw t = null, i.ensureError(e) } return t }, e.prototype.onMessageReceived = function (e) { if (this.allowSameWindow || e.originalEvent.source !== window) { var t; try { t = "string" == typeof e.originalEvent.data ? JSON.parse(e.originalEvent.data) : e.originalEvent.data } catch (e) { t = null } if (t) for (var r = jQuery.isArray(t) ? t : [t], i = 0, o = r; i < o.length; i++) { var n = o[i], a = void 0, s = void 0; try { "string" == typeof n ? (a = JSON.parse(n), s = n.length) : (a = n, s = e.originalEvent.data.length) } catch (e) { a = null } if (!a) return; this.dispatchMessage(e.originalEvent, a, s) } } }, e.prototype.dispatchMessage = function (e, t, r) { var i = { message: t, source: e.source, packedSize: r }; if (t.id && (t.eventName === n || t.result || t.error)) { var o = this.deferredCache[t.id]; if (!o) return; return t.error ? o.reject(t.error) : o.resolve(t.result) } for (var a = t.error ? this.handlers.error : this.handlers.message, s = 0, u = a; s < u.length; s++) { var l = u[s]; this.invokeHandler(l, i) } }, e.prototype.invokeHandler = function (e, t) { var r, i, o = this; t.message.id && (i = { id: t.message.id, eventName: n, arguments: [] }); try { r = e.call(null, t), i && this.promiseFactory.when(r).then((function (e) { i.result = e, o.postMessage(i) })).catch((function (e) { i.error = e, o.postMessage(i) })) } catch (e) { i && (i.error = { message: e.message }, this.postMessage(i)) } }, e.prototype.createRandomString = function () { return (Math.random() + 1).toString(36).substring(7) }, e.prototype.destroy = function () { this.handlers.message.length = 0, this.handlers.error.length = 0, $(window).off(o, this.windowMessageHandler), this.windowMessageHandler = null }, e })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function r(e) { switch (e) { case 0: return "allow-scripts"; case 1: return "allow-popups"; case 2: return "allow-same-origin"; case 3: return "allow-forms"; case 4: return "allow-top-navigation-by-user-activation" } } function i(e, t, r, i, n, a) { return new o(e, t, r, i, n, a) } t.EsriVisual = "esriVisual", t.VisioVisual = "Visio_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A", t.VisioDFVisual = "VisioDF_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A", t.PowerAppsVisual = "PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A", t.PowerAppsTestVisual = "PowerApps_PBI_CV_C29F1DCC_81F5_4973_94AD_0517D44CC06A_TEST", t.MapboxVisual = "PBI_CV_EB3A4088_75C5_4746_9D8B_255A7B7ECD6C", t.PowerOnVPMenuVisual = "vPMenu6454E8C4E1BD492A83084AB46B0C248B", t.PowerOnDEMatrixV2Visual = "DataEntryMatrix1444757060245", t.PowerOnDEMatrixV3Visual = "PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD", t.PowerOnDetailReportVisual = "detailReport1E51681FC15F46F9B4275CE593BECB98", t.PowerOnSmartFilterVisual = "SmartFilterBySQLBI1458262140626", t.PowerOnTableEditorVisual = "PBI_CV_5A618254_2118_4618_8D38_64C70BBFB181", t.PowerOnTableEditorV2Visual = "tableeditor_v2", t.PowerOnForecasterVisual = "PBI_CV_8EDDC07B_EE79_4418_A84C_D73897C0E21E", t.PowerOnDraggableChartVisual = "PBI_CV_5A618254_2118_4618_8D38_64C70BBFB182", t.PowerOnVPMenuVisual_TEST = "vPMenu6454E8C4E1BD492A83084AB46B0C248B_TEST", t.PowerOnDEMatrixV2Visual_TEST = "DataEntryMatrix1444757060245_TEST", t.PowerOnDEMatrixV3Visual_TEST = "PBI_CV_37C750F9_7BBF_4518_A963_9E199AB98EFD_TEST", t.PowerOnDetailReportVisual_TEST = "detailReport1E51681FC15F46F9B4275CE593BECB98_TEST", t.PowerOnSmartFilterVisual_TEST = "SmartFilterBySQLBI1458262140626_TEST", t.PowerOnTableEditorVisual_TEST = "PBI_CV_5A618254_2118_4618_8D38_64C70BBFB181_TEST", t.PowerOnTableEditorV2Visual_TEST = "tableeditor_v2_TEST", t.PowerOnForecasterVisual_TEST = "PBI_CV_8EDDC07B_EE79_4418_A84C_D73897C0E21E_TEST", t.PowerOnDraggableChartVisual_TEST = "PBI_CV_5A618254_2118_4618_8D38_64C70BBFB182_TEST", t.TrustedVisuals = [t.EsriVisual, t.VisioVisual, t.VisioDFVisual, t.PowerAppsVisual, t.PowerAppsTestVisual, t.MapboxVisual, t.PowerOnVPMenuVisual, t.PowerOnDEMatrixV2Visual, t.PowerOnDEMatrixV3Visual, t.PowerOnDetailReportVisual, t.PowerOnSmartFilterVisual, t.PowerOnTableEditorVisual, t.PowerOnTableEditorV2Visual, t.PowerOnForecasterVisual, t.PowerOnDraggableChartVisual, t.PowerOnVPMenuVisual_TEST, t.PowerOnDEMatrixV2Visual_TEST, t.PowerOnDEMatrixV3Visual_TEST, t.PowerOnDetailReportVisual_TEST, t.PowerOnSmartFilterVisual_TEST, t.PowerOnTableEditorVisual_TEST, t.PowerOnTableEditorV2Visual_TEST, t.PowerOnForecasterVisual_TEST, t.PowerOnDraggableChartVisual_TEST], t.SandboxPropertyTranslator = r, t.createTrustedVisualService = i; var o = (function () {
            function r(e, t, r, i, o, n) { var a = this; this.promiseFactory = e, this.telemetryService = t, this.visualConsent = r, this.approvedResourceService = i, this.resourceLoader = n, this.trustedVisualsMap = {}, o && (o.settings.sandboxProperties = function (e, t) { return t && (e = e.substring(0, e.lastIndexOf("_DEBUG"))), a.isTrustedVisualAllowed(e) ? a.trustedVisualsMap[e].sandboxProperties : [0] }) } return r.prototype.registerTrustedVisual = function (e, t) { for (var r = 0, i = e; r < i.length; r++) { var o = i[r]; this.trustedVisualsMap[o] = t, t.registerVisualConsentOptions && this.visualConsent.registerVisualConsent(o, t.registerVisualConsentOptions), this.approvedResourceService && this.approvedResourceService.addTrustedVisual(o) } }, r.prototype.isTrustedVisual = function (e) { return !!this.trustedVisualsMap[e] }, r.prototype.isAutomaticallyImportedVisual = function (e) { return this.isTrustedVisual(e) && this.trustedVisualsMap[e].automaticallyImport }, r.prototype.validate = function (e) { if (this.isTrustedVisual(e)) { var t = this.trustedVisualsMap[e] && this.trustedVisualsMap[e].providers && this.trustedVisualsMap[e].providers.validator; return t ? t.getErrorDetails() : void 0 } }, r.prototype.loadTrustedVisualPlugins = function (t) { var r = this; if (!this.resourceLoader) return this.promiseFactory.reject(); var i; i = t ? t : this.getAllTrustedVisualTypes(); var o = _.filter(i, (function (e) { return r.isTrustedVisualAllowed(e) && r.trustedVisualsMap[e].automaticallyImport })); return this.telemetryService.logEvent(e.telemetry.TrustedVisualLoad, t ? t.join(",") : "", i ? i.join(",") : "", this.telemetryService.root.id, !1, "PowerBI"), 0 === o.length ? this.promiseFactory.resolve([]) : this.resourceLoader.loadTrustedResourcePackages(o).catch((function (e) { return r.promiseFactory.reject(e) })).then((function (e) { var t = []; if (e && e.length > 0) for (var i = 0, o = e[0]; i < o.length; i++) { var n = o[i]; n.length > 0 && t.push(n[0]) } return r.promiseFactory.resolve(t) })) }, r.prototype.getVisualTypeOptions = function (e) { if (this.isTrustedVisual(e)) return this.trustedVisualsMap[e].visualTypeOptions }, r.prototype.getConsentAndLoadVisuals = function (r) {
                var i = this; return this.telemetryService.logEvent(e.telemetry.TrustedVisualGetConsent, r ? r.join(",") : "", this.telemetryService.root.id, !1, "PowerBI"), this.visualConsent.getConsent(r).then((function (e) {
                    var r = _.map(_.filter(e, (function (e) { return e.consent !== t.UserConsent.Declined })), (function (e) { return e.visualType })); return i.loadTrustedVisualPlugins(r)
                }))
            }, r.prototype.canLoadVisual = function (e) { return !this.isTrustedVisual(e) || !!this.isTrustedVisualAllowed(e) && (!this.trustedVisualsMap[e].registerVisualConsentOptions || this.visualConsent.hasConsent(e)) }, r.prototype.getAllTrustedVisualTypes = function () { return _.keys(this.trustedVisualsMap) }, r.prototype.isTrustedVisualAllowed = function (e) { if (!this.isTrustedVisual(e)) return !1; var t = this.trustedVisualsMap[e] && this.trustedVisualsMap[e].providers && this.trustedVisualsMap[e].providers.blocker; return !t || !t.blockedInCluster() && !t.blockedInTenant() }, r
        })()
    })(t = e.visualHost || (e.visualHost = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function r(e, r, o, n, a, s) { var u = new i(e, r, o, n, a), l = u; return null != s && (l = new t.VisualOutsideZoneAdapter(u, s)), new t.VisualSafeExecutionWrapper(l, e, o, n, u.isPluginInError) } t.visualApiVersions = [], t.createVisualApiAdapter = r; var i = (function () { function r(e, t, r, i, o) { this.plugin = e, this.creator = t, this.promiseFactory = r, this.telemetryService = i, this.module = o, this.isPluginInError = !1; var n = e.apiVersion, a = this.getVersionIndex(n); n ? a > -1 ? (this.apiVersionIndex = a, this.legacy = !1) : this.isPluginInError = !0 : this.legacy = !0 } return r.prototype.init = function (r) { if (r.element.empty(), r = e.Prototype.inherit(r), this.legacy) this.visual = this.creator({ module: this.module }), this.visualLegacy.init(r); else { var i = this.host = t.visualApiVersions[this.apiVersionIndex].hostAdapter(r); this.visual = this.creator({ element: r.element.get(0), host: i, module: this.module }), this.overloadMethods() } }, r.prototype.update = function (t) { return __awaiter(this, void 0, e.Promise, (function () { return __generator(this, (function (r) { switch (r.label) { case 0: return this.plugin.systemVisual || (t = e.Prototype.inherit(t), t.visualDefinitionData = void 0, t.dataTransforms = void 0), (t.type & e.VisualUpdateType.Resize) === e.VisualUpdateType.Resize && this.visualHasMethod("onResizing") ? this.plugin.custom && this.visualHasMethod("update") ? [4, this.visualLegacy.update(t)] : [3, 2] : [3, 3]; case 1: r.sent(), r.label = 2; case 2: return this.onResizing(t.viewport, t.resizeMode), [3, 6]; case 3: return this.visualHasMethod("update") ? [4, this.visualLegacy.update(t)] : [3, 5]; case 4: return r.sent(), [3, 6]; case 5: (!t.type || t.type & e.VisualUpdateType.Data) && this.onDataChanged(_.pick(t, ["dataViews", "operationKind"])), t.type & e.VisualUpdateType.ViewMode && this.onViewModeChanged(t.viewMode), r.label = 6; case 6: return [2] } })) })) }, r.prototype.destroy = function () { this.visualHasMethod("destroy") && this.visualLegacy.destroy() }, r.prototype.enumerateObjectInstances = function (e) { if (this.visualHasMethod("enumerateObjectInstances")) return this.visualLegacy.enumerateObjectInstances(e) }, r.prototype.enumerateObjectRepetition = function () { if (this.visualHasMethod("enumerateObjectRepetition")) return this.visualLegacy.enumerateObjectRepetition() }, r.prototype.enumerateObjectInstancesAsync = function (e) { return this.visualHasMethod("enumerateObjectInstancesAsync") ? this.visualAdapter.enumerateObjectInstancesAsync(e) : this.promiseFactory.resolve(this.enumerateObjectInstances(e)) }, r.prototype.enumerateObjectRepetitionAsync = function () { return this.visualHasMethod("enumerateObjectRepetitionAsync") ? this.visualAdapter.enumerateObjectRepetitionAsync() : this.promiseFactory.resolve(this.enumerateObjectRepetition()) }, Object.defineProperty(r.prototype, "sandbox", { get: function () { return this.visualAdapter && this.visualAdapter.sandbox }, enumerable: !0, configurable: !0 }), r.prototype.onResizing = function (e, t) { this.visualHasMethod("onResizing") && this.visualLegacy.onResizing(e, t) }, r.prototype.onDataChanged = function (e) { this.visualHasMethod("onDataChanged") && this.visualLegacy.onDataChanged(e) }, r.prototype.onViewModeChanged = function (e) { this.visualHasMethod("onViewModeChanged") && this.visualLegacy.onViewModeChanged(e) }, r.prototype.onClearSelection = function () { this.visualHasMethod("onClearSelection") && this.visualLegacy.onClearSelection() }, r.prototype.onRestoreSelection = function (e) { if (this.visualHasMethod("onRestoreSelection")) return this.visualLegacy.onRestoreSelection(e) }, r.prototype.canResizeTo = function (e) { if (this.visualHasMethod("canResizeTo")) return this.visualLegacy.canResizeTo(e) }, r.prototype.unwrap = function () { return this.visual }, Object.defineProperty(r.prototype, "visualNew", { get: function () { if (!this.legacy) return this.visual }, enumerable: !0, configurable: !0 }), Object.defineProperty(r.prototype, "visualLegacy", { get: function () { if (this.legacy) return this.visual }, enumerable: !0, configurable: !0 }), Object.defineProperty(r.prototype, "visualAdapter", { get: function () { return this.visual }, enumerable: !0, configurable: !0 }), r.prototype.visualHasMethod = function (e) { var t = this.legacy ? this.visualLegacy : this.visualNew; return t && _.isFunction(t[e]) }, r.prototype.getVersionIndex = function (e) { if (e) for (var r = t.visualApiVersions.length, i = 0; i < r; i++)if (t.visualApiVersions[i].version === e) return i; return -1 }, r.prototype.overloadMethods = function () { var e = this.getCompiledOverloads(); for (var t in e) this[t] = e[t] }, r.prototype.getCompiledOverloads = function () { for (var e = {}, r = this.apiVersionIndex, i = this.visualNew, o = 0; o <= r; o++) { var n = t.visualApiVersions[o].overloads; _.isFunction(n) && _.assign(e, n(i, this.host)) } return e }, r })(); t.VisualApiAdapter = i })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e(e, t) { this.wrappedVisual = e, this.ngZone = t } return e.prototype.init = function (e) { this.executeOutsideAngularZone(this.wrappedVisual.init, e) }, e.prototype.update = function (e) { return this.executeOutsideAngularZone(this.wrappedVisual.update, e) }, e.prototype.destroy = function () { this.executeOutsideAngularZone(this.wrappedVisual.destroy) }, e.prototype.onResizing = function (e, t) { this.executeOutsideAngularZone(this.wrappedVisual.onResizing, e, t) }, e.prototype.onDataChanged = function (e) { this.executeOutsideAngularZone(this.wrappedVisual.onDataChanged, e) }, e.prototype.onViewModeChanged = function (e) { this.executeOutsideAngularZone(this.wrappedVisual.onViewModeChanged, e) }, e.prototype.onClearSelection = function () { this.executeOutsideAngularZone(this.wrappedVisual.onClearSelection) }, e.prototype.onRestoreSelection = function (e) { return this.executeOutsideAngularZone(this.wrappedVisual.onRestoreSelection, e) }, e.prototype.canResizeTo = function (e) { return this.executeOutsideAngularZone(this.wrappedVisual.canResizeTo, e) }, e.prototype.enumerateObjectInstances = function (e) { return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectInstances, e) }, e.prototype.enumerateObjectInstancesAsync = function (e) { return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectInstancesAsync, e) }, e.prototype.enumerateObjectRepetition = function () { return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectRepetition) }, e.prototype.enumerateObjectRepetitionAsync = function () { return this.executeOutsideAngularZone(this.wrappedVisual.enumerateObjectRepetitionAsync) }, e.prototype.visualHasMethod = function (e) { return this.executeOutsideAngularZone(this.wrappedVisual.visualHasMethod, e) }, e.prototype.unwrap = function () { var e = this.wrappedVisual; return e.unwrap ? e.unwrap() : e }, e.prototype.executeOutsideAngularZone = function (e) { for (var t = [], r = 1; r < arguments.length; r++)t[r - 1] = arguments[r]; var i = this.wrappedVisual; return this.ngZone.runOutsideAngular((function () { return e.apply(i, t) })) }, e })(); e.VisualOutsideZoneAdapter = t })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r(e) { e.apiVersion ? i(e) : l(e) } function i(e) { o(e.capabilities) } function o(e) { e && (n(e.objects), a(e.dataRoles), s(e.dataViewMappings)) } function n(t) { for (var r in t) { var i = t[r]; if (i) { var o = i.properties; if (o) for (var n in o) { var a = o[n]; if (a) { var s = a.type; s && s.enumeration && (s.enumeration = e.createEnumType(s.enumeration)) } } } } } function a(e) { for (var t in e) { var r = e[t]; r && r.kind && (r.kind = u(r.kind.toString())) } } function s(e) { for (var t in e) { var r = e[t]; if (r) { var i = r.conditions; if (i) for (var o in i) { var n = i[o]; if (n) for (var a in n) { var s = n[a]; s && s.kind && (n[a].kind = u(s.kind.toString())) } } } } } function u(t) { switch (t.toLowerCase()) { case "grouping": case e.VisualDataRoleKind.Grouping.toString(): return e.VisualDataRoleKind.Grouping; case "measure": case e.VisualDataRoleKind.Measure.toString(): return e.VisualDataRoleKind.Measure; case "groupingormeasure": case e.VisualDataRoleKind.GroupingOrMeasure.toString(): return e.VisualDataRoleKind.GroupingOrMeasure } } function l(e) { c(e.capabilities) } function c(e) { e && (p(e.objects), d(e.dataRoles)) } function p(t) { for (var r in t) { var i = t[r]; if (i) { i = t[r] = _.mapValues(i, v); var o = i.properties; if (o) for (var n in o) { var a = o[n]; if (a) { a = o[n] = _.mapValues(a, v); var s = a.type; if (s && s.enumeration && _.isFunction(s.enumeration.members)) { var u = s.enumeration.members().map((function (e) { return _.mapValues(e, v) })); s.enumeration = e.createEnumType(u) } } } } } } function d(e) { for (var t in e) { var r = e[t]; r && (e[t] = _.mapValues(r, v)) } } function v(t, r) { return _.isString(t) || _.indexOf(h, r) === -1 ? t : e.data.getDisplayName(t, f) } var h = ["displayName", "description", "placeHolderText"], f = { get: function (e) { return e }, getOptional: function (e) { return e } }; t.transformPlugin = r })(r = t.visualPluginAdapter || (t.visualPluginAdapter = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r = jsCommon.Trace, i = (function () { function t(e, t, r, i, o, n) { this.wrappedVisual = e, this.visualPlugin = t, this.promiseFactory = r, this.telemetryService = i, this.isPluginInError = o, this.silent = n, this.initCalled = !1, this.startTimeISO = (new Date).toISOString() } return t.prototype.init = function (e) { var t = this; if (this.initCalled = !0, e && e.host && e.host.telemetry) { var r = e.host.telemetry(); this.instanceId = r && r.instanceId } this.wrappedVisual.init && this.executeSafely((function () { return t.wrappedVisual.init(e) })) }, t.prototype.checkInit = function () { return !!this.initCalled || (r.assertFail("Another visual method was called before init"), !1) }, t.prototype.destroy = function () { var e = this; this.wrappedVisual.destroy && this.executeSafely((function () { return e.wrappedVisual.destroy() })) }, t.prototype.update = function (t) { var r = this; if (this.checkInit(), this.wrappedVisual.update) return this.executeSafelyAsync((function () { return __awaiter(r, void 0, e.Promise, (function () { var r; return __generator(this, (function (i) { switch (i.label) { case 0: return [4, this.wrappedVisual.update(t)]; case 1: return i.sent(), this.telemetryService && this.startTimeISO && (r = (new Date).toISOString(), this.telemetryService.logEvent(e.telemetry.VisualApiUsage, this.visualPlugin.name, this.visualPlugin.apiVersion, !!this.visualPlugin.custom, this.visualPlugin.version, this.instanceId, this.startTimeISO, r, void 0, this.isPluginInError, "User", void 0), this.startTimeISO = null), [2] } })) })) })) }, t.prototype.onResizing = function (e, t) { var r = this; this.checkInit(), this.wrappedVisual.onResizing && this.executeSafely((function () { return r.wrappedVisual.onResizing(e, t) })) }, t.prototype.onDataChanged = function (e) { var t = this; this.checkInit(), this.wrappedVisual.onDataChanged && this.executeSafely((function () { return t.wrappedVisual.onDataChanged(e) })) }, t.prototype.onViewModeChanged = function (e) { var t = this; this.checkInit(), this.wrappedVisual.onViewModeChanged && this.executeSafely((function () { return t.wrappedVisual.onViewModeChanged(e) })) }, t.prototype.onClearSelection = function () { var e = this; this.checkInit(), this.wrappedVisual.onClearSelection && this.executeSafely((function () { return e.wrappedVisual.onClearSelection() })) }, t.prototype.onRestoreSelection = function (e) { var t = this; return this.checkInit(), !!this.wrappedVisual.onRestoreSelection && this.executeSafely((function () { return t.wrappedVisual.onRestoreSelection(e) })) }, t.prototype.canResizeTo = function (e) { var t = this; if (this.checkInit(), this.wrappedVisual.canResizeTo) return this.executeSafely((function () { return t.wrappedVisual.canResizeTo(e) })) }, t.prototype.enumerateObjectInstances = function (e) { var t = this; if (this.checkInit(), this.wrappedVisual.enumerateObjectInstances) return this.executeSafely((function () { return t.wrappedVisual.enumerateObjectInstances(e) })) }, t.prototype.enumerateObjectRepetition = function () { var e = this; if (this.checkInit(), this.wrappedVisual.enumerateObjectRepetition) return this.executeSafely((function () { return e.wrappedVisual.enumerateObjectRepetition() })) }, t.prototype.enumerateObjectInstancesAsync = function (e) { var t = this; return this.checkInit(), this.visualAdapter.enumerateObjectInstancesAsync ? this.executeSafely((function () { return t.visualAdapter.enumerateObjectInstancesAsync(e) })) : this.promiseFactory.resolve(this.enumerateObjectInstances(e)) }, t.prototype.enumerateObjectRepetitionAsync = function () { var e = this; return this.checkInit(), this.visualAdapter.enumerateObjectRepetitionAsync ? this.executeSafely((function () { return e.visualAdapter.enumerateObjectRepetitionAsync() })) : this.promiseFactory.resolve(this.enumerateObjectRepetition()) }, Object.defineProperty(t.prototype, "sandbox", { get: function () { return this.visualAdapter && this.visualAdapter.sandbox }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "visualAdapter", { get: function () { return this.wrappedVisual }, enumerable: !0, configurable: !0 }), t.prototype.unwrap = function () { var e = this.wrappedVisual; return e.unwrap ? e.unwrap() : e }, t.prototype.visualHasMethod = function (e) { var t = this.wrappedVisual; return t && t.visualHasMethod(e) }, t.prototype.executeSafely = function (t) { try { return t() } catch (t) { !this.silent, this.telemetryService && this.telemetryService.logEvent(e.telemetry.VisualException, this.visualPlugin.name, !!this.visualPlugin.custom, this.visualPlugin.apiVersion, this.instanceId, t.fileName, t.lineNumber, t.columnNumber, t.stack, t.message) } }, t.prototype.executeSafelyAsync = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var r; return __generator(this, (function (i) { switch (i.label) { case 0: return i.trys.push([0, 2, , 3]), [4, t()]; case 1: return [2, i.sent()]; case 2: return r = i.sent(), !this.silent, this.telemetryService && this.telemetryService.logEvent(e.telemetry.VisualException, this.visualPlugin.name, !!this.visualPlugin.custom, this.visualPlugin.apiVersion, this.instanceId, r.fileName, r.lineNumber, r.columnNumber, r.stack, r.message), [3, 3]; case 3: return [2] } })) })) }, t })(); t.VisualSafeExecutionWrapper = i })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return function (t) { t.__transform__ = e.transform } } e.VisualPlugin = t })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new i(e) } function r(e) { return new o(e) } e.createColorPalette = t, e.createExtendedColorPalette = r; var i = (function () { function e(e) { this.colorPalette = {}, this.colorIndex = 0, this.colors = e } return e.prototype.getColor = function (e) { var t = this.colorPalette[e]; if (t) return t; var r = this.colors; return t = this.colorPalette[e] = r[this.colorIndex++], this.colorIndex >= r.length && (this.colorIndex = 0), t }, e.prototype.reset = function () { return this.colorIndex = 0, this }, e })(), o = (function (e) { function t(t) { var r = this, i = t.colorPalette.dataColors; r = e.call(this, i.getAllColors()) || this, r.isHighContrast = t.isHighContrast, r.foreground = t.colorPalette.foreground, r.foregroundLight = t.colorPalette.foregroundLight, r.foregroundDark = t.colorPalette.foregroundDark, r.foregroundNeutralLight = t.colorPalette.foregroundNeutralLight, r.foregroundNeutralDark = t.colorPalette.foregroundNeutralDark, r.foregroundNeutralSecondary = t.colorPalette.foregroundNeutralSecondary, r.foregroundNeutralSecondaryAlt = t.colorPalette.foregroundNeutralSecondaryAlt, r.foregroundNeutralSecondaryAlt2 = t.colorPalette.foregroundNeutralSecondaryAlt2, r.foregroundNeutralTertiary = t.colorPalette.foregroundNeutralTertiary, r.foregroundNeutralTertiaryAlt = t.colorPalette.foregroundNeutralTertiaryAlt, r.foregroundSelected = t.colorPalette.foregroundSelected, r.foregroundButton = t.colorPalette.foregroundButton, r.background = t.colorPalette.background, r.backgroundLight = t.colorPalette.backgroundLight, r.backgroundNeutral = t.colorPalette.backgroundNeutral, r.backgroundDark = t.colorPalette.backgroundDark, r.hyperlink = t.colorPalette.hyperlink, r.visitedHyperlink = t.colorPalette.visitedHyperlink, r.mapPushpin = t.colorPalette.mapPushpin, r.shapeStroke = t.colorPalette.shapeStroke; var o = i.getSentimentColors(); r.bad = o.bad, r.neutral = o.neutral, r.good = o.good; var n = i.getGradientColors(); return r.minimum = n.minColor, r.center = n.midColor, r.maximium = n.maxColor, r.null = n.nullColor, r.negative = o.bad, r.positive = o.good, r.selection = t.colorPalette.selection, r.separator = t.colorPalette.separator, r } return __extends(t, e), t })(i) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r = (function () { function t() { } return t.prototype.withCategory = function (e, t) { return e && e.source && e.source.queryName && e.identity && (this.ensureDataMap()[e.source.queryName] = [e.identity[t]]), this }, t.prototype.withSeries = function (e, t) { return e && e.source && e.source.queryName && t && (this.ensureDataMap()[e.source.queryName] = [t.identity]), this }, t.prototype.withMeasure = function (e) { return this.measure = e, this }, t.prototype.createSelectionId = function () { return e.visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(), this.measure) }, t.prototype.ensureDataMap = function () { return this.dataMap || (this.dataMap = {}), this.dataMap }, t })(); t.SelectionIdBuilder = r })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r = e.visuals.CustomVisualSelectionId, i = jsCommon.Version, o = (function () { function t(e, t) { void 0 === t && (t = !1), this.dataPointObjectName = "dataPoint", this.filterPropertyIdentifier = { objectName: "general", propertyName: "filter" }, this.hostServices = e.hostServices, this.apiVersion = e.apiVersion, this.selectedIds = [], this.promiseFactory = this.hostServices.promiseFactory(), this.noIframe = t } return t.prototype.select = function (e, t) { void 0 === t && (t = !1); var r = this.promiseFactory.defer(); return e ? (e instanceof Array || (e = [e]), this.hostServices.shouldRetainSelection() ? this.sendSelectionToHost(e, t) : (this.selectInternal(e, t), this.sendSelectionToHost(this.selectedIds, t)), r.resolve(this.selectedIds), r.promise) : (r.reject(), r.promise) }, t.prototype.showContextMenu = function (e, t) { var r = this.promiseFactory.defer(); return this.sendContextMenuToHost(e, t), r.resolve(null), r.promise }, t.prototype.hasSelection = function () { return this.selectedIds.length > 0 }, t.prototype.clear = function () { var e = this.promiseFactory.defer(); return this.selectedIds = [], this.sendSelectionToHost([]), e.resolve(null), e.promise }, t.prototype.getSelectionIds = function () { return this.selectedIds }, t.prototype.setSelectionIds = function (e) { this.selectedIds = e }, t.prototype.sendSelectionToHost = function (e, t) { if (this.noIframe || !this.apiVersion || i.lt(this.apiVersion, "2.0.0")) { var r = this.dataPointObjectName, o = { visualObjects: _.chain(e).filter((function (e) { return e.hasIdentity() })).map((function (e) { return { objectName: r, selectorsByColumn: e.getSelectorsByColumn() } })).value(), selectors: void 0, multiSelect: t }, n = !1; _.isEmpty(e) || (n = e[0].getSelector() && !e[0].getSelectorsByColumn()), n && (o.selectors = _.chain(e).filter((function (e) { return e.hasIdentity() })).map((function (e) { return e.getSelector() })).value()), this.hostServices.onSelect(o) } else this.hostServices.sendSelectionIdsToHost(this.prepareCustomVisualSelectEventArgs(e, t)) }, t.prototype.sendContextMenuToHost = function (e, t) { if (e && t) { var r = { data: [e], position: t }; this.hostServices.customVisualOnContextMenu(r) } }, t.prototype.selectInternal = function (e, r) { var i = this; e.length < 1 || (e.length > 1 ? r ? this.selectedIds = e.filter((function (e) { return !i.selectedIds.some((function (t) { return t.equals(e) })) })).concat(this.selectedIds.filter((function (t) { return !e.some((function (e) { return e.equals(t) })) }))) : this.selectedIds = e : t.containsSelection(this.selectedIds, e[0]) ? r ? this.selectedIds = this.selectedIds.filter((function (t) { return !e[0].equals(t) })) : this.selectedIds = this.selectedIds.length > 1 ? e : [] : r ? this.selectedIds.push(e[0]) : this.selectedIds = e) }, t.containsSelection = function (e, t) { return e.some((function (e) { return t.equals(e) })) }, t.getSelectorsByColumn = function (e) { return e && e[0] instanceof r ? e : _(e).filter((function (e) { return e.hasIdentity })).map((function (e) { return e.getSelectorsByColumn() })).compact().value() }, t.createChangeForFilterProperty = function (e, t) { var r = {}, i = { objectName: e.objectName, selector: void 0, properties: r }; return null == t ? (r[e.propertyName] = {}, { remove: [i] }) : (r[e.propertyName] = t, { merge: [i] }) }, t.prototype.getFilterFromSelectors = function () { if (this.hasSelection()) { var t = _.chain(this.selectedIds).filter((function (e) { return e.hasIdentity() })).map((function (e) { return e.getSelector() })).value(); return e.data.Selector.filterFromSelector(t, !1) } }, t.prototype.prepareCustomVisualSelectEventArgs = function (e, t) { var r = { selectionIds: [], multiSelect: t }; if (e && e[0] && (e[0].dataMap || e[0].measures)) for (var i = 0, o = e; i < o.length; i++) { var n = o[i]; r.selectionIds.push(n) } return r }, t.prototype.applySelectionFilter = function () { this.hostServices.persistProperties(t.createChangeForFilterProperty(this.filterPropertyIdentifier, this.getFilterFromSelectors())) }, t.prototype.registerOnSelectCallback = function (e) { this.onSelectCallback = e }, t.prototype.invokeOnSelectCallback = function (e) { _.isFunction(this.onSelectCallback) && this.onSelectCallback(e) }, t })(); t.SelectionManager = o })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new r(e) } e.createTooltipService = t; var r = (function () { function t(e) { this.hostServices = e.hostServices, this.tooltipService = this.hostServices.tooltips() } return t.prototype.enabled = function () { return this.tooltipService && this.tooltipService.enabled() }, t.prototype.show = function (t) { if (this.enabled()) { var r = { coordinates: t.coordinates, dataItems: t.dataItems, isTouchEvent: t.isTouchEvent, identities: e.SelectionManager.getSelectorsByColumn(t.identities) }; this.tooltipService.show(r) } }, t.prototype.move = function (t) { if (this.enabled()) { var r = { coordinates: t.coordinates, dataItems: t.dataItems, isTouchEvent: t.isTouchEvent, identities: e.SelectionManager.getSelectorsByColumn(t.identities) }; this.tooltipService.move(r) } }, t.prototype.hide = function (e) { this.enabled() && this.tooltipService.hide(e) }, t })() })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new o(e) } function r(e) { switch (e) { case 3: return "VisualEventError"; case 2: return "VisualEventTrace"; case 0: return "VisualEventRenderStarted"; case 1: return "VisualEventRenderCompleted"; default: return } } function i(e) { switch (e) { case "VisualEventError": return 3; case "VisualEventTrace": return 2; case "VisualEventRenderStarted": return 0; case "VisualEventRenderCompleted": return 1; default: return } } e.createTelemetryService = t; var o = (function () { function e(e) { this.hostServices = e.hostServices, this.telemetryService = this.hostServices && this.hostServices.telemetry && this.hostServices.telemetry(), this.instanceId = this.telemetryService && this.telemetryService.instanceId } return e.prototype.trace = function (e, t) { this.telemetryService && this.telemetryService.trace(e, t) }, e })(); e.convertVisualEventType = r, e.convertStringToVisualEventType = i })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new r(e) } e.createAuthenticationService = t; var r = (function () { function e(e) { this.hostServices = e.hostServices, this.authenticationService = this.hostServices && this.hostServices.authenticationService && this.hostServices.authenticationService(), this.promiseFactory = this.hostServices.promiseFactory() } return e.prototype.getAADToken = function () { return this.authenticationService ? this.authenticationService.getAADToken() : this.promiseFactory.reject() }, e.prototype.getWACToken = function (e, t) { return this.authenticationService ? this.authenticationService.getWACToken(e, t) : this.promiseFactory.reject() }, e })() })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t = (function () { function e(e) { this.localizationResources = e } return e.prototype.getDisplayName = function (e) { var t = this.localizationResources; return t && t.localizedStrings && t.localizedStrings.hasOwnProperty(e) ? t.localizedStrings[e] : t && t.enUSStrings && t.enUSStrings.hasOwnProperty(e) ? t.enUSStrings[e] : e }, e })(); e.LocalizationManager = t })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new r(e) } e.createEventService = t; var r = (function () { function e(e) { this.eventService = e && e.eventService && e.eventService() } return e.prototype.renderingStarted = function (e) { this.eventService && this.eventService.renderingStarted(e) }, e.prototype.renderingFinished = function (e) { this.eventService && this.eventService.renderingFinished(e) }, e.prototype.renderingFailed = function (e, t) { this.eventService && this.eventService.renderingFailed(e, t) }, e })() })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (t) { function r(e) { var t = e, r = null != t.data || null != t.selectors, i = _.some(t.visualObjects, (function (e) { return e.selectorsByColumn && e.selectorsByColumn.metadata && !_.isArray(e.selectorsByColumn.metadata) })); return r || i } function i(e) { var t; if (e.data2) t = e.data2; else { if (e.selectors || e.data) return _.map(e.selectors || e.data, (function (e) { return o(e) })); if (!e.visualObjects) return []; t = _.map(e.visualObjects, (function (e) { return e.selectorsByColumn })) } for (var r = 0, i = t; r < i.length; r++) { var n = i[r], a = n.metadata; a && !_.isArray(a) && (n.metadata = [a]) } return t } function o(e) { if (e) { var t = {}; return t[""] = e.data, { dataMap: t, metadata: [e.metadata] } } } function n(e) { return null != e.selectors ? e.selectors : e.data ? e.data : e.visualObjects ? _.map(e.visualObjects, (function (e) { return a.convertSelectorsByColumnToSelector(e.selectorsByColumn) })) : e.data } var a = e.data.Selector; t.isOldSelectEventArgs = r, t.getSelectorsByColumn = i, t.getSelectors = n })(r = t.legacy || (t.legacy = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { function i(t) { var r = t.type || e.VisualUpdateType.Data; return r & e.VisualUpdateType.Resize && 2 === t.resizeMode && (r |= e.VisualUpdateType.ResizeEnd), r } r.convertLegacyUpdateType = i; var o = function (e, t) { return { update: function (t) { e.update && e.update({ viewport: t.viewport, dataViews: t.dataViews, viewMode: t.viewMode, type: i(t) }) }, destroy: function () { e.destroy && e.destroy() }, enumerateObjectInstances: function (t) { return e.enumerateObjectInstances ? e.enumerateObjectInstances(t) || [] : [] } } }, n = function (e) { return {} }; t.visualApiVersions.push({ version: "1.0.0", overloads: o, hostAdapter: n }) })(r = t.v100 || (t.v100 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (e, r) { return { update: function (r) { if (e.update) { var i = { viewport: r.viewport, dataViews: r.dataViews, viewMode: r.viewMode, type: t.v100.convertLegacyUpdateType(r) }, o = e.constructor.__transform__; _.isFunction(o) ? e.update(i, o(i.dataViews)) : e.update(i) } } } }, n = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colors: o } }; t.visualApiVersions.push({ version: "1.1.0", overloads: o, hostAdapter: n }) })(r = t.v110 || (t.v110 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (e, r) { return { update: function (i) { if (e.update) { var o = { viewport: i.viewport, dataViews: i.dataViews, viewMode: i.viewMode, type: t.v100.convertLegacyUpdateType(i) }; r.colorPalette.reset(); var n = e.constructor.__transform__; _.isFunction(n) ? e.update(o, n(o.dataViews)) : e.update(o) } } } }, n = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) } } }; t.visualApiVersions.push({ version: "1.2.0", overloads: o, hostAdapter: n }) })(r = t.v120 || (t.v120 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }) } }; t.visualApiVersions.push({ version: "1.3.0", hostAdapter: o }) })(r = t.v130 || (t.v130 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), locale: r.host.locale() } }; t.visualApiVersions.push({ version: "1.4.0", hostAdapter: o }) })(r = t.v140 || (t.v140 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive } }; t.visualApiVersions.push({ version: "1.5.0", hostAdapter: o }) })(r = t.v150 || (t.v150 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (e, r) { return { update: function (i) { if (e.update) { var o = { viewport: i.viewport, dataViews: i.dataViews, viewMode: i.viewMode, editMode: i.editMode, type: t.v100.convertLegacyUpdateType(i) }; r.colorPalette.reset(); var n = e.constructor.__transform__; _.isFunction(n) ? e.update(o, n(o.dataViews)) : e.update(o) } } } }, n = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive } }; t.visualApiVersions.push({ version: "1.6.0", overloads: o, hostAdapter: n }) })(r = t.v160 || (t.v160 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi;
!(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i) { if (e) { var o = []; o.push(e), r.host.applyJsonFilter(o, t, i) } else r.host.applyJsonFilter(null, t, i) } } }; t.visualApiVersions.push({ version: "1.7.0", hostAdapter: o }) })(r = t.v170 || (t.v170 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() } } }; t.visualApiVersions.push({ version: "1.8.0", hostAdapter: o }) })(r = t.v180 || (t.v180 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() } } }; t.visualApiVersions.push({ version: "1.9.0", hostAdapter: o }) })(r = t.v190 || (t.v190 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return new t.SelectionManager({ hostServices: r.host }) }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) } } }; t.visualApiVersions.push({ version: "1.10.0", hostAdapter: o }) })(r = t.v1100 || (t.v1100 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (r) { var o = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { var e = r.host; return e.selectionManager = new t.SelectionManager({ hostServices: e }), e.selectionManager }, colorPalette: t.createColorPalette(o), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) } } }; t.visualApiVersions.push({ version: "1.11.0", hostAdapter: o }) })(r = t.v1110 || (t.v1110 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = e.visualHost.VisualHostUtils, o = function (e, r) { return { update: function (i) { if (e.update) { var o = { viewport: i.viewport, dataViews: i.dataViews, viewMode: i.viewMode, editMode: i.editMode, operationKind: i.operationKind, type: t.v100.convertLegacyUpdateType(i) }; r.colorPalette.reset(); var n = e.constructor.__transform__; _.isFunction(n) ? e.update(o, n(o.dataViews)) : e.update(o) } } } }, n = function (r) { var o = r.host, n = i.isDefined(r, "style.colorPalette.dataColors.getAllColors") ? r.style.colorPalette.dataColors.getAllColors() : e.visuals.DefaultColorManager.getDefaultColors(); return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return o.selectionManager = new t.SelectionManager({ hostServices: o }), o.selectionManager }, colorPalette: t.createColorPalette(n), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return o.fetchMoreData() } } }; t.visualApiVersions.push({ version: "1.12.0", overloads: o, hostAdapter: n }) })(r = t.v011200 || (t.v011200 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = function (r) { var i = r.host; return { createSelectionIdBuilder: function () { return new e.visuals.SelectionIdBuilder }, createSelectionManager: function () { return i.selectionManager = new t.SelectionManager({ hostServices: i }), i.selectionManager }, colorPalette: t.createExtendedColorPalette(r.style), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return i.fetchMoreData() } } }; t.visualApiVersions.push({ version: "1.13.0", hostAdapter: i }) })(r = t.v011300 || (t.v011300 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = "2.0.0", o = function (r) { var o = r.host; return o.apiVersion = i, { createSelectionIdBuilder: function () { return new e.visuals.CustomVisualSelectionId }, createSelectionManager: function () { return o.selectionManager = new t.SelectionManager({ hostServices: o, apiVersion: i }), o.selectionManager }, colorPalette: t.createExtendedColorPalette(r.style), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: t.createTooltipService({ hostServices: r.host }), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return o.fetchMoreData() } } }; t.visualApiVersions.push({ version: i, hostAdapter: o }) })(r = t.v020000 || (t.v020000 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r = "2.1.0", i = function (t, r) { return { update: function (i) { if (t.update) { var o = { viewport: i.viewport, dataViews: i.dataViews, viewMode: i.viewMode, editMode: i.editMode, operationKind: i.operationKind, type: e.v100.convertLegacyUpdateType(i), jsonFilters: i.jsonFilters }; r.colorPalette.reset(); var n = t.constructor.__transform__; _.isFunction(n) ? t.update(o, n(o.dataViews)) : t.update(o) } } } }, o = function (t) { var i = t.host; return i.apiVersion = r, { createSelectionIdBuilder: function () { return i.createSelectionIdBuilder() }, createSelectionManager: function () { return i.selectionManager = i.createSelectionManager(r), i.selectionManager }, colorPalette: e.createExtendedColorPalette(t.style), persistProperties: function (e) { return t.host.persistProperties(e) }, tooltipService: i.createTooltipService(), telemetry: e.createTelemetryService({ hostServices: t.host }), authenticationService: e.createAuthenticationService({ hostServices: t.host }), locale: t.host.locale(), allowInteractions: !(!t || !t.interactivity) && t.interactivity.isVisualInteractive, applyJsonFilter: function (e, r, i, o) { if (e) { var n = []; n.push(e), t.host.applyJsonFilter(n, r, i, o) } else t.host.applyJsonFilter(null, r, i, o) }, launchUrl: function (e) { return t.host.launchUrl(e) }, instanceId: t.host.instanceId, refreshHostData: function () { return t.host.refreshHostData() }, createLocalizationManager: function () { return new e.LocalizationManager(t.localizationResources) }, fetchMoreData: function () { return i.fetchMoreData() } } }; e.visualApiVersions.push({ version: r, overloads: i, hostAdapter: o }) })(t = e.v020100 || (e.v020100 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { var t; !(function (t) { var r = "2.2.0", i = function (t) { var i = t.host; return i.apiVersion = r, { createSelectionIdBuilder: function () { return i.createSelectionIdBuilder() }, createSelectionManager: function () { return i.selectionManager = i.createSelectionManager(r), i.selectionManager }, colorPalette: e.createExtendedColorPalette(t.style), persistProperties: function (e) { return t.host.persistProperties(e) }, tooltipService: i.createTooltipService(), telemetry: e.createTelemetryService({ hostServices: t.host }), authenticationService: e.createAuthenticationService({ hostServices: t.host }), locale: t.host.locale(), allowInteractions: !(!t || !t.interactivity) && t.interactivity.isVisualInteractive, applyJsonFilter: function (e, r, i, o) { if (e) { var n = []; n.push(e), t.host.applyJsonFilter(n, r, i, o) } else t.host.applyJsonFilter(null, r, i, o) }, launchUrl: function (e) { return t.host.launchUrl(e) }, instanceId: t.host.instanceId, refreshHostData: function () { return t.host.refreshHostData() }, createLocalizationManager: function () { return new e.LocalizationManager(t.localizationResources) }, fetchMoreData: function () { return i.fetchMoreData() } } }; e.visualApiVersions.push({ version: r, hostAdapter: i }) })(t = e.v020200 || (e.v020200 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = "2.3.0", o = function (e, r) { return { update: function (i) { if (e.update) { var o = { viewport: i.viewport, dataViews: i.dataViews, viewMode: i.viewMode, editMode: i.editMode, operationKind: i.operationKind, jsonFilters: i.jsonFilters, type: t.v100.convertLegacyUpdateType(i), updateId: jsCommon.Utility.generateGuid() }; r.colorPalette.reset(); var n = e.constructor.__transform__; _.isFunction(n) ? e.update(o, n(o.dataViews)) : e.update(o) } } } }, n = function (r) { var o = r.host; return o.apiVersion = i, { createSelectionIdBuilder: function () { return new e.visuals.CustomVisualSelectionId }, createSelectionManager: function () { return o.selectionManager = o.createSelectionManager(i), o.selectionManager }, colorPalette: t.createExtendedColorPalette(r.style), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: o.createTooltipService(), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) if (Array.isArray(e)) r.host.applyJsonFilter(e, t, i, o); else { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return o.fetchMoreData() }, storageService: t.createStorageService(o), eventService: t.createEventService(o) } }; t.visualApiVersions.push({ version: i, overloads: o, hostAdapter: n }) })(r = t.v020300 || (t.v020300 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = "2.4.0", o = function (r) { var o = r.host; return o.apiVersion = i, { createSelectionIdBuilder: function () { return new e.visuals.CustomVisualSelectionId }, createSelectionManager: function () { return o.selectionManager = o.createSelectionManager(i), o.selectionManager }, colorPalette: t.createExtendedColorPalette(r.style), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: o.createTooltipService(), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) if (Array.isArray(e)) r.host.applyJsonFilter(e, t, i, o); else { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return o.fetchMoreData() }, storageService: t.createStorageService(o), eventService: t.createEventService(o) } }; t.visualApiVersions.push({ version: i, hostAdapter: o }) })(r = t.v020400 || (t.v020400 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = "2.5.0", o = function (r) { var o = r.host; return o.apiVersion = i, { createSelectionIdBuilder: function () { return new e.visuals.CustomVisualSelectionId }, createSelectionManager: function () { return o.selectionManager = o.createSelectionManager(i), o.selectionManager }, colorPalette: t.createExtendedColorPalette(r.style), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: o.createTooltipService(), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) if (Array.isArray(e)) r.host.applyJsonFilter(e, t, i, o); else { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return o.fetchMoreData() }, storageService: t.createStorageService(o), eventService: t.createEventService(o) } }; t.visualApiVersions.push({ version: i, hostAdapter: o }) })(r = t.v020500 || (t.v020500 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = "2.6.0", o = function (e, r) { return { update: function (i) { if (e.update) { var o = { viewport: i.viewport, dataViews: i.dataViews, viewMode: i.viewMode, editMode: i.editMode, isInFocus: !!i.isInFocus, operationKind: i.operationKind, jsonFilters: i.jsonFilters, type: t.v100.convertLegacyUpdateType(i), updateId: jsCommon.Utility.generateGuid() }; r.colorPalette.reset(); var n = e.constructor.__transform__; _.isFunction(n) ? e.update(o, n(o.dataViews)) : e.update(o) } } } }, n = function (r) { var o = r.host; return o.apiVersion = i, { createSelectionIdBuilder: function () { return new e.visuals.CustomVisualSelectionId }, createSelectionManager: function () { return o.selectionManager = o.createSelectionManager(i), o.selectionManager }, colorPalette: t.createExtendedColorPalette(r.style), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: o.createTooltipService(), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) if (Array.isArray(e)) r.host.applyJsonFilter(e, t, i, o); else { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return o.fetchMoreData() }, storageService: t.createStorageService(o), eventService: t.createEventService(o), switchFocusModeState: function (e) { return o.switchFocusModeState(e) } } }; t.visualApiVersions.push({ version: i, overloads: o, hostAdapter: n }) })(r = t.v020600 || (t.v020600 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var r; !(function (r) { var i = "3.2.0", o = function (r) { var o = r.host; return o.apiVersion = i, { createSelectionIdBuilder: function () { return new e.visuals.CustomVisualSelectionId }, createSelectionManager: function () { return o.selectionManager = o.createSelectionManager(i), o.selectionManager }, colorPalette: t.createExtendedColorPalette(r.style), persistProperties: function (e) { return r.host.persistProperties(e) }, tooltipService: o.createTooltipService(), telemetry: t.createTelemetryService({ hostServices: r.host }), authenticationService: t.createAuthenticationService({ hostServices: r.host }), locale: r.host.locale(), allowInteractions: !(!r || !r.interactivity) && r.interactivity.isVisualInteractive, applyJsonFilter: function (e, t, i, o) { if (e) if (Array.isArray(e)) r.host.applyJsonFilter(e, t, i, o); else { var n = []; n.push(e), r.host.applyJsonFilter(n, t, i, o) } else r.host.applyJsonFilter(null, t, i, o) }, launchUrl: function (e) { return r.host.launchUrl(e) }, instanceId: r.host.instanceId, refreshHostData: function () { return r.host.refreshHostData() }, createLocalizationManager: function () { return new t.LocalizationManager(r.localizationResources) }, fetchMoreData: function () { return o.fetchMoreData() }, storageService: t.createStorageService(o), eventService: t.createEventService(o), switchFocusModeState: function (e) { return o.switchFocusModeState(e) }, hostEnv: r.hostEnv } }; t.visualApiVersions.push({ version: i, hostAdapter: o }) })(r = t.v030200 || (t.v030200 = {})) })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e) { return new r(e) } e.createStorageService = t; var r = (function () { function e(e) { this.storageService = e && e.localStorageService && e.localStorageService(), this.promiseFactory = e.promiseFactory() } return e.prototype.get = function (e) { return null != this.storageService && e ? this.storageService.getStorageData(e) : this.promiseFactory.reject() }, e.prototype.set = function (e, t) { return null != this.storageService && e && t ? this.storageService.setStorageData(e, t) : this.promiseFactory.reject() }, e.prototype.remove = function (e) { null != this.storageService && e && this.storageService.removeStorageData(e) }, e })() })(t = e.extensibility || (e.extensibility = {})) })(powerbi || (powerbi = {}));; "use strict"; var __awaiter = this && this.__awaiter || function (e, t, i, o) { return new (i || (i = Promise))(function (r, n) { function a(e) { try { u(o.next(e)) } catch (e) { n(e) } } function s(e) { try { u(o.throw(e)) } catch (e) { n(e) } } function u(e) { e.done ? r(e.value) : new i(function (t) { t(e.value) }).then(a, s) } u((o = o.apply(e, t || [])).next()) }) }, __generator = this && this.__generator || function (e, t) { function i(e) { return function (t) { return o([e, t]) } } function o(i) { if (r) throw new TypeError("Generator is already executing."); for (; u;)try { if (r = 1, n && (a = 2 & i[0] ? n.return : i[0] ? n.throw || ((a = n.return) && a.call(n), 0) : n.next) && !(a = a.call(n, i[1])).done) return a; switch (n = 0, a && (i = [2 & i[0], a.value]), i[0]) { case 0: case 1: a = i; break; case 4: return u.label++ , { value: i[1], done: !1 }; case 5: u.label++ , n = i[1], i = [0]; continue; case 7: i = u.ops.pop(), u.trys.pop(); continue; default: if (a = u.trys, !(a = a.length > 0 && a[a.length - 1]) && (6 === i[0] || 2 === i[0])) { u = 0; continue } if (3 === i[0] && (!a || i[1] > a[0] && i[1] < a[3])) { u.label = i[1]; break } if (6 === i[0] && u.label < a[1]) { u.label = a[1], a = i; break } if (a && u.label < a[2]) { u.label = a[2], u.ops.push(i); break } a[2] && u.ops.pop(), u.trys.pop(); continue }i = t.call(e, u) } catch (e) { i = [6, e], n = 0 } finally { r = a = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } } var r, n, a, s, u = { label: 0, sent: function () { if (1 & a[0]) throw a[1]; return a[1] }, trys: [], ops: [] }; return s = { next: i(0), throw: i(1), return: i(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this }), s }, powerbi; !(function (e) { var t; !(function (t) { function i() { return window.resourceLoaderUrl || "/explore/resourcePackageItem/" } function o(e) { return new n(e) } var r = window; t.getResourceLoaderUrl = i, t.createJQueryResourceItemProxy = o; var n = (function () { function t(e) { this.promiseFactory = e } return t.prototype.get = function (e, t, o) { var n = this.promiseFactory.defer(), a = r.clusterUri, s = window.powerBIAccessToken; top && top.powerBIAccessToken && (s = top.powerBIAccessToken); var u = i(), c = { authorization: "Bearer " + s }; window.isAnonymousEmbed && (a = window.clusterApiUri, u = window.resourceLoaderUrl + e + "/", c["X-PowerBI-ResourceKey"] = window.powerBIResourceKey); var l = a + u + encodeURIComponent(o), p = { url: l, headers: c, dataType: "string" }; return $.ajax(p).then((function (e) { return n.resolve(e) }), (function (e) { return n.reject(e) })), n.promise }, t.prototype.getBlob = function (t, i, o) { return e.createJQueryPromiseFactory().reject() }, t })() })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i() { var t = e.createJQueryPromiseFactory(), i = { get: function (e) { return e }, getOptional: function (e) { return e } }; return new n({ messageProxy: o.createWindowMessageProxy(t, window.parent), promiseFactory: t, resourceProvider: i }) } var o = e.visualHost, r = e.contracts.ResourcePackageItemType; t.createResourceLoaderHost = i; var n = (function () { function t(e) { var t = this; this.messageProxy = e.messageProxy, this.promiseFactory = e.promiseFactory, this.resourceProvider = e.resourceProvider, this.messageProxy.on(o.events.WindowMessageProxyMessageEvent, (function (e) { return t.onMessageReceived(e) })) } return t.prototype.onMessageReceived = function (e) { switch (e.message.eventName) { case "loadVisualPluginWithContent": return this.loadVisualPluginWithContent.apply(this, e.message.arguments) } }, t.prototype.loadVisualPluginWithContent = function (t) { var i = this.promiseFactory.defer(), n = t.pluginName, a = t.mappedPluginContent, s = a[r.CustomVisualJavascript].content, u = a[r.CustomVisualsCss].content; try { o.resourceInjector.injectJsCode(n, s), o.resourceInjector.injectCssCode(n, u); var c = e.visuals.plugins[n]; c.iconUrl = o.visualPluginServiceHelpers.getPluginIconUrl(n), c.content = { js: s, css: u, iconBase64: c.iconUrl }, e.extensibility.visualPluginAdapter.transformPlugin(c), c.capabilities.objects = e.data.services.DataViewObjectDescriptorSerializer.serialize(c.capabilities.objects, this.resourceProvider), i.resolve(c) } catch (e) { i.reject(e) } return i.promise }, t })(); t.ResourceLoaderHost = n })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(i, r) { void 0 === r && (r = !1); var n = e.createJQueryPromiseFactory(), a = e.visualHost.createWindowMessageProxy(n, window.parent), s = { get: function (e) { return e }, getOptional: function (e) { return e } }; t.SandboxVisualHostServices.initialize(); var u = { promiseFactory: n }, c = d.getQueryStringValue("instanceId"), l = t.createSandboxTelemetryProxyService(a), p = new h, g = t.createVisualHostServices(a, c, p); return new m({ $element: i, hostServices: g, hostServicesControl: g, dataProxy: o(n), promiseFactory: n, messageProxy: a, resourceLoader: e.visualHost.createResourceLoader(u, null), resourceProvider: s, telemetryProxyService: l, instanceId: c, sandboxPromiseHandler: p }, r) } function o(i) { var o = t.createSandboxNoOpTelemetryProxyService(), r = { dsr: { name: "dsr", reader: function (t) { return new e.data.dsr.DsrDataReader(t, { execute: function () { return i.reject() } }, o, { enableCellLevelFormatting: !1, dsrV2: !1 }, null, (void 0), (void 0)) } } }, n = { promiseFactory: function () { return i } }, a = e.data.createDataReaderProvider(e.data.createDataReaderFactory(r, {}), n); return e.data.createDataProxy(i, a, o) } function r(t, i, o) { var r = t.content; i && t.hasBeenInjected || (e.visualHost.resourceInjector.injectJsCode(t.name, r.js, o, t.apiVersion), e.visualHost.resourceInjector.injectCssCode(t.name, r.css)); var n, a = { major: 3, minor: 0, patch: 0 }; return n = !t.apiVersion || g.lt(t.apiVersion, a) ? e.visuals.plugins[t.name] : window[t.name].default, t.apiVersion && (n.iconUrl = t.iconUrl, n.capabilities = t.capabilities, n.localizationResources = t.localizationResources), i && (n.hasBeenInjected = !0, n.approvedForNoIframe = !0, e.visuals.plugins[t.name] = n), n } var n = e.data.segmentation.DataViewMerger, a = e.data.services.DataViewObjectSerializer, s = e.data.services.DataViewObjectDescriptorSerializer, u = e.visualHost.services.VisualObjectInstanceSerializer, c = e.visualHost.services.VisualObjectRepetitionSerializer, l = e.visualHost.VisualStyleSerializer, p = e.extensibility.createVisualApiAdapter, d = jsCommon.QueryStringUtil, g = jsCommon.Version; t.relayMouseEvents = ["click", "mouseup", "MSPointerUp", "pointerup"], t.relayTouchEvents = ["tap", "touchend", "touchcancel"], t.relayUIEvents = t.relayMouseEvents.concat(t.relayTouchEvents), t.relayUIEventProps = ["type", "bubbles", "which", "buttons", "button", "ctrlKey", "altKey", "metaKey", "shiftKey", "x", "y", "clientX", "clientY", "pageX", "pageY", "movementX", "movementY", "layerX", "layerY", "changedTouches"]; var y = 104857600, v = (function () { function e(t) { this.id = ++e.counter, this.deferred = t } return e.getLastId = function () { return e.counter }, e.counter = 0, e })(); t.SandboxPromise = v; var f = (function () { function e(t) { this.id = ++e.counter, this.deferred = t } return e.getLastId = function () { return e.counter }, e.counter = 0, e })(); t.SandboxPromise2 = f; var h = (function () { function e() { this.promises = {}, this.promises2 = {} } return e.prototype.CreatePromise = function (e) { var t = new v(e); return this.promises[t.id] = t, t }, e.prototype.ResolvePromise = function (e, t) { var i = this.promises[e]; i && (i.deferred.resolve(t), this.promises[e] = null) }, e.prototype.RejectPromise = function (e, t) { var i = this.promises[e]; i && (i.deferred.reject(t), this.promises[e] = null) }, e.prototype.CreatePromise2 = function (e) { var t = new f(e); return this.promises2[t.id] = t, t }, e.prototype.ResolvePromise2 = function (e, t) { var i = this.promises2[e]; i && (i.deferred.resolve(t), this.promises2[e] = null) }, e.prototype.RejectPromise2 = function (e, t) { var i = this.promises2[e]; i && (i.deferred.reject(t), this.promises2[e] = null) }, e })(); t.SandboxPromiseHandler = h, t.createSandboxHost = i, t.injectCustomVisual = r; var m = (function () { function i(i, o) { void 0 === o && (o = !1); var r = this; this.isolate = o, this.isVisualInitialized = !1, this.messageQueue = [], this.relayUIEventListener = function (e) { var i = _.pick(e.originalEvent, t.relayUIEventProps), o = { eventName: "onRelayUIEvent", arguments: [i] }; r.messageProxy.postMessage(o) }, this.container = i.$element, this.hostServices = i.hostServices, this.hostServicesControl = i.hostServicesControl, this.dataProxy = i.dataProxy, this.promiseFactory = i.promiseFactory, this.messageProxy = i.messageProxy, this.resourceLoader = i.resourceLoader, this.resourceProvider = i.resourceProvider, this.telemetryProxyService = i.telemetryProxyService, this.sandboxPromiseHandler = i.sandboxPromiseHandler, this.aggregatedDataViewSize = 0, this.dataViewSerializer = new t.SandboxDataViewSerializer, this.messageProxy.on(e.visualHost.events.WindowMessageProxyMessageEvent, (function (e) { return r.onMessageReceived(e) })) } return Object.defineProperty(i.prototype, "visual", { get: function () { return this._visual }, enumerable: !0, configurable: !0 }), i.prototype.init = function (e) { this.style = l.deserializeVisualStyle(e.style); var t = { animation: e.animation, element: this.container, host: this.hostServices, interactivity: e.interactivity, style: this.style, viewport: e.viewport, localizationResources: this.plugin.localizationResources, hostEnv: e.hostEnv }; this.attachRelayUIEventListener(), this.attachWindowResizeListener(), this.featureSwitches = e.featureSwitches, this.visual.init(t) }, i.prototype.destroy = function () { this.detachRelayUIEventListener(), this.detachWindowResizeListener(), this.messageProxy.off(e.visualHost.events.WindowMessageProxyMessageEvent), this.messageProxy.destroy(), this.visual && this.visual.destroy && this.visual.destroy() }, i.prototype.categoriesExists = function (e) { return !!(e && e.dataViews && e.dataViews.length > 0 && e.dataViews[0].categorical && e.dataViews[0].categorical.categories && e.dataViews[0].categorical.categories.length > 0 && e.dataViews[0].categorical.categories[0] && e.dataViews[0].categorical.categories[0].values) }, i.prototype.getHostCategoriesValues = function (e, t, i) { try { if (e) { if (i) for (var o = 0; o < e.length; o++)e[o] && (e[o] = new Date(e[o])); t.dataViews[0].categorical.categories[0].values = e } } catch (e) { this.sendError(e) } return t }, i.prototype.update = function (t) { var i, o = this, r = t.message.arguments[0]; if (this.plugin && this.plugin.apiVersion && !g.lt(this.plugin.apiVersion, "2.0.0")) { this.stringifiedDataView = r.serializedDataView ? r.serializedDataView.stringifiedDataView : null; var n = r.serializedDataView ? [this.dataViewSerializer.deserializeDataView(r.serializedDataView)] : [], a = this.lastVisualUpdateOptions = { dataViews: n, suppressAnimations: r.suppressAnimations, viewMode: r.viewMode, editMode: r.editMode, viewport: r.viewport, type: r.type, operationKind: e.VisualDataChangeOperationKind.Create, resizeMode: r.resizeMode, isInFocus: r.isInFocus, jsonFilters: r.jsonFilters ? r.jsonFilters : null }; this.fixUpdateOptionsAndUpdateVisual(a, t, r), this.onRestoreCvSelectionIds(r.selections, !g.gt(this.plugin.apiVersion, "2.4.0")) } else r.dataTransforms && (i = e.data.services.DataViewTransformActionsSerializer.deserializeDataViewTransformActions(r.dataTransforms, this.plugin.capabilities.objects || {})), this.transformDataViewSource(r.dataViewSource, i, !0).then((function (i) { var n = o.lastVisualUpdateOptions = { dataViews: i.dataViews, suppressAnimations: r.suppressAnimations, viewMode: r.viewMode, editMode: r.editMode, viewport: r.viewport, type: r.type, operationKind: e.VisualDataChangeOperationKind.Create, resizeMode: r.resizeMode, isInFocus: r.isInFocus, jsonFilters: r.jsonFilters ? r.jsonFilters : null }; o.fixUpdateOptionsAndUpdateVisual(n, t, r) })).catch((function (e) { return o.sendError(e) })) }, i.prototype.updateWithCachedData = function (t) { var i, o, r, n = t.message.arguments[0]; if (this.plugin && this.plugin.apiVersion && !g.lt(this.plugin.apiVersion, "2.0.0")) { if (this.lastVisualUpdateOptions.dataViews && this.lastVisualUpdateOptions.dataViews[0] && this.lastVisualUpdateOptions.dataViews[0].metadata) { var a = this.lastVisualUpdateOptions.dataViews[0].metadata.segment; this.lastVisualUpdateOptions.dataViews[0].metadata = n.dataViewMetadata ? JSON.parse(n.dataViewMetadata) : void 0, this.lastVisualUpdateOptions.dataViews[0].metadata.segment = a } o = this.lastVisualUpdateOptions.dataViews, r = !0 } else n.dataTransforms && (i = e.data.services.DataViewTransformActionsSerializer.deserializeDataViewTransformActions(n.dataTransforms, this.plugin.capabilities.objects || {})), this.lastDataViewTransformApplyOptions.transforms = i, o = e.data.DataViewTransform.apply(this.lastDataViewTransformApplyOptions).dataViews; var s = this.lastVisualUpdateOptions = { dataViews: o, suppressAnimations: n.suppressAnimations, viewMode: n.viewMode, editMode: n.editMode, viewport: n.viewport, type: n.type, operationKind: e.VisualDataChangeOperationKind.Create, resizeMode: n.resizeMode, isInFocus: n.isInFocus, jsonFilters: n.jsonFilters ? n.jsonFilters : null }; this.fixUpdateOptionsAndUpdateVisual(s, t, n, r) }, i.prototype.loadResourcePackage = function (e) { var t = this; this.resourceLoader.loadVisualPlugin(e).then((function (e) { t.plugin = e, t.createAdapter() })).catch((function () { var i = new Error("Unable to load plugin, resource package id: " + e.id); return t.sendError(i) })) }, i.prototype.createAdapter = function () { var e = this.plugin; if (this.container.addClass("visual-" + e.name), this._visual = p(e, e.create, this.promiseFactory, this.telemetryProxyService), !e || !this.visual) { var t = new Error("Unable to create visual from plugin " + e.name); return this.sendError(t) } this.flushQueue(), this.isVisualInitialized = !0, this.sendSandboxReady() }, i.prototype.loadWithoutResourcePackage = function (t) { var i = "3.0.0", o = t.apiVersion ? this.isolate && g.lt(t.apiVersion, i) : this.isolate; this.plugin = r(t, !1, o), e.extensibility.visualPluginAdapter.transformPlugin(this.plugin), this.createAdapter() }, i.prototype.enumerateObjectInstances = function (e) { if (this.visual.enumerateObjectInstances) { var t = this.visual.enumerateObjectInstances(e); if (t) { var i = t, o = this.plugin && this.plugin.apiVersion && !g.lt(this.plugin.apiVersion, "2.0.0"); return i && i.instances ? o ? { instances: i.instances, containers: i.containers } : { instances: u.serialize(i.instances), containers: i.containers ? u.serializeContainers(i.containers, this.resourceProvider) : null } : o ? t : u.serialize(t) } } }, i.prototype.enumerateObjectRepetition = function () { if (this.visual.enumerateObjectRepetition) { var e = this.visual.enumerateObjectRepetition(); return e ? c.serialize(e) : void 0 } }, i.prototype.sendUpdateResult = function () { var e = this.container.children("*").length, t = { eventName: "onUpdateResult", arguments: [e] }; this.messageProxy.postMessage(t) }, i.prototype.sendSandboxReady = function () { var e = this.plugin.capabilities; e.objects && (e.objects = s.serialize(this.plugin.capabilities.objects, this.resourceProvider)); var t = { name: this.plugin.name, watermarkKey: this.plugin.watermarkKey, capabilities: e, class: this.plugin.class, iconUrl: this.plugin.iconUrl, custom: !0, create: function () { return null } }, i = { eventName: "onPluginReady", arguments: [t] }; this.messageProxy.postMessage(i) }, i.prototype.flushQueue = function () { for (; this.messageQueue.length > 0;) { var e = this.messageQueue.shift(); this.executeMessage(e) } }, i.prototype.sendError = function (e, t) { var i = { eventName: "onError", arguments: [], error: { id: t ? t.id : null, eventName: t ? t.eventName : null, name: e.name, message: e.message, pluginName: this.plugin.name } }; this.messageProxy.postMessage(i) }, i.prototype.onMessageReceived = function (e) { return this.isVisualInitialized || "loadResourcePackage" === e.message.eventName || "loadWithoutResourcePackage" === e.message.eventName ? this.executeMessage(e) : void this.messageQueue.push(e) }, i.prototype.executeMessage = function (e) { var t = e.message; try { if ($.isFunction(this[t.eventName])) return "update" === t.eventName || "updateWithCachedData" === t.eventName || "handleLoadMoreDataResult" === t.eventName ? this[t.eventName].call(this, e) : this[t.eventName].apply(this, t.arguments); if (this.visual && $.isFunction(this.visual[t.eventName])) return this.visual[t.eventName].apply(this.visual, t.arguments) } catch (e) { this.sendError(e, t) } }, i.prototype.transformDataViewSource = function (t, i, o) { var r = this, n = this.promiseFactory.defer(); return (t ? this.createDataView(t) : this.promiseFactory.resolve({ dataView: null })).then((function (t) { var a = e.data.DataViewTransform.apply(r.lastDataViewTransformApplyOptions = { prototype: t.dataView, objectDescriptors: r.plugin.capabilities ? r.plugin.capabilities.objects : void 0, dataViewMappings: r.plugin.capabilities ? r.plugin.capabilities.dataViewMappings : void 0, dataRoles: r.plugin.capabilities ? r.plugin.capabilities.dataRoles : void 0, drillCapabilities: r.plugin.capabilities && r.plugin.capabilities.drilldown, expandCollapseCapabilties: r.plugin.capabilities && r.plugin.capabilities.expandCollapse, transforms: i, colorAllocatorFactory: e.visuals.createColorAllocatorFactory(), bypassConcatenation: o, visualStyle: r.style, keepAllMetadataColumnsCapability: !!r.plugin.capabilities && r.plugin.capabilities.keepAllMetadataColumns, featureSwitches: r.featureSwitches }).dataViews; n.resolve({ dataViews: a }) })).catch((function (e) { return r.sendError(e) })), n.promise }, i.prototype.createDataView = function (t) { var i = this, o = this.promiseFactory.defer(), r = { type: t.type, query: { dataSources: null, command: t.data } }; return this.dataProxy.execute(r).then((function (t) { var r = t && t.dataReaderResult ? t.dataReaderResult.dataView : null, n = e.DataViewAnalysis.validateAndReshape(r, i.plugin.capabilities ? i.plugin.capabilities.dataViewMappings : null); o.resolve({ dataView: n.dataView }) })).catch((function (e) { return i.sendError(e) })), o.promise }, i.prototype.attachWindowResizeListener = function () { $(window).on("resize", this.windowResizeListener.bind(this)), $(window).trigger("resize") }, i.prototype.detachWindowResizeListener = function () { $(window).off("resize") }, i.prototype.windowResizeListener = function () { if (this.lastVisualUpdateOptions) { var t = $(window).height(), i = $(window).width(), o = e.Prototype.inherit(this.lastVisualUpdateOptions); o.viewport = { width: i, height: t }, o.type = e.VisualUpdateType.Resize, o.resizeMode = 1, this.visual.update(o) } }, i.prototype.attachRelayUIEventListener = function () { this.container.on(t.relayUIEvents.join(" "), this.relayUIEventListener) }, i.prototype.detachRelayUIEventListener = function () { this.container.off(t.relayUIEvents.join(" "), this.relayUIEventListener) }, i.prototype.handleLoadMoreDataResult = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var i, o, r, a, s; return __generator(this, (function (u) { switch (u.label) { case 0: return this.plugin && this.plugin.apiVersion && !g.lt(this.plugin.apiVersion, "2.0.0") ? (i = t.message.arguments[0], i && this.stringifiedDataView !== i.stringifiedDataView ? (this.stringifiedDataView = i.stringifiedDataView, o = [this.dataViewSerializer.deserializeDataView(i)], n.mergeDataViews(this.lastVisualUpdateOptions.dataViews[0], o[0]), this.lastVisualUpdateOptions.operationKind = e.VisualDataChangeOperationKind.Append, [4, this.aggregateDataViewSizeAndUpdateVisual(t.packedSize)]) : [3, 2]) : [3, 3]; case 1: u.sent(), u.label = 2; case 2: return [3, 5]; case 3: return r = t.message.arguments[0], a = r ? r.dataReaderResult.dataView : null, a && (n.mergeDataViews(this.lastDataViewTransformApplyOptions.prototype, a), this.lastVisualUpdateOptions.dataViews = e.data.DataViewTransform.apply(this.lastDataViewTransformApplyOptions).dataViews, this.lastVisualUpdateOptions.operationKind = e.VisualDataChangeOperationKind.Append), [4, this.aggregateDataViewSizeAndUpdateVisual(t.packedSize)]; case 4: u.sent(), u.label = 5; case 5: return s = { eventName: "stopProgressBar", arguments: [] }, this.messageProxy.postMessage(s), [2] } })) })) }, i.prototype.aggregateDataViewSizeAndUpdateVisual = function (t) { return __awaiter(this, void 0, e.Promise, (function () { return __generator(this, (function (e) { switch (e.label) { case 0: return this.aggregatedDataViewSize += t, this.aggregatedDataViewSize >= y ? this.hostServicesControl.enableLoadMoreData(!1) : this.hostServicesControl.enableLoadMoreData(!0), [4, this.visual.update(this.lastVisualUpdateOptions)]; case 1: return e.sent(), [2] } })) })) }, i.prototype.handleGetAADTokenResult = function (e) { e.isError ? this.sandboxPromiseHandler.RejectPromise(e.promiseId, e.payload) : this.sandboxPromiseHandler.ResolvePromise(e.promiseId, e.payload) }, i.prototype.handleGetWACTokenResult = function (e) { e.isError ? this.sandboxPromiseHandler.RejectPromise2(e.promiseId, e.payload ? e.payload : "") : this.sandboxPromiseHandler.ResolvePromise2(e.promiseId, e.wacToken) }, i.prototype.handleGetStorageData = function (e) { e.data ? this.sandboxPromiseHandler.ResolvePromise(e.promiseId, e.data) : this.sandboxPromiseHandler.RejectPromise(e.promiseId) }, i.prototype.handleSetStorageData = function (e) { e.isError ? this.sandboxPromiseHandler.RejectPromise(e.promiseId) : this.sandboxPromiseHandler.ResolvePromise(e.promiseId, e.freeSpace) }, i.prototype.onRestoreSelection = function (t) { var i = this.hostServices.selectionManager; if (i) if (t && t.selection) { var o = t.selection.map((function (t) { return e.visuals.SelectionId.fromSelectorsByColumn(a.deserializeSelectorsByColumn(t)) })); i.setSelectionIds(o), i.invokeOnSelectCallback(o) } else i.setSelectionIds([]), i.invokeOnSelectCallback([]) }, i.prototype.onRestoreCvSelectionIds = function (t, i) { void 0 === i && (i = !0); var o = this.hostServices.selectionManager; if (o) { var r = []; t ? (r = _.map(t, (function (t) { return new e.visuals.CustomVisualSelectionId(t.serializedDataMap, t.measures) })), o.setSelectionIds(r)) : o.setSelectionIds([]), i && o.invokeOnSelectCallback(r) } }, i.prototype.fixUpdateOptionsAndUpdateVisual = function (e, t, i, o) { void 0 === o && (o = !1), o || (e = this.categoriesExists(e) ? this.getHostCategoriesValues(i.categoriesValues, e, i.isCategoryDate) : e, this.hostServicesControl.enableLoadMoreData(!0), this.aggregatedDataViewSize = t.packedSize), this.visual.update(e), this.sendUpdateResult() }, i })(); t.SandboxHost = m })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(e) { return new a(e) } var o = e.data.services, r = o.DataViewObjectSerializer, n = e.visuals.CustomVisualSelectionId; t.createSandboxVisualHostTooltipService = i; var a = (function () { function e(e) { this.messageProxy = e, this.rootElement = window.document.body } return e.prototype.serializeIdentities = function (e) { return e && e[0] instanceof n ? e : e && _(e).map((function (e) { return r.serializeSelectorsByColumn(e) })).compact().value() }, e.prototype.show = function (e) { var t = e && { coordinates: e.coordinates, dataItems: e.dataItems, identities: this.serializeIdentities(e.identities), isTouchEvent: e.isTouchEvent }, i = { eventName: "showTooltip", arguments: [t] }; this.messageProxy.postMessage(i) }, e.prototype.move = function (e) { var t = e && { coordinates: e.coordinates, dataItems: e.dataItems, identities: this.serializeIdentities(e.identities), isTouchEvent: e.isTouchEvent }, i = { eventName: "moveTooltip", arguments: [t] }; this.messageProxy.postMessage(i) }, e.prototype.hide = function (e) { var t = { eventName: "hideTooltip", arguments: [e] }; this.messageProxy.postMessage(t) }, e.prototype.visible = function () { return !1 }, e.prototype.container = function () { return this.rootElement }, e.prototype.enabled = function () { return !0 }, e })() })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(e, t) { return new r(e, t) } var o = e.extensibility.convertVisualEventType; t.createSandboxVisualHostTelemetryService = i; var r = (function () { function e(e, t) { this.messageProxy = e, this.instanceId = t } return e.prototype.trace = function (e, t) { this.messageProxy.postMessageAsync({ eventName: "logVisualEvent", arguments: [o(e), this.instanceId, t] }) }, e })() })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, o) { return new i(e, t, o) } e.createSandboxVisualHostLocalStorageService = t; var i = (function () { function e(e, t, i) { this.messageProxy = e, this.promiseFactory = t, this.sandboxPromiseHandler = i } return e.prototype.getStorageData = function (e) { var t = this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()), i = { eventName: "getStorageData", arguments: [e, t.id] }; return this.messageProxy.postMessage(i), t.deferred.promise }, e.prototype.setStorageData = function (e, t) { var i = this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()), o = { eventName: "setStorageData", arguments: [e, t, i.id] }; return this.messageProxy.postMessage(o), i.deferred.promise }, e.prototype.removeStorageData = function (e) { var t = { eventName: "removeStorageData", arguments: [e] }; this.messageProxy.postMessage(t) }, e })(); e.SandboxVisualHostLocalStorageService = i })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t) { return new i(e, t) } e.createSandboxVisualHostEventService = t; var i = (function () { function e(e, t) { this.messageProxy = e, this.instanceId = t } return e.prototype.renderingStarted = function (e) { var t = { eventName: "renderingStarted", arguments: [this.instanceId, e.updateId] }; this.messageProxy.postMessage(t) }, e.prototype.renderingFinished = function (e) { var t = { eventName: "renderingFinished", arguments: [this.instanceId, e.updateId] }; this.messageProxy.postMessage(t) }, e.prototype.renderingFailed = function (e, t) { var i = { eventName: "renderingFailed", arguments: [this.instanceId, e.updateId, t] }; this.messageProxy.postMessage(i) }, e })(); e.SandboxVisualHostEventService = i })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(e) { return new r(e) } var o; !(function (e) { e.VisualApiUsage = "VisualApiUsage", e.VisualException = "VisualException" })(o = t.proxiedTelemetryEventType || (t.proxiedTelemetryEventType = {})), t.createSandboxTelemetryProxyService = i; var r = (function () { function t(e) { this.windowMessageProxy = e } return t.prototype.setLogToConsole = function (e) { }, t.prototype.setLogAllEvents = function (e) { }, t.prototype.suspend = function () { }, t.prototype.resume = function () { }, t.prototype.flush = function () { }, t.prototype.restart = function () { }, t.prototype.startPerfEventDeprecated = function (e, t) { for (var i = [], o = 2; o < arguments.length; o++)i[o - 2] = arguments[o]; var r; return r = new n({ info: {} }) }, t.prototype.logEvent = function (t) { for (var i = [], r = 1; r < arguments.length; r++)i[r - 1] = arguments[r]; var n = null; return t === e.telemetry.VisualApiUsage ? n = o.VisualApiUsage : t === e.telemetry.VisualException && (n = o.VisualException), i.unshift(n), this.windowMessageProxy.postMessageAsync({ eventName: "logEvent", arguments: i }), null }, t.prototype.logTelemetryData = function (e, t, i) { return null }, t.prototype.logChildEvent = function (e, t) { for (var i = [], o = 2; o < arguments.length; o++)i[o - 2] = arguments[o] }, t.prototype.startActivity = function (e, t) { for (var i = [], o = 2; o < arguments.length; o++)i[o - 2] = arguments[o]; var r; return r = new n({ info: {} }) }, t.prototype.startEvent = function (e) { for (var t = [], i = 1; i < arguments.length; i++)t[i - 1] = arguments[i]; var o; return o = new n({ info: {} }) }, t.prototype.startMonitoredActivity = function (e, t, i) { var o, r = { info: {} }; return o = new n(r), { activityEvent: r, activityDeferred: o } }, t.prototype.startChildEvent = function (e, t) { for (var i = [], o = 2; o < arguments.length; o++)i[o - 2] = arguments[o]; var r; return r = new n({ info: {} }) }, t.prototype.logTrace = function (e) { }, Object.defineProperty(t.prototype, "sessionId", { get: function () { }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "root", { get: function () { }, enumerable: !0, configurable: !0 }), t.prototype.setHostInfo = function (e, t) { }, t })(), n = (function () { function t(t) { var i = this; this.event = t, this.promise = new e.Promise(function (e, t) { i.onResolve = e, i.onReject = t }) } return t.prototype.resolve = function () { this.onResolve() }, t.prototype.reject = function (e) { this.onReject() }, t })(); t.EmptyDeferredTelemetryEvent = n })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t() { return new i } e.createSandboxNoOpTelemetryProxyService = t; var i = (function () { function t() { } return t.prototype.setLogToConsole = function (e) { }, t.prototype.setLogAllEvents = function (e) { }, t.prototype.suspend = function () { }, t.prototype.resume = function () { }, t.prototype.flush = function () { }, t.prototype.restart = function () { }, t.prototype.startPerfEventDeprecated = function (t, i) { for (var o = [], r = 2; r < arguments.length; r++)o[r - 2] = arguments[r]; var n, a = { info: {} }; return n = new e.EmptyDeferredTelemetryEvent(a) }, t.prototype.logEvent = function (e) { for (var t = [], i = 1; i < arguments.length; i++)t[i - 1] = arguments[i]; return null }, t.prototype.logTelemetryData = function (e, t, i) { return null }, t.prototype.logChildEvent = function (e, t) { for (var i = [], o = 2; o < arguments.length; o++)i[o - 2] = arguments[o] }, t.prototype.startActivity = function (t, i) { for (var o = [], r = 2; r < arguments.length; r++)o[r - 2] = arguments[r]; var n, a = { info: {} }; return n = new e.EmptyDeferredTelemetryEvent(a) }, t.prototype.startEvent = function (t) { for (var i = [], o = 1; o < arguments.length; o++)i[o - 1] = arguments[o]; var r, n = { info: {} }; return r = new e.EmptyDeferredTelemetryEvent(n) }, t.prototype.startMonitoredActivity = function (t, i, o) { var r, n = { info: {} }; return r = new e.EmptyDeferredTelemetryEvent(n), { activityEvent: n, activityDeferred: r } }, t.prototype.startChildEvent = function (t, i) { for (var o = [], r = 2; r < arguments.length; r++)o[r - 2] = arguments[r]; var n, a = { info: {} }; return n = new e.EmptyDeferredTelemetryEvent(a) }, t.prototype.logTrace = function (e) { }, Object.defineProperty(t.prototype, "sessionId", { get: function () { }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "root", { get: function () { }, enumerable: !0, configurable: !0 }), t.prototype.setHostInfo = function (e, t) { }, t })() })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function i(e, t, i) { return new c(e, t, i) } var o = e.data.services.DataViewObjectSerializer, r = e.visualHost.services.VisualObjectInstanceSerializer, n = e.extensibility.SelectionManager, a = jsCommon.Version, s = { "0.00 %;-0.00 %;0.00 %": "Percentage", "0.0 %;-0.0 %;0.0 %": "Percentage1" }, u = { NullValue: "(Blank)", BooleanTrue: "True", BooleanFalse: "False", NaNValue: "NaN", InfinityValue: "+Infinity", NegativeInfinityValue: "-Infinity", Restatement_Comma: "{0}, {1}", Restatement_CompoundAnd: "{0} and {1}", DisplayUnitSystem_EAuto_Title: "Auto", DisplayUnitSystem_E0_Title: "None", DisplayUnitSystem_E3_LabelFormat: "{0}K", DisplayUnitSystem_E3_Title: "Thousands", DisplayUnitSystem_E6_LabelFormat: "{0}M", DisplayUnitSystem_E6_Title: "Millions", DisplayUnitSystem_E9_LabelFormat: "{0}bn", DisplayUnitSystem_E9_Title: "Billions", DisplayUnitSystem_E12_LabelFormat: "{0}T", DisplayUnitSystem_E12_Title: "Trillions", Percentage: "#,0.##%", Percentage1: "#,0.#%", TableTotalLabel: "Total", Tooltip_HighlightedValueDisplayName: "Highlighted", Decrease: "Decrease", Increase: "Increase", Waterfall_TotalLabel: "Total", GeotaggingString_Continent: "continent", GeotaggingString_Continents: "continents", GeotaggingString_Country: "country", GeotaggingString_Countries: "countries", GeotaggingString_State: "state", GeotaggingString_States: "states", GeotaggingString_City: "city", GeotaggingString_Cities: "cities", GeotaggingString_Town: "town", GeotaggingString_Towns: "towns", GeotaggingString_Province: "province", GeotaggingString_Provinces: "provinces", GeotaggingString_County: "county", GeotaggingString_Counties: "counties", GeotaggingString_Village: "village", GeotaggingString_Villages: "villages", GeotaggingString_Post: "post", GeotaggingString_Zip: "zip", GeotaggingString_Code: "code", GeotaggingString_Place: "place", GeotaggingString_Places: "places", GeotaggingString_Address: "address", GeotaggingString_Addresses: "addresses", GeotaggingString_Street: "street", GeotaggingString_Streets: "streets", GeotaggingString_Longitude: "longitude", GeotaggingString_Longitude_Short: "lon", GeotaggingString_Longitude_Short2: "long", GeotaggingString_Latitude: "latitude", GeotaggingString_Latitude_Short: "lat", GeotaggingString_PostalCode: "postal code", GeotaggingString_PostalCodes: "postal codes", GeotaggingString_ZipCode: "zip code", GeotaggingString_ZipCodes: "zip codes", GeotaggingString_Territory: "territory", GeotaggingString_Territories: "territories" }, c = (function () {
            function i(e, o, r) { this.messageProxy = e, this.loadMoreDataEnabled = !0, this.instanceId = o, this.visualHostTooltipService = t.createSandboxVisualHostTooltipService(e), this.telemetryService = t.createSandboxVisualHostTelemetryService(e, o), this.queryDictionary = i.parseUrlParameters(), this.authService = t.createSandboxVisualHostAuthenticationService(e, this.promiseFactory(), r), this.storageService = t.createSandboxVisualHostLocalStorageService(e, this.promiseFactory(), r), this.eventsService = t.createSandboxVisualHostEventService(e, o) } return i.initialize = function () { e.visuals.TooltipManager && e.visuals.TooltipManager.setLocalizedStrings(i.createTooltipLocaleOptions()) }, i.createLocaleOptions = function () { return { null: u.NullValue, true: u.BooleanTrue, false: u.BooleanFalse, NaN: u.NaNValue, infinity: u.InfinityValue, negativeInfinity: u.NegativeInfinityValue, beautify: function (e) { return i.beautify(e) }, describe: function (e) { return i.describeUnit(e) }, restatementComma: u.Restatement_Comma, restatementCompoundAnd: u.Restatement_CompoundAnd, restatementCompoundOr: u.Restatement_CompoundOr } }, i.createTooltipLocaleOptions = function () { return { highlightedValueDisplayName: u.Tooltip_HighlightedValueDisplayName } }, i.prototype.getLocalizedString = function (e) { return u[e] }, i.prototype.onSelecting = function (e) { e.action = 0 }, i.prototype.onSelect = function (t) {
                var i; if (e.extensibility.legacy.isOldSelectEventArgs(t)) {
                    var r = t; i = { data: o.serializeSelectors(r.data), data2: o.serializeSelectorsByColumn(r.data2), selectors: o.serializeSelectors(t.selectors) }
                } else i = { visualObjects: o.serializeVisualObjects(t.visualObjects) }; var n = { eventName: "onSelect", arguments: [i] }; this.messageProxy.postMessage(n)
            }, i.prototype.customVisualOnContextMenu = function (e) { var t = { eventName: "onCustomVisualContextMenu", arguments: [e] }; this.messageProxy.postMessage(t) }, i.prototype.switchFocusModeState = function (e) { var t = { eventName: "onSwitchFocusModeState", arguments: [e] }; this.messageProxy.postMessage(t) }, i.prototype.persistProperties = function (e) { var t, i = e; t = this.apiVersion && (a.gt(this.apiVersion, "2.0.0") || a.eq(this.apiVersion, "2.0.0")) ? e : i.merge || i.remove || i.replace ? { merge: i.merge ? r.serialize(i.merge) : null, replace: i.replace ? r.serialize(i.replace) : null, remove: i.remove ? r.serialize(i.remove) : null } : r.serialize(e); var o = { eventName: "persistProperties", arguments: [t] }; this.messageProxy.postMessage(o) }, i.prototype.sendSelectionIdsToHost = function (e) { var t = { eventName: "transformCvSelectionIdsAndSelect", arguments: [e] }; this.messageProxy.postMessage(t) }, i.prototype.loadMoreData = function () { this.fetchMoreData() }, i.prototype.fetchMoreData = function () { if (!this.loadMoreDataEnabled) return !1; var e = { eventName: "loadMoreData", arguments: null }; return this.messageProxy.postMessage(e), !0 }, i.prototype.launchUrl = function (e) { var t = { eventName: "launchUrl", arguments: [e] }; this.messageProxy.postMessage(t) }, i.prototype.tooltips = function () { return this.visualHostTooltipService }, i.prototype.telemetry = function () { return this.telemetryService }, i.prototype.authenticationService = function () { return this.authService }, i.prototype.localStorageService = function () { return this.storageService }, i.prototype.eventService = function () { return this.eventsService }, i.prototype.locale = function () { var e = this.queryDictionary && this.queryDictionary.locale; return e || navigator.language }, i.prototype.loader = function () { var e = this; return { require: function () { return e.promiseFactory().reject() } } }, i.prototype.applyJsonFilter = function (e, t, i, o) { var r = [e, t, i]; o && r.push(o); var n = { eventName: "applyJsonFilter", arguments: r }; return this.messageProxy.postMessage(n), !0 }, i.prototype.getJSONFilter = function (e) { return this.promiseFactory().reject() }, i.parseUrlParameters = function (e) { void 0 === e && (e = window.location.search); var t = {}, i = e; if (i && "?" === i.substr(0, 1)) for (var o = i.substr(1).split("&"), r = 0, n = o; r < n.length; r++) { var a = n[r], s = a && a.split("="); s && 2 === s.length && (t[decodeURIComponent(s[0])] = decodeURIComponent(s[1])) } return t }, i.prototype.destroy = function () { this.messageProxy.destroy(), this.messageProxy = null }, i.prototype.refreshHostData = function () { var e = { eventName: "refreshHostData", arguments: null }; this.messageProxy.postMessage(e) }, i.prototype.createSelectionIdBuilder = function () { return new e.visuals.CustomVisualSelectionId }, i.prototype.createTooltipService = function () { return e.extensibility.createTooltipService({ hostServices: this }) }, i.prototype.createSelectionManager = function (e) { return new n({ hostServices: this, apiVersion: e }) }, i.prototype.requestFocus = function () { }, i.prototype.setShouldDeferData = function () { }, i.prototype.onDragStart = function () { }, i.prototype.onContextMenu = function () { }, i.prototype.onSwitchFocusModeState = function () { }, i.prototype.getVisualLinkProperties = function () { }, i.prototype.canSelect = function () { return !1 }, i.prototype.canExpandCollapse = function (e) { return !1 }, i.prototype.setNodeExpansionState = function (e) { }, i.prototype.onCustomSort = function (e) { }, i.prototype.getViewMode = function () { return 0 }, i.prototype.getEditMode = function () { return 0 }, i.prototype.setWarnings = function (e) { }, i.prototype.setToolbar = function (e) { }, i.prototype.shouldRetainSelection = function () { return !1 }, i.prototype.geocoder = function () { return e.visuals.services.createGeocoder() }, i.prototype.geolocation = function () { return e.visuals.services.createGeolocation() }, i.prototype.promiseFactory = function () { return e.createJQueryPromiseFactory() }, i.prototype.analyzeFilter = function (e) { }, i.prototype.getIdentityDisplayNames = function (e) { }, i.prototype.setIdentityDisplayNames = function (e) { }, i.prototype.getUIComponentFactory = function () { }, i.beautify = function (e) { var t = s[e]; return t ? u[t] || e : e }, i.describeUnit = function (e) { var t = e === -1 ? "Auto" : e.toString(), i = u["DisplayUnitSystem_E" + t + "_Title"], o = e <= 0 ? "{0}" : u["DisplayUnitSystem_E" + t + "_LabelFormat"]; if (i || o) return { title: i, format: o } }, i.prototype.enableLoadMoreData = function (e) { this.loadMoreDataEnabled = e }, i
        })(); t.SandboxVisualHostServices = c, t.createVisualHostServices = i
    })(t = e.visualSandbox || (e.visualSandbox = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(e, t, i) { return new r(e, t, i) } var o = e.extensibility.SelectionManager, r = (function () { function t(e, t, i) { this.loadMoreDataEnabled = !0, this.powerbiHost = e, this.visualHostTooltipService = i, this.tooltipService = new n(t, this.visualHostTooltipService) } return t.prototype.onSelecting = function (e) { e.action = 0 }, t.prototype.onSelect = function (e) { this.powerbiHost && this.powerbiHost.onSelect(e) }, t.prototype.persistProperties = function (e) { this.powerbiHost && this.powerbiHost.persistProperties(e) }, t.prototype.tooltips = function () { return this.visualHostTooltipService }, t.prototype.applyJsonFilter = function (e, t, i, o) { this.powerbiHost.applyJsonFilter(e, t, i, o) }, t.prototype.getJSONFilter = function (e) { return this.promiseFactory().reject() }, t.prototype.createSelectionIdBuilder = function () { return new e.visuals.SelectionIdBuilder }, t.prototype.createTooltipService = function () { return this.tooltipService }, t.prototype.createSelectionManager = function (e) { return new o({ hostServices: this, apiVersion: e }, (!0)) }, t.prototype.getLocalizedString = function (e) { return null }, t.prototype.locale = function () { return navigator.language }, t.prototype.loader = function () { var e = this; return { require: function () { return e.promiseFactory().reject() } } }, t.prototype.onSwitchFocusModeState = function (e) { this.powerbiHost && this.powerbiHost.onSwitchFocusModeState(e) }, t.prototype.loadMoreData = function () { }, t.prototype.setShouldDeferData = function () { }, t.prototype.fetchMoreData = function () { return !0 }, t.prototype.launchUrl = function (e) { }, t.prototype.destroy = function () { }, t.prototype.refreshHostData = function () { }, t.prototype.onContextMenu = function () { }, t.prototype.authenticationService = function () { return null }, t.prototype.telemetry = function () { return null }, t.prototype.localStorageService = function () { return null }, t.prototype.eventService = function () { return null }, t.prototype.requestFocus = function () { }, t.prototype.onDragStart = function () { }, t.prototype.getVisualLinkProperties = function () { }, t.prototype.canSelect = function () { return !1 }, t.prototype.canExpandCollapse = function () { return !1 }, t.prototype.setNodeExpansionState = function (e) { }, t.prototype.onCustomSort = function (e) { }, t.prototype.getViewMode = function () { return 0 }, t.prototype.getEditMode = function () { return 0 }, t.prototype.setWarnings = function (e) { }, t.prototype.setToolbar = function (e) { }, t.prototype.shouldRetainSelection = function () { return !1 }, t.prototype.geocoder = function () { return e.visuals.services.createGeocoder() }, t.prototype.geolocation = function () { return e.visuals.services.createGeolocation() }, t.prototype.promiseFactory = function () { return e.createJQueryPromiseFactory() }, t.prototype.analyzeFilter = function (e) { }, t.prototype.getIdentityDisplayNames = function (e) { }, t.prototype.setIdentityDisplayNames = function (e) { }, t.prototype.getUIComponentFactory = function () { }, t.prototype.enableLoadMoreData = function (e) { this.loadMoreDataEnabled = e }, t })(); t.NonSandboxVisualHostServices = r; var n = (function () { function e(e, t) { this.tooltipService = t, this.element = e } return e.prototype.enabled = function () { return this.tooltipService && this.tooltipService.enabled() }, e.prototype.show = function (e) { if (this.enabled()) { var t = { coordinates: this.fixCoordinates(e.coordinates), dataItems: e.dataItems, isTouchEvent: e.isTouchEvent, identities: o.getSelectorsByColumn(e.identities) }; this.tooltipService.show(t) } }, e.prototype.move = function (e) { if (this.enabled()) { var t = { coordinates: this.fixCoordinates(e.coordinates), dataItems: e.dataItems, isTouchEvent: e.isTouchEvent, identities: o.getSelectorsByColumn(e.identities) }; this.tooltipService.move(t) } }, e.prototype.hide = function (e) { this.enabled() && this.tooltipService.hide(e) }, e.prototype.fixCoordinates = function (e) { var t = this.element.offset(); return e[0] = e[0] + t.left, e[1] = e[1] + t.top, e }, e })(); t.createNonSandboxVisualHostServices = i })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i = e.data.services.DataViewObjectSerializer, o = (function () { function t() { this.identitiesArray = [] } return t.prototype.serializeDataViewForCv = function (e, t, i) { var o = this; if (i || (this.identitiesArray = []), e) { e = this.filterDataViewsType(e, t); return { valueSource: this.getValueSource(e), valueGroups: this.getValueGroups(e), stringifiedDataView: JSON.stringify(e, (function (e, t) { return o.replacer(e, t) })) } } }, t.prototype.serializeDataViewMetadata = function (e) { var t = this; return e.metadata ? JSON.stringify(e.metadata, (function (e, i) { return t.replacer(e, i) })) : null }, t.prototype.deserializeDataView = function (e) { var t = JSON.parse(e.stringifiedDataView); return this.reconstructValuesGroups(t, e), this.reconstructValuesSource(t, e), t }, t.prototype.convertCVSelectionIdToPowerbiSelctionId = function (t) { var i = this, o = JSON.parse(JSON.stringify(t), (function (e, t) { return i.replaceOpaqueIdentitiesWithDataViewScopeIdentities(e, t) })); return e.visuals.SelectionId.createWithSelectorForColumnAndMeasures(o.dataMap, o.measures) }, t.prototype.getIndexOfIdentity = function (t) { return _.findIndex(this.identitiesArray, (function (i) { return e.DataViewScopeIdentity.equals(i, t) })) }, t.prototype.deserializeVisualObjectInstance = function (e) { var t = this; return JSON.parse(JSON.stringify(e, (function (e, i) { return t.replaceOpaqueIdentities(e, i) }))) }, t.prototype.flushIdentitiesArray = function () { this.identitiesArray && 0 !== this.identitiesArray.length && this.identitiesArray.forEach((function (e) { return e.opaqueIdentity = void 0 })) }, t.prototype.getValueGroups = function (e) { var t = this; if (e && e.categorical && e.categorical.values && e.categorical.values.grouped) { var i = e.categorical.values.grouped(); return JSON.stringify(i, (function (e, i) { return t.replacer(e, i) })) } return null }, t.prototype.getValueSource = function (e) { return e && e.categorical && e.categorical.values && e.categorical.values.source ? e.categorical.values.source : null }, t.prototype.replacer = function (e, t) { if (t) { if (this.isDataViewScopeIdentity(t)) return t.opaqueIdentity ? { identityIndex: t.opaqueIdentity.identityIndex } : (t.opaqueIdentity = { identityIndex: this.identitiesArray.length }, this.identitiesArray.push(t), t.opaqueIdentity); if (t instanceof Array) { var i = []; return i.push.apply(i, t), i } if ("object" == typeof t && !this.dontNeedToClone(t)) { var o = {}; for (var r in t) o[r] = t[r]; return o } } return t }, t.prototype.replaceOpaqueIdentities = function (e, t) { return t && void 0 !== t.identityIndex ? i.serializeScopeIdentity(this.identitiesArray[t.identityIndex]) : t }, t.prototype.replaceOpaqueIdentitiesWithDataViewScopeIdentities = function (e, t) { return t && void 0 !== t.identityIndex ? this.identitiesArray[t.identityIndex] : t }, t.prototype.filterDataViewsType = function (e, t) { return t.dataViewMappings ? (t.dataViewMappings[0].categorical || (e.categorical = null), t.dataViewMappings[0].matrix || (e.matrix = null), t.dataViewMappings[0].table || (e.table = null), t.dataViewMappings[0].tree || (e.tree = null), t.dataViewMappings[0].single || (e.single = null), e) : e }, t.prototype.dontNeedToClone = function (e) { return e._proto_ === Object.prototype || e instanceof Date }, t.prototype.isDataViewScopeIdentity = function (e) { return !!(e && e.expr && e.key && e.kind) }, t.prototype.reconstructValuesSource = function (e, t) { t && t.valueSource && (e.categorical.values.source = t.valueSource) }, t.prototype.reconstructValuesGroups = function (e, t) { e && e.categorical && e.categorical.values && e.categorical.values[0] && (e.categorical.values.grouped = function () { return JSON.parse(t.valueGroups) }) }, t })(); t.SandboxDataViewSerializer = o })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (e) { function t(e, t, o) { return new i(e, t, o) } e.createSandboxVisualHostAuthenticationService = t; var i = (function () { function e(e, t, i) { this.messageProxy = e, this.promiseFactory = t, this.sandboxPromiseHandler = i } return e.prototype.getAADToken = function () { var e = this.sandboxPromiseHandler.CreatePromise(this.promiseFactory.defer()), t = { eventName: "getAADToken", arguments: [e.id] }; return this.messageProxy.postMessage(t), e.deferred.promise }, e.prototype.getWACToken = function (e, t) { var i = this.sandboxPromiseHandler.CreatePromise2(this.promiseFactory.defer()), o = { resourceEtag: t, resourceSiteUrl: e, promiseId: i.id }, r = { eventName: "getWACToken", arguments: [o] }; return this.messageProxy.postMessage(r), i.deferred.promise }, e })(); e.SandboxVisualHostAuthenticationService = i })(t = e.visualSandbox || (e.visualSandbox = {})) })(powerbi || (powerbi = {}));; "use strict"; var __awaiter = this && this.__awaiter || function (e, t, i, a) { return new (i || (i = Promise))(function (r, o) { function s(e) { try { l(a.next(e)) } catch (e) { o(e) } } function n(e) { try { l(a.throw(e)) } catch (e) { o(e) } } function l(e) { e.done ? r(e.value) : new i(function (t) { t(e.value) }).then(s, n) } l((a = a.apply(e, t || [])).next()) }) }, __generator = this && this.__generator || function (e, t) { function i(e) { return function (t) { return a([e, t]) } } function a(i) { if (r) throw new TypeError("Generator is already executing."); for (; l;)try { if (r = 1, o && (s = 2 & i[0] ? o.return : i[0] ? o.throw || ((s = o.return) && s.call(o), 0) : o.next) && !(s = s.call(o, i[1])).done) return s; switch (o = 0, s && (i = [2 & i[0], s.value]), i[0]) { case 0: case 1: s = i; break; case 4: return l.label++ , { value: i[1], done: !1 }; case 5: l.label++ , o = i[1], i = [0]; continue; case 7: i = l.ops.pop(), l.trys.pop(); continue; default: if (s = l.trys, !(s = s.length > 0 && s[s.length - 1]) && (6 === i[0] || 2 === i[0])) { l = 0; continue } if (3 === i[0] && (!s || i[1] > s[0] && i[1] < s[3])) { l.label = i[1]; break } if (6 === i[0] && l.label < s[1]) { l.label = s[1], s = i; break } if (s && l.label < s[2]) { l.label = s[2], l.ops.push(i); break } s[2] && l.ops.pop(), l.trys.pop(); continue }i = t.call(e, l) } catch (e) { i = [6, e], o = 0 } finally { r = s = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } } var r, o, s, n, l = { label: 0, sent: function () { if (1 & s[0]) throw s[1]; return s[1] }, trys: [], ops: [] }; return n = { next: i(0), throw: i(1), return: i(2) }, "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n }, __assign = this && this.__assign || function () { return __assign = Object.assign || function (e) { for (var t, i = 1, a = arguments.length; i < a; i++) { t = arguments[i]; for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]) } return e }, __assign.apply(this, arguments) }, __extends = this && this.__extends || (function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function a() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (a.prototype = i.prototype, new a) } })(), powerbi; !(function (e) { var t; !(function (t) { function i(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S, b, w, V, C) { var R = t.Verbose(l, u, c, p, v, m, f, g, y, S, b, w, V, C), x = h(R.info, { visualType: i, isCustom: a, isSandboxed: r, width: o, height: s, hostInformation: n }); return { name: t.VisualInitializedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ visualType: x.visualType, isCustom: x.isCustom, isSandboxed: x.isSandboxed, width: x.width, height: x.height, hostInformation: x.hostInformation }, null, R.formatted()) }, info: x, loggers: t.VisualInitializedLoggers, logRatio: .025 } } function a(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S) { var b = t.Verbose(r, o, s, n, l, u, c, p, v, m, f, g, y, S), w = h(b.info, { visualType: i, hostInformation: a }); return { name: t.VisualLoadEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ visualType: w.visualType, hostInformation: w.hostInformation }, null, b.formatted()) }, info: w, loggers: t.VisualLoadLoggers } } function r(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S, b) { var w = t.Verbose(o, s, n, l, u, c, p, v, m, f, g, y, S, b), V = h(w.info, { visualType: i, instanceId: a, payload: r }); return { name: t.VisualEventRenderStartedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ visualType: V.visualType, instanceId: V.instanceId, payload: V.payload }, null, w.formatted()) }, info: V, loggers: t.VisualEventRenderStartedLoggers } } function o(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S, b) { var w = t.Verbose(o, s, n, l, u, c, p, v, m, f, g, y, S, b), V = h(w.info, { visualType: i, instanceId: a, payload: r }); return { name: t.VisualEventRenderCompletedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ visualType: V.visualType, instanceId: V.instanceId, payload: V.payload }, null, w.formatted()) }, info: V, loggers: t.VisualEventRenderCompletedLoggers } } function s(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S, b) { var w = t.Verbose(o, s, n, l, u, c, p, v, m, f, g, y, S, b), V = h(w.info, { visualType: i, instanceId: a, payload: r }); return { name: t.VisualEventTraceEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ visualType: V.visualType, instanceId: V.instanceId, payload: V.payload }, null, w.formatted()) }, info: V, loggers: t.VisualEventTraceLoggers } } function n(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S, b) { var w = t.Verbose(o, s, n, l, u, c, p, v, m, f, g, y, S, b), V = h(w.info, { visualType: i, instanceId: a, payload: r }); return { name: t.VisualEventErrorEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ visualType: V.visualType, instanceId: V.instanceId, payload: V.payload }, null, w.formatted()) }, info: V, loggers: t.VisualEventErrorLoggers } } function l(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S) { var b = t.Verbose(r, o, s, n, l, u, c, p, v, m, f, g, y, S), w = h(b.info, { visualType: i, instanceId: a }); return { name: t.VisualEventReachedTelemetryUsageLimitEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ visualType: w.visualType, instanceId: w.instanceId }, null, b.formatted()) }, info: w, loggers: t.VisualEventReachedTelemetryUsageLimitLoggers } } function u(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y, S, b) { var w = t.Verbose(o, s, n, l, u, c, p, v, m, f, g, y, S, b), V = h(w.info, { result: i, visualGUID: a, isAlwaysAllowSet: r }); return { name: t.VisualEventLaunchURLEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ result: V.result, visualGUID: V.visualGUID, isAlwaysAllowSet: V.isAlwaysAllowSet }, null, w.formatted()) }, info: V, loggers: t.VisualEventLaunchURLLoggers } } function c(i, a, r, o, s, n, l, u, c, p, v, m, f, g, y) { var S = t.Verbose(a, r, o, s, n, l, u, c, p, v, m, f, g, y), b = h(S.info, { AdminControlState: i }); return { name: t.AdminControlInitializedEventName, category: e.TelemetryCategory.Verbose, time: Date.now(), id: d(), formatted: function () { return e.extendFormatted({ AdminControlState: b.AdminControlState }, null, S.formatted()) }, info: b, loggers: t.AdminControlInitializedLoggers } } var d, p = jsCommon.Utility, h = jsCommon.UnionExtensions.mergeUnionType, v = e.telemetry.EventFactories; d = p ? p.generateGuid : Function.prototype, t.VisualInitializedEventName = "PBI.Visual.Initialized", t.VisualInitialized = i, v[t.VisualInitializedEventName] = function (i) { return e.telemetryEventFactory(t.VisualInitializedEventName, i, t.VisualInitializedLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualLoadEventName = "PBI.Visual.Load", t.VisualLoad = a, v[t.VisualLoadEventName] = function (i) { return e.telemetryEventFactory(t.VisualLoadEventName, i, t.VisualLoadLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualEventRenderStartedEventName = "PBI.VisualEvent.RenderStarted", t.VisualEventRenderStarted = r, v[t.VisualEventRenderStartedEventName] = function (i) { return e.telemetryEventFactory(t.VisualEventRenderStartedEventName, i, t.VisualEventRenderStartedLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualEventRenderCompletedEventName = "PBI.VisualEvent.RenderCompleted", t.VisualEventRenderCompleted = o, v[t.VisualEventRenderCompletedEventName] = function (i) { return e.telemetryEventFactory(t.VisualEventRenderCompletedEventName, i, t.VisualEventRenderCompletedLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualEventTraceEventName = "PBI.VisualEvent.Trace", t.VisualEventTrace = s, v[t.VisualEventTraceEventName] = function (i) { return e.telemetryEventFactory(t.VisualEventTraceEventName, i, t.VisualEventTraceLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualEventErrorEventName = "PBI.VisualEvent.Error", t.VisualEventError = n, v[t.VisualEventErrorEventName] = function (i) { return e.telemetryEventFactory(t.VisualEventErrorEventName, i, t.VisualEventErrorLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualEventReachedTelemetryUsageLimitEventName = "PBI.VisualEvent.ReachedTelemetryUsageLimit", t.VisualEventReachedTelemetryUsageLimit = l, v[t.VisualEventReachedTelemetryUsageLimitEventName] = function (i) { return e.telemetryEventFactory(t.VisualEventReachedTelemetryUsageLimitEventName, i, t.VisualEventReachedTelemetryUsageLimitLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.VisualEventLaunchURLEventName = "PBI.VisualEvent.LaunchURL", t.VisualEventLaunchURL = u, v[t.VisualEventLaunchURLEventName] = function (i) { return e.telemetryEventFactory(t.VisualEventLaunchURLEventName, i, t.VisualEventLaunchURLLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) }, t.AdminControlInitializedEventName = "PBI.AdminControl.Initialized", t.AdminControlInitialized = c, v[t.AdminControlInitializedEventName] = function (i) { return e.telemetryEventFactory(t.AdminControlInitializedEventName, i, t.AdminControlInitializedLoggers, t.VerboseEventName, e.TelemetryCategory.Verbose, void 0, void 0, void 0, null) } })(t = e.telemetry || (e.telemetry = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(i, a) { var r = this; i.register("windowMessageProxy", { services: ["promiseFactory"], fn: function (e) { return t.createWindowMessageProxy(e) } }), i.register("resourceLoader", { services: ["promiseFactory", "featureSwitchService", "visualSandbox", "approvedResourceService", "resourcePackagesService", "telemetryService", "localizationService"], fn: function (i, a, u, c, d, p, h) { var v = { promiseFactory: i, locale: h.currentLanguageLocale, telemetryV2Enabled: a.isFeatureSwitchesRegistered() && a.featureSwitches.telemetryV2 }, m = function (t) { return __awaiter(r, void 0, e.Promise, (function () { return __generator(this, (function (e) { return [2, t] })) })) }, f = { getSandboxVisualsEnabled: function () { return a.featureSwitches.sandboxVisualsEnabled }, getApprovedResourcesEnabled: function () { return !a.featureSwitches.approvedResourcesDisabled } }, g = { localResourceLoaderFactory: function () { return o(v) }, sandboxResourceLoaderFactory: function () { return s(v, u, c) }, approvedResourceLoaderFactory: function () { return n(v, c, p) }, trustedResourceLoaderFactory: function () { return t.createTrustedResourceLoader(v, c, d, p, !1, f) }, organizationalStoreResourceLoaderFactory: function () { return l(v, u, d, m) } }; return e.visualHost.createConditionalResourceLoader(i, f, g, c) } }) } function a(e) { for (var t = 0, i = p; t < i.length; t++) { var a = i[t]; (a.consumerHostFlags & e) === e && r(a.name) } } function r(t) { var i = t[0].toLowerCase() + t.slice(1); c.indexOf(i) >= 0 || (angular.module("powerbi.visualHost").component(i, e.visualHost.components[t]), c.push(i)) } function o(i) { var a = t.proxies.getHttpResourceItemProxy(), r = t.proxies.getSharedResourceItemProxy(); return e.visualHost.createResourceLoader(i, a, r) } function s(i, a, r) { var o = t.createWindowMessageProxy(i.promiseFactory), s = t.proxies.getHttpResourceItemProxy(); return e.visualHost.createSandboxResourceLoader(i, o, a.settings.resourceLoaderUri, s, r) } function n(t, i, a) { return e.visualHost.createApprovedResourceLoader(t, i, a) } function l(i, a, r, o) { var s = t.proxies.getHttpResourceItemProxy(), n = t.createWindowMessageProxy(i.promiseFactory); return e.visualHost.createOrganizationalStoreResourceLoader(i, n, r, a.settings.resourceLoaderUri, s, o) } var u = this, c = []; angular.module("powerbi.visualHost.controllers", []), angular.module("powerbi.visualHost.directives", []); var d = ["powerbi.common", "powerbi.visualHost.controllers", "powerbi.visualHost.directives"]; angular.module("powerbi.visualHost", d).run(["scopedProvider", "featureSwitchService", i]).provider("visualSandbox", [function () { return t.createCustomVisualProvider({}) }]).factory("customVisualLaunchURL", ["optionsDialogBuilder", "localStorage", "telemetryService", "localizationService", function (e, i, a, r) { return t.createCustomVisualsLaunchURL(e, i, a, r) }]).factory("resourcePackagesService", [function () { return t.createResourcePackagesService() }]).factory("renderingSynchronizer", [function () { return t.createRenderingSynchronizer() }]).factory("approvedResourceService", ["featureSwitchService", function (e) { return t.createApprovedResourceService({ appStoreCdnOverride: function () { return e.featureSwitches.appStoreCdnOverride } }) }]).factory("visualInstanceIdTracking", [function () { return t.createVisualInstanceIdTrackingService() }]).factory("customVisualsAuthentication", ["promiseFactory", "telemetryService", function (e, i) { return t.createCustomVisualsAuthenticationService(e, i) }]).factory("visualWarningTelemetryService", ["telemetryService", "visualPlugin", function (e, i) { return t.services.createVisualWarningTelemetryService(e, i) }]).factory("resourceLoader", ["promiseFactory", "featureSwitchService", "visualSandbox", "approvedResourceService", "resourcePackagesService", "telemetryService", "localizationService", function (i, a, r, c, d, p, h) { var v = { promiseFactory: i, locale: h.currentLanguageLocale, telemetryV2Enabled: a.isFeatureSwitchesRegistered() && a.featureSwitches.telemetryV2 }, m = function (t) { return __awaiter(u, void 0, e.Promise, (function () { return __generator(this, (function (e) { return [2, t] })) })) }, f = { getSandboxVisualsEnabled: function () { return a.featureSwitches.sandboxVisualsEnabled }, getApprovedResourcesEnabled: function () { return !a.featureSwitches.approvedResourcesDisabled } }, g = { localResourceLoaderFactory: function () { return o(v) }, sandboxResourceLoaderFactory: function () { return s(v, r, c) }, approvedResourceLoaderFactory: function () { return n(v, c, p) }, trustedResourceLoaderFactory: function () { return t.createTrustedResourceLoader(v, c, d, p, !1, f) }, organizationalStoreResourceLoaderFactory: function () { return l(v, r, d, m) } }; return e.visualHost.createConditionalResourceLoader(i, f, g, c) }]).factory("visualStylePresetService", (function () { return t.services.createVisualStylePresetService() })); var p = [{ name: "Visual", consumerHostFlags: 9115 }]; t.registerBuildingBlocksForHost = a })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i; !(function (i) { var a = e.common.events, r = e.data.DataViewTelemetry, o = e.data.DataViewTransform, s = e.data.DataViewObjectDefinitions, n = jsCommon.PerfTimer, l = e.telemetry, u = e.common.constants.visualReady, c = e.common.Watcher, d = (function () { function e(e, t) { this.$scope = e, this.services = t } return e.createOptions = function () { return { additionalServices: ["$element", "visualPlugin", "telemetryService", "promiseFactory", "moduleLoader", "featureSwitchService", "visualSandbox", "renderingSynchronizer", "approvedResourceService", "visualWarningTelemetryService", "themeService", "visualStylePresetService", "trustedVisual", "ngZone", "svgProvider"], scopedDependencies: ["eventBridge"] } }, e.prototype.$onChanges = function (e) { this.core && (e.viewModel && (this.core.viewModel = e.viewModel.currentValue), e.allowDeferredRendering && (this.core.allowDeferredRendering = e.allowDeferredRendering.currentValue), e.currentZone && (this.core.currentZone = e.currentZone.currentValue)) }, e.prototype.$onInit = function () { var e = $(this.services.$element.find("div.visual").get(0)); this.core = new y(this.$scope, e, this.services), this.core.viewModel = this.viewModel, this.core.allowDeferredRendering = this.allowDeferredRendering, this.core.currentZone = this.currentZone, this.core.$onInit() }, e.prototype.$onDestroy = function () { this.core && this.core.$onDestroy() }, e.prototype.$doCheck = function () { this.core && this.core.$doCheck() }, e })(); i.VisualController = d; var p = "viewModel", h = "initialViewport", v = "type", m = "viewport", f = "themeCollection", g = "data", y = (function () { function i(e, t, i) { this.scope = e, this.visualElement = t, this.services = i, this.watcher = new c, this.dataWatched = !1, this.visualPlugin = i.visualPlugin, this.telemetryService = i.telemetryService, this.moduleLoader = i.moduleLoader, this.promiseFactory = i.promiseFactory, this.rootScope = i.rootScope, this.featureSwitchService = i.featureSwitchService, this.visualSandbox = i.visualSandbox, this.renderingSynchronizer = i.renderingSynchronizer, this.approvedResourceService = i.approvedResourceService, this.visualWarningTelemetryService = i.visualWarningTelemetryService, this.themeService = i.themeService, this.visualStylePresetService = i.visualStylePresetService, this.trustedVisual = i.trustedVisual, this.ngZone = i.ngZone, i.eventBridge && (this.subscriptionManager = i.eventBridge.createChannelSubscriptionManager()), this.registeredToWatch = !1, this.setDisableEvents(!1) } return i.prototype.$onInit = function () { var t = this; e.zoneify(this.currentZone, (function () { return t.onInitImpl() })) }, i.prototype.$onDestroy = function () { this.unbindReloadEmptyVisualsCallback && (this.unbindReloadEmptyVisualsCallback(), this.unbindReloadEmptyVisualsCallback = void 0), this.subscriptionManager && this.subscriptionManager.unsubscribeAll(), this.destroyVisual(), this.visualElement = null, this.model && (this.model.visual = null) }, i.prototype.$doCheck = function () { this.watcher.doCheck() }, i.prototype.onInitImpl = function () { var e = this; this.allowDeferredRendering ? this.services.timeout((function () { return e.initializeAsync() })) : this.initializeAsync() }, i.prototype.initializeAsync = function () { var e = this; return this.processModelAsync(this.viewModel).catch((function () { e.watcher.add(p, (function () { return e.viewModel }), (function (t) { t && (e.watcher.remove(p), e.processModelAsync(t)) })) })) }, i.prototype.processModelAsync = function (e) { if (this.visualHasInitialData = !1, this.model = e, !e || !e.type) return this.promiseFactory.reject(void 0, !!this.currentZone); this.visualLoadEvent = this.telemetryService.startEvent(l.VisualLoad, e.type, JSON.stringify(this.visualPlugin.getTelemetryHostInformation())), e.visualPlugin && (this.visualPlugin = e.visualPlugin); var t = this.plugin = this.visualPlugin.getPlugin(e.type), i = this.promiseFactory.defer(!!this.currentZone), a = this.shouldDisableCustomVisuals(e.type); if (t && this.trustedVisual.canLoadVisual(t.name) && !a) { var r = { element: this.visualElement, host: e.hostServices, visualAdapterHostServices: e.visualAdapterHostServices, style: this.themeService.getVisualStyle(e.themeCollection), viewport: e.viewport, animation: { transitionImmediate: !1 }, featureSwitches: __assign({}, this.featureSwitchService.featureSwitches) }; this.model.interactivityOptions && (r.interactivity = this.model.interactivityOptions), this.initVisualAsync(t, r, this.model).finally((function () { return i.resolve(null) })) } else this.subscribeToReloadEmptyVisuals(), i.reject(), this.approvedResourceService.isApprovedResource(e.type) || this.visualReady(); return i.promise }, i.prototype.subscribeToReloadEmptyVisuals = function () { var t = this; this.unbindReloadEmptyVisualsCallback || (this.unbindReloadEmptyVisualsCallback = this.rootScope.$on(e.constants.reloadEmptyVisuals, (function (e, i) { _.includes(i.visualTypes, t.viewModel.type) && (t.unbindReloadEmptyVisualsCallback(), t.unbindReloadEmptyVisualsCallback = void 0, t.viewport || (t.viewport = t.model.viewport), t.initializeAsync()) }))) }, i.prototype.initVisualAsync = function (i, r, o) { var s = this; if (!r.viewport) { var n = this.promiseFactory.defer(!!this.currentZone); return this.watcher.add(h, (function () { return s.viewModel && s.viewModel.viewport }), (function (e) { e && (s.watcher.remove(h), r.viewport = e, s.initVisualAsync(i, r, o).finally((function () { return n.resolve(null) }))) })), n.promise } this.currentViewport = this.viewport = r.viewport, this.destroyVisual(); var u = this.pendingAdapter = t.createVisualAdapter({ visualPlugin: i, promiseFactory: this.promiseFactory, moduleLoader: this.moduleLoader, telemetryService: this.telemetryService, featureSwitches: this.featureSwitchService.featureSwitches, approvedResourceService: this.approvedResourceService, visualSandbox: this.visualSandbox, ngZone: this.ngZone }, !!this.currentZone); return u.then((function (t) { if (s.model.visual = t, t.init(r), s.dataWatched || (s.dataWatched = !0, s.watcher.add(g, (function () { return s.viewModel && s.viewModel.data }), s.watchScopeForChangesCallback(e.VisualUpdateType.Data, (function (e) { return s.onDataChanged(e) })))), s.registeredToWatch || (s.registeredToWatch = !0, s.watcher.add(v, (function () { return s.viewModel && s.viewModel.type }), (function (e, t, i) { !i && t && e && e !== t && (s.visualElement.empty(), s.processModelAsync(s.viewModel)) })), s.watcher.add(m, (function () { return s.viewModel && s.viewModel.viewport }), (function (e) { s.onViewportChanged(e) })), s.watcher.add(f, (function () { return s.viewModel && s.viewModel.themeCollection }), (function (e, t, i) { i || s.onThemeNameChange() }), { mode: 2 })), t.sandbox && s.subscriptionManager && s.subscriptionManager.subscribe(a.visualContainerResizeStart, (function () { return s.services.timeout((function () { return s.setDisableEvents(!0) })) })).subscribe(a.visualContainerResizeEnd, (function () { return s.services.timeout((function () { return s.setDisableEvents(!1) })) })), s.telemetryService.logChildEvent(s.visualLoadEvent.event, l.VisualInitialized, i.name, i.custom || !1, t.sandbox || !1, r.viewport.width, r.viewport.height, JSON.stringify(s.visualPlugin.getTelemetryHostInformation())), u === s.pendingAdapter) { var o = s.pendingUpdates; o && o & e.VisualUpdateType.Data && s.onDataChanged(s.model.data) } })).finally((function () { u === s.pendingAdapter && (s.pendingAdapter = void 0, s.pendingUpdates = void 0) })) }, i.prototype.enqueuePending = function (e, t, i) { return this.pendingAdapter ? void (this.pendingUpdates |= e) : void t(i) }, i.prototype.destroyVisual = function () { var e = this.model; if (e) { var t = e.visual; t && t.destroy && t.destroy(), e.performanceActivity && (e.performanceActivity.reject(), e.performanceActivity = void 0); var i = this.pendingAdapter; i && (i.reject(), this.pendingAdapter = void 0, this.pendingUpdates = void 0), this.dataWatched && (this.dataWatched = !1, this.watcher.remove(g)) } }, i.prototype.onViewportChanged = function (e) { if (e && (!this.currentViewport || this.currentViewport.height !== e.height || this.currentViewport.width !== e.width || this.currentViewport.scale !== e.scale)) { this.currentViewport = e, this.viewport = e; var t = n.start("update(" + this.markerName() + ")"); this.visualUpdate(), this.resolveDeferredInit(), t() } }, i.prototype.markerName = function () { var e = this.model.type; return this.plugin && this.plugin.custom && (e = "customVisual:" + e), e }, i.prototype.buildDataChangedOptions = function (t, i, a) { var r = { dataViews: i, suppressAnimations: this.renderingSynchronizer.suppressAnimations }; return t ? r.operationKind = t.isFirstSegment === !1 ? e.VisualDataChangeOperationKind.Append : e.VisualDataChangeOperationKind.Create : a || (r.operationKind = e.VisualDataChangeOperationKind.None), r }, i.prototype.transformAndValidateDataViews = function (t) { var i, a, r = this.plugin.capabilities, s = this.model; this.model.performanceActivity && (a = this.model.performanceActivity.createChildActivity("Data View Transform")); var l; t && t.dataView && (l = t.dataView); var u, c = s.dataTransforms, d = this.applyStylePresetDefinitions(c), p = n.start("dataViewTransform(" + this.markerName() + ")"), h = s.themeCollection, v = this.featureSwitchService.featureSwitches.propertyEvaluationWarnings && 1 === this.viewModel.hostServices.getViewMode(); if (l) { var m = o.apply({ prototype: l, objectDescriptors: r ? r.objects : null, dataViewMappings: r ? r.dataViewMappings : null, transforms: d, colorAllocatorFactory: e.visuals.createColorAllocatorFactory(), dataRoles: r ? r.dataRoles : null, drillCapabilities: r && r.drilldown, expandCollapseCapabilties: r && r.expandCollapse, visualStyle: this.themeService.getVisualStyle(h), orderIndependentSelectorMatching: s.orderIndependentSelectorMatching, keepAllMetadataColumnsCapability: !!r && (r.keepAllMetadataColumns && this.featureSwitchService.featureSwitches.mappingExecutionType), featureSwitches: this.featureSwitchService.featureSwitches, withWarnings: v }), f = m.dataViews; if (u = m.warnings, f && f.length > 0) { for (var g = !0, y = 0; g && y < f.length; ++y) { var S = e.DataViewAnalysis.validateAndReshape(f[y], r.dataViewMappings, this.featureSwitchService.featureSwitches.mappingExecutionType); S.isValid ? f[y] = S.dataView : g = !1 } g && (i = this.buildDataChangedOptions(t, f, c)) } !i && s.allowInvalidDataView && (i = { dataViews: [], suppressAnimations: this.renderingSynchronizer.suppressAnimations }) } else { var S = e.DataViewAnalysis.validateAndReshape(l, r.dataViewMappings, this.featureSwitchService.featureSwitches.mappingExecutionType); if (S.isValid) { var m = o.apply({ prototype: S.dataView, objectDescriptors: r ? r.objects : null, dataViewMappings: r ? r.dataViewMappings : null, transforms: d, colorAllocatorFactory: e.visuals.createColorAllocatorFactory(), dataRoles: r ? r.dataRoles : null, drillCapabilities: r && r.drilldown, expandCollapseCapabilties: r && r.expandCollapse, visualStyle: this.themeService.getVisualStyle(h), orderIndependentSelectorMatching: s.orderIndependentSelectorMatching, keepAllMetadataColumnsCapability: !!r && (r.keepAllMetadataColumns && this.featureSwitchService.featureSwitches.mappingExecutionType), featureSwitches: this.featureSwitchService.featureSwitches, withWarnings: v }), f = m.dataViews; u = m.warnings, i = this.buildDataChangedOptions(t, f, c) } else s.allowInvalidDataView && (i = { dataViews: [], suppressAnimations: this.renderingSynchronizer.suppressAnimations }) } return p(), a && a.resolve(), i && (i.visualDefinitionData = t, !_.isEmpty(u) && this.viewModel && this.viewModel.hostServices && s.hostServices.setWarnings(u)), i }, i.prototype.onThemeNameChange = function () { this.processModelAsync(this.viewModel) }, i.prototype.applyStylePresetDefinitions = function (t) { var i = this.plugin.capabilities, a = this.themeService, r = this.model; t = t && e.Prototype.inherit(t) || {}; var o = t.objects = s.clone(t.objects || {}); r.additionalObjectUpdates && r.additionalObjectUpdates(t.objects); var n = r.themeCollection, l = a.getVisualObjects(n, r.type, r.stylePresetName, i && i.objects, this.plugin.custom); s.extend(o, l); var u = a.getVisualStyle(n), c = this.visualStylePresetService.getStylePreset(r.type, r.stylePresetName); if (u && c) { var d = c.evaluate(u); s.extend(o, d) } return t }, i.prototype.applyDataChange = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var e, i, a, r, o, s, l, u = this; return __generator(this, (function (c) { switch (c.label) { case 0: return (e = this.model && this.model.visual) ? e.onDataChanged || e.update ? this.modelHasOutstandingReferences() ? [2] : (i = this.transformAndValidateDataViews(t), i ? this.allowDeferredRendering !== !0 ? [3, 2] : [4, this.renderingSynchronizer.deferRenderOperation(this.visualElement, _.noop)] : [2]) : [2] : (jsCommon.Trace.error("applyDataChange with no visual: " + !!this.model + " " + !!this.viewModel + " " + !(!this.viewModel || !this.viewModel.visual)), [2]); case 1: c.sent(), c.label = 2; case 2: if (e !== this.model.visual) return [2]; try { this.dataViews = this.model.dataViews = i.dataViews, this.visualDefinitionData = t, a = this.dataViews && this.dataViews.length, r = t && t.warnings, _.isEmpty(r) || this.visualWarningTelemetryService.logWarnings(r, this.model), o = this.model.type, this.plugin && this.plugin.custom && (o = "customVisual:" + o), this.viewport && this.model.visual.update ? (s = n.start("update(" + o + ")"), this.visualUpdate(i).then((function () { u.model.performanceActivity && (u.model.performanceActivity.resolve(), u.model.performanceActivity = void 0), u.model.pendingSelection && a && (u.model.visual.onRestoreSelection && u.model.visual.onRestoreSelection({ selection: u.model.pendingSelection }), u.model.pendingSelection = void 0), u.resolveDeferredInit(), s(), u.visualReady() }))) : e.onDataChanged && (l = n.start("onDataChanged(" + o + ")"), e.onDataChanged(i), this.model.performanceActivity && (this.model.performanceActivity.resolve(), this.model.performanceActivity = void 0), this.resolveDeferredInit(), l(), this.visualReady()) } catch (e) { throw this.model.performanceActivity && (this.model.performanceActivity.reject(), this.model.performanceActivity = void 0), this.visualReady(), e } return [2] } })) })) }, i.prototype.onDataChanged = function (t) { if (!this.model) return void jsCommon.Trace.error("onDataChanged called with no this.model, this.viewModel is" + (this.viewModel && "" || " not") + " defined"); var i = this.model.dataAppliedEvent; if (this.model.dataAppliedEvent = void 0, this.featureSwitchService.featureSwitches && this.featureSwitchService.featureSwitches.tablixIcons) { var a = this.model.dataTransforms && this.model.dataTransforms.objects, r = this.plugin && this.plugin.capabilities && this.plugin.capabilities.objects; if (a && r) { var o = !1, n = function (t, i, a, r, s, n) { r.icon && e.StructuralObjectDefinition.isIconDefinition(t) && (o = !0, n.stopVisiting = !0) }; s.visitPropertyExprs({ definitions: a, descriptors: r, structuralObjectVisitor: n }), o && this.services.svgProvider.loadSheet("conditionalFormattingDialogIcons") } } this.applyDataChange(t).then((function () { return i && i.resolve() }), (function () { return i && i.reject() })) }, i.prototype.resolveDeferredInit = function () { !this.visualHasInitialData && this.dataViews && (this.visualElement.attr("initialized", ""), this.visualHasInitialData = !0, this.visualLoadEvent.resolve(), this.visualLoadEvent = void 0) }, i.prototype.setDisableEvents = function (e) { this.disableEvents = e }, i.prototype.visualUpdate = function (t) { return __awaiter(this, void 0, e.Promise, (function () { var i, a, o, s, n = this; return __generator(this, (function (l) { switch (l.label) { case 0: return i = 0, a = 0, o = this.viewModel && this.viewModel.hostServices, o && (i = o.getViewMode(), a = o.getEditMode()), this.dataViews && (s = _.map(this.dataViews, (function (e) { return r.wrapKindProperties(e, n.telemetryService, n.plugin.name) }))), [4, this.model.visual.update({ viewport: this.viewport, dataViews: s, suppressAnimations: !t || this.renderingSynchronizer.suppressAnimations, type: t ? e.VisualUpdateType.Data : e.VisualUpdateType.Resize, resizeMode: t ? void 0 : 2, operationKind: t ? t.operationKind : void 0, viewMode: i, editMode: a, visualDefinitionData: t ? t.visualDefinitionData : this.visualDefinitionData, dataTransforms: this.model.dataTransforms, isInFocus: this.model.isInFocus, visualRequiresData: this.model.visualRequiresData, visualHasData: this.model.visualHasData })]; case 1: return l.sent(), [2] } })) })) }, i.prototype.modelHasOutstandingReferences = function () { var e = this.model.dataTransforms && this.model.dataTransforms.objects; return !!e && t.ResourcePackageReferenceResolver.hasResourceReferencesToResolve(e, this.plugin.capabilities.objects) }, i.prototype.watchScopeForChangesCallback = function (e, t) { var i = this, a = !0; return function (r, o) { (r !== o || a) && i.enqueuePending(e, t, r), a = !1 } }, i.prototype.shouldDisableCustomVisuals = function (t) { return e.visualHost.CustomVisualsUtils.getAdminControlState(this.featureSwitchService, this.telemetryService), this.visualPlugin.isCustomVisual(t) && e.visualHost.CustomVisualsUtils.isCustomVisualTypeDisabled(this.featureSwitchService, t, this.approvedResourceService, !1, this.model && this.model.isDisabled, this.model && this.model.isDisabledIfUncertified) }, i.prototype.visualReady = function () { this.scope.$emit(u) }, i })(); i.VisualComponentCore = y })(i = t.controllers || (t.controllers = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i; !(function (i) { i.Visual = { templateUrl: "components/visual/visual.html", bindings: { viewModel: "<", allowDeferredRendering: "<", currentZone: "<?" }, controller: e.common.createController(t.controllers.VisualController), controllerAs: "$ctrl" } })(i = t.components || (t.components = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        function i(e, t, i, r, o) { return new a(e, t, i, r, o) } t.createSandboxVisualProxy = i; var a = (function () { function e() { } return e }(), (function () {
            function i(e, i, a, r, o) { var s = this; this.messageProxy = e, this.telemetryService = i, this.approvedResourcesService = a, this.featureSwitchService = r, this.isDebugVisual = o, this.telemetryEventsPayloadLimit = 4096, this.methodQueue = [], this.isSandboxReady = !1, this.isVisualReady = !1, this.telemetryUsageCount = 0, this.isDebugVisual = o, this.messageProxy.on(t.events.WindowMessageProxyMessageEvent, (function (e) { return s.onMessageReceived(e) })), this.messageProxy.on(t.events.WindowMessageProxyErrorEvent, (function (e) { return s.onMessageError(e) })) } return Object.defineProperty(i.prototype, "plugin", { get: function () { return this._plugin }, enumerable: !0, configurable: !0 }), i.prototype.init = function (e, t) { this.visualDelegate = e, t && (this._plugin = t, this.isSandboxReady = !0) }, i.prototype.logEvent = function () { for (var t = [], i = 0; i < arguments.length; i++)t[i] = arguments[i]; if (!this.telemetryService) return null; var a = t.shift(), r = e.telemetry[a]; return t.unshift(r), this.telemetryService.logEvent.apply(this.telemetryService, t) }, i.prototype.logVisualEvent = function () {
                for (var t = [], i = 0; i < arguments.length; i++)t[i] = arguments[i]; var a = this.plugin.name; if (this.isDebugVisual !== !1 || this.approvedResourcesService && (this.approvedResourcesService.isApprovedResource(a) || this.approvedResourcesService.isTrustedResource(a))) {
                    var r = t.shift(), o = t.shift(), s = t.shift(), n = e.extensibility.convertStringToVisualEventType(r); switch (n) {
                        case 0: case 1: if (!this.featureSwitchService.featureSwitches.customVisualsPerformanceTelemetry) return; s = ""; break; case 2: case 3: var l = this.approvedResourcesService.getTelemetryUsageLimit(a); if (this.telemetryUsageCount >= l) return; this.telemetryUsageCount++ , this.telemetryUsageCount === l && this.telemetryService.logEvent(e.telemetry.VisualEventReachedTelemetryUsageLimit, a, o),
                            s = s ? s.substring(0, this.telemetryEventsPayloadLimit) : ""; break; default: return
                    }return t.unshift(s), t.unshift(o), t.unshift(this.plugin.name), t.unshift(r), this.logEvent.apply(this, t)
                }
            }, i.prototype.ready = function (e) { this.contentWindow = e, this.messageProxy.contentWindow = e, this.isSandboxReady && this.flushCallStack(), this.messageProxy.flushQueue(), this.isVisualReady = !0 }, i.prototype.invoke = function (e, t) { if (this.isSandboxReady) return this.execute(e, t); var i = { methodName: e, arguments: t }; this.methodQueue.push(i) }, i.prototype.postMessage = function (e, t) { var i = { eventName: e, arguments: t }; this.messageProxy.postMessage(i) }, i.prototype.postMessageAsync = function (e, t) { var i = { eventName: e, arguments: t }; return this.messageProxy.postMessageAsync(i) }, i.prototype.onPluginReady = function (t) { if (!this.isSandboxReady) { var i = t.capabilities.objects; t.capabilities.objects = e.data.services.DataViewObjectDescriptorSerializer.deserialize(i), this.registerCustomVisual(t), this.flushCallStack(), this.isSandboxReady = !0 } }, i.prototype.destroy = function () { this.messageProxy.off(t.events.WindowMessageProxyMessageEvent), this.messageProxy.off(t.events.WindowMessageProxyErrorEvent), this.messageProxy.destroy(), this.contentWindow = null }, i.prototype.registerCustomVisual = function (t) { this._plugin = t, t.custom = !0, e.visuals.plugins[t.name] = t }, i.prototype.execute = function (e, t) { return _.isFunction(this.visualDelegate[e]) ? this.visualDelegate[e].apply(this.visualDelegate, t) : void this.postMessage(e, t) }, i.prototype.flushCallStack = function () { for (; this.methodQueue.length > 0;) { var e = this.methodQueue.shift(); this.execute(e.methodName, e.arguments) } this.isVisualReady && this.messageProxy.flushQueue() }, i.prototype.onMessageReceived = function (e) { this.validateMessageSource(e) && ($.isFunction(this[e.message.eventName]) ? this[e.message.eventName].apply(this, e.message.arguments) : this.visualDelegate && $.isFunction(this.visualDelegate[e.message.eventName]) && this.visualDelegate[e.message.eventName].apply(this.visualDelegate, e.message.arguments)) }, i.prototype.onMessageError = function (e) { this.validateMessageSource(e) && e.message && e.message.error }, i.prototype.refreshHostData = function () { (this.isDebugVisual || this.approvedResourcesService.canRefreshHostData(this.plugin.name)) && this.visualDelegate.refreshHostData() }, i.prototype.getAADToken = function (e) { var t = this.plugin.name; if (this.isDebugVisual === !0 && (t = t.substring(0, t.lastIndexOf("_DEBUG"))), this.isDebugVisual === !0 || this.approvedResourcesService.canGetAADToken(t)) this.visualDelegate.getAADToken(t, e); else { var i = { payload: "Visual [" + t + "] is not authorized.", isError: !0, promiseId: e }; this.postMessage("handleGetAADTokenResult", [i]) } }, i.prototype.getWACToken = function (e) { var t = this.plugin.name; if (this.isDebugVisual === !0 && (t = t.substring(0, t.lastIndexOf("_DEBUG"))), this.isDebugVisual === !0 || this.approvedResourcesService.canGetWACToken(t)) this.visualDelegate.getWACToken(e.resourceSiteUrl, e.resourceEtag, t, e.promiseId); else { var i = { payload: "Visual [" + t + "] is not authorized.", isError: !0, promiseId: e.promiseId }; this.postMessage("handleGetWACTokenResult", [i]) } }, i.prototype.getStorageData = function (e, t) { var i = this.plugin.name; if (this.isDebugVisual === !0 || this.approvedResourcesService.canUseLocalStorage(i)) this.visualDelegate.getStorageData(i, e, t); else { var a = { promiseId: t, data: null }; this.postMessage("handleGetStorageData", [a]) } }, i.prototype.setStorageData = function (e, t, i) { var a = this.plugin.name; if (this.isDebugVisual === !0 || this.approvedResourcesService.canUseLocalStorage(a)) this.visualDelegate.setStorageData(a, e, t, i); else { var r = { promiseId: i, freeSpace: 0, isError: !0 }; this.postMessage("handleSetStorageData", [r]) } }, i.prototype.removeStorageData = function (e) { var t = this.plugin.name; (this.isDebugVisual === !0 || this.approvedResourcesService.canUseLocalStorage(t)) && this.visualDelegate.removeStorageData(t, e) }, i.prototype.renderingStarted = function (e, t) { }, i.prototype.renderingFinished = function (e, t) { }, i.prototype.renderingFailed = function (e, t, i) { }, i.prototype.validateMessageSource = function (e) { return !!e.source && !!this.contentWindow && this.contentWindow === e.source }, i
        })())
    })(t = e.visualHost || (e.visualHost = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i() { return new a } t.createRenderingSynchronizer = i; var a = (function () { function t() { this.suppressAnimations = !1 } return t.prototype.deferRenderOperation = function (t, i) { return __awaiter(this, void 0, e.Promise, (function () { var e; return __generator(this, (function (t) { return e = $.Deferred(), setTimeout((function () { i(), e.resolve() })), [2, e.promise()] })) })) }, t.prototype.clearOperationsQueue = function () { }, t })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i; !(function (t) { function i(e, t) { return new r(e, t) } var a = e.data.dsr; t.createVisualWarningTelemetryService = i; var r = (function () { function t(e, t) { this.telemetryService = e, this.visualPlugin = t } return t.prototype.logWarnings = function (e, t) { if (!_.isEmpty(e)) for (var i = 0, r = e; i < r.length; i++) { var o = r[i]; o instanceof a.DsrLimitsWarning && this.logDsrLimitsWarning(o, t) } }, t.prototype.logDsrLimitsWarning = function (t, i) { var a, r = t.limits, o = t.getDetails(e.common.localize).message, s = t.code, n = i.type; r.Primary && (a = this.getLimitString(t.limits.Primary)); var l; r.Secondary && (l = this.getLimitString(t.limits.Secondary)); var u; r.Intersection && (u = this.getLimitString(t.limits.Intersection)); var c = i.dataViews, d = i && i.data && i.data.isFirstSegment, p = d || _.some(c, (function (e) { return e && e.metadata && e.metadata.segment })); if (!p || d !== !1) for (var h = 0, v = c; h < v.length; h++) { var m = v[h]; if (m && m.categorical) { var f = _.head(m.categorical.categories), g = 0; f && (g = f.values && f.values.length || 0); var y = m.categorical.values && m.categorical.values.grouped(), S = y && y.length || 0, b = !(!m.categorical.values || !m.categorical.values.source), w = this.visualPlugin.capabilities(i.type), V = w && w.drilldown && _.head(w.drilldown.roles), C = !1, R = i.dataTransforms; V && R && (C = _.filter(R.selects, (function (e) { return e.roles && e.roles[V] })).length > 1); var x = void 0, D = this.visualPlugin.getPlugin(i.type); D && D.getAdditionalTelemetry && (x = JSON.stringify(D.getAdditionalTelemetry(m))), this.telemetryService.logEvent(e.telemetry.DsrDataLimitsWarning, s, n, a, l, u, g, S, C, b, x, p, o) } } }, t.prototype.getLimitString = function (e) { switch (e.Type) { case 0: return "Top:" + e.Count; case 1: return "Bottom:" + e.Count; case 2: return "Sample:" + e.Count } }, t })() })(i = t.services || (t.services = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(t, i) { return new a(t, i, e.common.httpService) } t.createCustomVisualsAuthenticationService = i; var a = (function () { function t(e, t, i) { this.promiseFactory = e, this.telemetryService = t, this.httpService = i } return t.prototype.getAADToken = function (t) { var i = this.telemetryService.startEvent(e.telemetry.VisualAuthenticationGetAADToken, t), a = this.httpService.powerbiRequestOptions(i.event, "GetAADToken"); a.enableTelemetry = !0; var r = this.promiseFactory.defer(); return this.httpService.post("metadata/customvisuals/createtoken?resourceId=" + t, null, a).then((function (e) { return r.resolve(e.data.payload) })).catch((function (e) { return r.reject(e) })), r.promise }, t.prototype.getWACToken = function (t, i, a) { var r = this.telemetryService.startEvent(e.telemetry.VisualAuthenticationGetWACToken, a), o = this.httpService.powerbiRequestOptions(r.event, "GetWACToken"); o.enableTelemetry = !0; var s = this.promiseFactory.defer(), n = { siteUri: encodeURIComponent(t), etag: encodeURIComponent(i) }; return this.httpService.post("metadata/customvisuals/createwactoken?resourceId=" + a, n, o).then((function (e) { return s.resolve(e.data) })).catch((function (e) { return s.reject(e) })), s.promise }, t })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(e, t, i, a) { return new o(e, t, a, i) } var a = jsCommon.UrlUtils; t.createCustomVisualsLaunchURL = i; var r = (function () { function t(e) { this.telemetryService = e } return t.prototype.launchURL = function (t, i) { var a = this.isAlwaysAllowSet(); if (!this.isURLValid(t)) return void this.telemetryService.logEvent(e.telemetry.VisualEventLaunchURL, "Preliminary url validation failed", i, a, "", !0, "User"); try { this.launchValidURL(t, i), this.telemetryService.logEvent(e.telemetry.VisualEventLaunchURL, i, "Success", a) } catch (t) { this.telemetryService.logEvent(e.telemetry.VisualEventLaunchURL, i, t.message, a, "", !0, "External") } }, t.prototype.isURLValid = function (e) { return a.isValidHttpUrl(e) && (a.getUrlScheme(e) === a.UrlScheme.http || a.getUrlScheme(e) === a.UrlScheme.https) }, t })(); t.CustomVisualsLaunchURL = r; var o = (function (e) { function t(t, i, a, r) { var o = e.call(this, r) || this; return o.optionsDialogBuilder = t, o.localStorageService = i, o.localizationService = a, o } return __extends(t, e), t.prototype.isAlwaysAllowSet = function () { return this.localStorageService.getData(t.alwaysAllowLocalStorageKey) === !0 }, t.prototype.launchValidURL = function (e, t) { void 0 === t && (t = "not passed"); var i = this.isAlwaysAllowSet(); i ? this.launchURLInternal(e, t, i) : this.showWebConfirmationDialog(e, t, i) }, t.prototype.showWebConfirmationDialog = function (e, i, a) { var r = this, o = this.localizationService.get("CustomVisuals_LaunchURLDialogTitle"), s = this.localizationService.format("CustomVisuals_LaunchURLDialogText", [e]), n = this.localizationService.get("CustomVisuals_LaunchURLDialogAllowOnce"), l = this.localizationService.get("CustomVisuals_LaunchURLDialogAlwaysAllow"), u = this.localizationService.get("OK_ButtonText"), c = this.localizationService.get("Cancel_ButtonText"); this.optionsDialogBuilder.show(o, s, "launchURLDialog", [{ name: n, action: function () { r.launchURLInternal(e, i, a) } }, { name: l, action: function () { r.localStorageService.setData(t.alwaysAllowLocalStorageKey, !0), r.launchURLInternal(e, i, a) } }], u, c, 0) }, t.prototype.launchURLInternal = function (e, t, i) { var a = window.open(); if (!a) throw new Error("Error opening new tab"); a.opener = null, a.location.href = e }, t.alwaysAllowLocalStorageKey = "custom_visual_launchURL_always_allow", t })(r) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(t, i) { var r = t.promiseFactory.defer(i), o = t.visualPlugin, s = t.featureSwitches.visualsOutsideNgZone ? t.ngZone : void 0; return t.visualSandbox && a(t) ? r.resolve(t.visualSandbox.getVisualPlugin(o, t.telemetryService, t.isDebugVisual).create()) : o.module ? t.moduleLoader.require(o.module).then((function (i) { return r.resolve(e.extensibility.createVisualApiAdapter(o, o.create, t.promiseFactory, t.telemetryService, i, s)) }), (function (e) { return r.reject(e) })) : r.resolve(e.extensibility.createVisualApiAdapter(o, o.create, t.promiseFactory, t.telemetryService, void 0, s)), e.createRejectablePromise(r) } function a(e) { var i = e.visualPlugin, a = e.featureSwitches || {}, r = e.approvedResourceService; return !!i && (!!(e.approvedResourceService && e.approvedResourceService.isTrustedResource && e.approvedResourceService.isTrustedResource(i.name)) || !!t.utils.isCustomVisual(i) && (!(!a.approvedResourcesDisabled && !i.apiVersion && r && r.isApprovedResource(i.name)) && a.sandboxVisualsEnabled)) } t.createVisualAdapter = i })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i; !(function (i) { var a = "dataViewer", r = (function () { function i(e) { this.visualSandbox = e } return i.prototype.reloadAdapter = function (i) { var a = this; if (void 0 === i && (i = !1), this.dataViewShowing) { if (i) return; this.toggleDataview(!1) } if (!e.localStorageService.getData("VISUAL_DEVELOPER_MODE_ENABLED")) { this.toggleAutoReload(!1); var r = this.buildErrorMessage({ message: this.host.getLocalizedString("DebugVisual_Enabled_Error_Message"), moreMessage: this.host.getLocalizedString("DebugVisual_Enabled_Error_Learn_More"), moreLinkHref: "https://aka.ms/powerbideveloperenablederror", moreLinkText: this.host.getLocalizedString("LearnMore"), type: "blockedsite" }); return this.container.html(r), void this.setCapabilities() } var o = e.localStorageService.getData("DEVELOPMENT_SERVER_URL") || "https://localhost:8080/assets/"; this.statusLoading || (this.statusLoading = !0, $.get(o + "status").done((function (r) { if (r && (!i || a.lastUpdateStatus !== r)) { if (a.lastUpdateStatus = r, "error" === r) { var s = a.buildErrorMessage({ message: a.host.getLocalizedString("DebugVisual_Compile_Error_Message"), moreMessage: a.host.getLocalizedString("DebugVisual_Compile_Error_Learn_More"), moreLinkHref: "https://aka.ms/powerbideveloperpbivizcompileerror", moreLinkText: a.host.getLocalizedString("LearnMore"), type: "repair" }); return a.container.html(s), void a.setCapabilities() } $.getJSON(o + "pbiviz.json").done((function (i) { i.capabilities && i.visual && i.visual.guid && (a.visualGuid !== i.visual.guid && (a.visualGuid = i.visual.guid), $.ajax(o + "visual.js", { dataType: "text" }).done((function (r) { $.get(o + "visual.css").done((function (o) { var s = { name: a.visualGuid, custom: !0, create: function () { return null }, content: { js: r, css: o, iconBase64: null }, capabilities: i.capabilities, apiVersion: i.apiVersion }; e.extensibility.visualPluginAdapter.transformPlugin(s), t.plugins[s.name] = s, a.setCapabilities(s.capabilities), a.loadVisual(s) })) }))) })) } })).fail((function () { a.toggleAutoReload(!1); var e = a.buildErrorMessage({ message: a.host.getLocalizedString("DebugVisual_Server_Error_Message"), moreMessage: a.host.getLocalizedString("DebugVisual_Server_Error_Learn_More"), moreLinkHref: "https://aka.ms/powerbideveloperpbivizservererror", moreLinkText: a.host.getLocalizedString("LearnMore"), type: "error" }); a.container.html(e), a.setCapabilities() })).always((function () { a.statusLoading = !1 }))) }, i.prototype.loadVisual = function (t) { var i = this, r = t.name !== a; this.promiseFactory = this.host.promiseFactory(), this.visualContainer.attr("class", "visual-" + t.name), this.visualContainer.empty(), this.container.empty().append(this.visualContainer); var o = e.visualHost.visualSandboxConfigDefaults; this.adapterPromise && this.adapterPromise.reject(); var s = this.adapterPromise = e.visualHost.createVisualAdapter({ visualPlugin: t, promiseFactory: this.promiseFactory, moduleLoader: this.host.loader(), featureSwitches: { sandboxVisualsEnabled: r }, visualSandbox: this.visualSandbox ? this.visualSandbox : e.visualHost.createCustomVisual(o, { promiseFactory: this.promiseFactory }), isDebugVisual: !0 }); this.adapter && this.adapter.destroy(), s.then((function (t) { if (i.adapter = t, i.sandbox = i.adapter.sandbox, t.init && t.init(i.visualInitOptions), t.update && i.lastUpdateOptions) { var a = i.lastUpdateOptions; a.type = e.VisualUpdateType.All, t.update(a) } })) }, i.prototype.toggleAutoReload = function (e) { var t = this; this.autoReloadInterval && e !== !0 ? (this.autoRefreshBtn.addClass("pbi-glyph-play"), this.autoRefreshBtn.removeClass("pbi-glyph-stop"), this.refreshBtn.show(), clearInterval(this.autoReloadInterval), this.autoReloadInterval = void 0) : this.autoReloadInterval || e === !1 || (this.autoRefreshBtn.removeClass("pbi-glyph-play"), this.autoRefreshBtn.addClass("pbi-glyph-stop"), this.refreshBtn.hide(), this.autoReloadInterval = setInterval((function () { return t.reloadAdapter(!0) }), i.autoReloadPollTime)) }, i.prototype.toggleDataview = function (e) { this.dataViewShowing && e !== !0 ? (this.dataViewShowing = !1, this.dataBtn.toggleClass("active", !1), this.reloadAdapter()) : this.dataViewShowing || e === !1 || (this.dataViewShowing = !0, this.dataBtn.toggleClass("active", !0), this.loadVisual(t.plugins[a])) }, i.prototype.flatten = function (e) { if (e instanceof Array) { for (var t = [], i = 0, a = e.length; i < a; i++)t[i] = this.flatten(e[i]); return t } if ("object" == typeof e) { var t = {}, i = void 0; for (i in e) t[i] = this.flatten(e[i]); return t } return e }, i.prototype.createAndClickAnchorTagWithJsonData = function (e) { var t = document.createElement("a"); t.href = "data:" + e, t.download = "dataViews.json", t.click() }, i.prototype.exportDataViews = function () { var e = this.flatten(this.lastUpdateOptions.dataViews), t = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(e)); this.createAndClickAnchorTagWithJsonData(t) }, i.prototype.createRefreshBtn = function () { var e = this, t = this.host.getLocalizedString("DebugVisual_Reload_Visual_Button_Title"), i = this.refreshBtn = $('<i title="' + t + '" class="controlBtn glyphicon pbi-glyph-refresh"></i>'); return i.on("click", (function () { return e.reloadAdapter() })), i }, i.prototype.createAutoRefreshBtn = function () { var e = this, t = this.host.getLocalizedString("DebugVisual_Toggle_Auto_Reload_Button_Title"), i = this.autoRefreshBtn = $('<i title="' + t + '" class="controlBtn glyphicon pbi-glyph-play"></i>'); return i.on("click", (function () { return e.toggleAutoReload() })), i }, i.prototype.createDataBtn = function () { var e = this, t = this.host.getLocalizedString("DebugVisual_Show_Dataview_Button_Title"), i = this.dataBtn = $('<i title="' + t + '" class="controlBtn glyphicon pbi-glyph-seedata"></i>'); return i.on("click", (function () { return e.toggleDataview() })), i }, i.prototype.createHelpBtn = function () { var e = this.host.getLocalizedString("DebugVisual_Help_Button_Title"); return $('<a href="https://aka.ms/powerbideveloperhelp" target="_blank"><i title="' + e + '" class="controlBtn glyphicon pbi-glyph-question"></i></a>') }, i.prototype.createSmilyBtn = function () { var e = this.host.getLocalizedString("DebugVisual_Feedback_Button_Title"); return $('<a href="https://aka.ms/powerbideveloperfeedback" target="_blank"><i title="' + e + '" class="controlBtn glyphicon pbi-glyph-smiley"></i></a>') }, i.prototype.createExportDataViewsBtn = function () { var e = this, t = this.host.getLocalizedString("DebugVisual_Export_Data_Button_Title"), i = $('<i title="' + t + '" class="controlBtn glyphicon pbi-glyph-export"></i>'); return i.on("click", (function () { return e.exportDataViews() })), i }, i.prototype.buildControls = function () { var e = $('<div class="debugVisual-controlsContainer"></div>'); return e.append(this.createRefreshBtn(), this.createAutoRefreshBtn(), this.createDataBtn(), this.createExportDataViewsBtn(), this.createHelpBtn(), this.createSmilyBtn()), e }, i.prototype.buildErrorMessage = function (e) { return _.template(i.errorMessageTemplate)(e) }, i.prototype.setCapabilities = function (e) { void 0 === e && (e = i.defaultCapabilities), _.isEqual(e, t.plugins.debugVisual.capabilities) || (t.plugins.debugVisual.capabilities = e, this.host.visualCapabilitiesChanged()) }, i.prototype.init = function (e) { this.host = e.host; var t = this.container = $('<div class="debugVisualContainer"></div>'), i = this.visualContainer = $('<div class="visual"></div>'); this.dataViewShowing = !1, t.append(i), e.element.append(t), (this.visualInitOptions = e).element = i, this.host.setToolbar(this.buildControls()), this.reloadAdapter() }, i.prototype.update = function (e) { e.viewport && (this.visualInitOptions.viewport = e.viewport), this.lastUpdateOptions = e; var t = e.viewport.height, i = e.viewport.width; this.visualContainer.height(t).width(i), this.adapter && this.adapter.update && this.adapter.update(e) }, i.prototype.enumerateObjectInstances = function (e) { return this.adapter && this.adapter.enumerateObjectInstances ? this.adapter.enumerateObjectInstances(e) : [] }, i.prototype.enumerateObjectInstancesAsync = function (e) { return this.adapter && this.adapter.enumerateObjectInstancesAsync ? this.adapter.enumerateObjectInstancesAsync(e) : this.promiseFactory.resolve(this.enumerateObjectInstances(e)) }, i.prototype.enumerateObjectRepetitionAsync = function () { return this.adapter && this.adapter.enumerateObjectRepetitionAsync ? this.adapter.enumerateObjectRepetitionAsync() : this.promiseFactory.resolve([]) }, i.prototype.onClearSelection = function () { if (this.adapter && this.adapter.onClearSelection) return this.adapter.onClearSelection() }, i.prototype.onRestoreSelection = function (e) { if (this.adapter && this.adapter.onRestoreSelection) return this.adapter.onRestoreSelection(e) }, i.prototype.destroy = function () { this.adapter && this.adapter.destroy && this.adapter.destroy(), this.toggleAutoReload(!1), this.container = null, this.visualContainer = null, this.host.setToolbar(null), this.promiseFactory = null }, i.defaultCapabilities = { dataRoles: [{ displayName: "Values", name: "Values", kind: e.VisualDataRoleKind.Measure }], dataViewMappings: [{ table: { rows: { for: { in: "Values" } } } }] }, i.capabilities = i.defaultCapabilities, i.autoReloadPollTime = 300, i.errorMessageTemplate = '\n            <div class="errorContainer">\n                <div class="errorMessage">\n                    <div ng-switch="$ctrl.errorInfo.overlayType">\n                        <div class="glyphicon pbi-glyph-<%= type %> glyph-med"></div>\n                    </div>\n                    <div>\n                        <div class="errorSpan"><%= message %></div>\n                        <span class="errorSeeMore"><%= moreMessage %></span>\n                        <a class="errorSeeMore" href="<%= moreLinkHref %>" target="_blank"><%= moreLinkText %></a>\n                    </div>\n                </div>\n            </div>\n        ', i })(); i.DebugVisual = r })(i = t.system || (t.system = {})) })(t = e.visuals || (e.visuals = {})) })(powerbi || (powerbi = {})), (function (e) { var t; !(function (t) { var i; !(function (i) { i.debugVisual = { name: "debugVisual", watermarkKey: "kpi", titleKey: e.data.createDisplayNameGetter("DebugVisual_ToolTip"), capabilities: t.system.DebugVisual.capabilities, create: function () { return new t.system.DebugVisual }, systemVisual: !0 } })(i = t.plugins || (t.plugins = {})) })(t = e.visuals || (e.visuals = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i = jsCommon.PerfTimer, a = jsCommon.QueryStringUtil, r = jsCommon.Version, o = (function () { function o(i) { this.iframeFeatureSwitches = ["dsrV2", "exprBoundColorValidation"], this.pluginName = i.plugin.name, this.proxy = i.proxy, this.visualSandboxUri = i.visualSandboxUri, this.instanceId = i.instanceId; var a = _.map(i.sandboxProperties, (function (e) { return t.SandboxPropertyTranslator(e) })).join(" "); this.iframeHtml = '<iframe class="visual-sandbox empty-sandbox-visual" sandbox="' + a + '" name="visual-sandbox"></iframe>'; var r = new t.SandboxDelegate(this.proxy, i.promiseFactory, { urlLauncher: i.urlLauncher, visualHostTooltip: i.visualHostTooltip, hostEnv: i.hostEnv }); this.proxy.init(r, i.plugin); var o = e.visuals.plugins[this.pluginName]; this.proxy.postMessage("loadWithoutResourcePackage", [o]) } return Object.defineProperty(o.prototype, "sandbox", { get: function () { return !0 }, enumerable: !0, configurable: !0 }), o.prototype.init = function (e) { var t = this; this.element = e.element, this.tooltipService = e.host.tooltips(), e.featureSwitches && (e.featureSwitches = this.filterFeatureSwitches(e.featureSwitches, this.iframeFeatureSwitches)), this.initializeContainerTimerId = window.setTimeout((function () { t.initializeContainerTimerId = void 0, t.element && t.initContainer(e.viewport) }), 0), this.proxy.invoke("init", [e]) }, o.prototype.update = function (e) { return this.proxy.invoke("update", [e]) }, o.prototype.enumerateObjectInstancesAsync = function (e) { return this.proxy.invoke("enumerateObjectInstancesAsync", [e]) }, o.prototype.enumerateObjectRepetitionAsync = function () { return this.proxy.invoke("enumerateObjectRepetitionAsync", []) }, o.prototype.onRestoreSelection = function (t) { if (this.supportCustomVisualSelectionId()) return this.proxy.invoke("onRestoreCvSelectionIds", [t]); var i = t.selection.map((function (t) { return e.data.services.DataViewObjectSerializer.serializeSelectorsByColumn(t) })); return this.proxy.invoke("onRestoreSelection", [{ selection: i }]) }, o.prototype.visualHasMethod = function (e) { return _.isFunction(this[e]) }, o.prototype.destroy = function () { void 0 !== this.initializeContainerTimerId && window.clearTimeout(this.initializeContainerTimerId), this.container && this.container.remove(), this.hideTooltip(), this.proxy.invoke("destroy", []) }, o.prototype.hideTooltip = function () { this.tooltipService && this.tooltipService.enabled() && this.tooltipService.hide({ immediately: !0, isTouchEvent: !1 }) }, o.prototype.initContainer = function (e) { var t = this, a = "customVisual:" + this.pluginName + ":initContainer"; this.marker = i.start(a); var r = this.generateIFrameUrl(); this.container = $(this.iframeHtml).attr({ width: e.width, height: e.height }), this.element.empty().append(this.container), this.container.attr({ src: r }), this.container.one("load", (function () { return t.onIFrameLoad() })), this.container.mouseout((function () { return t.hideTooltip() })) }, o.prototype.onIFrameLoad = function () { var e = this.container[0]; this.proxy.ready(e.contentWindow), this.marker() }, o.prototype.generateIFrameUrl = function () { var i = this.visualSandboxUri, r = { plugin: this.pluginName, locale: t.LocalizationResourceUtility.getLocale(e.common.localize.currentLanguageLocale), instanceId: this.instanceId }; return a.getQueryStringValue("unmin") && (r.unmin = "1"), a.addOrUpdateQueryStringToUrl(i, r) }, o.prototype.filterFeatureSwitches = function (e, t) { var i = {}; return e && t && (i = _.reduce(Object.keys(e), (function (i, a) { return t.indexOf(a) > -1 && (i[a] = e[a]), i }), {})), i }, o.prototype.supportCustomVisualSelectionId = function () { return this.proxy && this.proxy.plugin && this.proxy.plugin.apiVersion && (r.gt(this.proxy.plugin.apiVersion, "2.0.0") || r.eq(this.proxy.plugin.apiVersion, "2.0.0")) }, o })(); t.SandboxVisual = o; for (var s = ["update", "onStyleChanged", "onViewModeChanged", "onEditModeChanged", "onClearSelection", "onSelectObject", "canResizeTo"], n = 0, l = s; n < l.length; n++) { var u = l[n]; !(function (e) { o.prototype[e] || (o.prototype[e] = function () { return this.proxy.invoke(e, _.toArray(arguments)) }) })(u) } })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i = jsCommon.Version, a = (function () { function t(e) { this.isolate = !0, this.promiseFactory = e.promiseFactory, this.plugin = e.plugin, this.tooltipService = e.visualHostTooltip } return t.prototype.init = function (t) { var i = t.host.tooltips(); i && (this.tooltipService = i), this.cvContainer = t.element, this.loadWithoutResourcePackage(this.plugin), this.hostServices = e.visualSandbox.createNonSandboxVisualHostServices(t.host, this.cvContainer, this.tooltipService); var a = { animation: t.animation, element: this.cvContainer, host: this.hostServices, interactivity: t.interactivity, style: t.style, viewport: t.viewport, localizationResources: this.plugin.localizationResources }; this.visual.init(a) }, t.prototype.update = function (t) { var i = { dataViews: t.dataViews, suppressAnimations: t.suppressAnimations, viewMode: t.viewMode, editMode: t.editMode, viewport: t.viewport, type: t.type, operationKind: e.VisualDataChangeOperationKind.Create, resizeMode: t.resizeMode, isInFocus: t.isInFocus, jsonFilters: t.jsonFilters ? t.jsonFilters : null }; return this.visual.update(i) }, t.prototype.enumerateObjectInstancesAsync = function (e) { var t = this.promiseFactory.defer(); if (this.visual.enumerateObjectInstances) { var i = this.visual.enumerateObjectInstances(e), a = i; return a && a.instances && t.resolve({ instances: a.instances, containers: a.containers }), t.resolve(i), t.promise } }, t.prototype.enumerateObjectRepetitionAsync = function () { var e = this.promiseFactory.defer(), t = this.visual.enumerateObjectRepetition(); return e.resolve(t), e.promise }, t.prototype.onRestoreSelection = function (t) { var i = this.hostServices.selectionManager; if (i) { if (t && t.selection) { var a = t.selection.map((function (t) { return e.visuals.SelectionId.fromSelectorsByColumn(t) })); i.setSelectionIds(a), i.invokeOnSelectCallback(a) } return !0 } }, t.prototype.onClearSelection = function () { var e = this.hostServices.selectionManager; e && (e.setSelectionIds([]), e.invokeOnSelectCallback([])) }, t.prototype.loadWithoutResourcePackage = function (t) { var a = "3.0.0", r = t.apiVersion ? this.isolate && i.lt(t.apiVersion, a) : this.isolate; this.plugin = e.visualSandbox.injectCustomVisual(t, !0, r), this.createAdapter() }, t.prototype.visualHasMethod = function (e) { return _.isFunction(this[e]) }, t.prototype.destroy = function () { this.hideTooltip(), this.visual.destroy && this.visual.destroy(), this.cvContainer && this.cvContainer.empty() }, t.prototype.createAdapter = function () { var t = this.plugin; this.visual = e.extensibility.createVisualApiAdapter(t, t.create, this.promiseFactory, null) }, t.prototype.hideTooltip = function () { this.tooltipService && this.tooltipService.enabled() && this.tooltipService.hide({ immediately: !0, isTouchEvent: !1 }) }, t })(); t.NonSandboxDelegate = a })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) {
    var t; !(function (t) {
        var i = e.data.services, a = i.DataViewObjectSerializer, r = i.DataViewTransformActionsSerializer, o = t.services.VisualObjectInstanceSerializer, s = t.services.VisualObjectRepetitionSerializer, n = e.visuals.CustomVisualSelectionId, l = jsCommon.Version; t.CustomVisualsFilterPropertyIdentifier = { objectName: "general", propertyName: "filter" }; var u = (function () {
            function i(t, i, a) { this.visualSandboxOptions = a, this.proxy = t, this.promiseFactory = i, this.destroyed = !1, this.dataViewSerializer = new e.visualSandbox.SandboxDataViewSerializer, this.visualSelections = [] } return Object.defineProperty(i.prototype, "sandbox", { get: function () { return !0 }, enumerable: !0, configurable: !0 }), i.prototype.init = function (e) { this.host = e.host, this.visualAdapterHostServices = e.visualAdapterHostServices, this.tooltipService = this.host.tooltips(), this.tooltipService || (this.tooltipService = this.visualSandboxOptions.visualHostTooltip), this.element = e.element, this.resize(e.viewport); var i = { animation: e.animation, interactivity: e.interactivity, viewport: e.viewport, style: t.VisualStyleSerializer.serializeVisualStyle(e.style), featureSwitches: e.featureSwitches, hostEnv: this.visualSandboxOptions ? this.visualSandboxOptions.hostEnv : void 0 }; this.proxy.postMessage("init", [i]) }, i.prototype.update = function (e) { var t = this, i = this.promiseFactory.defer(), a = function (e, i) { return t.proxy.postMessageAsync(e, i) }; return this.shouldNotUpdateVisual(e) ? (i.resolve(null), i.promise) : this.updateCore(e, a) }, i.prototype.shouldNotUpdateVisual = function (e) { if (e.visualHasData && e.dataViews && 0 === e.dataViews.length) return !0; var t = this.proxy && this.proxy.plugin && this.proxy.plugin.capabilities && this.proxy.plugin.capabilities.supportsLandingPage; return e.visualRequiresData && e.dataViews && 0 === e.dataViews.length && !(t && 1 === e.viewMode) }, i.prototype.updateCore = function (a, o) { return __awaiter(this, void 0, e.Promise, (function () { var s, n, l, u, c, d, p, h, v, m, f, g, y = this; return __generator(this, (function (S) { switch (S.label) { case 0: return u = [], (a.type & e.VisualUpdateType.All) !== e.VisualUpdateType.All && (a.type & e.VisualUpdateType.Resize) === e.VisualUpdateType.Resize && 2 !== a.resizeMode ? [3, 7] : (c = this.proxy && this.proxy.plugin && this.proxy.plugin.apiVersion, a.dataViews && a.dataViews[0] && i.shouldSerializeDataView(c) && (this.shouldUpdateWithCachedData(a) ? l = this.dataViewSerializer.serializeDataViewMetadata(a.dataViews[0]) : n = this.dataViewSerializer.serializeDataViewForCv(a.dataViews[0], this.proxy.plugin.capabilities), u = this.RestoreCvSelectionIds(this.visualSelections)), d = !!(a.dataViews && a.dataViews.length > 0 && a.dataViews[0].categorical && a.dataViews[0].categorical.categories && a.dataViews[0].categorical.categories.length > 0 && a.dataViews[0].categorical.categories[0] && a.dataViews[0].categorical.categories[0].values), p = [], h = void 0, d && (p = a.dataViews[0].categorical.categories[0].values, a.dataViews[0].categorical.categories[0].source && a.dataViews[0].categorical.categories[0].source.type && (h = a.dataViews[0].categorical.categories[0].source.type.dateTime)), v = a && a.dataTransforms && a.dataTransforms.objects, m = void 0, f = v && e.data.DataViewObjectDefinitions.getValue(v, t.CustomVisualsFilterPropertyIdentifier, null), f ? [4, this.host.getJSONFilter(f)] : [3, 2]); case 1: return m = S.sent(), [3, 3]; case 2: m = [], S.label = 3; case 3: return g = { dataViewSource: a.visualDefinitionData ? a.visualDefinitionData.dataViewSource : null, dataTransforms: r.serializeDataViewTransformActions(a.dataTransforms, this.proxy.plugin.capabilities.objects || {}), suppressAnimations: a.suppressAnimations, viewMode: a.viewMode, editMode: a.editMode, viewport: a.viewport, type: a.type, resizeMode: a.resizeMode, isInFocus: a.isInFocus, categoriesValues: d ? p : null, isCategoryDate: h, serializedDataView: n, jsonFilters: m, dataViewMetadata: l, selections: u }, this.shouldUpdateWithCachedData(a) ? (this.lastDataViewSource = g.dataViewSource, g.dataViewSource = null, [4, o("updateWithCachedData", [g])]) : [3, 5]; case 4: return s = S.sent(), [3, 7]; case 5: return this.lastDataViewSource = g.dataViewSource, [4, o("update", [g])]; case 6: s = S.sent(), S.label = 7; case 7: return window.setTimeout((function () { return y.resize(a.viewport) })), [2, s] } })) })) }, i.prototype.enumerateObjectInstancesAsync = function (e) {
                var t = this, a = this.promiseFactory.defer(); return this.proxy.postMessageAsync("enumerateObjectInstances", [e]).then((function (e) {
                    var r = e; if (!r) return a.resolve(null); var s = t.proxy && t.proxy.plugin && t.proxy.plugin.apiVersion; if (r.instances) { var n; if (i.shouldSerializeDataView(s)) { var l = t.dataViewSerializer.deserializeVisualObjectInstance(r.instances); n = o.deserialize(l) } else n = o.deserialize(r.instances); var u = { instances: n, containers: r.containers ? o.deserializeContainers(r.containers) : null }; return a.resolve(u) } i.shouldSerializeDataView(s) && (e = t.dataViewSerializer.deserializeVisualObjectInstance(e)); var c = o.deserialize(e);
                    a.resolve(c)
                })).catch((function (e) { return a.reject(e) })), a.promise
            }, i.prototype.enumerateObjectRepetitionAsync = function () { var e = this.promiseFactory.defer(); return this.proxy.postMessageAsync("enumerateObjectRepetition", []).then((function (t) { if (!t) return e.resolve(null); var i = s.deserialize(t); e.resolve(i) })).catch((function (t) { return e.reject(t) })), e.promise }, i.prototype.onSelect = function (t) { var i; if (e.extensibility.legacy.isOldSelectEventArgs(t)) { var r = t; i = { data: a.deserializeSelectors(r.data), data2: a.deserializeSelectorsByColumn(r.data2), selectors: a.deserializeSelectors(t.selectors) } } else i = { visualObjects: a.deserializeVisualObjects(t.visualObjects) }; this.host.onSelect(i) }, i.prototype.transformCvSelectionIdsAndSelect = function (e) { var t; if (this.visualSelections = [], e.selectionIds) { t = { visualObjects: [] }; for (var i = 0, a = e.selectionIds; i < a.length; i++) { var r = a[i]; r = new n(r.dataMap, r.measures); var o = this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(r), s = o.getSelectorsByColumn(); t.visualObjects.push({ objectName: "dataPoint", selectorsByColumn: s }), this.visualSelections.push(s) } } else t = { visualObjects: [] }; t.multiSelect = e.multiSelect, this.host.onSelect(t) }, i.prototype.onRestoreCvSelectionIds = function (e) { if (e.selection) { var t = this.RestoreCvSelectionIds(e.selection); return this.proxy.postMessage("onRestoreCvSelectionIds", [t]), !0 } }, i.prototype.RestoreCvSelectionIds = function (e) { var t = this; this.visualSelections = e; for (var i = [], a = function (e) { var a = {}; _.map(e.dataMap, (function (e, i) { a[i] = [{ identityIndex: t.dataViewSerializer.getIndexOfIdentity(e[0]) }] })), i.push({ serializedDataMap: a, measures: e.metadata }) }, r = 0, o = e; r < o.length; r++) { a(o[r]) } return i }, i.prototype.onUpdateResult = function (e) { this.element.children("iframe.visual-sandbox").toggleClass("empty-sandbox-visual", !e) }, i.prototype.onRelayUIEvent = function (e) { var t = this.element.offset(); e.clientX += t.left, e.clientY += t.top, e.pageX += t.left, e.pageY += t.top; var i; switch (e.type) { case "click": case "mouseup": case "MSPointerUp": case "pointerup": var a = e; if (_.isFunction(MouseEvent)) i = new MouseEvent(a.type, a); else { var r = document.createEvent("MouseEvent"); r.initMouseEvent(a.type, a.bubbles, a.cancelable, window, a.detail, a.screenX, a.screenY, a.clientX, a.clientY, a.ctrlKey, a.altKey, a.shiftKey, a.metaKey, a.button, a.relatedTarget), _.extend(r, e), i = r } break; case "tap": case "touchend": case "touchcancel": var o = document.createEvent("TouchEvent"); o.initUIEvent(e.type, e.bubbles, e.cancelable, window, e.detail), _.extend(o, e), i = o; break; default: return }this.element.get(0).dispatchEvent(i) }, i.prototype.persistProperties = function (e) { var t, i = e; t = i.merge || i.remove || i.replace ? { merge: i.merge ? o.deserialize(i.merge) : null, remove: i.remove ? o.deserialize(i.remove) : null, replace: i.replace ? o.deserialize(i.replace) : null } : o.deserialize(e), this.host.persistProperties(t) }, i.prototype.applyJsonFilter = function (e, t, i, a) { this.host.applyJsonFilter(e, t, i, a) }, i.prototype.refreshHostData = function () { this.host.refreshHostData() }, i.prototype.onCustomVisualContextMenu = function (e) { if (e && e.data && e.position && e.data[0]) { var t = new n(e.data[0].dataMap, e.data[0].measures), i = this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(t), a = this.fixCoordinates([e.position.x, e.position.y]), r = { data: [i.getSelectorsByColumn()], position: { x: a[0], y: a[1] }, copyArgs: e.copyArgs, dataRoles: e.dataRoles }; this.host.onContextMenu(r) } }, i.prototype.onSwitchFocusModeState = function (e) { this.host.onSwitchFocusModeState(e) }, i.prototype.fixCoordinates = function (e) { if (/Edge\/\d./i.test(navigator.userAgent) && $("body.fullScreen").length > 0) return e; var t = this.element.offset(); return e[0] = e[0] * this.scale + t.left, e[1] = e[1] * this.scale + t.top, e }, i.prototype.deserializeIdentities = function (e) { var t = this.proxy && this.proxy.plugin && this.proxy.plugin.apiVersion; if (e && i.shouldSerializeDataView(t)) { for (var r = [], o = 0, s = e; o < s.length; o++) { var n = s[o]; r.push(this.dataViewSerializer.convertCVSelectionIdToPowerbiSelctionId(n)) } return r && _(r).map((function (e) { return e.getSelectorsByColumn() })).compact().value() } return e && _(e).map((function (e) { return a.deserializeSelectorsByColumn(e) })).compact().value() }, i.prototype.showTooltip = function (e) { if (this.tooltipService && this.tooltipService.enabled()) { var t = _.cloneDeep(e); t.coordinates = this.fixCoordinates(t.coordinates), t.identities = this.deserializeIdentities(e.identities), this.tooltipService.show(t) } }, i.prototype.moveTooltip = function (e) { if (this.tooltipService && this.tooltipService.enabled()) { var t = _.cloneDeep(e); t.coordinates = this.fixCoordinates(t.coordinates), t.identities = this.deserializeIdentities(e.identities), this.tooltipService.move(t) } }, i.prototype.hideTooltip = function (e) { this.tooltipService && this.tooltipService.enabled() && this.tooltipService.hide(e) }, i.prototype.loadMoreData = function () { var e = this; this.visualAdapterHostServices && (this.visualAdapterHostServices.startProgressBar(), this.visualAdapterHostServices.getNextDataSegment().then((function (t) { if (e.proxy && e.proxy.plugin && i.shouldSerializeDataView(e.proxy.plugin.apiVersion) && t && t.result && t.result.dataReaderResult && t.result.dataReaderResult.dataView) { var a = e.dataViewSerializer.serializeDataViewForCv(t.result.dataReaderResult.dataView, e.proxy.plugin.capabilities, !0); e.proxy.postMessageAsync("handleLoadMoreDataResult", [a]).then((function () { t.performanceActivity && t.performanceActivity.resolve() })) } else e.proxy.postMessageAsync("handleLoadMoreDataResult", [t && t.result]).then((function () { t.performanceActivity && t.performanceActivity.resolve() })) }), (function (t) { e.visualAdapterHostServices.stopProgressBar() }))) }, i.prototype.getAADToken = function (e, t) { var i = this; this.host.authenticationService && this.host.authenticationService().getAADToken(e).then((function (e) { var a = { payload: e, isError: !1, promiseId: t }; i.proxy.postMessage("handleGetAADTokenResult", [a]) })).catch((function (e) { var a = { payload: e, isError: !0, promiseId: t }; i.proxy.postMessage("handleGetAADTokenResult", [a]) })) }, i.prototype.getWACToken = function (e, t, i, a) { var r = this; this.host.authenticationService && this.host.authenticationService().getWACToken(e, t, i).then((function (e) { var t = { payload: e.accessToken, wacToken: e, isError: !1, promiseId: a }; r.proxy.postMessage("handleGetWACTokenResult", [t]) })).catch((function (e) { var t = { payload: e, isError: !0, promiseId: a }; r.proxy.postMessage("handleGetWACTokenResult", [t]) })) }, i.prototype.launchUrl = function (e) { if (this.visualSandboxOptions && _.isFunction(this.visualSandboxOptions.urlLauncher)) { var t = this.proxy.plugin.name; this.visualSandboxOptions.urlLauncher(e, t) } }, i.prototype.getStorageData = function (t, i, a) { var r = e.localVisualStorageService.getData(t, i), o = { promiseId: a, data: r }; this.proxy.postMessage("handleGetStorageData", [o]) }, i.prototype.setStorageData = function (t, i, a, r) { var o = e.localVisualStorageService.setData(t, i, a), s = { promiseId: r, freeSpace: o, isError: o <= 0 }; this.proxy.postMessage("handleSetStorageData", [s]) }, i.prototype.removeStorageData = function (t, i) { e.localVisualStorageService.remove(t, i) }, i.prototype.stopProgressBar = function () { this.visualAdapterHostServices && this.visualAdapterHostServices.stopProgressBar() }, i.prototype.onRestoreSelection = function (e) { return this.proxy.postMessage("onRestoreSelection", [e]), !0 }, i.prototype.onClearSelection = function () { this.visualSelections = [], this.proxy.postMessage("onRestoreSelection", []) }, i.prototype.destroy = function () { this.dataViewSerializer && this.dataViewSerializer.flushIdentitiesArray(), this.destroyed = !0, this.proxy.postMessage("destroy", []), this.proxy.destroy() }, i.prototype.resize = function (e) { this.scale = e.scale, this.element && !this.destroyed && this.element.children().css({ width: e.width, height: e.height }) }, i.shouldSerializeDataView = function (t) { return !!(t && e.visualSandbox && e.visualSandbox.SandboxDataViewSerializer) && (l.gt(t, "2.0.0") || l.eq(t, "2.0.0")) }, i.prototype.shouldUpdateWithCachedData = function (e) { return e.visualDefinitionData && e.visualDefinitionData.dataViewSource && this.lastDataViewSource || this.dataViewSerializer.flushIdentitiesArray(), e.visualDefinitionData && e.visualDefinitionData.dataViewSource && e.visualDefinitionData.dataViewSource === this.lastDataViewSource }, i
        })(); t.SandboxDelegate = u
    })(t = e.visualHost || (e.visualHost = {}))
})(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i; !(function (i) { function a(t, i) { if (void 0 === u) try { if (!(i && t && t.featureSwitches && t.featureSwitches.customVisualsTenantSwitch)) return u = l.FeatureIsDisabled; u = t.featureSwitches.customVisualsTenantEnabled ? t.featureSwitches.certifiedCustomVisualsTenantEnabled ? l.NonCertifiedCustomVisualsAreDisabled : l.AllCustomVisualsAreEnabled : l.AllCustomVisualsAreDisabled, i.logEvent(e.telemetry.AdminControlInitialized, l[u]) } catch (e) { u = l.FailedEvaluatingState } return u } function r(e, t, i, a, r, o) { return r || o ? n(t, !0, r, o, i, a) : n(t, e.featureSwitches.customVisualsTenantSwitch, !e.featureSwitches.customVisualsTenantEnabled, e.featureSwitches.certifiedCustomVisualsTenantEnabled, i, a) } function o(e, t) { return t || e.featureSwitches.customVisualsTenantSwitch && !e.featureSwitches.customVisualsTenantEnabled } function s(e) { return e && _.endsWith(e, "_OrgStore") } function n(e, i, a, r, o, n) { return !(!i || e === t.EsriVisual || s(e)) && (!!a || !(!r || o.isApprovedResourceServerRender(e)) && (!n || o.isApprovedVisualsDefined())) } var l; !(function (e) { e[e.FeatureIsDisabled = 0] = "FeatureIsDisabled", e[e.AllCustomVisualsAreEnabled = 1] = "AllCustomVisualsAreEnabled", e[e.AllCustomVisualsAreDisabled = 2] = "AllCustomVisualsAreDisabled", e[e.NonCertifiedCustomVisualsAreDisabled = 3] = "NonCertifiedCustomVisualsAreDisabled", e[e.FailedEvaluatingState = 4] = "FailedEvaluatingState" })(l = i.CustomVisualsAdminControlState || (i.CustomVisualsAdminControlState = {})); var u; i.getAdminControlState = a, i.isCustomVisualTypeDisabled = r, i.areCustomVisualsDisabled = o, i.isOrganizationalCustomVisual = s, i.isCustomVisualTypeDisabledHelper = n })(i = t.CustomVisualsUtils || (t.CustomVisualsUtils = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i, a = e.contracts.ResourcePackageItemType, r = t.utils.ResourcePackageUtils, o = jsCommon.Trace; !(function (i) { function s(e) { return _.clone(e) } function n(e, t, a, r, o) { return o && !a.isThemeLoaded(o) ? i.loadTheme(2, e, t, a, r, o) : e.resolve() } function l(e, t, a, r, o) { var s = [], n = o.customTheme, l = o.baseTheme && o.baseTheme.name; return n && !a.isThemeLoaded(n.name) && s.push(i.loadTheme(o.customTheme.type, e, t, a, r, n.name, n.version)), l && !a.isThemeLoaded(l) && s.push(i.loadTheme(o.baseTheme.type, e, t, a, r, l)), e.all(s) } function u(e, t, i, a, r, o, s) { return 1 === e ? c(t, i, a, r, o, s) : 2 === e ? d(o, r, a, i, t, s) : void 0 } function c(e, i, a, r, s, n) { return t.ResourcePackageReferenceResolver.loadRegisteredResourceAsDecodedString(e, i, r, s).then((function (e) { p(s, e, a, n) })).catch((function (e) { o.error("Error loading theme - " + e, !0) })) } function d(e, i, o, s, n, l) { return t.ResourcePackageReferenceResolver.loadAndResolveContent(r.findResourcePackage(i, 2), e, s, n, { itemTypeFromReference: a.BaseTheme }).then((function (t) { p(e, t, o, l) })) } function p(t, i, a, r) { if (!a.isThemeLoaded(t)) { var o = e.common.parseCustomVisualTheme(i); o && a.addCustomTheme(t, o, r) } } i.cloneThemeCollection = s, i.loadHighContrastTheme = n, i.loadThemeAndBaseTheme = l, i.loadTheme = u })(i = t.ThemeUtils || (t.ThemeUtils = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { var i; !(function (i) { function a() { var t = e.visualSandbox.getResourceLoaderUrl(), a = n.resourceLoaderIncludePackageId === !0; return i.createHttpResourceItemProxy(e.common.httpService, t, a) } function r() { var t = e.common.httpService.getAbsoluteUri("/sharedresources"); return i.createHttpResourceItemProxy(e.common.httpService, t, !1) } function o(e, t, i) { return new l(e, t, i) } var s = jsCommon.Utility, n = window; i.getHttpResourceItemProxy = a, i.getSharedResourceItemProxy = r, i.createHttpResourceItemProxy = o; var l = (function () { function e(e, t, i) { this.httpService = e, this.uri = t, this.includePackageIdInUri = i } return e.prototype.get = function (e, i, a) { var r = this.uri; this.includePackageIdInUri && (r = this.uri + e + "/"); var o = s.urlCombine(r, _.map(a.split("/"), (function (e) { return encodeURIComponent(e) })).join("/")), n = this.httpService.powerbiRequestOptions(); return n.timeout = t.resourceLoaderHttpTimeout, n.responseType = "text", this.httpService.get(o, n).then((function (e) { return e.data })) }, e.prototype.getBlob = function (e, t, i) { var a = this.uri; this.includePackageIdInUri && (a = this.uri + e + "/"); var r = s.urlCombine(a, encodeURIComponent(i)), o = this.httpService.powerbiRequestOptions(); return o.responseType = jsCommon.HttpConstants.Blob, this.httpService.get(r, o).then((function (e) { return e.data })) }, e })() })(i = t.proxies || (t.proxies = {})) })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})); var powerbi; !(function (e) { var t; !(function (t) { function i(e) { return new s(e) } function a(e, t, i) { return new n(e, t, i) } var r = jsCommon.Version, o = jsCommon.QueryStringUtil; t.createCustomVisualProvider = i, t.visualSandboxConfigDefaults = { visualSandboxUri: "/visualSandbox", visualSandboxMinimalUri: "/visualSandboxMinimal", cvSandboxMinimalUri: "/cvSandboxMinimal", cvSandboxMinimalUriUnmin: "/cvSandboxMinimalUnmin", resourceLoaderUri: "/resourceloader", sandboxProperties: function (e, t) { return [0] } }; var s = (function () { function e(e) { var t = this; this.visualSandboxProviderOption = e, this.$get = ["promiseFactory", "featureSwitchService", "approvedResourceService", "visualInstanceIdTracking", "hostTooltip", "customVisualLaunchURL", function (e, i, r, o, s, n) { var l = { promiseFactory: e, featureSwitchService: i, approvedResourceService: r, visualInstanceIdTrackingService: o, visualHostTooltip: s, launchUrlService: n }; return t.visualSandboxProviderOption && t.visualSandboxProviderOption.urlLauncher || (t.visualSandboxProviderOption = _.extend({}, t.visualSandboxProviderOption, { urlLauncher: function (e, t) { return l.launchUrlService.launchURL(e, t) } })), a(t.settings(), l, t.visualSandboxProviderOption) }], this.config(null) } return e.prototype.defaults = function () { return t.visualSandboxConfigDefaults }, e.prototype.settings = function () { return __assign({}, this._settings) }, e.prototype.config = function (e) { e ? this._settings = e : this._settings = _.extend({}, t.visualSandboxConfigDefaults, e) }, e })(); t.createCustomVisual = a; var n = (function () { function i(e, t, i) { this._settings = e, this.visualSandboxProviderOption = i, this.defaultSandboxProperties = [0], this.promiseFactory = t.promiseFactory, this.featureSwitchService = t.featureSwitchService, this.approvedResourceService = t.approvedResourceService, this.visualInstanceIdTrackingService = t.visualInstanceIdTrackingService, this.visualHostTooltip = t.visualHostTooltip } return Object.defineProperty(i.prototype, "settings", { get: function () { return this._settings }, enumerable: !0, configurable: !0 }), i.prototype.getVisualPlugin = function (e, t, i) { return e.approvedForNoIframe ? this.getNonSandboxVisualPlugin(e) : this.getSandboxVisualPlugin(e, t, i) }, i.prototype.getSandboxUri = function (i) { var a = i && i.apiVersion; if (!a || "1.0.0" === a || "1.1.0" === a) return this.settings.visualSandboxUri; var s; return s = r.lt(a, "2.0.0") ? this.settings.visualSandboxMinimalUri : o.getQueryStringValue("unmin") ? this.settings.cvSandboxMinimalUriUnmin : this.settings.cvSandboxMinimalUri, this.visualSandboxProviderOption && this.visualSandboxProviderOption.disableVersionedURIPath || !this.featureSwitchService || !this.featureSwitchService.featureSwitches || !this.featureSwitchService.featureSwitches.customVisualsUseStaticSandbox || s !== t.visualSandboxConfigDefaults.visualSandboxMinimalUri && s !== t.visualSandboxConfigDefaults.cvSandboxMinimalUri && s !== t.visualSandboxConfigDefaults.cvSandboxMinimalUriUnmin || (s = e.common.httpService.getAbsoluteUri(s) + ".html"), s }, i.prototype.getNonSandboxVisualPlugin = function (e) { var i = { plugin: e, promiseFactory: this.promiseFactory, visualHostTooltip: this.visualHostTooltip }; return { name: e.name, capabilities: e ? e.capabilities : {}, create: function () { return new t.NonSandboxDelegate(i) }, custom: !0 } }, i.prototype.getSandboxVisualPlugin = function (e, i, a) { var r = t.createWindowMessageProxy(this.promiseFactory), o = t.createSandboxVisualProxy(r, i, this.approvedResourceService, this.featureSwitchService, a), s = this.defaultSandboxProperties; this.settings.sandboxProperties && (s = this.settings.sandboxProperties(e.name, a)); var n = { plugin: e, promiseFactory: this.promiseFactory, proxy: o, visualSandboxUri: this.getSandboxUri(e), sandboxProperties: s, urlLauncher: this.visualSandboxProviderOption ? this.visualSandboxProviderOption.urlLauncher : null, instanceId: jsCommon.Utility.generateGuid(), visualHostTooltip: this.visualHostTooltip, hostEnv: this.visualSandboxProviderOption ? this.visualSandboxProviderOption.hostEnv : void 0 }; return this.visualInstanceIdTrackingService && this.visualInstanceIdTrackingService.associate(n.instanceId, e.name), { name: e.name, capabilities: e ? e.capabilities : {}, create: function () { return new t.SandboxVisual(n) }, custom: !0 } }, i })() })(t = e.visualHost || (e.visualHost = {})) })(powerbi || (powerbi = {})), angular.module("powerbi.visualHost").run(["$templateCache", function (e) { e.put("components/visual/visual.html", "<div class=\"visual visual-{{$ctrl.core.viewModel.type}}\" ng-class=\"{'disable-events': $ctrl.core.disableEvents, 'allow-deferred-rendering': $ctrl.core.allowDeferredRendering !== false}\"></div>") }]);; !(function (t) { function r(e) { if (n[e]) return n[e].exports; var o = n[e] = { exports: {}, id: e, loaded: !1 }; return t[e].call(o.exports, o, o.exports, r), o.loaded = !0, o.exports } var n = {}; return r.m = t, r.c = n, r.p = "", r(0) })([(function (t, r, n) { n(2), n(31), n(5), t.exports = n(30) }), (function (t, r) { "use strict"; var n = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var e = (function () { function t() { } return t.isContext = function (t, r) { return void 0 !== t && t.split(" ").filter((function (t) { return t === r })).length > 0 }, t })(); r.ContextualUtil = e; var o = (function () { function t() { } return t.prototype.isDisabled = function () { return void 0 !== this.disabled && this.disabled }, t })(); r.DisableableElement = o; var i = (function (t) { function r() { var r = null !== t && t.apply(this, arguments) || this; return r.internalId = "_pbi", r } return n(r, t), r.prototype.hasLabel = function () { var t = this.hasNoLabelAttribute(), r = this.hasValidNoLabelAttribute(), n = this.hasSpecifiedNoLabelValue(), e = this.hasLabelAttribute(), o = this.hasValidLabelAttribute(), i = !t, l = r && !n, a = n, c = !e, s = e && !o, p = o, u = i && c, d = i && s, b = i && p, g = l && c, h = l && s, f = l && p, y = a && c, m = a && s, $ = a && p; return !u && (!d && (!!b || !g && (!h && (!!f || !y && (!m && ($ ? !this.noLabelValue() : void 0)))))) }, r.prototype.labelKey = function () { return this.label }, r.prototype.createInternalId = function () { return this.id ? this.id + this.internalId : this.id }, r.prototype.hasLabelAttribute = function () { return void 0 !== this.label }, r.prototype.hasValidLabelAttribute = function () { return !!this.hasLabelAttribute() && "" !== this.label }, r.prototype.hasNoLabelAttribute = function () { return void 0 !== this.labelless }, r.prototype.hasValidNoLabelAttribute = function () { return !!this.hasNoLabelAttribute() }, r.prototype.noLabelValue = function () { if (!this.hasNoLabelAttribute()) return !1; if (!this.hasValidNoLabelAttribute()) return !1; var t = ["true", "", "no-label"], r = ["false"]; return !!l.attributeStringToBoolean(this.labelless.toString(), t) || (l.attributeStringToBoolean(this.labelless.toString(), r), !1) }, r.prototype.hasSpecifiedNoLabelValue = function () { return !(!this.hasValidNoLabelAttribute() || "" === this.labelless) }, r })(o); r.BaseElement = i; var l = (function () { function t() { } return t.attributeStringToBoolean = function (t, r) { return r.reduce((function (r, n, e, o) { return r || n === t }), !1) }, t.capitalizeString = function (t) { return t.charAt(0).toUpperCase() + t.slice(1).toLowerCase() }, t })(); r.ElementUtil = l }), (function (t, r) { "use strict"; Object.defineProperty(r, "__esModule", { value: !0 }); var n = (function () { function t() { } return t.application = function () { return t.slib }, t })(); n.slib = angular.module("stylelibrary", []), r.StyleLibrary = n }), , (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { var r = t.call(this) || this; return r.$onInit = function () { void 0 === this.proxyModel && this.modelCtrlr.$setViewValue("") }, r } return e(r, t), r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r.prototype.proxyChange = function () { this.setCtrlrValidity(), this.modelCtrlr.$setViewValue(this.proxyModel) }, r.prototype.setCtrlrValidity = function () { void 0 === this.proxyModel ? this.modelCtrlr.$setValidity("undefinedProxyModel", !1) : this.modelCtrlr.$setValidity("undefinedProxyModel", !0) }, r.prototype.getPlaceholder = function () { return this.placeholder }, r.prototype.isRequired = function () { return l.ElementUtil.attributeStringToBoolean(this.required, r.REQUIRED_VALUES) }, r.prototype.maxLength = function () { return parseInt(this.maxlength, r.BASE_10) || r.INF_MAX_LENGTH }, r.prototype.minLength = function () { return parseInt(this.minlength, r.BASE_10) || r.INF_MAX_LENGTH }, r.prototype.getAlertKind = function () { return this.modelCtrlr.$invalid && this.invalidMessage && !this.isDisabled() ? "error" : "hidden" }, r })(l.BaseElement); r.INF_MAX_LENGTH = void 0, r.BASE_10 = 10, r.REQUIRED_VALUES = ["required", "true", ""], t.TextBaseElement = r; var n = (function (t) { function r() { return t.call(this) || this } return e(r, t), r })(r); t.TextfieldController = n; var o = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", labelless: "@noLabel", arialabel: "@", arialabelledby: "@", ariadescribedby: "@", proxyModel: "<ngModel", placeholder: "@", required: "@", maxlength: "@", minlength: "@", invalidMessage: "@" }, this.require = { modelCtrlr: "ngModel", contextCtrlr: "?^^pbiContext" }, this.templateUrl = "components/textfield/textfield.html", this.controller = n } return t })(); t.TextfieldComponent = o, i.StyleLibrary.application().component("pbiTextfield", new o) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})), r.TextBaseElement = o.stylelibrary.components.TextBaseElement }), (function (t, r) { }), (function (t, r) { var n = "components/alert/alert.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement alert" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<div\r\n\t\tclass="alertWrapper {{$ctrl.alertKind()}}"\r\n\t\tng-class="{\r\n\t\t\t\'group4-option1-background group4-option4-color\': ($ctrl.alertKind() === \'info\'),\r\n\t\t\t\'group4-option2-background group4-option4-color\': ($ctrl.alertKind() === \'warning\' || $ctrl.alertKind() === \'security\'),\r\n\t\t\t\'group4-option3-background group4-option5-color\': ($ctrl.alertKind() === \'error\')\r\n\t\t}"\r\n\t\tng-switch="$ctrl.kind">\r\n\r\n\t\t<pbi-icon name="{{$ctrl.iconName()}}" size="{{$ctrl.isCompact()?\'mini\':\'small\'}}"></pbi-icon>\r\n\r\n\t\t<!-- conditional localization -->\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="info" localize="{{$ctrl.getInfoMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="warning" localize="{{$ctrl.getWarningMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="security" localize="{{$ctrl.getSecurityMessage()}}"></p>\r\n\t\t<p class="typeRamp paragraphText" ng-switch-when="error" localize="{{$ctrl.getErrorMessage()}}"></p>\r\n\r\n\t</div>\r\n\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/button/button.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, "<div class=\"styleLibrary formElement button\" ng-class=\"{'compact': $ctrl.isCompact()}\">\r\n\t\t<button\r\n\t\t\tid=\"{{::$ctrl.createInternalId()}}\"\r\n\t\t\tname=\"{{$ctrl.name}}\"\r\n\r\n\t\t\tng-class=\"{\r\n\t\t\t\t\t'primary group2-option1-background group2-option2-background-hover group2-option3-background-active': $ctrl.isPrimary(),\r\n\t\t\t\t\t'group2-option4-background group2-option5-background-hover group2-option6-background-active': !$ctrl.isPrimary() && $ctrl.isBox(),\r\n\t\t\t\t\t'group2-option8-background group2-option8-background-hover group2-option8-background-active': $ctrl.isDisabled() && $ctrl.isBox(),\r\n\t\t\t\t\t'group2-option10-color group2-option11-color-hover': $ctrl.showIcon() && !$ctrl.hasLabel() && !$ctrl.isBox() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t'group2-option10-color': $ctrl.showIcon() && !$ctrl.hasLabel() && !$ctrl.isBox() && $ctrl.isDisabled(),\r\n\t\t\t\t\t'group2-option13-color group2-option14-color-hover': !$ctrl.isDisabled() && $ctrl.isText(),\r\n\t\t\t\t\t'group2-option15-color group2-option15-color-hover': $ctrl.isDisabled() && $ctrl.isText(),\r\n\t\t\t\t\t'labeled-icon': $ctrl.showIcon() && $ctrl.hasLabel(),\r\n\t\t\t\t\t'group2-option16-color': $ctrl.showIcon() && $ctrl.hasLabel() && !$ctrl.isBox(),\r\n\t\t\t\t\t'box': $ctrl.isBox(),\r\n\t\t\t\t\t'text': $ctrl.isText(),\r\n\t\t\t\t\t'icon': $ctrl.isIcon(),\r\n\t\t\t\t\t'boxed-icon': $ctrl.showIcon() && $ctrl.isBox()\r\n\t\t\t}\"\r\n\t\t\ttype=\"button\"\r\n\t\t\tng-disabled=\"$ctrl.isDisabled()\"\r\n\t\t\tng-attr-aria-label=\"{{$ctrl.arialabel}}\"\r\n\t\t\tng-attr-aria-labelledby=\"{{$ctrl.arialabelledby}}\"\r\n\t\t\tng-attr-aria-describedby=\"{{$ctrl.ariadescribedby}}\">\r\n\r\n\t\t\t<pbi-icon ng-if=\"$ctrl.showIcon()\" name=\"{{$ctrl.iconName}}\" size=\"{{$ctrl.iconSizeName()}}\"></pbi-icon>\r\n\r\n\t\t\t<label ng-if=\"$ctrl.hasLabel()\" localize=\"{{$ctrl.labelKey()}}\"\r\n\t\t\t\tng-class=\"{\r\n\t\t\t\t\t'group2-option7-color': !$ctrl.isDisabled() && !$ctrl.isText(),\r\n\t\t\t\t\t'group2-option9-color': $ctrl.isDisabled() && !$ctrl.isText(),\r\n\t\t\t\t\t'formLabel': $ctrl.isBox() || !$ctrl.showIcon() || !$ctrl.hasLabel(),\r\n\t\t\t\t\t'authoringPaneText': !$ctrl.isBox() && $ctrl.showIcon() && $ctrl.hasLabel()\r\n\t\t\t\t}\"\r\n\t\t\t\tclass=\"typeRamp\"\r\n\t\t\t></label>\r\n\r\n\t\t</button>\r\n</div>\r\n") }]), t.exports = n }), (function (t, r) { var n = "components/checkbox/checkbox.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement checkbox" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="checkbox-wrapper">\r\n\t\t<input\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\ttype="checkbox"\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}" />\r\n\r\n\t\t<span class="checkboxBox"\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option1-border group1-option6-background\': !$ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option5-border group1-option5-background checked\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option3-border group1-option3-background disabled\': $ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t>\r\n\t\t</span>\r\n\t\t<pbi-icon name="checkmark" size="{{$ctrl.isCompact()?\'micro\':\'mini\'}}" class="checkboxCheck"\r\n\t\t\tng-class="{ \'group1-option7-color\': !$ctrl.isDisabled(), \'group1-option6-color\': $ctrl.isDisabled() }"\r\n\t\t></pbi-icon>\r\n\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled(), \'labelBottom\': $ctrl.labelPosition === \'bottom\' }"\r\n\t\t\tclass="typeRamp formLabel" for="{{::$ctrl.createInternalId()}}"\r\n\t\t></label>\r\n\t</span>\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/link/link.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary link">\r\n\t<a ng-href="https://go.microsoft.com/fwlink/?LinkId={{$ctrl.guid}}"\r\n\t\ttarget="_blank"\r\n\t\trel="noopener noreferrer"\r\n\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\tng-class="{\r\n\t\t\t\'group2-option13-color group2-option14-color-hover\': !$ctrl.isDisabled(),\r\n\t\t\t\'group2-option15-color group2-option15-color-hover\': $ctrl.isDisabled()\r\n\t\t}"\r\n\t>\r\n\t\t<label\r\n\t\t\tlocalize="{{$ctrl.labelKey()}}"\r\n\t\t></label>\r\n\t</a>\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/radio/radio.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement radio" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="radio-wrapper">\r\n\t\t<input\r\n\t\t\tid="{{$ctrl.appendInputId($ctrl.id)}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\ttype="radio"\r\n\t\t\tng-disabled="$ctrl.isCompositeDisabled()"\r\n\t\t\tng-model="$ctrl.groupCtrlr.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\tng-value="$ctrl.value"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t\t/>\r\n\r\n\t\t<span class="radioBox" ng-class="{ \'group1-option1-border group1-option6-background\': !$ctrl.isCompositeDisabled(), \'group1-option3-border\': $ctrl.isCompositeDisabled() }">\r\n\t\t\t<span class="radioButton"\r\n\t\t\t\tng-class="{ \'group1-option15-background\': $ctrl.isChecked() && !$ctrl.isCompositeDisabled(), \'group1-option9-background\': $ctrl.isChecked() && $ctrl.isCompositeDisabled() }"\r\n\t\t\t></span>\r\n\t\t</span>\r\n\r\n\t\t<label for="{{$ctrl.appendInputId($ctrl.id)}}" ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isCompositeDisabled(), \'group1-option4-color\': $ctrl.isCompositeDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t></label>\r\n\t</span>\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/radio/radioGroup.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement radioGroup" ng-class="{\'compact\': $ctrl.isCompact()}" role="radiogroup">\r\n\t<span class="radio-group-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t></label>\r\n\r\n\t\t<ng-transclude></ng-transclude>\r\n\r\n\t</span>\r\n\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/select/option.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<option \r\n    id="{{::$ctrl.createInternalId()}}"\r\n    name="{{$ctrl.label}}"\r\n    ng-class="selectOption" \r\n    value="{{$ctrl.value}}" \r\n    localize="{{$ctrl.label}}"\r\n    ng-select=$ctrl.proxyChange()>\r\n</option>') }]), t.exports = n }), (function (t, r) { var n = "components/select/select.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement select" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\r\n    <span class="select-wrapper">\r\n        <label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n            ng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n            class="typeRamp formLabel"\r\n            for="{{::$ctrl.createInternalId()}}"\r\n        ></label>\r\n\r\n        <select\r\n            id="{{::$ctrl.createInternalId()}}"\r\n            ng-model="$ctrl.proxyModel"\r\n            ng-change="$ctrl.proxyChange()"\r\n            ng-disabled="{{$ctrl.disabled}}"\r\n            ng-class="{\r\n                    \'selectLabel group1-option12-border group1-option6-background group1-option1-border-hover group1-option5-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n                    \'selectLabel group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled()\r\n                }"\r\n            class="typeRamp formLabel"\r\n            ng-attr-aria-label="{{$ctrl.arialabel}}"\r\n            ng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n            ng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n            >\r\n\r\n            <option\r\n                ng-if="$ctrl.options != null"\r\n                ng-repeat="option in $ctrl.options"\r\n                id="{{option.id}}"\r\n                name="{{option.label}}"\r\n                ng-class="selectOption"\r\n                class="typeRamp formLabel"\r\n                value="{{option.value}}"\r\n                localize="{{option.label}}"\r\n                ng-disabled="{{option.disabled}}">\r\n            </option>\r\n\r\n            <option\r\n                ng-repeat="option in $ctrl.optionsModel"\r\n                id="{{option.id}}"\r\n                name="{{option.label}}"\r\n                ng-class="selectOption"\r\n                class="typeRamp formLabel"\r\n                value="{{option.value}}"\r\n                localize="{{option.label}}"\r\n                ng-disabled="{{option.disabled}}">\r\n            </option>\r\n        </select>\r\n\r\n        <ng-transclude ng-hide="true"></ng-transclude>\r\n\r\n        <div class="expander">\r\n            <pbi-icon name="chevrondownmedium"\r\n                size="{{\'mini\'}}"\r\n                ng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n                >\r\n            </pbi-icon>\r\n        </div>\r\n    </span>\r\n\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/textarea/textarea.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement textarea">\r\n\t<span class="textarea-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.createInternalId()}}"\r\n\t\t></label>\r\n\t\t<span ng-if="$ctrl.isRequired() && !$ctrl.isDisabled()" class="required-asterisk group1-option13-color formLabel">*</span>\r\n\t\t<textarea\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\tplaceholder="{{$ctrl.getPlaceholder()}}"\r\n\t\t\tmaxlength="{{$ctrl.maxLength()}}"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-required="$ctrl.isRequired()"\r\n\t\t\tng-maxlength="$ctrl.maxLength()"\r\n\t\t\tng-minlength="$ctrl.minLength()"\r\n\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option12-border group1-option6-background group1-option1-border-hover group1-option5-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option13-border group1-option13-border-hover group1-option13-border-focus\': $ctrl.modelCtrlr.$invalid && !$ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t/>\r\n\t\t</textarea>\r\n\r\n\t\t<pbi-alert\r\n\t\t\tkind="$ctrl.getAlertKind()"\r\n\t\t\tmessage-error="{{$ctrl.invalidMessage}}"\r\n\t\t></pbi-alert>\r\n\r\n\t</span>\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/textfield/textfield.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement textfield" ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="textfield-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{\'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled()}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.createInternalId()}}"\r\n\t\t></label>\r\n\t\t<span ng-if="$ctrl.isRequired() && !$ctrl.isDisabled()" class="required-asterisk group1-option13-color typeRamp formLabel">*</span>\r\n\t\t<input\r\n\t\t\tid="{{::$ctrl.createInternalId()}}"\r\n\t\t\tname="{{$ctrl.name}}"\r\n\t\t\ttype="text"\r\n\r\n\t\t\tlocalize-attr="{placeholder: $ctrl.getPlaceholder()}"\r\n\t\t\tplaceholder="{{$ctrl.getPlaceholder()}}"\r\n\t\t\tmaxlength="{{$ctrl.maxLength()}}"\r\n\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\tng-change="$ctrl.proxyChange()"\r\n\r\n\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\tng-required="$ctrl.isRequired()"\r\n\t\t\tng-maxlength="$ctrl.maxLength()"\r\n\t\t\tng-minlength="$ctrl.minLength()"\r\n\r\n\t\t\tng-class="{\r\n\t\t\t\t\'group1-option12-border group1-option6-background group1-option14-border-hover group1-option14-border-focus group1-option2-color\': !$ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option10-border group1-option10-background group1-option10-border-hover group1-optoin11-color\': $ctrl.isDisabled(),\r\n\t\t\t\t\'group1-option13-border group1-option13-border-hover group1-option13-border-focus\': $ctrl.modelCtrlr.$invalid && !$ctrl.isDisabled()\r\n\t\t\t}"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"\r\n\t\t/>\r\n\t\t</input>\r\n\r\n\t\t<pbi-alert\r\n\t\t\tkind="$ctrl.getAlertKind()"\r\n\t\t\tmessage-error="{{$ctrl.invalidMessage}}"\r\n\t\t></pbi-alert>\r\n\r\n\t</span>\r\n\r\n</div>\r\n') }]), t.exports = n }), (function (t, r) { var n = "components/toggle/toggle.html"; window.angular.module("stylelibrary").run(["$templateCache", function (t) { t.put(n, '<div class="styleLibrary formElement toggle"\r\n ng-class="{\'compact\': $ctrl.isCompact()}">\r\n\t<span class="toggle-wrapper">\r\n\t\t<label ng-if="$ctrl.hasLabel()" localize="{{$ctrl.labelKey()}}"\r\n\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\tclass="typeRamp formLabel"\r\n\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t></label>\r\n\r\n\t\t<span class="inner-toggle-wrapper">\r\n\t\t\t<input\r\n\t\t\t\tid="{{::$ctrl.getLabelId()}}"\r\n\t\t\t\tname="{{$ctrl.name}}"\r\n\r\n\t\t\t\ttype="checkbox"\r\n\t\t\t\tng-disabled="$ctrl.isDisabled()"\r\n\t\t\t\tng-model="$ctrl.proxyModel"\r\n\t\t\t\tng-change="$ctrl.proxyChange()"\r\n\t\t\t\ttitle="{{$ctrl.title}}" \r\n\t\t\t\tng-attr-aria-label="{{$ctrl.arialabel}}"\r\n\t\t\t\tng-attr-aria-labelledby="{{$ctrl.arialabelledby}}"\r\n\t\t\t\tng-attr-aria-describedby="{{$ctrl.ariadescribedby}}"/>\r\n\r\n\t\t\t<span class="toggleBox"\r\n\t\t\t\tng-class="{\r\n\t\t\t\t\t\t\'group1-option1-border group1-option6-background\': !$ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option5-border group1-option5-background\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option3-border\': !$ctrl.isChecked() && $ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option3-border group1-option3-background\': $ctrl.isChecked() && $ctrl.isDisabled()\r\n\t\t\t\t}">\r\n\t\t\t\t<span class="toggleHandle"\r\n\t\t\t\t\tng-class="{\r\n\t\t\t\t\t\t\'group1-option16-background\': !$ctrl.isChecked() && !ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option8-background\': $ctrl.isChecked() && !$ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option9-background\': !$ctrl.isChecked() && $ctrl.isDisabled(),\r\n\t\t\t\t\t\t\'group1-option11-background\': $ctrl.isChecked() && $ctrl.isDisabled()\r\n\t\t\t\t\t}">\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\r\n\t\t\t<label ng-if="$ctrl.isChecked()" localize="{{::$ctrl.onStateText}}" class="toggleState typeRamp formLabel"\r\n\t\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t\t></label>\r\n\t\t\t<label ng-if="!$ctrl.isChecked()" localize="{{::$ctrl.offStateText}}" class="toggleState typeRamp formLabel"\r\n\t\t\t\tng-class="{ \'group1-option2-color\': !$ctrl.isDisabled(), \'group1-option4-color\': $ctrl.isDisabled() }"\r\n\t\t\t\tfor="{{::$ctrl.getLabelId()}}"\r\n\t\t\t></label>\r\n\t\t</span>\r\n\t</span>\r\n</div>') }]), t.exports = n }), (function (t, r, n) { "use strict"; Object.defineProperty(r, "__esModule", { value: !0 }); var e, o = n(2), i = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r; !(function (t) { t[t.Info = 0] = "Info", t[t.Warning = 1] = "Warning", t[t.Security = 2] = "Security", t[t.Error = 3] = "Error", t[t.Hidden = 4] = "Hidden" })(r = t.AlertKind || (t.AlertKind = {})); var n = (function () { function t(t) { if (this.kindToIcon = { info: "info", warning: "warning", security: "blockedsite", error: "error" }, void 0 === this.kind && (this.kind = r[r.Hidden]), !this.validKindString(this.kind)) throw Error("Unknown alert kind: " + this.kind); this._element = t[0] } return t.prototype.alertKind = function () { if (this.kind) return this.setAlertHeight(this._element, this.kind), this.kind.toLowerCase() }, t.prototype.iconName = function () { return this.kindToIcon[this.kind] }, t.prototype.getInfoMessage = function () { return this.messageInfo }, t.prototype.getWarningMessage = function () { return this.messageWarning }, t.prototype.getSecurityMessage = function () { return this.messageSecurity }, t.prototype.getErrorMessage = function () { return this.messageError }, t.stringToKind = function (t) { if (void 0 !== t) { return r[i.ElementUtil.capitalizeString(t.trim())] } }, t.prototype.validKindString = function (r) { return void 0 !== t.stringToKind(r) }, t.prototype.setAlertHeight = function (t, r) { var n = t, e = n.querySelector(".alert").scrollHeight; "hidden" !== r ? n.setAttribute("style", "height: " + e + "px;") : n.setAttribute("style", "height: 0px;") }, t.prototype.isCompact = function () { return !!i.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, t })(); n.$inject = ["$element"], t.AlertController = n; var e = (function () { function t() { this.bindings = { kind: "<", messageInfo: "@", messageWarning: "@", messageSecurity: "@", messageError: "@" }, this.templateUrl = "components/alert/alert.html", this.controller = n, this.require = { contextCtrlr: "?^^pbiContext" } } return t })(); t.AlertComponent = e, o.StyleLibrary.application().component("pbiAlert", new e) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(e || (e = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(22), a = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r; !(function (t) { t[t.Box = 0] = "Box", t[t.Text = 1] = "Text", t[t.Icon = 2] = "Icon" })(r = t.ButtonKind || (t.ButtonKind = {})); var n = (function (t) { function n() { var e = t.call(this) || this; if (e.primary = "false", e.kind = "box", e.iconSize = l.IconSize[l.IconSize.Small].toLowerCase(), void 0 === e.kind && (e.kind = n.kindToString(r.Box)), !e.validKindString(e.kind)) throw Error("Unknown button kind: " + e.kind); return e } return e(n, t), n.prototype.buttonKind = function () { return this.kind }, n.prototype.iconSizeName = function () { return this.showIcon() && this.hasLabel() ? (void 0 !== this.iconSize && this.iconSize !== l.IconSize[l.IconSize.Small].toLowerCase(), this.isCompact() ? l.IconSize[l.IconSize.Mini].toLowerCase() : l.IconSize[l.IconSize.Small].toLowerCase()) : this.iconSize }, n.prototype.isPrimary = function () { return a.ElementUtil.attributeStringToBoolean(this.primary, n.PRIMARY_VALUES) }, n.prototype.showIcon = function () { return n.stringToKind(this.kind) === r.Icon || !!this.iconName }, n.prototype.isIcon = function () { return n.stringToKind(this.kind) === r.Icon }, n.prototype.isText = function () { return n.stringToKind(this.kind) === r.Text }, n.prototype.isBox = function () { return void 0 === this.kind || n.stringToKind(this.kind) === r.Box }, n.prototype.validKindString = function (t) { return void 0 !== n.stringToKind(t) }, n.stringToKind = function (t) { if (void 0 !== t) { return r[a.ElementUtil.capitalizeString(t.trim())] } }, n.kindToString = function (t) { return r[t] }, n.prototype.isCompact = function () { return !!a.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, n })(a.BaseElement); n.PRIMARY_VALUES = ["primary", "true", ""], t.ButtonController = n; var o = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", labelless: "@noLabel", arialabel: "@", arialabelledby: "@", ariadescribedby: "@", primary: "@", kind: "@", iconName: "@", iconSize: "@" }, this.require = { contextCtrlr: "?^^pbiContext" }, this.templateUrl = "components/button/button.html", this.controller = n } return t })(); t.ButtonComponent = o, i.StyleLibrary.application().component("pbiButton", new o) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { var r = null !== t && t.apply(this, arguments) || this; return r.labelPosition = "right", r._context = "", r } return e(r, t), Object.defineProperty(r.prototype, "context", { get: function () { return this._context }, set: function (t) { this._context = t }, enumerable: !0, configurable: !0 }), r.prototype.proxyChange = function () { this.modelCtrlr.$setViewValue(this.proxyModel) }, r.prototype.isChecked = function () { return !!this.proxyModel }, r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r })(l.BaseElement); t.CheckboxController = r; var n = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", labelless: "@noLabel", proxyModel: "<ngModel", labelPosition: "@", arialabel: "@ariaLabel", arialabelledby: "@ariaLabelledby", ariadescribedby: "@ariaDescribedby" }, this.controller = r, this.templateUrl = "components/checkbox/checkbox.html", this.require = { modelCtrlr: "ngModel", contextCtrlr: "?^^pbiContext" } } return t })(); t.CheckboxComponent = n, i.StyleLibrary.application().component("pbiCheckbox", new n) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o = n(2), i = n(1), l = (function (t) { function r() { var r = t.call(this) || this; return r.context = "", r } return e(r, t), r.prototype.isCompact = function () { return !!i.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r })(i.BaseElement); r.ContextController = l; var a = (function () { function t() { this.bindings = { disabled: "<ngDisabled", context: "@context" }, this.transclude = !0, this.controller = l, this.template = "<ng-transclude></ng-transclude>", this.require = { contextCtrlr: "?^^pbiContext" } } return t })(); r.ContextComponent = a, o.StyleLibrary.application().component("pbiContext", new a) }), (function (t, r, n) { "use strict"; Object.defineProperty(r, "__esModule", { value: !0 }); var e, o = n(2), i = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function () { function t() { } return t.prototype.iconClass = function () { return ["glyphicon", "pbi-glyph-" + this.name, "glyph-" + this.size.toString()].join(" ") }, t.prototype.isCompact = function () { return !!i.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, t })(); t.IconController = r; var n = (function () { function t() { this.bindings = { name: "@", size: "@" }, this.template = '<i ng-class="$ctrl.iconClass()"></i>', this.controller = r, this.require = { contextCtrlr: "?^^pbiContext" } } return t })(); t.IconComponent = n, o.StyleLibrary.application().component("pbiIcon", new n) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(e || (e = {})) }), (function (t, r) { "use strict"; Object.defineProperty(r, "__esModule", { value: !0 }); var n; !(function (t) { t[t.Micro = 0] = "Micro", t[t.Mini = 1] = "Mini", t[t.Small = 2] = "Small", t[t.Normal = 3] = "Normal", t[t.Medium = 4] = "Medium", t[t.Large = 5] = "Large" })(n = r.IconSize || (r.IconSize = {})) }), (function (t, r, n) {
    "use strict"; var e = this && this.__extends || (function () {
        var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) {
            for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]);
        }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) }
    })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { return t.call(this) || this } return e(r, t), r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r })(l.BaseElement); t.LinkController = r; var n = (function () { function t() { this.bindings = { id: "@", disabled: "<ngDisabled", label: "@", guid: "@" }, this.controller = r, this.templateUrl = "components/link/link.html" } return t })(), o = (function (t) { function r() { var r = null !== t && t.apply(this, arguments) || this; return r.require = { contextCtrlr: "?pbiContext" }, r } return e(r, t), r })(n); t.PBILinkComponent = o, i.StyleLibrary.application().component("pbiLink", new o) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {}))
}), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { return null !== t && t.apply(this, arguments) || this } return e(r, t), r.prototype.proxyChange = function () { this.groupCtrlr.modelCtrlr.$setViewValue(this.value) }, r.prototype.isChecked = function () { return this.groupCtrlr.proxyModel === this.value }, r.prototype.isCompositeDisabled = function () { return this.isDisabled() || this.groupCtrlr.isDisabled() }, r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r.prototype.appendInputId = function (t) { return t && t + "Input" }, r })(l.BaseElement); t.RadioController = r; var n = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", arialabel: "@", arialabelledby: "@", ariadescribedby: "@", value: "<ngValue" }, this.require = { groupCtrlr: "^^pbiRadioGroup", contextCtrlr: "?^^pbiContext" }, this.templateUrl = "components/radio/radio.html", this.controller = r } return t })(); t.RadioComponenet = n, i.StyleLibrary.application().component("pbiRadio", new n) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { return null !== t && t.apply(this, arguments) || this } return e(r, t), r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r })(l.BaseElement); t.RadioGroupController = r; var n = (function () { function t() { this.bindings = { id: "@", name: "@", label: "@", labelless: "@noLabel", disabled: "<ngDisabled", proxyModel: "<ngModel" }, this.require = { modelCtrlr: "ngModel", contextCtrlr: "?^^pbiContext" }, this.transclude = !0, this.templateUrl = "components/radio/radioGroup.html", this.controller = r } return t })(); t.RadioGroupComponenet = n, i.StyleLibrary.application().component("pbiRadioGroup", new n) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { return t.call(this) || this } return e(r, t), r.prototype.$onInit = function () { this.selectCtrlr.addOption(this) }, r.prototype.$onDestroy = function () { this.selectCtrlr.removeOption(this) }, r.prototype.isSelected = function () { return this.selectCtrlr.isOptionSelected(this) }, r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r })(l.BaseElement); t.OptionController = r; var n = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", labelless: "<noLabel", value: "<ngValue" }, this.require = { selectCtrlr: "^^pbiSelect", contextCtrlr: "?^^pbiContext" }, this.templateUrl = "components/select/option.html", this.controller = r } return t })(); t.OptionComponent = n, i.StyleLibrary.application().component("pbiOption", new n) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { var r = t.call(this) || this; return r.options = [], r } return e(r, t), r.prototype.addOption = function (t) { 0 === this.options.length && (this._selectedOption = t), this.options.push(t) }, r.prototype.removeOption = function (t) { }, r.prototype.selectItem = function (t) { this._selectedOption = t }, r.prototype.isOptionSelected = function (t) { return this._selectedOption === t }, r.prototype.proxyChange = function () { this.modelCtrlr.$setViewValue(this.proxyModel) }, r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r })(l.BaseElement); t.SelectController = r; var n = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", labelless: "<noLabel", proxyModel: "<ngModel", optionsModel: "<optionsModel", arialabel: "@", arialabelledby: "@", ariadescribedby: "@" }, this.require = { modelCtrlr: "ngModel", contextCtrlr: "?^^pbiContext" }, this.transclude = !0, this.templateUrl = "components/select/select.html", this.controller = r } return t })(); t.SelectComponent = n, i.StyleLibrary.application().component("pbiSelect", new n) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o, i = n(2), l = n(1), a = n(4); !(function (t) { var r; !(function (t) { var r; !(function (t) { var r = (function (t) { function r() { return t.call(this) || this } return e(r, t), r.prototype.isCompact = function () { return !!l.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r })(a.TextBaseElement); t.TextareaController = r; var n = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", labelless: "@noLabel", arialabel: "@", arialabelledby: "@", ariadescribedby: "@", proxyModel: "<ngModel", placeholder: "@", required: "@", maxlength: "@", minlength: "@", invalidMessage: "@" }, this.require = { modelCtrlr: "ngModel", ontextCtrlr: "?^^pbiContext" }, this.templateUrl = "components/textarea/textarea.html", this.controller = r } return t })(); t.TextareaComponent = n, i.StyleLibrary.application().component("pbiTextarea", new n) })(r = t.components || (t.components = {})) })(r = t.stylelibrary || (t.stylelibrary = {})) })(o || (o = {})) }), (function (t, r, n) { "use strict"; var e = this && this.__extends || (function () { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, r) { t.__proto__ = r } || function (t, r) { for (var n in r) r.hasOwnProperty(n) && (t[n] = r[n]) }; return function (r, n) { function e() { this.constructor = r } t(r, n), r.prototype = null === n ? Object.create(n) : (e.prototype = n.prototype, new e) } })(); Object.defineProperty(r, "__esModule", { value: !0 }); var o = n(2), i = n(1), l = (function (t) { function r() { var r = t.call(this) || this; return r.labelId = "pbiToggle_" + Math.random().toString(36).substr(2, 9), r } return e(r, t), r.prototype.proxyChange = function () { this.modelCtrlr.$setViewValue(this.proxyModel) }, r.prototype.isChecked = function () { return !!this.proxyModel }, r.prototype.isCompact = function () { return !!i.ContextualUtil.isContext(this.context, "compact") || !!this.contextCtrlr && this.contextCtrlr.isCompact() }, r.prototype.getLabelId = function () { return this.id ? this.createInternalId() : this.labelId }, r })(i.BaseElement); r.ToggleController = l; var a = (function () { function t() { this.bindings = { id: "@", name: "@", disabled: "<ngDisabled", label: "@", labelless: "@noLabel", title: "@", proxyModel: "<ngModel", arialabel: "@", arialabelledby: "@", ariadescribedby: "@", onStateText: "@", offStateText: "@" }, this.require = { modelCtrlr: "ngModel", contextCtrlr: "?^^pbiContext" }, this.templateUrl = "components/toggle/toggle.html", this.controller = l } return t })(); r.ToggleComponenet = a, o.StyleLibrary.application().component("pbiToggle", new a) }), (function (t, r, n) { "use strict"; Object.defineProperty(r, "__esModule", { value: !0 }), n(6), n(7), n(8), n(9), n(10), n(11), n(13), n(12), n(14), n(15), n(16) }), (function (t, r, n) { "use strict"; Object.defineProperty(r, "__esModule", { value: !0 }), n(1), n(20), n(17), n(18), n(19), n(21), n(23), n(24), n(25), n(27), n(26), n(28), n(4), n(29) })]);